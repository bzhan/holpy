{
    "content": [
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nat_interval",
            "prop": "{m..n} = {p. m ≤ p ∧ p ≤ n}",
            "ty": "def",
            "type": "nat ⇒ nat ⇒ nat set"
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "finite_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg_le, {n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m. m ≤ n})"
                },
                {
                    "args": "{p. m ≤ p ∧ p ≤ n} ⊆ {x. x ≤ n}",
                    "id": "1",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ {p. m ≤ p ∧ p ≤ n} ⊆ {x. x ≤ n}"
                },
                {
                    "args": "nat_interval_def, {m..n} ⊆ {x. x ≤ n}",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ {m..n} ⊆ {x. x ≤ n}"
                },
                {
                    "args": "finite_subset",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite ({m..n})"
                }
            ],
            "prop": "finite ({m..n})",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "param_t": "{x. x <= n}",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg_le"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_interval_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "natseg_combine_r",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ p + 1",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ p + 1 ⊢ m ≤ p + 1"
                },
                {
                    "args": "p ≤ n",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "p ≤ n ⊢ p ≤ n"
                },
                {
                    "args": "{p1. m ≤ p1 ∧ p1 ≤ p} ∪ {p1. p + 1 ≤ p1 ∧ p1 ≤ n} = {p1. m ≤ p1 ∧ p1 ≤ n}",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "z3",
                    "th": "p ≤ n, m ≤ p + 1 ⊢ {p1. m ≤ p1 ∧ p1 ≤ p} ∪ {p1. p + 1 ≤ p1 ∧ p1 ≤ n} = {p1. m ≤ p1 ∧ p1 ≤ n}"
                },
                {
                    "args": "nat_interval_def, {m..p} ∪ {p + 1..n} = {m..n}",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "p ≤ n, m ≤ p + 1 ⊢ {m..p} ∪ {p + 1..n} = {m..n}"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "1",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ p + 1 ⟶ p ≤ n ⟶ {m..p} ∪ {p + 1..n} = {m..n}"
                }
            ],
            "prop": "m ≤ p + 1 ⟶ p ≤ n ⟶ {m..p} ∪ {p + 1..n} = {m..n}",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_interval_def"
                },
                {
                    "fact_ids": [
                        "0",
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat",
                "p": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "natseg_combine_l",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ p",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ p ⊢ m ≤ p"
                },
                {
                    "args": "p ≤ n + 1",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "p ≤ n + 1 ⊢ p ≤ n + 1"
                },
                {
                    "args": "{p1. m ≤ p1 ∧ p1 ≤ p - 1} ∪ {p1. p ≤ p1 ∧ p1 ≤ n} = {p1. m ≤ p1 ∧ p1 ≤ n}",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "z3",
                    "th": "m ≤ p, p ≤ n + 1 ⊢ {p1. m ≤ p1 ∧ p1 ≤ p - 1} ∪ {p1. p ≤ p1 ∧ p1 ≤ n} = {p1. m ≤ p1 ∧ p1 ≤ n}"
                },
                {
                    "args": "nat_interval_def, {m..p - 1} ∪ {p..n} = {m..n}",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ p, p ≤ n + 1 ⊢ {m..p - 1} ∪ {p..n} = {m..n}"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "1",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ p ⟶ p ≤ n + 1 ⟶ {m..p - 1} ∪ {p..n} = {m..n}"
                }
            ],
            "prop": "m ≤ p ⟶ p ≤ n + 1 ⟶ {m..p - 1} ∪ {p..n} = {m..n}",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_interval_def"
                },
                {
                    "fact_ids": [
                        "0",
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat",
                "p": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "natseg_lrec",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ n",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ n ⊢ m ≤ n"
                },
                {
                    "args": "{p. m ≤ p ∧ p ≤ n} = insert m ({p. m + 1 ≤ p ∧ p ≤ n})",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "z3",
                    "th": "m ≤ n ⊢ {p. m ≤ p ∧ p ≤ n} = insert m ({p. m + 1 ≤ p ∧ p ≤ n})"
                },
                {
                    "args": "nat_interval_def, {m..n} = insert m ({m + 1..n})",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n ⊢ {m..n} = insert m ({m + 1..n})"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ n ⟶ {m..n} = insert m ({m + 1..n})"
                }
            ],
            "prop": "m ≤ n ⟶ {m..n} = insert m ({m + 1..n})",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_interval_def"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "natseg_rrec",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ n + 1",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ n + 1 ⊢ m ≤ n + 1"
                },
                {
                    "args": "insert (n + 1) ({p. m ≤ p ∧ p ≤ n}) = {p. m ≤ p ∧ p ≤ n + 1}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "z3",
                    "th": "m ≤ n + 1 ⊢ insert (n + 1) ({p. m ≤ p ∧ p ≤ n}) = {p. m ≤ p ∧ p ≤ n + 1}"
                },
                {
                    "args": "nat_interval_def, insert (n + 1) ({m..n}) = {m..n + 1}",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n + 1 ⊢ insert (n + 1) ({m..n}) = {m..n + 1}"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ n + 1 ⟶ insert (n + 1) ({m..n}) = {m..n + 1}"
                }
            ],
            "prop": "m ≤ n ⟶ insert n ({m..n - 1}) = {m..n}",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_interval_def"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "natseg_rec",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ Suc n",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ Suc n ⊢ m ≤ Suc n"
                },
                {
                    "args": "natseg_rrec",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ Suc n ⊢ insert (Suc n) ({m..Suc n - 1}) = {m..Suc n}"
                },
                {
                    "args": "suc_sub1",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "m ≤ Suc n ⊢ insert (Suc n) ({m..n}) = {m..Suc n}"
                },
                {
                    "args": "{m..Suc n} = insert (Suc n) ({m..n})",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m ≤ Suc n ⊢ {m..Suc n} = insert (Suc n) ({m..n})"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ Suc n ⟶ {m..Suc n} = insert (Suc n) ({m..n})"
                }
            ],
            "prop": "m ≤ Suc n ⟶ {m..Suc n} = insert (Suc n) ({m..n})",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "theorem": "natseg_rrec"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "suc_sub1"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "member_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "member_collect, p ∈ {p1. m ≤ p1 ∧ p1 ≤ n} ⟷ m ≤ p ∧ p ≤ n",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ p ∈ {p1. m ≤ p1 ∧ p1 ≤ n} ⟷ m ≤ p ∧ p ≤ n"
                },
                {
                    "args": "nat_interval_def, p ∈ {m..n} ⟷ m ≤ p ∧ p ≤ n",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ p ∈ {m..n} ⟷ m ≤ p ∧ p ≤ n"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ p ∈ {m..n} ⟷ m ≤ p ∧ p ≤ n"
                }
            ],
            "prop": "p ∈ {m..n} ⟷ m ≤ p ∧ p ≤ n",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_interval_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat",
                "p": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "member_natseg_0",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "0 ≤ p ∧ p ≤ n ⟷ p ≤ n",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ 0 ≤ p ∧ p ≤ n ⟷ p ≤ n"
                },
                {
                    "args": "member_natseg, p ∈ {0..n} ⟷ p ≤ n",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ p ∈ {0..n} ⟷ p ≤ n"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ p ∈ {0..n} ⟷ p ≤ n"
                }
            ],
            "prop": "p ∈ {0..n} ⟷ p ≤ n",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "n": "nat",
                "p": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "natseg_empty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "(∀x. m ≤ x ∧ x ≤ n ⟷ x ∈ ∅) ⟷ n < m",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ (∀x. m ≤ x ∧ x ≤ n ⟷ x ∈ ∅) ⟷ n < m"
                },
                {
                    "args": "member_natseg, (∀x. x ∈ {m..n} ⟷ x ∈ ∅) ⟷ n < m",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ (∀x. x ∈ {m..n} ⟷ x ∈ ∅) ⟷ n < m"
                },
                {
                    "args": "set_equal_iff, {m..n} = ∅ ⟷ n < m",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ {m..n} = ∅ ⟷ n < m"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ {m..n} = ∅ ⟷ n < m"
                }
            ],
            "prop": "{m..n} = ∅ ⟷ n < m",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "set_equal_iff"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "natseg_emptyI",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "n < m",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "n < m ⊢ n < m"
                },
                {
                    "args": "natseg_empty, {m..n} = ∅",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "n < m ⊢ {m..n} = ∅"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ n < m ⟶ {m..n} = ∅"
                }
            ],
            "prop": "n < m ⟶ {m..n} = ∅",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "natseg_sing",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "{p. n ≤ p ∧ p ≤ n} = {n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ {p. n ≤ p ∧ p ≤ n} = {n}"
                },
                {
                    "args": "nat_interval_def, {n..n} = {n}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ {n..n} = {n}"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ {n..n} = {n}"
                }
            ],
            "prop": "{n..n} = {n}",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_interval_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "finite_subset_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ finite s ⟶ (∃n. s ⊆ {0..n})"
                },
                {
                    "args": "finite s",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x::nat. x ∈ ∅ ⟶ x ≤ 0"
                },
                {
                    "args": "x, nat",
                    "id": "0.1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ ∅",
                    "id": "0.1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ ∅ ⊢ x ∈ ∅"
                },
                {
                    "args": "member_empty, x ≤ 0",
                    "id": "0.1.2",
                    "prevs": [
                        "0.1.1"
                    ],
                    "rule": "resolve_theorem",
                    "th": "x ∈ ∅ ⊢ x ≤ 0"
                },
                {
                    "args": "",
                    "id": "0.1.3",
                    "prevs": [
                        "0.1.0",
                        "0.1.1",
                        "0.1.2"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ ∀x::nat. x ∈ ∅ ⟶ x ≤ 0"
                },
                {
                    "args": "exI, {P: λn::nat. ∀x. x ∈ ∅ ⟶ x ≤ n, a: (0::nat)}",
                    "id": "0.2",
                    "prevs": [
                        "0.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ ∃a1::nat. ∀x. x ∈ ∅ ⟶ x ≤ a1"
                },
                {
                    "args": "",
                    "id": "0.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x::nat. ∀s1. (∃n. ∀x1. x1 ∈ s1 ⟶ x1 ≤ n) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∃n. ∀x1. x1 ∈ insert x s1 ⟶ x1 ≤ n)"
                },
                {
                    "args": "a, nat",
                    "id": "0.3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "s, nat set",
                    "id": "0.3.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "∃n. ∀x. x ∈ s ⟶ x ≤ n",
                    "id": "0.3.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ ∃n. ∀x. x ∈ s ⟶ x ≤ n"
                },
                {
                    "args": "¬(a ∈ s)",
                    "id": "0.3.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s) ⊢ ¬(a ∈ s)"
                },
                {
                    "args": "n, nat",
                    "id": "0.3.4",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR n"
                },
                {
                    "args": "∀x. x ∈ s ⟶ x ≤ n",
                    "id": "0.3.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ x ≤ n ⊢ ∀x. x ∈ s ⟶ x ≤ n"
                },
                {
                    "args": "",
                    "id": "0.3.6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(a ∈ s), ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ ∀x. x = a ∨ x ∈ s ⟶ x ≤ max a n"
                },
                {
                    "args": "x, nat",
                    "id": "0.3.6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x = a ∨ x ∈ s",
                    "id": "0.3.6.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = a ∨ x ∈ s ⊢ x = a ∨ x ∈ s"
                },
                {
                    "args": "",
                    "id": "0.3.6.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x = a ⟶ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "x = a",
                    "id": "0.3.6.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = a ⊢ x = a"
                },
                {
                    "args": "",
                    "id": "0.3.6.2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x = a, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ a ≤ n ⟶ a ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "a ≤ n",
                    "id": "0.3.6.2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ≤ n ⊢ a ≤ n"
                },
                {
                    "args": "if_P, a ≤ (if a ≤ n then n else a)",
                    "id": "0.3.6.2.1.1",
                    "prevs": [
                        "0.3.6.2.1.0",
                        "0.3.6.2.1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x = a, a ≤ n, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ a ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "",
                    "id": "0.3.6.2.1.2",
                    "prevs": [
                        "0.3.6.2.1.0",
                        "0.3.6.2.1.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, x = a, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ a ≤ n ⟶ a ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "",
                    "id": "0.3.6.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x = a, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ ¬(a ≤ n) ⟶ a ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "¬(a ≤ n)",
                    "id": "0.3.6.2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ≤ n) ⊢ ¬(a ≤ n)"
                },
                {
                    "args": "less_eq_refl, {n: a}",
                    "id": "0.3.6.2.2.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ a ≤ a"
                },
                {
                    "args": "if_not_P, a ≤ (if a ≤ n then n else a)",
                    "id": "0.3.6.2.2.2",
                    "prevs": [
                        "0.3.6.2.2.1",
                        "0.3.6.2.2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x = a, ¬(a ≤ n), ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ a ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "",
                    "id": "0.3.6.2.2.3",
                    "prevs": [
                        "0.3.6.2.2.0",
                        "0.3.6.2.2.2"
                    ],
                    "rule": "intros",
                    "th": "finite s, x = a, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ ¬(a ≤ n) ⟶ a ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "classical_cases",
                    "id": "0.3.6.2.3",
                    "prevs": [
                        "0.3.6.2.1",
                        "0.3.6.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x = a, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ a ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "x ≤ (if a ≤ n then n else a)",
                    "id": "0.3.6.2.4",
                    "prevs": [
                        "0.3.6.2.0",
                        "0.3.6.2.3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x = a, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "",
                    "id": "0.3.6.2.5",
                    "prevs": [
                        "0.3.6.2.0",
                        "0.3.6.2.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x = a ⟶ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "",
                    "id": "0.3.6.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x ∈ s ⟶ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "x ∈ s",
                    "id": "0.3.6.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "0.3.6.3.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ a ≤ n ⟶ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "a ≤ n",
                    "id": "0.3.6.3.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ≤ n ⊢ a ≤ n"
                },
                {
                    "args": "x",
                    "id": "0.3.6.3.1.1",
                    "prevs": [
                        "0.3.5",
                        "0.3.6.3.0"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, a ≤ n, x ∈ s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x ≤ n"
                },
                {
                    "args": "if_P, x ≤ (if a ≤ n then n else a)",
                    "id": "0.3.6.3.1.2",
                    "prevs": [
                        "0.3.6.3.1.1",
                        "0.3.6.3.1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ≤ n, x ∈ s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "",
                    "id": "0.3.6.3.1.3",
                    "prevs": [
                        "0.3.6.3.1.0",
                        "0.3.6.3.1.2"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ a ≤ n ⟶ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "",
                    "id": "0.3.6.3.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ ¬(a ≤ n) ⟶ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "¬(a ≤ n)",
                    "id": "0.3.6.3.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ≤ n) ⊢ ¬(a ≤ n)"
                },
                {
                    "args": "x",
                    "id": "0.3.6.3.2.1",
                    "prevs": [
                        "0.3.5",
                        "0.3.6.3.0"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, x ∈ s, ¬(a ≤ n), ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x ≤ n"
                },
                {
                    "args": "le_cases, {m: n, n: a}",
                    "id": "0.3.6.3.2.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ n ≤ a ∨ a ≤ n"
                },
                {
                    "args": "n ≤ a ⟶ n ≤ a",
                    "id": "0.3.6.3.2.3",
                    "prevs": [],
                    "rule": "trivial",
                    "th": "⊢ n ≤ a ⟶ n ≤ a"
                },
                {
                    "args": "",
                    "id": "0.3.6.3.2.4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ s, ¬(a ≤ n), ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ a ≤ n ⟶ n ≤ a"
                },
                {
                    "args": "a ≤ n",
                    "id": "0.3.6.3.2.4.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ≤ n ⊢ a ≤ n"
                },
                {
                    "args": "negE_gen, {A: a ≤ n, C: n ≤ a}",
                    "id": "0.3.6.3.2.4.1",
                    "prevs": [
                        "0.3.6.3.2.0",
                        "0.3.6.3.2.4.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "a ≤ n, ¬(a ≤ n) ⊢ n ≤ a"
                },
                {
                    "args": "",
                    "id": "0.3.6.3.2.4.2",
                    "prevs": [
                        "0.3.6.3.2.4.0",
                        "0.3.6.3.2.4.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ s, ¬(a ≤ n), ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ a ≤ n ⟶ n ≤ a"
                },
                {
                    "args": "disjE",
                    "id": "0.3.6.3.2.5",
                    "prevs": [
                        "0.3.6.3.2.2",
                        "0.3.6.3.2.3",
                        "0.3.6.3.2.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ s, ¬(a ≤ n), ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ n ≤ a"
                },
                {
                    "args": "less_eq_trans",
                    "id": "0.3.6.3.2.6",
                    "prevs": [
                        "0.3.6.3.2.1",
                        "0.3.6.3.2.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ s, ¬(a ≤ n), ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x ≤ a"
                },
                {
                    "args": "if_not_P, x ≤ (if a ≤ n then n else a)",
                    "id": "0.3.6.3.2.7",
                    "prevs": [
                        "0.3.6.3.2.6",
                        "0.3.6.3.2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x ∈ s, ¬(a ≤ n), ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "",
                    "id": "0.3.6.3.2.8",
                    "prevs": [
                        "0.3.6.3.2.0",
                        "0.3.6.3.2.7"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ ¬(a ≤ n) ⟶ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "classical_cases",
                    "id": "0.3.6.3.3",
                    "prevs": [
                        "0.3.6.3.1",
                        "0.3.6.3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "",
                    "id": "0.3.6.3.4",
                    "prevs": [
                        "0.3.6.3.0",
                        "0.3.6.3.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x ∈ s ⟶ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "disjE",
                    "id": "0.3.6.4",
                    "prevs": [
                        "0.3.6.1",
                        "0.3.6.2",
                        "0.3.6.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x ≤ (if a ≤ n then n else a)"
                },
                {
                    "args": "max_def, x ≤ max a n",
                    "id": "0.3.6.5",
                    "prevs": [
                        "0.3.6.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(a ∈ s), x = a ∨ x ∈ s, ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ x ≤ max a n"
                },
                {
                    "args": "",
                    "id": "0.3.6.6",
                    "prevs": [
                        "0.3.6.0",
                        "0.3.6.1",
                        "0.3.6.5"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(a ∈ s), ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ ∀x. x = a ∨ x ∈ s ⟶ x ≤ max a n"
                },
                {
                    "args": "exI, {P: λn. ∀x. x = a ∨ x ∈ s ⟶ x ≤ n, a: max a n}",
                    "id": "0.3.7",
                    "prevs": [
                        "0.3.6"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(a ∈ s), ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ ∃a1. ∀x. x = a ∨ x ∈ s ⟶ x ≤ a1"
                },
                {
                    "args": "member_insert, ∃n. ∀x. x ∈ insert a s ⟶ x ≤ n",
                    "id": "0.3.8",
                    "prevs": [
                        "0.3.7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(a ∈ s), ∀x. x ∈ s ⟶ x ≤ n, ∃n. ∀x. x ∈ s ⟶ x ≤ n ⊢ ∃n. ∀x. x ∈ insert a s ⟶ x ≤ n"
                },
                {
                    "args": "∃n. ∀x. x ∈ s ⟶ x ≤ n",
                    "id": "0.3.9",
                    "prevs": [
                        "0.3.0",
                        "0.3.1",
                        "0.3.2",
                        "0.3.3",
                        "0.0",
                        "0.3.2",
                        "0.3.4",
                        "0.3.5",
                        "0.3.8"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀a::nat. ∀s. (∃n. ∀x. x ∈ s ⟶ x ≤ n) ⟶ ¬(a ∈ s) ⟶ finite s ⟶ (∃n. ∀x. x ∈ insert a s ⟶ x ≤ n)"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "0.4",
                    "prevs": [
                        "0.0",
                        "0.2",
                        "0.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ ∃n. ∀x. x ∈ s ⟶ x ≤ n"
                },
                {
                    "args": "member_natseg_0, ∃n. ∀x. x ∈ s ⟶ x ∈ {0..n}",
                    "id": "0.5",
                    "prevs": [
                        "0.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ ∃n. ∀x. x ∈ s ⟶ x ∈ {0..n}"
                },
                {
                    "args": "subset_def, ∃n. s ⊆ {0..n}",
                    "id": "0.6",
                    "prevs": [
                        "0.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ ∃n. s ⊆ {0..n}"
                },
                {
                    "args": "",
                    "id": "0.7",
                    "prevs": [
                        "0.0",
                        "0.6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∃n. s ⊆ {0..n})"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (∃n. s ⊆ {0..n}) ⟶ finite s"
                },
                {
                    "args": "∃n. s ⊆ {0..n}",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃n. s ⊆ {0..n} ⊢ ∃n. s ⊆ {0..n}"
                },
                {
                    "args": "n, nat",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR n"
                },
                {
                    "args": "s ⊆ {0..n}",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "s ⊆ {0..n} ⊢ s ⊆ {0..n}"
                },
                {
                    "args": "finite_natseg, {m: (0::nat), n: n}",
                    "id": "1.3",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({0..n})"
                },
                {
                    "args": "finite_subset",
                    "id": "1.4",
                    "prevs": [
                        "1.3",
                        "1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "s ⊆ {0..n}, ∃n. s ⊆ {0..n} ⊢ finite s"
                },
                {
                    "args": "∃n. s ⊆ {0..n}",
                    "id": "1.5",
                    "prevs": [
                        "1.0",
                        "1.0",
                        "1.1",
                        "1.2",
                        "1.4"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∃n. s ⊆ {0..n}) ⟶ finite s"
                },
                {
                    "args": "iffI",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ finite s ⟷ (∃n. s ⊆ {0..n})"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟷ (∃n. s ⊆ {0..n})"
                }
            ],
            "prop": "finite s ⟷ (∃n. s ⊆ {0..n})",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "",
                    "theorem": "subset_def"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg_0"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "inst_exists_goal",
                    "s": "(0::nat)"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "0.1.1"
                    ],
                    "goal_id": "0.1.2",
                    "method_name": "apply_resolve_step",
                    "theorem": "member_empty"
                },
                {
                    "goal_id": "0.3",
                    "method_name": "introduction",
                    "names": "a,s"
                },
                {
                    "goal_id": "0.3.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "fact_ids": [
                        "0.3.2"
                    ],
                    "goal_id": "0.3.4",
                    "method_name": "exists_elim",
                    "names": "n"
                },
                {
                    "goal_id": "0.3.6",
                    "method_name": "inst_exists_goal",
                    "s": "max a n"
                },
                {
                    "goal_id": "0.3.6",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "0.3.6.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "max_def"
                },
                {
                    "fact_ids": [
                        "0.3.6.1"
                    ],
                    "goal_id": "0.3.6.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "0.3.6.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.3.6.2.0"
                    ],
                    "goal_id": "0.3.6.2.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "case": "a ≤ n",
                    "goal_id": "0.3.6.2.1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0.3.6.2.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.3.6.2.1.0"
                    ],
                    "goal_id": "0.3.6.2.1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "0.3.6.2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.3.6.2.2.0"
                    ],
                    "goal_id": "0.3.6.2.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "0.3.6.2.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "less_eq_refl"
                },
                {
                    "goal_id": "0.3.6.3",
                    "method_name": "introduction"
                },
                {
                    "case": "a ≤ n",
                    "goal_id": "0.3.6.3.1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0.3.6.3.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.3.6.3.1.0"
                    ],
                    "goal_id": "0.3.6.3.1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "0.3.5"
                    ],
                    "goal_id": "0.3.6.3.1.1",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "0.3.6.3.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.3.6.3.2.0"
                    ],
                    "goal_id": "0.3.6.3.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "0.3.6.3.2.1",
                    "method_name": "apply_backward_step",
                    "param_m": "n",
                    "theorem": "less_eq_trans"
                },
                {
                    "fact_ids": [
                        "0.3.5"
                    ],
                    "goal_id": "0.3.6.3.2.1",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "0.3.6.3.2.2",
                    "method_name": "apply_forward_step",
                    "param_m": "n",
                    "param_n": "a",
                    "theorem": "le_cases"
                },
                {
                    "fact_ids": [
                        "0.3.6.3.2.2"
                    ],
                    "goal_id": "0.3.6.3.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "0.3.6.3.2.4",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.3.6.3.2.0",
                        "0.3.6.3.2.4.0"
                    ],
                    "goal_id": "0.3.6.3.2.4.1",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "exists_elim",
                    "names": "n"
                },
                {
                    "goal_id": "1.3",
                    "method_name": "apply_backward_step",
                    "param_t": "{0..n}",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "s": "nat set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "card_natseg_lemma",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "card_sing, card ({m}) = 1",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ card ({m}) = 1"
                },
                {
                    "args": "natseg_sing, card ({m..m}) = 1",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ card ({m..m}) = 1"
                },
                {
                    "args": "add_0_right, card ({m..m + 0}) = 1",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ card ({m..m + 0}) = 1"
                },
                {
                    "args": "nat_plus_def_1, card ({m..m + 0}) = 0 + 1",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ card ({m..m + 0}) = 0 + 1"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀n. card ({m..m + n}) = n + 1 ⟶ card ({m..m + Suc n}) = Suc n + 1"
                },
                {
                    "args": "n, nat",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR n"
                },
                {
                    "args": "card ({m..m + n}) = n + 1",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "card ({m..m + n}) = n + 1 ⊢ card ({m..m + n}) = n + 1"
                },
                {
                    "args": "le_add, {m: m, n: n}",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ m ≤ m + n"
                },
                {
                    "args": "disjI2, {A: m = Suc (m + n), B: m ≤ m + n}",
                    "id": "4.3",
                    "prevs": [
                        "4.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "card ({m..m + n}) = n + 1 ⊢ m = Suc (m + n) ∨ m ≤ m + n"
                },
                {
                    "args": "nat_less_eq_def_2, m ≤ Suc (m + n)",
                    "id": "4.4",
                    "prevs": [
                        "4.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "card ({m..m + n}) = n + 1 ⊢ m ≤ Suc (m + n)"
                },
                {
                    "args": "natseg_rec",
                    "id": "4.5",
                    "prevs": [
                        "4.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "card ({m..m + n}) = n + 1 ⊢ {m..Suc (m + n)} = insert (Suc (m + n)) ({m..m + n})"
                },
                {
                    "args": "finite_natseg, {m: m, n: m + n}",
                    "id": "4.6",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..m + n})"
                },
                {
                    "args": "card_insert, {x: Suc (m + n)}",
                    "id": "4.7",
                    "prevs": [
                        "4.6"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ card (insert (Suc (m + n)) ({m..m + n})) = (if Suc (m + n) ∈ {m..m + n} then card ({m..m + n}) else Suc (card ({m..m + n})))"
                },
                {
                    "args": "¬(m ≤ m + n + 1 ∧ m + n + 1 ≤ m + n)",
                    "id": "4.8",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ¬(m ≤ m + n + 1 ∧ m + n + 1 ≤ m + n)"
                },
                {
                    "args": "add_1_right, ¬(m ≤ Suc (m + n) ∧ Suc (m + n) ≤ m + n)",
                    "id": "4.9",
                    "prevs": [
                        "4.8"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "card ({m..m + n}) = n + 1 ⊢ ¬(m ≤ Suc (m + n) ∧ Suc (m + n) ≤ m + n)"
                },
                {
                    "args": "member_natseg, ¬(Suc (m + n) ∈ {m..m + n})",
                    "id": "4.10",
                    "prevs": [
                        "4.9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "card ({m..m + n}) = n + 1 ⊢ ¬(Suc (m + n) ∈ {m..m + n})"
                },
                {
                    "args": "if_not_P",
                    "id": "4.11",
                    "prevs": [
                        "4.7",
                        "4.10"
                    ],
                    "rule": "rewrite_fact",
                    "th": "card ({m..m + n}) = n + 1 ⊢ card (insert (Suc (m + n)) ({m..m + n})) = Suc (card ({m..m + n}))"
                },
                {
                    "args": "",
                    "id": "4.12",
                    "prevs": [
                        "4.1",
                        "4.11"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "card ({m..m + n}) = n + 1 ⊢ card (insert (Suc (m + n)) ({m..m + n})) = Suc (n + 1)"
                },
                {
                    "args": "card ({m..Suc (m + n)}) = Suc (n + 1)",
                    "id": "4.13",
                    "prevs": [
                        "4.5",
                        "4.12"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "card ({m..m + n}) = n + 1 ⊢ card ({m..Suc (m + n)}) = Suc (n + 1)"
                },
                {
                    "args": "add_Suc_right, card ({m..m + Suc n}) = Suc (n + 1)",
                    "id": "4.14",
                    "prevs": [
                        "4.13"
                    ],
                    "rule": "rewrite_goal",
                    "th": "card ({m..m + n}) = n + 1 ⊢ card ({m..m + Suc n}) = Suc (n + 1)"
                },
                {
                    "args": "nat_plus_def_2, card ({m..m + Suc n}) = Suc n + 1",
                    "id": "4.15",
                    "prevs": [
                        "4.14"
                    ],
                    "rule": "rewrite_goal",
                    "th": "card ({m..m + n}) = n + 1 ⊢ card ({m..m + Suc n}) = Suc n + 1"
                },
                {
                    "args": "",
                    "id": "4.16",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.15"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀n. card ({m..m + n}) = n + 1 ⟶ card ({m..m + Suc n}) = Suc n + 1"
                },
                {
                    "args": "nat_induct, {P: λd. card ({m..m + d}) = d + 1, x: d}",
                    "id": "5",
                    "prevs": [
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ card ({m..m + d}) = d + 1"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ card ({m..m + d}) = d + 1"
                }
            ],
            "prop": "card ({m..m + d}) = d + 1",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "induction",
                    "theorem": "nat_induct",
                    "var": "d"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_plus_def_1"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "add_0_right"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_sing"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "card_sing"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "n"
                },
                {
                    "goal_id": "4.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_plus_def_2"
                },
                {
                    "goal_id": "4.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "add_Suc_right"
                },
                {
                    "goal": "{m..Suc (m + n)} = insert (Suc (m + n)) ({m..(m + n)})",
                    "goal_id": "4.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4.2",
                    "method_name": "apply_backward_step",
                    "theorem": "natseg_rec"
                },
                {
                    "goal_id": "4.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_less_eq_def_2"
                },
                {
                    "goal_id": "4.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "4.2",
                    "method_name": "apply_backward_step",
                    "theorem": "le_add"
                },
                {
                    "fact_ids": [
                        "4.5"
                    ],
                    "goal_id": "4.6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "finite {m..m + n}",
                    "goal_id": "4.6",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4.6",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "fact_ids": [
                        "4.6"
                    ],
                    "goal_id": "4.7",
                    "method_name": "apply_forward_step",
                    "param_x": "Suc (m + n)",
                    "theorem": "card_insert"
                },
                {
                    "goal": "~(Suc (m + n) ∈ {m..m + n})",
                    "goal_id": "4.8",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "add_1_right"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "4.7",
                        "4.10"
                    ],
                    "goal_id": "4.11",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "4.1",
                        "4.11"
                    ],
                    "goal_id": "4.12",
                    "method_name": "rewrite_fact_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "d": "nat",
                "m": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "card_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "let_cases, {m: m, n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ m ≤ n ∨ n < m"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ m ≤ n ⟶ card ({m..n}) = n + 1 - m"
                },
                {
                    "args": "m ≤ n",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ n ⊢ m ≤ n"
                },
                {
                    "args": "less_eq_exist",
                    "id": "1.1",
                    "prevs": [
                        "1.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "m ≤ n ⊢ ∃p. n = m + p"
                },
                {
                    "args": "d, nat",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR d"
                },
                {
                    "args": "n = m + d",
                    "id": "1.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "n = m + d ⊢ n = m + d"
                },
                {
                    "args": "d + 1 = m + d + 1 - m",
                    "id": "1.4",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ d + 1 = m + d + 1 - m"
                },
                {
                    "args": "card_natseg_lemma, card ({m..m + d}) = m + d + 1 - m",
                    "id": "1.5",
                    "prevs": [
                        "1.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n, n = m + d ⊢ card ({m..m + d}) = m + d + 1 - m"
                },
                {
                    "args": "card ({m..n}) = n + 1 - m",
                    "id": "1.6",
                    "prevs": [
                        "1.3",
                        "1.5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m ≤ n, n = m + d ⊢ card ({m..n}) = n + 1 - m"
                },
                {
                    "args": "∃p. n = m + p",
                    "id": "1.7",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.2",
                        "1.3",
                        "1.6"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ n ⟶ card ({m..n}) = n + 1 - m"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ n < m ⟶ card ({m..n}) = n + 1 - m"
                },
                {
                    "args": "n < m",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "n < m ⊢ n < m"
                },
                {
                    "args": "natseg_empty, {m..n} = ∅",
                    "id": "2.1",
                    "prevs": [
                        "2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "n < m ⊢ {m..n} = ∅"
                },
                {
                    "args": "0 = n + 1 - m",
                    "id": "2.2",
                    "prevs": [
                        "2.0"
                    ],
                    "rule": "z3",
                    "th": "n < m ⊢ 0 = n + 1 - m"
                },
                {
                    "args": "card_empty, card (∅::nat set) = n + 1 - m",
                    "id": "2.3",
                    "prevs": [
                        "2.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "n < m ⊢ card (∅::nat set) = n + 1 - m"
                },
                {
                    "args": "card ({m..n}) = n + 1 - m",
                    "id": "2.4",
                    "prevs": [
                        "2.1",
                        "2.3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "n < m ⊢ card ({m..n}) = n + 1 - m"
                },
                {
                    "args": "",
                    "id": "2.5",
                    "prevs": [
                        "2.0",
                        "2.4"
                    ],
                    "rule": "intros",
                    "th": "⊢ n < m ⟶ card ({m..n}) = n + 1 - m"
                },
                {
                    "args": "disjE",
                    "id": "3",
                    "prevs": [
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ card ({m..n}) = n + 1 - m"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ card ({m..n}) = n + 1 - m"
                }
            ],
            "prop": "card ({m..n}) = n + 1 - m",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_forward_step",
                    "param_m": "m",
                    "param_n": "n",
                    "theorem": "let_cases"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "less_eq_exist"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "exists_elim",
                    "names": "d"
                },
                {
                    "fact_ids": [
                        "1.3"
                    ],
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "card_natseg_lemma"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "z3"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "goal": "{m..n} = ∅",
                    "goal_id": "2.1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_empty"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "card_empty"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.2",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "has_size_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "card_natseg, card ({m..n}) = n + 1 - m",
                    "id": "1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ card ({m..n}) = n + 1 - m"
                },
                {
                    "args": "conjI",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ finite ({m..n}) ∧ card ({m..n}) = n + 1 - m"
                },
                {
                    "args": "has_size_def, has_size ({m..n}) (n + 1 - m)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ has_size ({m..n}) (n + 1 - m)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ has_size ({m..n}) (n + 1 - m)"
                }
            ],
            "prop": "has_size ({m..n}) (n + 1 - m)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "has_size_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "card_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "card_natseg_1",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "nat_plus_minus_2, 1 + n - 1 = n",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ 1 + n - 1 = n"
                },
                {
                    "args": "add_comm, n + 1 - 1 = n",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ n + 1 - 1 = n"
                },
                {
                    "args": "card_natseg, card ({1..n}) = n",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ card ({1..n}) = n"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ card ({1..n}) = n"
                }
            ],
            "prop": "card ({1..n}) = n",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "card_natseg"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "add_comm"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_plus_minus_2"
                }
            ],
            "ty": "thm",
            "vars": {
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "has_size_natseg_1",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: (1::nat), n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({1..n})"
                },
                {
                    "args": "card_natseg_1, card ({1..n}) = n",
                    "id": "1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ card ({1..n}) = n"
                },
                {
                    "args": "conjI",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ finite ({1..n}) ∧ card ({1..n}) = n"
                },
                {
                    "args": "has_size_def, has_size ({1..n}) n",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ has_size ({1..n}) n"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ has_size ({1..n}) n"
                }
            ],
            "prop": "has_size ({1..n}) n",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "has_size_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "card_natseg_1"
                }
            ],
            "ty": "thm",
            "vars": {
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "natseg_0",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ m = 0 ⟶ {m..0} = (if m = 0 then {0} else ∅)"
                },
                {
                    "args": "m = 0",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m = 0 ⊢ m = 0"
                },
                {
                    "args": "natseg_sing, {0..0} = {0}",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ {0..0} = {0}"
                },
                {
                    "args": "{m..0} = {0}",
                    "id": "0.2",
                    "prevs": [
                        "0.0",
                        "0.1"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m = 0 ⊢ {m..0} = {0}"
                },
                {
                    "args": "if_P, {m..0} = (if m = 0 then {0} else ∅)",
                    "id": "0.3",
                    "prevs": [
                        "0.2",
                        "0.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m = 0 ⊢ {m..0} = (if m = 0 then {0} else ∅)"
                },
                {
                    "args": "",
                    "id": "0.4",
                    "prevs": [
                        "0.0",
                        "0.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ m = 0 ⟶ {m..0} = (if m = 0 then {0} else ∅)"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ¬(m = 0) ⟶ {m..0} = (if m = 0 then {0} else ∅)"
                },
                {
                    "args": "¬(m = 0)",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(m = 0) ⊢ ¬(m = 0)"
                },
                {
                    "args": "le_1_1",
                    "id": "1.1",
                    "prevs": [
                        "1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(m = 0) ⊢ 0 < m"
                },
                {
                    "args": "natseg_emptyI",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(m = 0) ⊢ {m..0} = ∅"
                },
                {
                    "args": "if_not_P, {m..0} = (if m = 0 then {0} else ∅)",
                    "id": "1.3",
                    "prevs": [
                        "1.2",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(m = 0) ⊢ {m..0} = (if m = 0 then {0} else ∅)"
                },
                {
                    "args": "",
                    "id": "1.4",
                    "prevs": [
                        "1.0",
                        "1.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(m = 0) ⟶ {m..0} = (if m = 0 then {0} else ∅)"
                },
                {
                    "args": "classical_cases",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ {m..0} = (if m = 0 then {0} else ∅)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ {m..0} = (if m = 0 then {0} else ∅)"
                }
            ],
            "prop": "{m..0} = (if m = 0 then {0} else ∅)",
            "steps": [
                {
                    "case": "m = 0",
                    "goal_id": "0",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_sing"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "le_1_1"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "apply_backward_step",
                    "theorem": "natseg_emptyI"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "natseg_Suc",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ m ≤ Suc n ⟶ {m..Suc n} = (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n})"
                },
                {
                    "args": "m ≤ Suc n",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ Suc n ⊢ m ≤ Suc n"
                },
                {
                    "args": "natseg_rec",
                    "id": "0.1",
                    "prevs": [
                        "0.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ Suc n ⊢ {m..Suc n} = insert (Suc n) ({m..n})"
                },
                {
                    "args": "if_P, {m..Suc n} = (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n})",
                    "id": "0.2",
                    "prevs": [
                        "0.1",
                        "0.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ Suc n ⊢ {m..Suc n} = (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n})"
                },
                {
                    "args": "",
                    "id": "0.3",
                    "prevs": [
                        "0.0",
                        "0.2"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ Suc n ⟶ {m..Suc n} = (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n})"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ¬(m ≤ Suc n) ⟶ {m..Suc n} = (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n})"
                },
                {
                    "args": "¬(m ≤ Suc n)",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(m ≤ Suc n) ⊢ ¬(m ≤ Suc n)"
                },
                {
                    "args": "not_le",
                    "id": "1.1",
                    "prevs": [
                        "1.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(m ≤ Suc n) ⊢ Suc n < m"
                },
                {
                    "args": "nat_less_eq_def_2",
                    "id": "1.2",
                    "prevs": [
                        "1.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(m ≤ Suc n) ⊢ ¬(m = Suc n ∨ m ≤ n)"
                },
                {
                    "args": "de_morgan_thm2",
                    "id": "1.3",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(m ≤ Suc n) ⊢ ¬(m = Suc n) ∧ ¬(m ≤ n)"
                },
                {
                    "args": "not_le",
                    "id": "1.4",
                    "prevs": [
                        "1.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(m ≤ Suc n) ⊢ ¬(m = Suc n) ∧ n < m"
                },
                {
                    "args": "conjD2",
                    "id": "1.5",
                    "prevs": [
                        "1.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(m ≤ Suc n) ⊢ n < m"
                },
                {
                    "args": "natseg_empty, {m..n} = ∅",
                    "id": "1.6",
                    "prevs": [
                        "1.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(m ≤ Suc n) ⊢ {m..n} = ∅"
                },
                {
                    "args": "natseg_empty, {m..Suc n} = ∅",
                    "id": "1.7",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(m ≤ Suc n) ⊢ {m..Suc n} = ∅"
                },
                {
                    "args": "{m..Suc n} = {m..n}",
                    "id": "1.8",
                    "prevs": [
                        "1.6",
                        "1.7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "¬(m ≤ Suc n) ⊢ {m..Suc n} = {m..n}"
                },
                {
                    "args": "if_not_P, {m..Suc n} = (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n})",
                    "id": "1.9",
                    "prevs": [
                        "1.8",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(m ≤ Suc n) ⊢ {m..Suc n} = (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n})"
                },
                {
                    "args": "",
                    "id": "1.10",
                    "prevs": [
                        "1.0",
                        "1.9"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(m ≤ Suc n) ⟶ {m..Suc n} = (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n})"
                },
                {
                    "args": "classical_cases",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ {m..Suc n} = (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n})"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ {m..Suc n} = (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n})"
                }
            ],
            "prop": "{m..Suc n} = (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n})",
            "steps": [
                {
                    "case": "m ≤ Suc n",
                    "goal_id": "0",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "natseg_rec"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "not_le"
                },
                {
                    "goal": "{m..n} = {}",
                    "goal_id": "1.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_empty"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "nat_less_eq_def_2"
                },
                {
                    "fact_ids": [
                        "1.2"
                    ],
                    "goal_id": "1.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "de_morgan_thm2"
                },
                {
                    "fact_ids": [
                        "1.3"
                    ],
                    "goal_id": "1.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "not_le"
                },
                {
                    "fact_ids": [
                        "1.4"
                    ],
                    "goal_id": "1.5",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "1.6"
                    ],
                    "goal_id": "1.7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1.7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "inter_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "{p1. m ≤ p1 ∧ p1 ≤ n} ∩ {p1. p ≤ p1 ∧ p1 ≤ q} = {p1. max m p ≤ p1 ∧ p1 ≤ min n q}",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ {p1. m ≤ p1 ∧ p1 ≤ n} ∩ {p1. p ≤ p1 ∧ p1 ≤ q} = {p1. max m p ≤ p1 ∧ p1 ≤ min n q}"
                },
                {
                    "args": "nat_interval_def, {m..n} ∩ {p..q} = {max m p..min n q}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ {m..n} ∩ {p..q} = {max m p..min n q}"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ {m..n} ∩ {p..q} = {max m p..min n q}"
                }
            ],
            "prop": "{m..n} ∩ {p..q} = {max m p..min n q}",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_interval_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat",
                "p": "nat",
                "q": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "disjoint_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "min n q < max m p ⟷ n < p ∨ q < m ∨ n < m ∨ q < p",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ min n q < max m p ⟷ n < p ∨ q < m ∨ n < m ∨ q < p"
                },
                {
                    "args": "natseg_empty, {max m p..min n q} = ∅ ⟷ n < p ∨ q < m ∨ n < m ∨ q < p",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ {max m p..min n q} = ∅ ⟷ n < p ∨ q < m ∨ n < m ∨ q < p"
                },
                {
                    "args": "inter_natseg, {m..n} ∩ {p..q} = ∅ ⟷ n < p ∨ q < m ∨ n < m ∨ q < p",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ {m..n} ∩ {p..q} = ∅ ⟷ n < p ∨ q < m ∨ n < m ∨ q < p"
                },
                {
                    "args": "disjoint_def, disjoint ({m..n}) ({p..q}) ⟷ n < p ∨ q < m ∨ n < m ∨ q < p",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ disjoint ({m..n}) ({p..q}) ⟷ n < p ∨ q < m ∨ n < m ∨ q < p"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ disjoint ({m..n}) ({p..q}) ⟷ n < p ∨ q < m ∨ n < m ∨ q < p"
                }
            ],
            "prop": "disjoint ({m..n}) ({p..q}) ⟷ n < p ∨ q < m ∨ n < m ∨ q < p",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "inter_natseg"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_empty"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat",
                "p": "nat",
                "q": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "natseg_add_split",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ n + 1",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ n + 1 ⊢ m ≤ n + 1"
                },
                {
                    "args": "∀x. m ≤ x ∧ x ≤ n + p ⟷ m ≤ x ∧ x ≤ n ∨ n + 1 ≤ x ∧ x ≤ n + p",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "z3",
                    "th": "m ≤ n + 1 ⊢ ∀x. m ≤ x ∧ x ≤ n + p ⟷ m ≤ x ∧ x ≤ n ∨ n + 1 ≤ x ∧ x ≤ n + p"
                },
                {
                    "args": "member_natseg, ∀x. x ∈ {m..n + p} ⟷ x ∈ {m..n} ∨ x ∈ {n + 1..n + p}",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n + 1 ⊢ ∀x. x ∈ {m..n + p} ⟷ x ∈ {m..n} ∨ x ∈ {n + 1..n + p}"
                },
                {
                    "args": "member_union_iff, ∀x. x ∈ {m..n + p} ⟷ x ∈ {m..n} ∪ {n + 1..n + p}",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n + 1 ⊢ ∀x. x ∈ {m..n + p} ⟷ x ∈ {m..n} ∪ {n + 1..n + p}"
                },
                {
                    "args": "member_ext",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ n + 1 ⊢ {m..n + p} = {m..n} ∪ {n + 1..n + p}"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ n + 1 ⟶ {m..n + p} = {m..n} ∪ {n + 1..n + p}"
                }
            ],
            "prop": "m ≤ n + 1 ⟶ {m..n + p} = {m..n} ∪ {n + 1..n + p}",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_union_iff"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat",
                "p": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "natseg_offset_image",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. m + p ≤ x ∧ x ≤ n + p ⟷ (∃x1. x = x1 + p ∧ m ≤ x1 ∧ x1 ≤ n)",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x. m + p ≤ x ∧ x ≤ n + p ⟷ (∃x1. x = x1 + p ∧ m ≤ x1 ∧ x1 ≤ n)"
                },
                {
                    "args": "member_natseg, ∀x. x ∈ {m + p..n + p} ⟷ (∃x1. x = x1 + p ∧ x1 ∈ {m..n})",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ {m + p..n + p} ⟷ (∃x1. x = x1 + p ∧ x1 ∈ {m..n})"
                },
                {
                    "args": "in_image, ∀x. x ∈ {m + p..n + p} ⟷ x ∈ image (λi. i + p) ({m..n})",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ {m + p..n + p} ⟷ x ∈ image (λi. i + p) ({m..n})"
                },
                {
                    "args": "member_ext",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ {m + p..n + p} = image (λi. i + p) ({m..n})"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ {m + p..n + p} = image (λi. i + p) ({m..n})"
                }
            ],
            "prop": "{m + p..n + p} = image (λi. i + p) ({m..n})",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat",
                "p": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "subset_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "(∀x. m ≤ x ∧ x ≤ n ⟶ p ≤ x ∧ x ≤ q) ⟷ n < m ∨ p ≤ m ∧ n ≤ q",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ (∀x. m ≤ x ∧ x ≤ n ⟶ p ≤ x ∧ x ≤ q) ⟷ n < m ∨ p ≤ m ∧ n ≤ q"
                },
                {
                    "args": "member_natseg, (∀x. x ∈ {m..n} ⟶ x ∈ {p..q}) ⟷ n < m ∨ p ≤ m ∧ n ≤ q",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ (∀x. x ∈ {m..n} ⟶ x ∈ {p..q}) ⟷ n < m ∨ p ≤ m ∧ n ≤ q"
                },
                {
                    "args": "subset_def, {m..n} ⊆ {p..q} ⟷ n < m ∨ p ≤ m ∧ n ≤ q",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ {m..n} ⊆ {p..q} ⟷ n < m ∨ p ≤ m ∧ n ≤ q"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ {m..n} ⊆ {p..q} ⟷ n < m ∨ p ≤ m ∧ n ≤ q"
                }
            ],
            "prop": "{m..n} ⊆ {p..q} ⟷ n < m ∨ p ≤ m ∧ n ≤ q",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "",
                    "theorem": "subset_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat",
                "p": "nat",
                "q": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "natseg_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x. x ≤ n ⟷ x ≤ n"
                },
                {
                    "args": "x, nat",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "eq_refl, {x: x ≤ n}",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ x ≤ n ⟷ x ≤ n"
                },
                {
                    "args": "",
                    "id": "0.2",
                    "prevs": [
                        "0.0",
                        "0.1"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. x ≤ n ⟷ x ≤ n"
                },
                {
                    "args": "member_collect, ∀x. x ∈ {x1. x1 ≤ n} ⟷ x ≤ n",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ {x1. x1 ≤ n} ⟷ x ≤ n"
                },
                {
                    "args": "member_natseg_0, ∀x. x ∈ {x1. x1 ≤ n} ⟷ x ∈ {0..n}",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ {x1. x1 ≤ n} ⟷ x ∈ {0..n}"
                },
                {
                    "args": "member_ext",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ {x. x ≤ n} = {0..n}"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ {x. x ≤ n} = {0..n}"
                }
            ],
            "prop": "{x. x ≤ n} = {0..n}",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg_0"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                }
            ],
            "ty": "thm",
            "vars": {
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "natseg_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ n = 0 ⟶ (∀x. x ∈ {x1. x1 < n} ⟷ x ∈ (if n = 0 then ∅ else {0..n - 1}))"
                },
                {
                    "args": "n = 0",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "n = 0 ⊢ n = 0"
                },
                {
                    "args": "∀x::nat. x ∈ {x1. x1 < 0} ⟷ x ∈ ∅",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x::nat. x ∈ {x1. x1 < 0} ⟷ x ∈ ∅"
                },
                {
                    "args": "∀x. x ∈ {x1. x1 < n} ⟷ x ∈ ∅",
                    "id": "0.2",
                    "prevs": [
                        "0.0",
                        "0.1"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "n = 0 ⊢ ∀x. x ∈ {x1. x1 < n} ⟷ x ∈ ∅"
                },
                {
                    "args": "if_P, ∀x. x ∈ {x1. x1 < n} ⟷ x ∈ (if n = 0 then ∅ else {0..n - 1})",
                    "id": "0.3",
                    "prevs": [
                        "0.2",
                        "0.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "n = 0 ⊢ ∀x. x ∈ {x1. x1 < n} ⟷ x ∈ (if n = 0 then ∅ else {0..n - 1})"
                },
                {
                    "args": "",
                    "id": "0.4",
                    "prevs": [
                        "0.0",
                        "0.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ n = 0 ⟶ (∀x. x ∈ {x1. x1 < n} ⟷ x ∈ (if n = 0 then ∅ else {0..n - 1}))"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ¬(n = 0) ⟶ (∀x. x ∈ {x1. x1 < n} ⟷ x ∈ (if n = 0 then ∅ else {0..n - 1}))"
                },
                {
                    "args": "¬(n = 0)",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(n = 0) ⊢ ¬(n = 0)"
                },
                {
                    "args": "∀x. x < n ⟷ x ≤ n - 1",
                    "id": "1.1",
                    "prevs": [
                        "1.0"
                    ],
                    "rule": "z3",
                    "th": "¬(n = 0) ⊢ ∀x. x < n ⟷ x ≤ n - 1"
                },
                {
                    "args": "member_collect, ∀x. x ∈ {x1. x1 < n} ⟷ x ≤ n - 1",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(n = 0) ⊢ ∀x. x ∈ {x1. x1 < n} ⟷ x ≤ n - 1"
                },
                {
                    "args": "member_natseg_0, ∀x. x ∈ {x1. x1 < n} ⟷ x ∈ {0..n - 1}",
                    "id": "1.3",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(n = 0) ⊢ ∀x. x ∈ {x1. x1 < n} ⟷ x ∈ {0..n - 1}"
                },
                {
                    "args": "if_not_P, ∀x. x ∈ {x1. x1 < n} ⟷ x ∈ (if n = 0 then ∅ else {0..n - 1})",
                    "id": "1.4",
                    "prevs": [
                        "1.3",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(n = 0) ⊢ ∀x. x ∈ {x1. x1 < n} ⟷ x ∈ (if n = 0 then ∅ else {0..n - 1})"
                },
                {
                    "args": "",
                    "id": "1.5",
                    "prevs": [
                        "1.0",
                        "1.4"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(n = 0) ⟶ (∀x. x ∈ {x1. x1 < n} ⟷ x ∈ (if n = 0 then ∅ else {0..n - 1}))"
                },
                {
                    "args": "classical_cases",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ ∀x. x ∈ {x1. x1 < n} ⟷ x ∈ (if n = 0 then ∅ else {0..n - 1})"
                },
                {
                    "args": "member_ext",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ {x. x < n} = (if n = 0 then ∅ else {0..n - 1})"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ {x. x < n} = (if n = 0 then ∅ else {0..n - 1})"
                }
            ],
            "prop": "{x. x < n} = (if n = 0 then ∅ else {0..n - 1})",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "case": "n = 0",
                    "goal_id": "0",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "z3"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg_0"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "neutral",
            "prop": "neutral op = (THE x. ∀y. op x y = y ∧ op y x = y)",
            "ty": "def",
            "type": "('a ⇒ 'a ⇒ 'a) ⇒ 'a"
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "monoidal",
            "prop": [
                "monoidal op ⟷ ",
                "(∀x. ∀y. op x y = op y x) ∧ ",
                "(∀x. ∀y. ∀z. op x (op y z) = op (op x y) z) ∧ (∀x. op (neutral op) x = x)"
            ],
            "ty": "def",
            "type": "('a ⇒ 'a ⇒ 'a) ⇒ bool"
        },
        {
            "attributes": [
                "hint_backward",
                "hint_forward"
            ],
            "name": "monoidal_ac",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "monoidal_def",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ (∀x. ∀y. op x y = op y x) ∧ (∀x. ∀y. ∀z. op x (op y z) = op (op x y) z) ∧ (∀x. op (neutral op) x = x)"
                },
                {
                    "args": "conjD1, {A: ∀x. ∀y. op x y = op y x, B: (∀x. ∀y. ∀z. op x (op y z) = op (op x y) z) ∧ (∀x. op (neutral op) x = x)}",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ ∀x. ∀y. op x y = op y x"
                },
                {
                    "args": "conjD2, {A: ∀x. ∀y. op x y = op y x, B: (∀x. ∀y. ∀z. op x (op y z) = op (op x y) z) ∧ (∀x. op (neutral op) x = x)}",
                    "id": "3",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ (∀x. ∀y. ∀z. op x (op y z) = op (op x y) z) ∧ (∀x. op (neutral op) x = x)"
                },
                {
                    "args": "conjD2",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀x. op (neutral op) x = x"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ ∀a. op a (neutral op) = a"
                },
                {
                    "args": "a, 'a",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "a",
                    "id": "5.1",
                    "prevs": [
                        "2"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "monoidal op ⊢ ∀y. op a y = op y a"
                },
                {
                    "args": "neutral op",
                    "id": "5.2",
                    "prevs": [
                        "5.1"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "monoidal op ⊢ op a (neutral op) = op (neutral op) a"
                },
                {
                    "args": "a",
                    "id": "5.3",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op (neutral op) a = a"
                },
                {
                    "args": "op a (neutral op) = a",
                    "id": "5.4",
                    "prevs": [
                        "5.2",
                        "5.3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op ⊢ op a (neutral op) = a"
                },
                {
                    "args": "",
                    "id": "5.5",
                    "prevs": [
                        "5.0",
                        "5.4"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ ∀a. op a (neutral op) = a"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op (op a b) c = op a (op b c)"
                },
                {
                    "args": "a, 'a",
                    "id": "6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "b, 'a",
                    "id": "6.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR b"
                },
                {
                    "args": "c, 'a",
                    "id": "6.2",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR c"
                },
                {
                    "args": "conjD1, {A: ∀x. ∀y. ∀z. op x (op y z) = op (op x y) z, B: ∀x. op (neutral op) x = x}",
                    "id": "6.3",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ ∀x. ∀y. ∀z. op x (op y z) = op (op x y) z"
                },
                {
                    "args": "a, b, c",
                    "id": "6.4",
                    "prevs": [
                        "6.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op a (op b c) = op (op a b) c"
                },
                {
                    "args": "eq_sym_eq, op (op a b) c = op a (op b c)",
                    "id": "6.5",
                    "prevs": [
                        "6.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ op (op a b) c = op a (op b c)"
                },
                {
                    "args": "",
                    "id": "6.6",
                    "prevs": [
                        "6.0",
                        "6.1",
                        "6.2",
                        "6.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op (op a b) c = op a (op b c)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op a (op b c) = op b (op a c)"
                },
                {
                    "args": "a, 'a",
                    "id": "7.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "b, 'a",
                    "id": "7.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR b"
                },
                {
                    "args": "c, 'a",
                    "id": "7.2",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR c"
                },
                {
                    "args": "b",
                    "id": "7.3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "monoidal op ⊢ ∀y. op b y = op y b"
                },
                {
                    "args": "op a c",
                    "id": "7.4",
                    "prevs": [
                        "7.3"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "monoidal op ⊢ op b (op a c) = op (op a c) b"
                },
                {
                    "args": "b",
                    "id": "7.5",
                    "prevs": [
                        "2"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "monoidal op ⊢ ∀y. op b y = op y b"
                },
                {
                    "args": "c",
                    "id": "7.6",
                    "prevs": [
                        "7.5"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "monoidal op ⊢ op b c = op c b"
                },
                {
                    "args": "conjD1, {A: ∀x. ∀y. ∀z. op x (op y z) = op (op x y) z, B: ∀x. op (neutral op) x = x}",
                    "id": "7.7",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ ∀x. ∀y. ∀z. op x (op y z) = op (op x y) z"
                },
                {
                    "args": "a, c, b",
                    "id": "7.8",
                    "prevs": [
                        "7.7"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op a (op c b) = op (op a c) b"
                },
                {
                    "args": "op a (op b c) = op (op a c) b",
                    "id": "7.9",
                    "prevs": [
                        "7.6",
                        "7.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op ⊢ op a (op b c) = op (op a c) b"
                },
                {
                    "args": "op a (op b c) = op b (op a c)",
                    "id": "7.10",
                    "prevs": [
                        "7.4",
                        "7.9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op ⊢ op a (op b c) = op b (op a c)"
                },
                {
                    "args": "",
                    "id": "7.11",
                    "prevs": [
                        "7.0",
                        "7.1",
                        "7.2",
                        "7.10"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op a (op b c) = op b (op a c)"
                },
                {
                    "args": "conjI",
                    "id": "8",
                    "prevs": [
                        "6",
                        "7"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjI",
                    "id": "9",
                    "prevs": [
                        "2",
                        "8"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjI",
                    "id": "10",
                    "prevs": [
                        "5",
                        "9"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjI",
                    "id": "11",
                    "prevs": [
                        "4",
                        "10"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op (neutral op) a = a) ∧ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "",
                    "id": "12",
                    "prevs": [
                        "0",
                        "11"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ (∀a. op (neutral op) a = a) ∧ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ (∀a. op (neutral op) a = a) ∧ ",
                "   (∀a. op a (neutral op) = a) ∧ ",
                "   (∀a. ∀b. op a b = op b a) ∧ ",
                "   (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ ",
                "   (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "rewrite_fact",
                    "theorem": "monoidal_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction",
                    "names": "a"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "5.1",
                    "method_name": "forall_elim",
                    "s": "a"
                },
                {
                    "fact_ids": [
                        "5.1"
                    ],
                    "goal_id": "5.2",
                    "method_name": "forall_elim",
                    "s": "(neutral op)"
                },
                {
                    "fact_ids": [
                        "5.2"
                    ],
                    "goal_id": "5.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5.3",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "6",
                    "method_name": "introduction",
                    "names": "a,b,c"
                },
                {
                    "goal_id": "6.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "6.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "6.3"
                    ],
                    "goal_id": "6.4",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "7",
                    "method_name": "introduction",
                    "names": "a,b,c"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "7.3",
                    "method_name": "forall_elim",
                    "s": "b"
                },
                {
                    "fact_ids": [
                        "7.3"
                    ],
                    "goal_id": "7.4",
                    "method_name": "forall_elim",
                    "s": "(op a c)"
                },
                {
                    "fact_ids": [
                        "7.4"
                    ],
                    "goal_id": "7.5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "7.5",
                    "method_name": "forall_elim",
                    "s": "b"
                },
                {
                    "fact_ids": [
                        "7.5"
                    ],
                    "goal_id": "7.6",
                    "method_name": "forall_elim",
                    "s": "c"
                },
                {
                    "fact_ids": [
                        "7.6"
                    ],
                    "goal_id": "7.7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "7.7",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "7.7"
                    ],
                    "goal_id": "7.8",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "op": "'a ⇒ 'a ⇒ 'a"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "support",
            "prop": "support op f s = {x. x ∈ s ∧ ¬(f x = neutral op)}",
            "ty": "def",
            "type": "('a ⇒ 'a ⇒ 'a) ⇒ ('b ⇒ 'a) ⇒ 'b set ⇒ 'b set"
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "iterate",
            "prop": [
                "iterate op s f = ",
                "(if finite (support op f s) then ",
                "   itset (λx. λa. op (f x) a) (support op f s) (neutral op)",
                " else ",
                "   neutral op)"
            ],
            "ty": "def",
            "type": "('a ⇒ 'a ⇒ 'a) ⇒ 'b set ⇒ ('b ⇒ 'a) ⇒ 'a"
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "in_support",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "member_collect, x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ⟷ x ∈ s ∧ ¬(f x = neutral op)",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ⟷ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "support_def, x ∈ support op f s ⟷ x ∈ s ∧ ¬(f x = neutral op)",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ x ∈ support op f s ⟷ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ x ∈ support op f s ⟷ x ∈ s ∧ ¬(f x = neutral op)"
                }
            ],
            "prop": "x ∈ support op f s ⟷ x ∈ s ∧ ¬(f x = neutral op)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "x": "'b"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "support_support",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x. x ∈ {x1. (x1 ∈ s ∧ ¬(f x1 = neutral op)) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "x, 'b",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(f x = neutral op) ⟶ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(f x = neutral op)",
                    "id": "0.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.1.1",
                    "prevs": [
                        "0.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.2",
                    "prevs": [
                        "0.1.0",
                        "0.1.1"
                    ],
                    "rule": "intros",
                    "th": "⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(f x = neutral op) ⟶ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ s ∧ ¬(f x = neutral op)",
                    "id": "0.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD2",
                    "id": "0.2.1",
                    "prevs": [
                        "0.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "conjI",
                    "id": "0.2.2",
                    "prevs": [
                        "0.2.0",
                        "0.2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.3",
                    "prevs": [
                        "0.2.0",
                        "0.2.2"
                    ],
                    "rule": "intros",
                    "th": "⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "0.3",
                    "prevs": [
                        "0.1",
                        "0.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(f x = neutral op) ⟷ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "member_collect, x ∈ {x1. (x1 ∈ s ∧ ¬(f x1 = neutral op)) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)}",
                    "id": "0.4",
                    "prevs": [
                        "0.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ x ∈ {x1. (x1 ∈ s ∧ ¬(f x1 = neutral op)) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "",
                    "id": "0.5",
                    "prevs": [
                        "0.0",
                        "0.4"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. x ∈ {x1. (x1 ∈ s ∧ ¬(f x1 = neutral op)) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "member_ext",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ {x. (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(f x = neutral op)} = {x. x ∈ s ∧ ¬(f x = neutral op)}"
                },
                {
                    "args": "in_support, {x. x ∈ support op f s ∧ ¬(f x = neutral op)} = {x. x ∈ s ∧ ¬(f x = neutral op)}",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ {x. x ∈ support op f s ∧ ¬(f x = neutral op)} = {x. x ∈ s ∧ ¬(f x = neutral op)}"
                },
                {
                    "args": "support_def, support op f (support op f s) = support op f s",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ support op f (support op f s) = support op f s"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ support op f (support op f s) = support op f s"
                }
            ],
            "prop": "support op f (support op f s) = support op f s",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "goal_id": "0.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.0"
                    ],
                    "goal_id": "0.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "0.2.0"
                    ],
                    "goal_id": "0.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "support_eq_empty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (∀x. x ∈ s ⟶ f x = neutral op) ⟶ support op f s = ∅"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x = neutral op",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op ⊢ ∀x. x ∈ s ⟶ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op ⊢ ∀x. x ∈ support op f s ⟷ x ∈ ∅"
                },
                {
                    "args": "x, 'b",
                    "id": "0.1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "0.1.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ false"
                },
                {
                    "args": "x ∈ s ∧ ¬(f x = neutral op)",
                    "id": "0.1.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1, {A: x ∈ s, B: ¬(f x = neutral op)}",
                    "id": "0.1.1.1",
                    "prevs": [
                        "0.1.1.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2, {A: x ∈ s, B: ¬(f x = neutral op)}",
                    "id": "0.1.1.2",
                    "prevs": [
                        "0.1.1.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.1.3",
                    "prevs": [
                        "0.0",
                        "0.1.1.1"
                    ],
                    "rule": "apply_fact",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op, x ∈ s ∧ ¬(f x = neutral op) ⊢ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "0.1.1.4",
                    "prevs": [
                        "0.1.1.3",
                        "0.1.1.2"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op, x ∈ s ∧ ¬(f x = neutral op) ⊢ ¬(neutral op = neutral op)"
                },
                {
                    "args": "negE",
                    "id": "0.1.1.5",
                    "prevs": [
                        "0.1.1.2",
                        "0.1.1.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral op), ∀x. x ∈ s ⟶ f x = neutral op ⊢ false"
                },
                {
                    "args": "",
                    "id": "0.1.1.6",
                    "prevs": [
                        "0.1.1.0",
                        "0.1.1.5"
                    ],
                    "rule": "intros",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ false"
                },
                {
                    "args": "false ⟶ x ∈ s ∧ ¬(f x = neutral op)",
                    "id": "0.1.2",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ false ⟶ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "0.1.3",
                    "prevs": [
                        "0.1.1",
                        "0.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟷ false"
                },
                {
                    "args": "member_empty_simp, x ∈ s ∧ ¬(f x = neutral op) ⟷ x ∈ ∅",
                    "id": "0.1.4",
                    "prevs": [
                        "0.1.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟷ x ∈ ∅"
                },
                {
                    "args": "in_support, x ∈ support op f s ⟷ x ∈ ∅",
                    "id": "0.1.5",
                    "prevs": [
                        "0.1.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op ⊢ x ∈ support op f s ⟷ x ∈ ∅"
                },
                {
                    "args": "",
                    "id": "0.1.6",
                    "prevs": [
                        "0.1.0",
                        "0.1.5"
                    ],
                    "rule": "intros",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op ⊢ ∀x. x ∈ support op f s ⟷ x ∈ ∅"
                },
                {
                    "args": "member_ext",
                    "id": "0.2",
                    "prevs": [
                        "0.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op ⊢ support op f s = ∅"
                },
                {
                    "args": "",
                    "id": "0.3",
                    "prevs": [
                        "0.0",
                        "0.2"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. x ∈ s ⟶ f x = neutral op) ⟶ support op f s = ∅"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ support op f s = ∅ ⟶ (∀x. x ∈ s ⟶ f x = neutral op)"
                },
                {
                    "args": "support op f s = ∅",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "support op f s = ∅ ⊢ support op f s = ∅"
                },
                {
                    "args": "set_equal_iff",
                    "id": "1.1",
                    "prevs": [
                        "1.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "support op f s = ∅ ⊢ ∀x. x ∈ support op f s ⟷ x ∈ ∅"
                },
                {
                    "args": "",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "support op f s = ∅ ⊢ ∀x. x ∈ s ⟶ f x = neutral op"
                },
                {
                    "args": "x, 'b",
                    "id": "1.2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "1.2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "x",
                    "id": "1.2.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "support op f s = ∅ ⊢ x ∈ support op f s ⟷ x ∈ ∅"
                },
                {
                    "args": "in_support",
                    "id": "1.2.3",
                    "prevs": [
                        "1.2.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "support op f s = ∅ ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟷ x ∈ ∅"
                },
                {
                    "args": "member_empty_simp",
                    "id": "1.2.4",
                    "prevs": [
                        "1.2.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "support op f s = ∅ ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟷ false"
                },
                {
                    "args": "",
                    "id": "1.2.5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "support op f s = ∅, x ∈ s ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ false"
                },
                {
                    "args": "x ∈ s ∧ ¬(f x = neutral op)",
                    "id": "1.2.5.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.2.5.1",
                    "prevs": [
                        "1.2.4",
                        "1.2.5.0"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "support op f s = ∅, x ∈ s ∧ ¬(f x = neutral op) ⊢ false"
                },
                {
                    "args": "",
                    "id": "1.2.5.2",
                    "prevs": [
                        "1.2.5.0",
                        "1.2.5.1"
                    ],
                    "rule": "intros",
                    "th": "support op f s = ∅, x ∈ s ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ false"
                },
                {
                    "args": "¬false",
                    "id": "1.2.6",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ¬false"
                },
                {
                    "args": "¬(x ∈ s ∧ ¬(f x = neutral op))",
                    "id": "1.2.7",
                    "prevs": [
                        "1.2.4",
                        "1.2.6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "support op f s = ∅, x ∈ s ⊢ ¬(x ∈ s ∧ ¬(f x = neutral op))"
                },
                {
                    "args": "de_morgan_thm1",
                    "id": "1.2.8",
                    "prevs": [
                        "1.2.7"
                    ],
                    "rule": "rewrite_fact",
                    "th": "support op f s = ∅, x ∈ s ⊢ ¬(x ∈ s) ∨ ¬¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.2.9",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "support op f s = ∅, x ∈ s ⊢ ¬(x ∈ s) ⟶ f x = neutral op"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "1.2.9.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "negE_gen, {A: x ∈ s, C: f x = neutral op}",
                    "id": "1.2.9.1",
                    "prevs": [
                        "1.2.9.0",
                        "1.2.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "¬(x ∈ s), x ∈ s ⊢ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "1.2.9.2",
                    "prevs": [
                        "1.2.9.0",
                        "1.2.9.1"
                    ],
                    "rule": "intros",
                    "th": "support op f s = ∅, x ∈ s ⊢ ¬(x ∈ s) ⟶ f x = neutral op"
                },
                {
                    "args": "∀A. ¬¬A ⟷ A",
                    "id": "1.2.10",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀A. ¬¬A ⟷ A"
                },
                {
                    "args": "f x = neutral op",
                    "id": "1.2.11",
                    "prevs": [
                        "1.2.10"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "⊢ ¬¬(f x = neutral op) ⟷ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "1.2.12",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "support op f s = ∅, x ∈ s ⊢ ¬¬(f x = neutral op) ⟶ f x = neutral op"
                },
                {
                    "args": "¬¬(f x = neutral op)",
                    "id": "1.2.12.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬¬(f x = neutral op) ⊢ ¬¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.2.12.1",
                    "prevs": [
                        "1.2.11",
                        "1.2.12.0"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "¬¬(f x = neutral op) ⊢ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "1.2.12.2",
                    "prevs": [
                        "1.2.12.0",
                        "1.2.12.1"
                    ],
                    "rule": "intros",
                    "th": "support op f s = ∅, x ∈ s ⊢ ¬¬(f x = neutral op) ⟶ f x = neutral op"
                },
                {
                    "args": "disjE",
                    "id": "1.2.13",
                    "prevs": [
                        "1.2.8",
                        "1.2.9",
                        "1.2.12"
                    ],
                    "rule": "apply_theorem",
                    "th": "support op f s = ∅, x ∈ s ⊢ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "1.2.14",
                    "prevs": [
                        "1.2.0",
                        "1.2.1",
                        "1.2.13"
                    ],
                    "rule": "intros",
                    "th": "support op f s = ∅ ⊢ ∀x. x ∈ s ⟶ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [
                        "1.0",
                        "1.2"
                    ],
                    "rule": "intros",
                    "th": "⊢ support op f s = ∅ ⟶ (∀x. x ∈ s ⟶ f x = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ (∀x. x ∈ s ⟶ f x = neutral op) ⟷ support op f s = ∅"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. x ∈ s ⟶ f x = neutral op) ⟷ support op f s = ∅"
                }
            ],
            "prop": "(∀x. x ∈ s ⟶ f x = neutral op) ⟷ support op f s = ∅",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_empty_simp"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.1.0"
                    ],
                    "goal_id": "0.1.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.1.1.0"
                    ],
                    "goal_id": "0.1.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0.0",
                        "0.1.1.1"
                    ],
                    "goal_id": "0.1.1.3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "0.1.1.2"
                    ],
                    "goal_id": "0.1.1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "negE"
                },
                {
                    "fact_ids": [
                        "0.1.1.3",
                        "0.1.1.2"
                    ],
                    "goal_id": "0.1.1.4",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "goal_id": "0.1.2",
                    "method_name": "z3"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "set_equal_iff"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2.2",
                    "method_name": "forall_elim",
                    "s": "x"
                },
                {
                    "fact_ids": [
                        "1.2.2"
                    ],
                    "goal_id": "1.2.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "fact_ids": [
                        "1.2.3"
                    ],
                    "goal_id": "1.2.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_empty_simp"
                },
                {
                    "goal": "x ∈ s ∧ ¬(f x = neutral op) --> false",
                    "goal_id": "1.2.5",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.2.5",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.2.4",
                        "1.2.5.0"
                    ],
                    "goal_id": "1.2.5.1",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "goal": "~(x ∈ s ∧ ¬(f x = neutral op))",
                    "goal_id": "1.2.6",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "1.2.4"
                    ],
                    "goal_id": "1.2.6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1.2.6",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "1.2.7"
                    ],
                    "goal_id": "1.2.8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "de_morgan_thm1"
                },
                {
                    "fact_ids": [
                        "1.2.8"
                    ],
                    "goal_id": "1.2.9",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "1.2.9",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.2.9.0",
                        "1.2.1"
                    ],
                    "goal_id": "1.2.9.1",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal": "!A::bool. (~~A) = A",
                    "goal_id": "1.2.10",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.2.10",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "1.2.10"
                    ],
                    "goal_id": "1.2.11",
                    "method_name": "forall_elim",
                    "s": "(f x = neutral op)"
                },
                {
                    "goal_id": "1.2.12",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.2.11",
                        "1.2.12.0"
                    ],
                    "goal_id": "1.2.12.1",
                    "method_name": "rewrite_fact_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "support_subset",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x. x ∈ support op f s ⟶ x ∈ s"
                },
                {
                    "args": "x, 'b",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ support op f s",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op f s ⊢ x ∈ support op f s"
                },
                {
                    "args": "in_support",
                    "id": "0.2",
                    "prevs": [
                        "0.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ support op f s ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.3",
                    "prevs": [
                        "0.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ support op f s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "0.4",
                    "prevs": [
                        "0.0",
                        "0.1",
                        "0.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. x ∈ support op f s ⟶ x ∈ s"
                },
                {
                    "args": "subsetI",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ support op f s ⊆ s"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ support op f s ⊆ s"
                }
            ],
            "prop": "support op f s ⊆ s",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "0.1"
                    ],
                    "goal_id": "0.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "fact_ids": [
                        "0.2"
                    ],
                    "goal_id": "0.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "finite_support",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "support_subset, {f: f, op: op, s: s}",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ support op f s ⊆ s"
                },
                {
                    "args": "finite_subset",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ finite (support op f s)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite (support op f s)"
                }
            ],
            "prop": "finite s ⟶ finite (support op f s)",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "param_t": "s",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "support_subset"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "support_empty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "{x. x ∈ ∅ ∧ ¬(f x = neutral op)} = ∅",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ {x. x ∈ ∅ ∧ ¬(f x = neutral op)} = ∅"
                },
                {
                    "args": "support_def, support op f ∅ = ∅",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ support op f ∅ = ∅"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ support op f ∅ = ∅"
                }
            ],
            "prop": "support op f ∅ = ∅",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "support_insert",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ f x = neutral op ⟶ support op f (insert x s) = (if f x = neutral op then support op f s else insert x (support op f s))"
                },
                {
                    "args": "f x = neutral op",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "f x = neutral op ⊢ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "f x = neutral op ⊢ ∀x1. x1 ∈ {x11. (x11 = x ∨ x11 ∈ s) ∧ ¬(f x11 = neutral op)} ⟷ x1 ∈ {x2. x2 ∈ s ∧ ¬(f x2 = neutral op)}"
                },
                {
                    "args": "x1, 'b",
                    "id": "0.1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "",
                    "id": "0.1.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "f x = neutral op ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⟶ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "(x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)",
                    "id": "0.1.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.1.1.1",
                    "prevs": [
                        "0.1.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "0.1.1.2",
                    "prevs": [
                        "0.1.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.1.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "f x = neutral op, (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 = x ⟶ x1 ∈ s"
                },
                {
                    "args": "x1 = x",
                    "id": "0.1.1.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 = x ⊢ x1 = x"
                },
                {
                    "args": "",
                    "id": "0.1.1.3.1",
                    "prevs": [
                        "0.1.1.3.0",
                        "0.1.1.2"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "x1 = x, (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "negE_gen, {A: f x = neutral op, C: x1 ∈ s}",
                    "id": "0.1.1.3.2",
                    "prevs": [
                        "0.1.1.3.1",
                        "0.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x1 = x, f x = neutral op, (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "0.1.1.3.3",
                    "prevs": [
                        "0.1.1.3.0",
                        "0.1.1.3.2"
                    ],
                    "rule": "intros",
                    "th": "f x = neutral op, (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 = x ⟶ x1 ∈ s"
                },
                {
                    "args": "x1 ∈ s ⟶ x1 ∈ s",
                    "id": "0.1.1.4",
                    "prevs": [],
                    "rule": "trivial",
                    "th": "⊢ x1 ∈ s ⟶ x1 ∈ s"
                },
                {
                    "args": "disjE",
                    "id": "0.1.1.5",
                    "prevs": [
                        "0.1.1.1",
                        "0.1.1.3",
                        "0.1.1.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "f x = neutral op, (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s"
                },
                {
                    "args": "conjI",
                    "id": "0.1.1.6",
                    "prevs": [
                        "0.1.1.5",
                        "0.1.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "f x = neutral op, (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.1.7",
                    "prevs": [
                        "0.1.1.0",
                        "0.1.1.6"
                    ],
                    "rule": "intros",
                    "th": "f x = neutral op ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⟶ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "f x = neutral op ⊢ x1 ∈ s ∧ ¬(f x1 = neutral op) ⟶ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "x1 ∈ s ∧ ¬(f x1 = neutral op)",
                    "id": "0.1.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.1.2.1",
                    "prevs": [
                        "0.1.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "0.1.2.2",
                    "prevs": [
                        "0.1.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ ¬(f x1 = neutral op)"
                },
                {
                    "args": "disjI2, {A: x1 = x, B: x1 ∈ s}",
                    "id": "0.1.2.3",
                    "prevs": [
                        "0.1.2.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "f x = neutral op, x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "conjI",
                    "id": "0.1.2.4",
                    "prevs": [
                        "0.1.2.3",
                        "0.1.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "f x = neutral op, x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.2.5",
                    "prevs": [
                        "0.1.2.0",
                        "0.1.2.4"
                    ],
                    "rule": "intros",
                    "th": "f x = neutral op ⊢ x1 ∈ s ∧ ¬(f x1 = neutral op) ⟶ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "0.1.3",
                    "prevs": [
                        "0.1.1",
                        "0.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "f x = neutral op ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⟷ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "member_collect, x1 ∈ {x11. (x11 = x ∨ x11 ∈ s) ∧ ¬(f x11 = neutral op)} ⟷ x1 ∈ {x2. x2 ∈ s ∧ ¬(f x2 = neutral op)}",
                    "id": "0.1.4",
                    "prevs": [
                        "0.1.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "f x = neutral op ⊢ x1 ∈ {x11. (x11 = x ∨ x11 ∈ s) ∧ ¬(f x11 = neutral op)} ⟷ x1 ∈ {x2. x2 ∈ s ∧ ¬(f x2 = neutral op)}"
                },
                {
                    "args": "",
                    "id": "0.1.5",
                    "prevs": [
                        "0.1.0",
                        "0.1.4"
                    ],
                    "rule": "intros",
                    "th": "f x = neutral op ⊢ ∀x1. x1 ∈ {x11. (x11 = x ∨ x11 ∈ s) ∧ ¬(f x11 = neutral op)} ⟷ x1 ∈ {x2. x2 ∈ s ∧ ¬(f x2 = neutral op)}"
                },
                {
                    "args": "member_insert, ∀x1. x1 ∈ {x2. x2 ∈ insert x s ∧ ¬(f x2 = neutral op)} ⟷ x1 ∈ {x2. x2 ∈ s ∧ ¬(f x2 = neutral op)}",
                    "id": "0.2",
                    "prevs": [
                        "0.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "f x = neutral op ⊢ ∀x1. x1 ∈ {x2. x2 ∈ insert x s ∧ ¬(f x2 = neutral op)} ⟷ x1 ∈ {x2. x2 ∈ s ∧ ¬(f x2 = neutral op)}"
                },
                {
                    "args": "member_ext",
                    "id": "0.3",
                    "prevs": [
                        "0.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "f x = neutral op ⊢ {x1. x1 ∈ insert x s ∧ ¬(f x1 = neutral op)} = {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "support_def, support op f (insert x s) = support op f s",
                    "id": "0.4",
                    "prevs": [
                        "0.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "f x = neutral op ⊢ support op f (insert x s) = support op f s"
                },
                {
                    "args": "if_P, support op f (insert x s) = (if f x = neutral op then support op f s else insert x (support op f s))",
                    "id": "0.5",
                    "prevs": [
                        "0.4",
                        "0.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "f x = neutral op ⊢ support op f (insert x s) = (if f x = neutral op then support op f s else insert x (support op f s))"
                },
                {
                    "args": "",
                    "id": "0.6",
                    "prevs": [
                        "0.0",
                        "0.5"
                    ],
                    "rule": "intros",
                    "th": "⊢ f x = neutral op ⟶ support op f (insert x s) = (if f x = neutral op then support op f s else insert x (support op f s))"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ¬(f x = neutral op) ⟶ support op f (insert x s) = (if f x = neutral op then support op f s else insert x (support op f s))"
                },
                {
                    "args": "¬(f x = neutral op)",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(f x = neutral op) ⊢ ∀x1. (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⟷ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "x1, 'b",
                    "id": "1.1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "",
                    "id": "1.1.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(f x = neutral op) ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⟶ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "(x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)",
                    "id": "1.1.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "1.1.1.1",
                    "prevs": [
                        "1.1.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "1.1.1.2",
                    "prevs": [
                        "1.1.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.1.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(f x = neutral op), (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 = x ⟶ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "x1 = x",
                    "id": "1.1.1.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 = x ⊢ x1 = x"
                },
                {
                    "args": "disjI1, {A: x1 = x, B: x1 ∈ s ∧ ¬(f x1 = neutral op)}",
                    "id": "1.1.1.3.1",
                    "prevs": [
                        "1.1.1.3.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x1 = x, ¬(f x = neutral op), (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.1.3.2",
                    "prevs": [
                        "1.1.1.3.0",
                        "1.1.1.3.1"
                    ],
                    "rule": "intros",
                    "th": "¬(f x = neutral op), (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 = x ⟶ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.1.4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(f x = neutral op), (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s ⟶ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "x1 ∈ s",
                    "id": "1.1.1.4.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "conjI",
                    "id": "1.1.1.4.1",
                    "prevs": [
                        "1.1.1.4.0",
                        "1.1.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s, ¬(f x = neutral op), (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "disjI2, {A: x1 = x, B: x1 ∈ s ∧ ¬(f x1 = neutral op)}",
                    "id": "1.1.1.4.2",
                    "prevs": [
                        "1.1.1.4.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x1 ∈ s, ¬(f x = neutral op), (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.1.4.3",
                    "prevs": [
                        "1.1.1.4.0",
                        "1.1.1.4.2"
                    ],
                    "rule": "intros",
                    "th": "¬(f x = neutral op), (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s ⟶ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "disjE",
                    "id": "1.1.1.5",
                    "prevs": [
                        "1.1.1.1",
                        "1.1.1.3",
                        "1.1.1.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(f x = neutral op), (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⊢ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.1.6",
                    "prevs": [
                        "1.1.1.0",
                        "1.1.1.5"
                    ],
                    "rule": "intros",
                    "th": "¬(f x = neutral op) ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⟶ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(f x = neutral op) ⊢ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⟶ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)",
                    "id": "1.1.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(f x = neutral op), x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 = x ⟶ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "x1 = x",
                    "id": "1.1.2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 = x ⊢ x1 = x"
                },
                {
                    "args": "disjI1, {A: x1 = x, B: x1 ∈ s}",
                    "id": "1.1.2.1.1",
                    "prevs": [
                        "1.1.2.1.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x1 = x, ¬(f x = neutral op), x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "¬(f x1 = neutral op)",
                    "id": "1.1.2.1.2",
                    "prevs": [
                        "1.1.2.1.0",
                        "1.0"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "x1 = x, ¬(f x = neutral op), x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ ¬(f x1 = neutral op)"
                },
                {
                    "args": "conjI",
                    "id": "1.1.2.1.3",
                    "prevs": [
                        "1.1.2.1.1",
                        "1.1.2.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 = x, ¬(f x = neutral op), x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.2.1.4",
                    "prevs": [
                        "1.1.2.1.0",
                        "1.1.2.1.3"
                    ],
                    "rule": "intros",
                    "th": "¬(f x = neutral op), x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 = x ⟶ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(f x = neutral op), x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s ∧ ¬(f x1 = neutral op) ⟶ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "x1 ∈ s ∧ ¬(f x1 = neutral op)",
                    "id": "1.1.2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "1.1.2.2.1",
                    "prevs": [
                        "1.1.2.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "1.1.2.2.2",
                    "prevs": [
                        "1.1.2.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ ¬(f x1 = neutral op)"
                },
                {
                    "args": "disjI2, {A: x1 = x, B: x1 ∈ s}",
                    "id": "1.1.2.2.3",
                    "prevs": [
                        "1.1.2.2.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "¬(f x = neutral op), x1 ∈ s ∧ ¬(f x1 = neutral op), x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "conjI",
                    "id": "1.1.2.2.4",
                    "prevs": [
                        "1.1.2.2.3",
                        "1.1.2.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(f x = neutral op), x1 ∈ s ∧ ¬(f x1 = neutral op), x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.2.2.5",
                    "prevs": [
                        "1.1.2.2.0",
                        "1.1.2.2.4"
                    ],
                    "rule": "intros",
                    "th": "¬(f x = neutral op), x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ x1 ∈ s ∧ ¬(f x1 = neutral op) ⟶ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "disjE",
                    "id": "1.1.2.3",
                    "prevs": [
                        "1.1.2.0",
                        "1.1.2.1",
                        "1.1.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(f x = neutral op), x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.2.4",
                    "prevs": [
                        "1.1.2.0",
                        "1.1.2.3"
                    ],
                    "rule": "intros",
                    "th": "¬(f x = neutral op) ⊢ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op) ⟶ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "1.1.3",
                    "prevs": [
                        "1.1.1",
                        "1.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(f x = neutral op) ⊢ (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⟷ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "",
                    "id": "1.1.4",
                    "prevs": [
                        "1.1.0",
                        "1.1.3"
                    ],
                    "rule": "intros",
                    "th": "¬(f x = neutral op) ⊢ ∀x1. (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⟷ x1 = x ∨ x1 ∈ s ∧ ¬(f x1 = neutral op)"
                },
                {
                    "args": "in_support, ∀x1. (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⟷ x1 = x ∨ x1 ∈ support op f s",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(f x = neutral op) ⊢ ∀x1. (x1 = x ∨ x1 ∈ s) ∧ ¬(f x1 = neutral op) ⟷ x1 = x ∨ x1 ∈ support op f s"
                },
                {
                    "args": "member_insert, ∀x1. x1 ∈ insert x s ∧ ¬(f x1 = neutral op) ⟷ x1 ∈ insert x (support op f s)",
                    "id": "1.3",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(f x = neutral op) ⊢ ∀x1. x1 ∈ insert x s ∧ ¬(f x1 = neutral op) ⟷ x1 ∈ insert x (support op f s)"
                },
                {
                    "args": "in_support, ∀x1. x1 ∈ support op f (insert x s) ⟷ x1 ∈ insert x (support op f s)",
                    "id": "1.4",
                    "prevs": [
                        "1.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(f x = neutral op) ⊢ ∀x1. x1 ∈ support op f (insert x s) ⟷ x1 ∈ insert x (support op f s)"
                },
                {
                    "args": "member_ext",
                    "id": "1.5",
                    "prevs": [
                        "1.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(f x = neutral op) ⊢ support op f (insert x s) = insert x (support op f s)"
                },
                {
                    "args": "if_not_P, support op f (insert x s) = (if f x = neutral op then support op f s else insert x (support op f s))",
                    "id": "1.6",
                    "prevs": [
                        "1.5",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(f x = neutral op) ⊢ support op f (insert x s) = (if f x = neutral op then support op f s else insert x (support op f s))"
                },
                {
                    "args": "",
                    "id": "1.7",
                    "prevs": [
                        "1.0",
                        "1.6"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(f x = neutral op) ⟶ support op f (insert x s) = (if f x = neutral op then support op f s else insert x (support op f s))"
                },
                {
                    "args": "classical_cases",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ support op f (insert x s) = (if f x = neutral op then support op f s else insert x (support op f s))"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ support op f (insert x s) = (if f x = neutral op then support op f s else insert x (support op f s))"
                }
            ],
            "prop": [
                "support op f (insert x s) = ",
                "(if f x = neutral op then support op f s else insert x (support op f s))"
            ],
            "steps": [
                {
                    "case": "f x = neutral op",
                    "goal_id": "0",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.1.0"
                    ],
                    "goal_id": "0.1.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.1.1.0"
                    ],
                    "goal_id": "0.1.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "0.1.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "0.1.1.1"
                    ],
                    "goal_id": "0.1.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "0.1.1.3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.1.3.0",
                        "0.1.1.2"
                    ],
                    "goal_id": "0.1.1.3.1",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "0.1.1.3.1",
                        "0.0"
                    ],
                    "goal_id": "0.1.1.3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "0.1.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.2.0"
                    ],
                    "goal_id": "0.1.2.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.1.2.0"
                    ],
                    "goal_id": "0.1.2.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "0.1.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.1.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "goal_id": "1.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "1.1.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.1.1.0"
                    ],
                    "goal_id": "1.1.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1.1.1.0"
                    ],
                    "goal_id": "1.1.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "1.1.1.1"
                    ],
                    "goal_id": "1.1.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "1.1.1.3",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "1.1.1.3.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "1.1.1.4",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "1.1.1.4.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "1.1.1.4.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "1.1.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.1.2.0"
                    ],
                    "goal_id": "1.1.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "1.1.2.1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "1.1.2.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "1.1.2.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "fact_ids": [
                        "1.1.2.1.0"
                    ],
                    "goal_id": "1.1.2.1.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1.1.2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.1.2.2.0"
                    ],
                    "goal_id": "1.1.2.2.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1.1.2.2.0"
                    ],
                    "goal_id": "1.1.2.2.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "1.1.2.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "1.1.2.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "x": "'b"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "support_union",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x. x ∈ {x1. (x1 ∈ s ∨ x1 ∈ t) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∨ x ∈ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "x, 'b",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⟶ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "(x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op)",
                    "id": "0.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.1.1",
                    "prevs": [
                        "0.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ s ∨ x ∈ t"
                },
                {
                    "args": "conjD2",
                    "id": "0.1.2",
                    "prevs": [
                        "0.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "(x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ s ⟶ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ s",
                    "id": "0.1.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "conjI",
                    "id": "0.1.3.1",
                    "prevs": [
                        "0.1.3.0",
                        "0.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s, (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "disjI1, {A: x ∈ s ∧ ¬(f x = neutral op), B: x ∈ t ∧ ¬(f x = neutral op)}",
                    "id": "0.1.3.2",
                    "prevs": [
                        "0.1.3.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x ∈ s, (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.3.3",
                    "prevs": [
                        "0.1.3.0",
                        "0.1.3.2"
                    ],
                    "rule": "intros",
                    "th": "(x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ s ⟶ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "(x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ t ⟶ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ t",
                    "id": "0.1.4.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ⊢ x ∈ t"
                },
                {
                    "args": "conjI",
                    "id": "0.1.4.1",
                    "prevs": [
                        "0.1.4.0",
                        "0.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ t, (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "disjI2, {A: x ∈ s ∧ ¬(f x = neutral op), B: x ∈ t ∧ ¬(f x = neutral op)}",
                    "id": "0.1.4.2",
                    "prevs": [
                        "0.1.4.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x ∈ t, (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.4.3",
                    "prevs": [
                        "0.1.4.0",
                        "0.1.4.2"
                    ],
                    "rule": "intros",
                    "th": "(x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ t ⟶ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "disjE",
                    "id": "0.1.5",
                    "prevs": [
                        "0.1.1",
                        "0.1.3",
                        "0.1.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.6",
                    "prevs": [
                        "0.1.0",
                        "0.1.5"
                    ],
                    "rule": "intros",
                    "th": "⊢ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⟶ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)",
                    "id": "0.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ s ∧ ¬(f x = neutral op)",
                    "id": "0.2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.2.1.1",
                    "prevs": [
                        "0.2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "0.2.1.2",
                    "prevs": [
                        "0.2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "disjI1, {A: x ∈ s, B: x ∈ t}",
                    "id": "0.2.1.3",
                    "prevs": [
                        "0.2.1.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x ∈ s ∧ ¬(f x = neutral op), x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ s ∨ x ∈ t"
                },
                {
                    "args": "conjI",
                    "id": "0.2.1.4",
                    "prevs": [
                        "0.2.1.3",
                        "0.2.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral op), x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.1.5",
                    "prevs": [
                        "0.2.1.0",
                        "0.2.1.4"
                    ],
                    "rule": "intros",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ t ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ t ∧ ¬(f x = neutral op)",
                    "id": "0.2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD2",
                    "id": "0.2.2.1",
                    "prevs": [
                        "0.2.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ t ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.2.2.2",
                    "prevs": [
                        "0.2.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ t"
                },
                {
                    "args": "disjI2, {A: x ∈ s, B: x ∈ t}",
                    "id": "0.2.2.3",
                    "prevs": [
                        "0.2.2.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x ∈ t ∧ ¬(f x = neutral op), x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ s ∨ x ∈ t"
                },
                {
                    "args": "conjI",
                    "id": "0.2.2.4",
                    "prevs": [
                        "0.2.2.3",
                        "0.2.2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ t ∧ ¬(f x = neutral op), x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.2.5",
                    "prevs": [
                        "0.2.2.0",
                        "0.2.2.4"
                    ],
                    "rule": "intros",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ t ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "disjE",
                    "id": "0.2.3",
                    "prevs": [
                        "0.2.0",
                        "0.2.1",
                        "0.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.4",
                    "prevs": [
                        "0.2.0",
                        "0.2.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "0.3",
                    "prevs": [
                        "0.1",
                        "0.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ (x ∈ s ∨ x ∈ t) ∧ ¬(f x = neutral op) ⟷ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "member_collect, x ∈ {x1. (x1 ∈ s ∨ x1 ∈ t) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∨ x ∈ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}",
                    "id": "0.4",
                    "prevs": [
                        "0.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ x ∈ {x1. (x1 ∈ s ∨ x1 ∈ t) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∨ x ∈ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "",
                    "id": "0.5",
                    "prevs": [
                        "0.0",
                        "0.4"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. x ∈ {x1. (x1 ∈ s ∨ x1 ∈ t) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∨ x ∈ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "member_union_iff, ∀x. x ∈ {x1. x1 ∈ s ∪ t ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∪ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ {x1. x1 ∈ s ∪ t ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∪ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "member_ext",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ {x. x ∈ s ∪ t ∧ ¬(f x = neutral op)} = {x. x ∈ s ∧ ¬(f x = neutral op)} ∪ {x. x ∈ t ∧ ¬(f x = neutral op)}"
                },
                {
                    "args": "support_def, support op f (s ∪ t) = support op f s ∪ support op f t",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ support op f (s ∪ t) = support op f s ∪ support op f t"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ support op f (s ∪ t) = support op f s ∪ support op f t"
                }
            ],
            "prop": "support op f (s ∪ t) = support op f s ∪ support op f t",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_union_iff"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0.1.1"
                    ],
                    "goal_id": "0.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "0.1.3",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "0.1.3.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "0.1.3.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.1.4",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "0.1.4.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "0.1.4.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.0"
                    ],
                    "goal_id": "0.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "0.2.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.1.0"
                    ],
                    "goal_id": "0.2.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.2.1.0"
                    ],
                    "goal_id": "0.2.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "0.2.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.2.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "0.2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.2.0"
                    ],
                    "goal_id": "0.2.2.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "0.2.2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.2.2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "fact_ids": [
                        "0.2.2.0"
                    ],
                    "goal_id": "0.2.2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "support_inter",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x. x ∈ {x1. (x1 ∈ s ∧ x1 ∈ t) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∧ x ∈ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "x, 'b",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "(x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op)",
                    "id": "0.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.1.1",
                    "prevs": [
                        "0.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ x ∈ t"
                },
                {
                    "args": "conjD2",
                    "id": "0.1.2",
                    "prevs": [
                        "0.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.1.3",
                    "prevs": [
                        "0.1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "0.1.4",
                    "prevs": [
                        "0.1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ t"
                },
                {
                    "args": "conjI",
                    "id": "0.1.5",
                    "prevs": [
                        "0.1.3",
                        "0.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjI",
                    "id": "0.1.6",
                    "prevs": [
                        "0.1.4",
                        "0.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op) ⊢ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjI",
                    "id": "0.1.7",
                    "prevs": [
                        "0.1.5",
                        "0.1.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.8",
                    "prevs": [
                        "0.1.0",
                        "0.1.7"
                    ],
                    "rule": "intros",
                    "th": "⊢ (x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op)",
                    "id": "0.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.2.1",
                    "prevs": [
                        "0.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD2",
                    "id": "0.2.2",
                    "prevs": [
                        "0.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.2.3",
                    "prevs": [
                        "0.2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "0.2.4",
                    "prevs": [
                        "0.2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.2.5",
                    "prevs": [
                        "0.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ t"
                },
                {
                    "args": "conjI",
                    "id": "0.2.6",
                    "prevs": [
                        "0.2.3",
                        "0.2.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ x ∈ t"
                },
                {
                    "args": "conjI",
                    "id": "0.2.7",
                    "prevs": [
                        "0.2.6",
                        "0.2.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.8",
                    "prevs": [
                        "0.2.0",
                        "0.2.7"
                    ],
                    "rule": "intros",
                    "th": "⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "0.3",
                    "prevs": [
                        "0.1",
                        "0.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ (x ∈ s ∧ x ∈ t) ∧ ¬(f x = neutral op) ⟷ (x ∈ s ∧ ¬(f x = neutral op)) ∧ x ∈ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "member_collect, x ∈ {x1. (x1 ∈ s ∧ x1 ∈ t) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∧ x ∈ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}",
                    "id": "0.4",
                    "prevs": [
                        "0.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ x ∈ {x1. (x1 ∈ s ∧ x1 ∈ t) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∧ x ∈ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "",
                    "id": "0.5",
                    "prevs": [
                        "0.0",
                        "0.4"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. x ∈ {x1. (x1 ∈ s ∧ x1 ∈ t) ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∧ x ∈ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "member_inter_iff, ∀x. x ∈ {x1. x1 ∈ s ∩ t ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∩ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ {x1. x1 ∈ s ∩ t ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∩ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "member_ext",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ {x. x ∈ s ∩ t ∧ ¬(f x = neutral op)} = {x. x ∈ s ∧ ¬(f x = neutral op)} ∩ {x. x ∈ t ∧ ¬(f x = neutral op)}"
                },
                {
                    "args": "support_def, support op f (s ∩ t) = support op f s ∩ support op f t",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ support op f (s ∩ t) = support op f s ∩ support op f t"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ support op f (s ∩ t) = support op f s ∩ support op f t"
                }
            ],
            "prop": "support op f (s ∩ t) = support op f s ∩ support op f t",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_inter_iff"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0.1.1"
                    ],
                    "goal_id": "0.1.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.1.1"
                    ],
                    "goal_id": "0.1.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "0.1.5",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.1.6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.0"
                    ],
                    "goal_id": "0.2.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.2.0"
                    ],
                    "goal_id": "0.2.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0.2.1"
                    ],
                    "goal_id": "0.2.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.2.1"
                    ],
                    "goal_id": "0.2.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0.2.2"
                    ],
                    "goal_id": "0.2.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "goal_id": "0.2.6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.2.6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "support_diff",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x. (x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⟷ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op))"
                },
                {
                    "args": "x, 'b",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op))"
                },
                {
                    "args": "(x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op)",
                    "id": "0.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.1.1",
                    "prevs": [
                        "0.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(x ∈ t)"
                },
                {
                    "args": "conjD2",
                    "id": "0.1.2",
                    "prevs": [
                        "0.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.1.3",
                    "prevs": [
                        "0.1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "0.1.4",
                    "prevs": [
                        "0.1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⊢ ¬(x ∈ t)"
                },
                {
                    "args": "conjI",
                    "id": "0.1.5",
                    "prevs": [
                        "0.1.3",
                        "0.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "disjI1, {A: ¬(x ∈ t), B: ¬¬(f x = neutral op)}",
                    "id": "0.1.6",
                    "prevs": [
                        "0.1.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "(x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⊢ ¬(x ∈ t) ∨ ¬¬(f x = neutral op)"
                },
                {
                    "args": "de_morgan_thm1, ¬(x ∈ t ∧ ¬(f x = neutral op))",
                    "id": "0.1.7",
                    "prevs": [
                        "0.1.6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "(x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⊢ ¬(x ∈ t ∧ ¬(f x = neutral op))"
                },
                {
                    "args": "conjI",
                    "id": "0.1.8",
                    "prevs": [
                        "0.1.5",
                        "0.1.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op))"
                },
                {
                    "args": "",
                    "id": "0.1.9",
                    "prevs": [
                        "0.1.0",
                        "0.1.8"
                    ],
                    "rule": "intros",
                    "th": "⊢ (x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⟶ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op))"
                },
                {
                    "args": "",
                    "id": "0.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⟶ (x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op))",
                    "id": "0.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op))"
                },
                {
                    "args": "conjD1",
                    "id": "0.2.1",
                    "prevs": [
                        "0.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD2",
                    "id": "0.2.2",
                    "prevs": [
                        "0.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ ¬(x ∈ t ∧ ¬(f x = neutral op))"
                },
                {
                    "args": "conjD1",
                    "id": "0.2.3",
                    "prevs": [
                        "0.2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "0.2.4",
                    "prevs": [
                        "0.2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "de_morgan_thm1",
                    "id": "0.2.5",
                    "prevs": [
                        "0.2.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ ¬(x ∈ t) ∨ ¬¬(f x = neutral op)"
                },
                {
                    "args": "¬(x ∈ t) ⟶ ¬(x ∈ t)",
                    "id": "0.2.6",
                    "prevs": [],
                    "rule": "trivial",
                    "th": "⊢ ¬(x ∈ t) ⟶ ¬(x ∈ t)"
                },
                {
                    "args": "",
                    "id": "0.2.7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ ¬¬(f x = neutral op) ⟶ ¬(x ∈ t)"
                },
                {
                    "args": "¬¬(f x = neutral op)",
                    "id": "0.2.7.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬¬(f x = neutral op) ⊢ ¬¬(f x = neutral op)"
                },
                {
                    "args": "negE_gen, {A: ¬(f x = neutral op), C: ¬(x ∈ t)}",
                    "id": "0.2.7.1",
                    "prevs": [
                        "0.2.7.0",
                        "0.2.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "¬¬(f x = neutral op), (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ ¬(x ∈ t)"
                },
                {
                    "args": "",
                    "id": "0.2.7.2",
                    "prevs": [
                        "0.2.7.0",
                        "0.2.7.1"
                    ],
                    "rule": "intros",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ ¬¬(f x = neutral op) ⟶ ¬(x ∈ t)"
                },
                {
                    "args": "disjE",
                    "id": "0.2.8",
                    "prevs": [
                        "0.2.5",
                        "0.2.6",
                        "0.2.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ ¬(x ∈ t)"
                },
                {
                    "args": "conjI",
                    "id": "0.2.9",
                    "prevs": [
                        "0.2.3",
                        "0.2.8"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ x ∈ s ∧ ¬(x ∈ t)"
                },
                {
                    "args": "conjI",
                    "id": "0.2.10",
                    "prevs": [
                        "0.2.9",
                        "0.2.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⊢ (x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.11",
                    "prevs": [
                        "0.2.0",
                        "0.2.10"
                    ],
                    "rule": "intros",
                    "th": "⊢ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op)) ⟶ (x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "0.3",
                    "prevs": [
                        "0.1",
                        "0.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ (x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⟷ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op))"
                },
                {
                    "args": "",
                    "id": "0.4",
                    "prevs": [
                        "0.0",
                        "0.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. (x ∈ s ∧ ¬(x ∈ t)) ∧ ¬(f x = neutral op) ⟷ (x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ t ∧ ¬(f x = neutral op))"
                },
                {
                    "args": "member_collect, ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(x1 ∈ t)} ∧ ¬(f x = neutral op) ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∧ ¬(x ∈ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)})",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(x1 ∈ t)} ∧ ¬(f x = neutral op) ⟷ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∧ ¬(x ∈ {x1. x1 ∈ t ∧ ¬(f x1 = neutral op)})"
                },
                {
                    "args": "member_collect, ∀x. x ∈ {x1. x1 ∈ {x2. x2 ∈ s ∧ ¬(x2 ∈ t)} ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ {x2. x2 ∈ s ∧ ¬(f x2 = neutral op)} ∧ ¬(x1 ∈ {x2. x2 ∈ t ∧ ¬(f x2 = neutral op)})}",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ {x1. x1 ∈ {x2. x2 ∈ s ∧ ¬(x2 ∈ t)} ∧ ¬(f x1 = neutral op)} ⟷ x ∈ {x1. x1 ∈ {x2. x2 ∈ s ∧ ¬(f x2 = neutral op)} ∧ ¬(x1 ∈ {x2. x2 ∈ t ∧ ¬(f x2 = neutral op)})}"
                },
                {
                    "args": "diff_def, ∀x. x ∈ {x1. x1 ∈ diff s t ∧ ¬(f x1 = neutral op)} ⟷ x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = neutral op)}) ({x1. x1 ∈ t ∧ ¬(f x1 = neutral op)})",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ {x1. x1 ∈ diff s t ∧ ¬(f x1 = neutral op)} ⟷ x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = neutral op)}) ({x1. x1 ∈ t ∧ ¬(f x1 = neutral op)})"
                },
                {
                    "args": "support_def, ∀x. x ∈ support op f (diff s t) ⟷ x ∈ diff (support op f s) (support op f t)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ support op f (diff s t) ⟷ x ∈ diff (support op f s) (support op f t)"
                },
                {
                    "args": "member_ext",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ support op f (diff s t) = diff (support op f s) (support op f t)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ support op f (diff s t) = diff (support op f s) (support op f t)"
                }
            ],
            "prop": "support op f (diff s t) = diff (support op f s) (support op f t)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0.1.1"
                    ],
                    "goal_id": "0.1.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.1.1"
                    ],
                    "goal_id": "0.1.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "0.1.5",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.1.5",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.1.6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "de_morgan_thm1"
                },
                {
                    "goal_id": "0.1.6",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "0.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.0"
                    ],
                    "goal_id": "0.2.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.2.0"
                    ],
                    "goal_id": "0.2.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0.2.1"
                    ],
                    "goal_id": "0.2.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.2.1"
                    ],
                    "goal_id": "0.2.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "0.2.5",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.2.5",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "0.2.2"
                    ],
                    "goal_id": "0.2.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "de_morgan_thm1"
                },
                {
                    "fact_ids": [
                        "0.2.5"
                    ],
                    "goal_id": "0.2.6",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "0.2.7",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.7.0",
                        "0.2.4"
                    ],
                    "goal_id": "0.2.7.1",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "support_image",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x. (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⟷ (∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op))"
                },
                {
                    "args": "x, 'c",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⟶ (∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op))"
                },
                {
                    "args": "(∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op)",
                    "id": "0.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⊢ (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.1.1",
                    "prevs": [
                        "0.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⊢ ∃x1. x = f x1 ∧ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "0.1.2",
                    "prevs": [
                        "0.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⊢ ¬(g x = neutral op)"
                },
                {
                    "args": "x1, 'b",
                    "id": "0.1.3",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x = f x1 ∧ x1 ∈ s",
                    "id": "0.1.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = f x1 ∧ x1 ∈ s ⊢ x = f x1 ∧ x1 ∈ s"
                },
                {
                    "args": "conjD1",
                    "id": "0.1.5",
                    "prevs": [
                        "0.1.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = f x1 ∧ x1 ∈ s ⊢ x = f x1"
                },
                {
                    "args": "",
                    "id": "0.1.6",
                    "prevs": [
                        "0.1.5",
                        "0.1.2"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "x = f x1 ∧ x1 ∈ s, (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⊢ ¬(g (f x1) = neutral op)"
                },
                {
                    "args": "conjI",
                    "id": "0.1.7",
                    "prevs": [
                        "0.1.4",
                        "0.1.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = f x1 ∧ x1 ∈ s, (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⊢ (x = f x1 ∧ x1 ∈ s) ∧ ¬(g (f x1) = neutral op)"
                },
                {
                    "args": "conj_assoc, x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op)",
                    "id": "0.1.8",
                    "prevs": [
                        "0.1.7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "x = f x1 ∧ x1 ∈ s, (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⊢ x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op)"
                },
                {
                    "args": "exI, {P: λx1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op), a: x1}",
                    "id": "0.1.9",
                    "prevs": [
                        "0.1.8"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x = f x1 ∧ x1 ∈ s, (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⊢ ∃a1. x = f a1 ∧ a1 ∈ s ∧ ¬(g (f a1) = neutral op)"
                },
                {
                    "args": "∃x1. x = f x1 ∧ x1 ∈ s",
                    "id": "0.1.10",
                    "prevs": [
                        "0.1.0",
                        "0.1.1",
                        "0.1.3",
                        "0.1.4",
                        "0.1.9"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⟶ (∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op))"
                },
                {
                    "args": "",
                    "id": "0.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op)) ⟶ (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op)",
                    "id": "0.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op) ⊢ ∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op)"
                },
                {
                    "args": "x1, 'b",
                    "id": "0.2.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op)",
                    "id": "0.2.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op) ⊢ x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.2.3",
                    "prevs": [
                        "0.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op) ⊢ x = f x1"
                },
                {
                    "args": "conj_assoc",
                    "id": "0.2.4",
                    "prevs": [
                        "0.2.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op) ⊢ (x = f x1 ∧ x1 ∈ s) ∧ ¬(g (f x1) = neutral op)"
                },
                {
                    "args": "conjD2",
                    "id": "0.2.5",
                    "prevs": [
                        "0.2.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op) ⊢ ¬(g (f x1) = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.2.6",
                    "prevs": [
                        "0.2.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op) ⊢ x = f x1 ∧ x1 ∈ s"
                },
                {
                    "args": "exI, {P: λa1. x = f a1 ∧ a1 ∈ s, a: x1}",
                    "id": "0.2.7",
                    "prevs": [
                        "0.2.6"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op) ⊢ ∃a1. x = f a1 ∧ a1 ∈ s"
                },
                {
                    "args": "¬(g x = neutral op)",
                    "id": "0.2.8",
                    "prevs": [
                        "0.2.3",
                        "0.2.5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op), ∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op) ⊢ ¬(g x = neutral op)"
                },
                {
                    "args": "conjI",
                    "id": "0.2.9",
                    "prevs": [
                        "0.2.7",
                        "0.2.8"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op), ∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op) ⊢ (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op)",
                    "id": "0.2.10",
                    "prevs": [
                        "0.2.0",
                        "0.2.0",
                        "0.2.1",
                        "0.2.2",
                        "0.2.9"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op)) ⟶ (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "0.3",
                    "prevs": [
                        "0.1",
                        "0.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⟷ (∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op))"
                },
                {
                    "args": "",
                    "id": "0.4",
                    "prevs": [
                        "0.0",
                        "0.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⟷ (∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬(g (f x1) = neutral op))"
                },
                {
                    "args": "comp_fun_def, ∀x. (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⟷ (∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬((g ∘ f) x1 = neutral op))",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⟷ (∃x1. x = f x1 ∧ x1 ∈ s ∧ ¬((g ∘ f) x1 = neutral op))"
                },
                {
                    "args": "in_support, ∀x. (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⟷ (∃x1. x = f x1 ∧ x1 ∈ support op (g ∘ f) s)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. (∃x1. x = f x1 ∧ x1 ∈ s) ∧ ¬(g x = neutral op) ⟷ (∃x1. x = f x1 ∧ x1 ∈ support op (g ∘ f) s)"
                },
                {
                    "args": "in_image, ∀x. x ∈ image f s ∧ ¬(g x = neutral op) ⟷ x ∈ image f (support op (g ∘ f) s)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ image f s ∧ ¬(g x = neutral op) ⟷ x ∈ image f (support op (g ∘ f) s)"
                },
                {
                    "args": "in_support, ∀x. x ∈ support op g (image f s) ⟷ x ∈ image f (support op (g ∘ f) s)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x. x ∈ support op g (image f s) ⟷ x ∈ image f (support op (g ∘ f) s)"
                },
                {
                    "args": "member_ext",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ support op g (image f s) = image f (support op (g ∘ f) s)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ support op g (image f s) = image f (support op (g ∘ f) s)"
                }
            ],
            "prop": "support op g (image f s) = image f (support op (g ∘ f) s)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "comp_fun_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0.1.1"
                    ],
                    "goal_id": "0.1.3",
                    "method_name": "exists_elim",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "0.1.4"
                    ],
                    "goal_id": "0.1.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "goal_id": "0.1.6",
                    "method_name": "inst_exists_goal",
                    "s": "x1"
                },
                {
                    "goal_id": "0.1.6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "conj_assoc"
                },
                {
                    "goal_id": "0.1.6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "0.1.5",
                        "0.1.2"
                    ],
                    "goal_id": "0.1.6",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "goal_id": "0.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.0"
                    ],
                    "goal_id": "0.2.1",
                    "method_name": "exists_elim",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "0.2.2"
                    ],
                    "goal_id": "0.2.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.2.2"
                    ],
                    "goal_id": "0.2.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "conj_assoc"
                },
                {
                    "fact_ids": [
                        "0.2.4"
                    ],
                    "goal_id": "0.2.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "0.2.6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "0.2.4"
                    ],
                    "goal_id": "0.2.6",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.2.6"
                    ],
                    "goal_id": "0.2.7",
                    "method_name": "apply_backward_step",
                    "theorem": "exI"
                },
                {
                    "fact_ids": [
                        "0.2.3"
                    ],
                    "goal_id": "0.2.8",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'c",
                "g": "'c ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "support_delta",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x. x ∈ support op (λx1. if x1 = a then f x1 else neutral op) s ⟷ x ∈ (if a ∈ s then support op f ({a}) else ∅)"
                },
                {
                    "args": "x, 'b",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ x = a ⟶ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⟷ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "x = a",
                    "id": "0.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = a ⊢ x = a"
                },
                {
                    "args": "",
                    "id": "0.1.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "x = a ⊢ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⟶ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op)",
                    "id": "0.1.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⊢ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op)"
                },
                {
                    "args": "if_P",
                    "id": "0.1.1.1",
                    "prevs": [
                        "0.1.1.0",
                        "0.1.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x = a, x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.1.1.2",
                    "prevs": [
                        "0.1.1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = a, x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "0.1.1.3",
                    "prevs": [
                        "0.1.1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = a, x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.1.4",
                    "prevs": [
                        "0.1.0",
                        "0.1.1.2"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "x = a, x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⊢ a ∈ s"
                },
                {
                    "args": "disjI1, {A: x = a, B: x ∈ ∅}",
                    "id": "0.1.1.5",
                    "prevs": [
                        "0.1.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x = a, x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⊢ x = a ∨ x ∈ ∅"
                },
                {
                    "args": "member_insert, x ∈ {a}",
                    "id": "0.1.1.6",
                    "prevs": [
                        "0.1.1.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "x = a, x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⊢ x ∈ {a}"
                },
                {
                    "args": "conjI",
                    "id": "0.1.1.7",
                    "prevs": [
                        "0.1.1.6",
                        "0.1.1.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = a, x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⊢ x ∈ {a} ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "member_collect, x ∈ {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)}",
                    "id": "0.1.1.8",
                    "prevs": [
                        "0.1.1.7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "x = a, x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⊢ x ∈ {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "if_P, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)",
                    "id": "0.1.1.9",
                    "prevs": [
                        "0.1.1.8",
                        "0.1.1.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "x = a, x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⊢ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "",
                    "id": "0.1.1.10",
                    "prevs": [
                        "0.1.1.0",
                        "0.1.1.9"
                    ],
                    "rule": "intros",
                    "th": "x = a ⊢ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⟶ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "",
                    "id": "0.1.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "x = a ⊢ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⟶ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op)"
                },
                {
                    "args": "x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)",
                    "id": "0.1.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "",
                    "id": "0.1.2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "x = a, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ a ∈ s ⟶ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "a ∈ s",
                    "id": "0.1.2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ⊢ a ∈ s"
                },
                {
                    "args": "if_P",
                    "id": "0.1.2.1.1",
                    "prevs": [
                        "0.1.2.0",
                        "0.1.2.1.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "a ∈ s, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "member_collect",
                    "id": "0.1.2.1.2",
                    "prevs": [
                        "0.1.2.1.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "a ∈ s, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ {a} ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD2",
                    "id": "0.1.2.1.3",
                    "prevs": [
                        "0.1.2.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "a ∈ s, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ s",
                    "id": "0.1.2.1.4",
                    "prevs": [
                        "0.1.0",
                        "0.1.2.1.0"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "x = a, a ∈ s, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ s"
                },
                {
                    "args": "conjI",
                    "id": "0.1.2.1.5",
                    "prevs": [
                        "0.1.2.1.4",
                        "0.1.2.1.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = a, a ∈ s, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.2.1.6",
                    "prevs": [
                        "0.1.2.1.0",
                        "0.1.2.1.5"
                    ],
                    "rule": "intros",
                    "th": "x = a, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ a ∈ s ⟶ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "x = a, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ ¬(a ∈ s) ⟶ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "¬(a ∈ s)",
                    "id": "0.1.2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s) ⊢ ¬(a ∈ s)"
                },
                {
                    "args": "if_not_P",
                    "id": "0.1.2.2.1",
                    "prevs": [
                        "0.1.2.0",
                        "0.1.2.2.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(a ∈ s), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ ∅"
                },
                {
                    "args": "member_empty, x ∈ s ∧ ¬(f x = neutral op)",
                    "id": "0.1.2.2.2",
                    "prevs": [
                        "0.1.2.2.1"
                    ],
                    "rule": "resolve_theorem",
                    "th": "¬(a ∈ s), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.2.2.3",
                    "prevs": [
                        "0.1.2.2.0",
                        "0.1.2.2.2"
                    ],
                    "rule": "intros",
                    "th": "x = a, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ ¬(a ∈ s) ⟶ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "classical_cases",
                    "id": "0.1.2.3",
                    "prevs": [
                        "0.1.2.1",
                        "0.1.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = a, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "if_P, x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op)",
                    "id": "0.1.2.4",
                    "prevs": [
                        "0.1.2.3",
                        "0.1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "x = a, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.1.2.5",
                    "prevs": [
                        "0.1.2.0",
                        "0.1.2.4"
                    ],
                    "rule": "intros",
                    "th": "x = a ⊢ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⟶ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "0.1.3",
                    "prevs": [
                        "0.1.1",
                        "0.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = a ⊢ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⟷ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "",
                    "id": "0.1.4",
                    "prevs": [
                        "0.1.0",
                        "0.1.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ x = a ⟶ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⟷ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "",
                    "id": "0.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ¬(x = a) ⟶ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⟷ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "¬(x = a)",
                    "id": "0.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x = a) ⊢ ¬(x = a)"
                },
                {
                    "args": "",
                    "id": "0.2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(x = a) ⊢ x ∈ s ∧ ¬(neutral op = neutral op) ⟶ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "x ∈ s ∧ ¬(neutral op = neutral op)",
                    "id": "0.2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(neutral op = neutral op) ⊢ x ∈ s ∧ ¬(neutral op = neutral op)"
                },
                {
                    "args": "conjD2",
                    "id": "0.2.1.1",
                    "prevs": [
                        "0.2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(neutral op = neutral op) ⊢ ¬(neutral op = neutral op)"
                },
                {
                    "args": "eq_refl, {x: neutral op}",
                    "id": "0.2.1.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ neutral op = neutral op"
                },
                {
                    "args": "negE_gen, {A: neutral op = neutral op, C: x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)}",
                    "id": "0.2.1.3",
                    "prevs": [
                        "0.2.1.1",
                        "0.2.1.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "¬(x = a), x ∈ s ∧ ¬(neutral op = neutral op) ⊢ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "",
                    "id": "0.2.1.4",
                    "prevs": [
                        "0.2.1.0",
                        "0.2.1.3"
                    ],
                    "rule": "intros",
                    "th": "¬(x = a) ⊢ x ∈ s ∧ ¬(neutral op = neutral op) ⟶ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "",
                    "id": "0.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(x = a) ⊢ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⟶ x ∈ s ∧ ¬(neutral op = neutral op)"
                },
                {
                    "args": "x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)",
                    "id": "0.2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "",
                    "id": "0.2.2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(x = a), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ a ∈ s ⟶ x ∈ s ∧ ¬(neutral op = neutral op)"
                },
                {
                    "args": "a ∈ s",
                    "id": "0.2.2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ⊢ a ∈ s"
                },
                {
                    "args": "if_P",
                    "id": "0.2.2.1.1",
                    "prevs": [
                        "0.2.2.0",
                        "0.2.2.1.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "a ∈ s, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)}"
                },
                {
                    "args": "member_collect",
                    "id": "0.2.2.1.2",
                    "prevs": [
                        "0.2.2.1.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "a ∈ s, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ {a} ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "0.2.2.1.3",
                    "prevs": [
                        "0.2.2.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "a ∈ s, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ {a}"
                },
                {
                    "args": "member_insert",
                    "id": "0.2.2.1.4",
                    "prevs": [
                        "0.2.2.1.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "a ∈ s, x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x = a ∨ x ∈ ∅"
                },
                {
                    "args": "",
                    "id": "0.2.2.1.5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "a ∈ s, ¬(x = a), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ ¬(x ∈ s ∧ ¬(neutral op = neutral op)) ⟶ ¬(x = a ∨ x ∈ ∅)"
                },
                {
                    "args": "¬(x ∈ s ∧ ¬(neutral op = neutral op))",
                    "id": "0.2.2.1.5.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s ∧ ¬(neutral op = neutral op)) ⊢ ¬(x ∈ s ∧ ¬(neutral op = neutral op))"
                },
                {
                    "args": "member_empty, {x: x}",
                    "id": "0.2.2.1.5.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ ¬(x ∈ ∅)"
                },
                {
                    "args": "conjI",
                    "id": "0.2.2.1.5.2",
                    "prevs": [
                        "0.2.0",
                        "0.2.2.1.5.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "a ∈ s, ¬(x = a), ¬(x ∈ s ∧ ¬(neutral op = neutral op)), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ ¬(x = a) ∧ ¬(x ∈ ∅)"
                },
                {
                    "args": "de_morgan_thm2, ¬(x = a ∨ x ∈ ∅)",
                    "id": "0.2.2.1.5.3",
                    "prevs": [
                        "0.2.2.1.5.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "a ∈ s, ¬(x = a), ¬(x ∈ s ∧ ¬(neutral op = neutral op)), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ ¬(x = a ∨ x ∈ ∅)"
                },
                {
                    "args": "",
                    "id": "0.2.2.1.5.4",
                    "prevs": [
                        "0.2.2.1.5.0",
                        "0.2.2.1.5.3"
                    ],
                    "rule": "intros",
                    "th": "a ∈ s, ¬(x = a), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ ¬(x ∈ s ∧ ¬(neutral op = neutral op)) ⟶ ¬(x = a ∨ x ∈ ∅)"
                },
                {
                    "args": "contrapositive",
                    "id": "0.2.2.1.6",
                    "prevs": [
                        "0.2.2.1.4",
                        "0.2.2.1.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "a ∈ s, ¬(x = a), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ s ∧ ¬(neutral op = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.2.1.7",
                    "prevs": [
                        "0.2.2.1.0",
                        "0.2.2.1.6"
                    ],
                    "rule": "intros",
                    "th": "¬(x = a), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ a ∈ s ⟶ x ∈ s ∧ ¬(neutral op = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(x = a), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ ¬(a ∈ s) ⟶ x ∈ s ∧ ¬(neutral op = neutral op)"
                },
                {
                    "args": "¬(a ∈ s)",
                    "id": "0.2.2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s) ⊢ ¬(a ∈ s)"
                },
                {
                    "args": "if_not_P",
                    "id": "0.2.2.2.1",
                    "prevs": [
                        "0.2.2.0",
                        "0.2.2.2.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(a ∈ s), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ ∅"
                },
                {
                    "args": "member_empty, x ∈ s ∧ ¬(neutral op = neutral op)",
                    "id": "0.2.2.2.2",
                    "prevs": [
                        "0.2.2.2.1"
                    ],
                    "rule": "resolve_theorem",
                    "th": "¬(a ∈ s), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ s ∧ ¬(neutral op = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.2.2.3",
                    "prevs": [
                        "0.2.2.2.0",
                        "0.2.2.2.2"
                    ],
                    "rule": "intros",
                    "th": "¬(x = a), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ ¬(a ∈ s) ⟶ x ∈ s ∧ ¬(neutral op = neutral op)"
                },
                {
                    "args": "classical_cases",
                    "id": "0.2.2.3",
                    "prevs": [
                        "0.2.2.1",
                        "0.2.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(x = a), x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⊢ x ∈ s ∧ ¬(neutral op = neutral op)"
                },
                {
                    "args": "",
                    "id": "0.2.2.4",
                    "prevs": [
                        "0.2.2.0",
                        "0.2.2.3"
                    ],
                    "rule": "intros",
                    "th": "¬(x = a) ⊢ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅) ⟶ x ∈ s ∧ ¬(neutral op = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "0.2.3",
                    "prevs": [
                        "0.2.1",
                        "0.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(x = a) ⊢ x ∈ s ∧ ¬(neutral op = neutral op) ⟷ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "if_not_P, x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⟷ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)",
                    "id": "0.2.4",
                    "prevs": [
                        "0.2.3",
                        "0.2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(x = a) ⊢ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⟷ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "",
                    "id": "0.2.5",
                    "prevs": [
                        "0.2.0",
                        "0.2.4"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(x = a) ⟶ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⟷ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "classical_cases",
                    "id": "0.3",
                    "prevs": [
                        "0.1",
                        "0.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ x ∈ s ∧ ¬((if x = a then f x else neutral op) = neutral op) ⟷ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "member_collect, x ∈ {x1. x1 ∈ s ∧ ¬((if x1 = a then f x1 else neutral op) = neutral op)} ⟷ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)",
                    "id": "0.4",
                    "prevs": [
                        "0.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ x ∈ {x1. x1 ∈ s ∧ ¬((if x1 = a then f x1 else neutral op) = neutral op)} ⟷ x ∈ (if a ∈ s then {x1. x1 ∈ {a} ∧ ¬(f x1 = neutral op)} else ∅)"
                },
                {
                    "args": "support_def, x ∈ support op (λx1. if x1 = a then f x1 else neutral op) s ⟷ x ∈ (if a ∈ s then support op f ({a}) else ∅)",
                    "id": "0.5",
                    "prevs": [
                        "0.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ x ∈ support op (λx1. if x1 = a then f x1 else neutral op) s ⟷ x ∈ (if a ∈ s then support op f ({a}) else ∅)"
                },
                {
                    "args": "",
                    "id": "0.6",
                    "prevs": [
                        "0.0",
                        "0.5"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. x ∈ support op (λx1. if x1 = a then f x1 else neutral op) s ⟷ x ∈ (if a ∈ s then support op f ({a}) else ∅)"
                },
                {
                    "args": "member_ext",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ support op (λx. if x = a then f x else neutral op) s = (if a ∈ s then support op f ({a}) else ∅)"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ support op (λx. if x = a then f x else neutral op) s = (if a ∈ s then support op f ({a}) else ∅)"
                }
            ],
            "prop": [
                "support op (λx. if x = a then f x else neutral op) s = ",
                "(if a ∈ s then support op f ({a}) else ∅)"
            ],
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "case": "x=a",
                    "goal_id": "0.1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.1.0",
                        "0.1.0"
                    ],
                    "goal_id": "0.1.1.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "0.1.1.1"
                    ],
                    "goal_id": "0.1.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.1.1.1"
                    ],
                    "goal_id": "0.1.1.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0.1.0",
                        "0.1.1.2"
                    ],
                    "goal_id": "0.1.1.4",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "0.1.1.4"
                    ],
                    "goal_id": "0.1.1.5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "0.1.1.5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "0.1.1.5",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.1.1.5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "0.1.1.5",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "0.1.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "case": "a ∈ s",
                    "goal_id": "0.1.2.1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0.1.2.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.2.0",
                        "0.1.2.1.0"
                    ],
                    "goal_id": "0.1.2.1.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "0.1.2.1.1"
                    ],
                    "goal_id": "0.1.2.1.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "0.1.2.1.2"
                    ],
                    "goal_id": "0.1.2.1.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "0.1.2.1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.2.1.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "0.1.2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.2.0",
                        "0.1.2.2.0"
                    ],
                    "goal_id": "0.1.2.2.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0.1.2.2.1"
                    ],
                    "goal_id": "0.1.2.2.2",
                    "method_name": "apply_resolve_step",
                    "theorem": "member_empty"
                },
                {
                    "goal_id": "0.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.0"
                    ],
                    "goal_id": "0.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "0.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "0.2.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.1.0"
                    ],
                    "goal_id": "0.2.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0.2.1.1"
                    ],
                    "goal_id": "0.2.1.2",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "0.2.1.2",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "goal_id": "0.2.2",
                    "method_name": "introduction"
                },
                {
                    "case": "a ∈ s",
                    "goal_id": "0.2.2.1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0.2.2.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.2.0",
                        "0.2.2.1.0"
                    ],
                    "goal_id": "0.2.2.1.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "0.2.2.1.1"
                    ],
                    "goal_id": "0.2.2.1.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "0.2.2.1.2"
                    ],
                    "goal_id": "0.2.2.1.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "0.2.2.1.3"
                    ],
                    "goal_id": "0.2.2.1.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "fact_ids": [
                        "0.2.2.1.4"
                    ],
                    "goal_id": "0.2.2.1.5",
                    "method_name": "apply_backward_step",
                    "theorem": "contrapositive"
                },
                {
                    "goal_id": "0.2.2.1.5",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "0.2.2.1.5.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "de_morgan_thm2"
                },
                {
                    "goal_id": "0.2.2.1.5.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0.2.2.1.5.1",
                    "method_name": "apply_backward_step",
                    "theorem": "member_empty"
                },
                {
                    "goal_id": "0.2.2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.2.0",
                        "0.2.2.2.0"
                    ],
                    "goal_id": "0.2.2.2.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0.2.2.2.1"
                    ],
                    "goal_id": "0.2.2.2.2",
                    "method_name": "apply_resolve_step",
                    "theorem": "member_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'b",
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "finite_support_delta",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ a ∈ s ⟶ finite (if a ∈ s then support op f ({a}) else ∅)"
                },
                {
                    "args": "a ∈ s",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ⊢ a ∈ s"
                },
                {
                    "args": "finite_empty, {}",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite (∅::'b set)"
                },
                {
                    "args": "finite_insert, {A: (∅::'b set), x: a}",
                    "id": "0.2",
                    "prevs": [
                        "0.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "a ∈ s ⊢ finite ({a})"
                },
                {
                    "args": "finite_support, {f: f, op: op, s: {a}}",
                    "id": "0.3",
                    "prevs": [
                        "0.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "a ∈ s ⊢ finite (support op f ({a}))"
                },
                {
                    "args": "if_P, finite (if a ∈ s then support op f ({a}) else ∅)",
                    "id": "0.4",
                    "prevs": [
                        "0.3",
                        "0.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "a ∈ s ⊢ finite (if a ∈ s then support op f ({a}) else ∅)"
                },
                {
                    "args": "",
                    "id": "0.5",
                    "prevs": [
                        "0.0",
                        "0.4"
                    ],
                    "rule": "intros",
                    "th": "⊢ a ∈ s ⟶ finite (if a ∈ s then support op f ({a}) else ∅)"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ¬(a ∈ s) ⟶ finite (if a ∈ s then support op f ({a}) else ∅)"
                },
                {
                    "args": "¬(a ∈ s)",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s) ⊢ ¬(a ∈ s)"
                },
                {
                    "args": "finite_empty, {}",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite (∅::'b set)"
                },
                {
                    "args": "if_not_P, finite (if a ∈ s then support op f ({a}) else ∅)",
                    "id": "1.2",
                    "prevs": [
                        "1.1",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(a ∈ s) ⊢ finite (if a ∈ s then support op f ({a}) else ∅)"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [
                        "1.0",
                        "1.2"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(a ∈ s) ⟶ finite (if a ∈ s then support op f ({a}) else ∅)"
                },
                {
                    "args": "classical_cases",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ finite (if a ∈ s then support op f ({a}) else ∅)"
                },
                {
                    "args": "support_delta, finite (support op (λx. if x = a then f x else neutral op) s)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ finite (support op (λx. if x = a then f x else neutral op) s)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite (support op (λx. if x = a then f x else neutral op) s)"
                }
            ],
            "prop": "finite (support op (λx. if x = a then f x else neutral op) s)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_delta"
                },
                {
                    "case": "a ∈ s",
                    "goal_id": "0",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_support"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_insert"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_empty"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'b",
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "iterate_support",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "support_support, (if finite (support op f (support op f s)) then itset (λx. λa. op (f x) a) (support op f (support op f s)) (neutral op) else neutral op) = (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op)",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ (if finite (support op f (support op f s)) then itset (λx. λa. op (f x) a) (support op f (support op f s)) (neutral op) else neutral op) = (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op)"
                },
                {
                    "args": "iterate_def, iterate op (support op f s) f = iterate op s f",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ iterate op (support op f s) f = iterate op s f"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ iterate op (support op f s) f = iterate op s f"
                }
            ],
            "prop": "iterate op (support op f s) f = iterate op s f",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_support"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "iterate_expand_cases",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ finite (support op f s) ⟶ (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op) = (if finite (support op f s) then if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op else neutral op)"
                },
                {
                    "args": "finite (support op f s)",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite (support op f s) ⊢ finite (support op f s)"
                },
                {
                    "args": "if_P, itset (λx. λa. op (f x) a) (support op f s) (neutral op) = (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op)",
                    "id": "0.1",
                    "prevs": [
                        "0.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite (support op f s) ⊢ itset (λx. λa. op (f x) a) (support op f s) (neutral op) = (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op)"
                },
                {
                    "args": "if_P, (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op) = (if finite (support op f s) then if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op else neutral op)",
                    "id": "0.2",
                    "prevs": [
                        "0.1",
                        "0.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite (support op f s) ⊢ (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op) = (if finite (support op f s) then if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op else neutral op)"
                },
                {
                    "args": "",
                    "id": "0.3",
                    "prevs": [
                        "0.0",
                        "0.2"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite (support op f s) ⟶ (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op) = (if finite (support op f s) then if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op else neutral op)"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ¬(finite (support op f s)) ⟶ (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op) = (if finite (support op f s) then if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op else neutral op)"
                },
                {
                    "args": "¬(finite (support op f s))",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(finite (support op f s)) ⊢ ¬(finite (support op f s))"
                },
                {
                    "args": "if_not_P, (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op) = (if finite (support op f s) then if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op else neutral op)",
                    "id": "1.1",
                    "prevs": [
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite (support op f s)) ⊢ (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op) = (if finite (support op f s) then if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op else neutral op)"
                },
                {
                    "args": "",
                    "id": "1.2",
                    "prevs": [
                        "1.0",
                        "1.1"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(finite (support op f s)) ⟶ (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op) = (if finite (support op f s) then if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op else neutral op)"
                },
                {
                    "args": "classical_cases",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op) = (if finite (support op f s) then if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op else neutral op)"
                },
                {
                    "args": "support_support, (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op) = (if finite (support op f s) then if finite (support op f (support op f s)) then itset (λx. λa. op (f x) a) (support op f (support op f s)) (neutral op) else neutral op else neutral op)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ (if finite (support op f s) then itset (λx. λa. op (f x) a) (support op f s) (neutral op) else neutral op) = (if finite (support op f s) then if finite (support op f (support op f s)) then itset (λx. λa. op (f x) a) (support op f (support op f s)) (neutral op) else neutral op else neutral op)"
                },
                {
                    "args": "iterate_def, iterate op s f = (if finite (support op f s) then iterate op (support op f s) f else neutral op)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ iterate op s f = (if finite (support op f s) then iterate op (support op f s) f else neutral op)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ iterate op s f = (if finite (support op f s) then iterate op (support op f s) f else neutral op)"
                }
            ],
            "prop": [
                "iterate op s f = ",
                "(if finite (support op f s) then iterate op (support op f s) f else neutral op)"
            ],
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_support"
                },
                {
                    "case": "finite (support op f s)",
                    "goal_id": "0",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "iterate_empty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite_recursion, {b: neutral op, f: λx. λa. op (f x) a}",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (∀x. ∀y. ∀s. ¬(x = y) ⟶ op (f x) (op (f y) s) = op (f y) (op (f x) s)) ⟶ itset (λx. λa. op (f x) a) ∅ (neutral op) = neutral op ∧ (∀x. ∀s. finite s ⟶ itset (λx1. λa. op (f x1) a) (insert x s) (neutral op) = (if x ∈ s then itset (λx1. λa. op (f x1) a) s (neutral op) else op (f x) (itset (λx1. λa. op (f x1) a) s (neutral op))))"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ ∀x. ∀y. ∀s. ¬(x = y) ⟶ op (f x) (op (f y) s) = op (f y) (op (f x) s)"
                },
                {
                    "args": "x, 'b",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "y, 'b",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "s, 'a",
                    "id": "2.2",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "¬(x = y)",
                    "id": "2.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x = y) ⊢ ¬(x = y)"
                },
                {
                    "args": "monoidal_ac",
                    "id": "2.4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op (neutral op) a = a) ∧ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "2.5",
                    "prevs": [
                        "2.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "2.6",
                    "prevs": [
                        "2.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "2.7",
                    "prevs": [
                        "2.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD1",
                    "id": "2.8",
                    "prevs": [
                        "2.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op (op a b) c = op a (op b c)"
                },
                {
                    "args": "conjD2",
                    "id": "2.9",
                    "prevs": [
                        "2.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op a (op b c) = op b (op a c)"
                },
                {
                    "args": "f x, f y, s",
                    "id": "2.10",
                    "prevs": [
                        "2.9"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op (f x) (op (f y) s) = op (f y) (op (f x) s)"
                },
                {
                    "args": "",
                    "id": "2.11",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.2",
                        "2.3",
                        "2.10"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ ∀x. ∀y. ∀s. ¬(x = y) ⟶ op (f x) (op (f y) s) = op (f y) (op (f x) s)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_fact",
                    "th": "monoidal op ⊢ itset (λx. λa. op (f x) a) ∅ (neutral op) = neutral op ∧ (∀x. ∀s. finite s ⟶ itset (λx1. λa. op (f x1) a) (insert x s) (neutral op) = (if x ∈ s then itset (λx1. λa. op (f x1) a) s (neutral op) else op (f x) (itset (λx1. λa. op (f x1) a) s (neutral op))))"
                },
                {
                    "args": "finite_empty, {}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite (∅::'b set)"
                },
                {
                    "args": "support_empty, finite (support op f ∅)",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ finite (support op f ∅)"
                },
                {
                    "args": "conjD1",
                    "id": "6",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ itset (λx. λa. op (f x) a) ∅ (neutral op) = neutral op"
                },
                {
                    "args": "support_empty, itset (λx. λa. op (f x) a) (support op f ∅) (neutral op) = neutral op",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ itset (λx. λa. op (f x) a) (support op f ∅) (neutral op) = neutral op"
                },
                {
                    "args": "if_P, (if finite (support op f ∅) then itset (λx. λa. op (f x) a) (support op f ∅) (neutral op) else neutral op) = neutral op",
                    "id": "8",
                    "prevs": [
                        "7",
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ (if finite (support op f ∅) then itset (λx. λa. op (f x) a) (support op f ∅) (neutral op) else neutral op) = neutral op"
                },
                {
                    "args": "iterate_def, iterate op ∅ f = neutral op",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "0",
                        "9"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op ∅ f = neutral op"
                }
            ],
            "prop": "monoidal op ⟶ iterate op ∅ f = neutral op",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_b": "neutral op",
                    "param_f": "%x. %a. op (f(x)) a",
                    "theorem": "finite_recursion"
                },
                {
                    "goal": "(∀x. ∀y. ∀s. ¬(x = y) ⟶ op (f x) (op (f y) s) = op (f y) (op (f x) s))",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "x,y,s"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.4",
                    "method_name": "apply_forward_step",
                    "theorem": "monoidal_ac"
                },
                {
                    "fact_ids": [
                        "2.4"
                    ],
                    "goal_id": "2.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "2.5"
                    ],
                    "goal_id": "2.6",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "2.6"
                    ],
                    "goal_id": "2.7",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "2.7"
                    ],
                    "goal_id": "2.8",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2.7"
                    ],
                    "goal_id": "2.9",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "2.9"
                    ],
                    "goal_id": "2.10",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "1",
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_fact"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_def"
                },
                {
                    "goal": "finite (support op f ∅)",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_empty"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_empty"
                },
                {
                    "fact_ids": [
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_empty"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_insert_gen",
            "num_gaps": 2,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite (support op f s)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite (support op f s) ⊢ finite (support op f s)"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s) ⊢ x ∈ s ⟶ iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
                },
                {
                    "args": "x ∈ s",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, x ∈ s, finite (support op f s) ⊢ ∀x1. x1 = x ∨ x1 ∈ s ⟷ x1 ∈ s"
                },
                {
                    "args": "x1, 'b",
                    "id": "2.1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "",
                    "id": "2.1.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, x ∈ s, finite (support op f s) ⊢ x1 = x ∨ x1 ∈ s ⟶ x1 ∈ s"
                },
                {
                    "args": "x1 = x ∨ x1 ∈ s",
                    "id": "2.1.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 = x ∨ x1 ∈ s ⊢ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "2.1.1.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, x ∈ s, finite (support op f s), x1 = x ∨ x1 ∈ s ⊢ x1 = x ⟶ x1 ∈ s"
                },
                {
                    "args": "x1 = x",
                    "id": "2.1.1.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 = x ⊢ x1 = x"
                },
                {
                    "args": "x1 ∈ s",
                    "id": "2.1.1.1.1",
                    "prevs": [
                        "2.1.1.1.0",
                        "2.0"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, x1 = x, x ∈ s, finite (support op f s), x1 = x ∨ x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "2.1.1.1.2",
                    "prevs": [
                        "2.1.1.1.0",
                        "2.1.1.1.1"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, x ∈ s, finite (support op f s), x1 = x ∨ x1 ∈ s ⊢ x1 = x ⟶ x1 ∈ s"
                },
                {
                    "args": "x1 ∈ s ⟶ x1 ∈ s",
                    "id": "2.1.1.2",
                    "prevs": [],
                    "rule": "trivial",
                    "th": "⊢ x1 ∈ s ⟶ x1 ∈ s"
                },
                {
                    "args": "disjE",
                    "id": "2.1.1.3",
                    "prevs": [
                        "2.1.1.0",
                        "2.1.1.1",
                        "2.1.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ s, finite (support op f s), x1 = x ∨ x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "2.1.1.4",
                    "prevs": [
                        "2.1.1.0",
                        "2.1.1.3"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, x ∈ s, finite (support op f s) ⊢ x1 = x ∨ x1 ∈ s ⟶ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "2.1.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, x ∈ s, finite (support op f s) ⊢ x1 ∈ s ⟶ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "x1 ∈ s",
                    "id": "2.1.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "disjI2, {A: x1 = x, B: x1 ∈ s}",
                    "id": "2.1.2.1",
                    "prevs": [
                        "2.1.2.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, x ∈ s, x1 ∈ s, finite (support op f s) ⊢ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "2.1.2.2",
                    "prevs": [
                        "2.1.2.0",
                        "2.1.2.1"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, x ∈ s, finite (support op f s) ⊢ x1 ∈ s ⟶ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "iffI",
                    "id": "2.1.3",
                    "prevs": [
                        "2.1.1",
                        "2.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ s, finite (support op f s) ⊢ x1 = x ∨ x1 ∈ s ⟷ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "2.1.4",
                    "prevs": [
                        "2.1.0",
                        "2.1.3"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, x ∈ s, finite (support op f s) ⊢ ∀x1. x1 = x ∨ x1 ∈ s ⟷ x1 ∈ s"
                },
                {
                    "args": "member_insert, ∀x1. x1 ∈ insert x s ⟷ x1 ∈ s",
                    "id": "2.2",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, x ∈ s, finite (support op f s) ⊢ ∀x1. x1 ∈ insert x s ⟷ x1 ∈ s"
                },
                {
                    "args": "member_ext",
                    "id": "2.3",
                    "prevs": [
                        "2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ s, finite (support op f s) ⊢ insert x s = s"
                },
                {
                    "args": "iterate op (insert x s) f = iterate op s f",
                    "id": "2.4",
                    "prevs": [
                        "2.3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, x ∈ s, finite (support op f s) ⊢ iterate op (insert x s) f = iterate op s f"
                },
                {
                    "args": "if_P, iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))",
                    "id": "2.5",
                    "prevs": [
                        "2.4",
                        "2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, x ∈ s, finite (support op f s) ⊢ iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
                },
                {
                    "args": "",
                    "id": "2.6",
                    "prevs": [
                        "2.0",
                        "2.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s) ⊢ x ∈ s ⟶ iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s) ⊢ ¬(x ∈ s) ⟶ iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s) ⊢ f x = neutral op ⟶ (if finite (if f x = neutral op then support op f s else insert x (support op f s)) then itset (λx1. λa. op (f x1) a) (if f x = neutral op then support op f s else insert x (support op f s)) (neutral op) else neutral op) = op (f x) (if finite (support op f s) then itset (λx1. λa. op (f x1) a) (support op f s) (neutral op) else neutral op)"
                },
                {
                    "args": "f x = neutral op",
                    "id": "3.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "f x = neutral op ⊢ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "3.1.1",
                    "prevs": [],
                    "rule": "sorry",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), f x = neutral op ⊢ (if finite (if f x = neutral op then support op f s else insert x (support op f s)) then itset (λx1. λa. op (f x1) a) (if f x = neutral op then support op f s else insert x (support op f s)) (neutral op) else neutral op) = op (f x) (if finite (support op f s) then itset (λx1. λa. op (f x1) a) (support op f s) (neutral op) else neutral op)"
                },
                {
                    "args": "",
                    "id": "3.1.2",
                    "prevs": [
                        "3.1.0",
                        "3.1.1"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s) ⊢ f x = neutral op ⟶ (if finite (if f x = neutral op then support op f s else insert x (support op f s)) then itset (λx1. λa. op (f x1) a) (if f x = neutral op then support op f s else insert x (support op f s)) (neutral op) else neutral op) = op (f x) (if finite (support op f s) then itset (λx1. λa. op (f x1) a) (support op f s) (neutral op) else neutral op)"
                },
                {
                    "args": "",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "sorry",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s) ⊢ ¬(f x = neutral op) ⟶ (if finite (if f x = neutral op then support op f s else insert x (support op f s)) then itset (λx1. λa. op (f x1) a) (if f x = neutral op then support op f s else insert x (support op f s)) (neutral op) else neutral op) = op (f x) (if finite (support op f s) then itset (λx1. λa. op (f x1) a) (support op f s) (neutral op) else neutral op)"
                },
                {
                    "args": "classical_cases",
                    "id": "3.3",
                    "prevs": [
                        "3.1",
                        "3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s) ⊢ (if finite (if f x = neutral op then support op f s else insert x (support op f s)) then itset (λx1. λa. op (f x1) a) (if f x = neutral op then support op f s else insert x (support op f s)) (neutral op) else neutral op) = op (f x) (if finite (support op f s) then itset (λx1. λa. op (f x1) a) (support op f s) (neutral op) else neutral op)"
                },
                {
                    "args": "support_insert, (if finite (support op f (insert x s)) then itset (λx1. λa. op (f x1) a) (support op f (insert x s)) (neutral op) else neutral op) = op (f x) (if finite (support op f s) then itset (λx1. λa. op (f x1) a) (support op f s) (neutral op) else neutral op)",
                    "id": "3.4",
                    "prevs": [
                        "3.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s) ⊢ (if finite (support op f (insert x s)) then itset (λx1. λa. op (f x1) a) (support op f (insert x s)) (neutral op) else neutral op) = op (f x) (if finite (support op f s) then itset (λx1. λa. op (f x1) a) (support op f s) (neutral op) else neutral op)"
                },
                {
                    "args": "iterate_def, iterate op (insert x s) f = op (f x) (iterate op s f)",
                    "id": "3.5",
                    "prevs": [
                        "3.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s) ⊢ iterate op (insert x s) f = op (f x) (iterate op s f)"
                },
                {
                    "args": "if_not_P, iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))",
                    "id": "3.6",
                    "prevs": [
                        "3.5",
                        "3.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s) ⊢ iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
                },
                {
                    "args": "",
                    "id": "3.7",
                    "prevs": [
                        "3.0",
                        "3.6"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s) ⊢ ¬(x ∈ s) ⟶ iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
                },
                {
                    "args": "classical_cases",
                    "id": "4",
                    "prevs": [
                        "2",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s) ⊢ iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite (support op f s) ⟶ iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite (support op f s) ",
                "   ⟶ iterate op (insert x s) f = ",
                "      (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
            ],
            "steps": [
                {
                    "case": "x ∈ s",
                    "goal_id": "2",
                    "method_name": "cases"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal": "(insert x s) = s",
                    "goal_id": "2.1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "goal_id": "2.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "2.1.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.1.1.0"
                    ],
                    "goal_id": "2.1.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "2.1.1.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.1.1.1.0"
                    ],
                    "goal_id": "2.1.1.1.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.1.2",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "2.1.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "fact_ids": [
                        "2.3"
                    ],
                    "goal_id": "2.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.0"
                    ],
                    "goal_id": "3.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "3.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_def"
                },
                {
                    "goal_id": "3.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_insert"
                },
                {
                    "case": "f x = neutral op",
                    "goal_id": "3.1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "3.1",
                    "method_name": "introduction"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "x": "'b"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_insert",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite_support, {f: f, op: op, s: s}",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op ⊢ finite (support op f s)"
                },
                {
                    "args": "iterate_insert_gen, {f: f, op: op, s: s, x: x}",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op ⊢ iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "1",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ iterate op (insert x s) f = (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ",
                "   ⟶ iterate op (insert x s) f = ",
                "      (if x ∈ s then iterate op s f else op (f x) (iterate op s f))"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_insert_gen"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_support"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "x": "'b"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_union",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "monoidal_ac",
                    "id": "3",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op (neutral op) a = a) ∧ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op ⊢ disjoint s ∅ ⟶ iterate op (s ∪ ∅) f = op (iterate op s f) (iterate op ∅ f)"
                },
                {
                    "args": "disjoint s ∅",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "disjoint s ∅ ⊢ disjoint s ∅"
                },
                {
                    "args": "iterate_empty, {f: f}",
                    "id": "4.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "conjD2",
                    "id": "4.2",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD1",
                    "id": "4.3",
                    "prevs": [
                        "4.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. op a (neutral op) = a"
                },
                {
                    "args": "union_empty, iterate op (∅ ∪ s) f = iterate op s f",
                    "id": "4.4",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ iterate op (∅ ∪ s) f = iterate op s f"
                },
                {
                    "args": "union_comm, iterate op (s ∪ ∅) f = iterate op s f",
                    "id": "4.5",
                    "prevs": [
                        "4.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, disjoint s ∅ ⊢ iterate op (s ∪ ∅) f = iterate op s f"
                },
                {
                    "args": "iterate op (s ∪ ∅) f = op (iterate op s f) (neutral op)",
                    "id": "4.6",
                    "prevs": [
                        "4.3",
                        "4.5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, disjoint s ∅ ⊢ iterate op (s ∪ ∅) f = op (iterate op s f) (neutral op)"
                },
                {
                    "args": "iterate op (s ∪ ∅) f = op (iterate op s f) (iterate op ∅ f)",
                    "id": "4.7",
                    "prevs": [
                        "4.1",
                        "4.6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, disjoint s ∅ ⊢ iterate op (s ∪ ∅) f = op (iterate op s f) (iterate op ∅ f)"
                },
                {
                    "args": "",
                    "id": "4.8",
                    "prevs": [
                        "4.0",
                        "4.7"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op ⊢ disjoint s ∅ ⟶ iterate op (s ∪ ∅) f = op (iterate op s f) (iterate op ∅ f)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op ⊢ ∀x. ∀s1. (disjoint s s1 ⟶ iterate op (s ∪ s1) f = op (iterate op s f) (iterate op s1 f)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ disjoint s (insert x s1) ⟶ iterate op (s ∪ insert x s1) f = op (iterate op s f) (iterate op (insert x s1) f)"
                },
                {
                    "args": "x, 'b",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "t1, 'b set",
                    "id": "5.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR t1"
                },
                {
                    "args": "disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f)",
                    "id": "5.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f) ⊢ disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f)"
                },
                {
                    "args": "¬(x ∈ t1)",
                    "id": "5.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ t1) ⊢ ¬(x ∈ t1)"
                },
                {
                    "args": "finite t1",
                    "id": "5.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t1 ⊢ finite t1"
                },
                {
                    "args": "disjoint s (insert x t1)",
                    "id": "5.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "disjoint s (insert x t1) ⊢ disjoint s (insert x t1)"
                },
                {
                    "args": "s ∪ insert x t1 = insert x (s ∪ t1)",
                    "id": "5.6",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ s ∪ insert x t1 = insert x (s ∪ t1)"
                },
                {
                    "args": "iterate_insert, {f: f, x: x}",
                    "id": "5.7",
                    "prevs": [
                        "0",
                        "5.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t1, monoidal op ⊢ iterate op (insert x t1) f = (if x ∈ t1 then iterate op t1 f else op (f x) (iterate op t1 f))"
                },
                {
                    "args": "finite_union_imp",
                    "id": "5.8",
                    "prevs": [
                        "1",
                        "5.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(x ∈ t1), disjoint s (insert x t1), disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f) ⊢ finite (s ∪ t1)"
                },
                {
                    "args": "iterate_insert, {f: f, x: x}",
                    "id": "5.9",
                    "prevs": [
                        "0",
                        "5.8"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(x ∈ t1), disjoint s (insert x t1), disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f) ⊢ iterate op (insert x (s ∪ t1)) f = (if x ∈ s ∪ t1 then iterate op (s ∪ t1) f else op (f x) (iterate op (s ∪ t1) f))"
                },
                {
                    "args": "if_not_P",
                    "id": "5.10",
                    "prevs": [
                        "5.7",
                        "5.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite t1, monoidal op, ¬(x ∈ t1) ⊢ iterate op (insert x t1) f = op (f x) (iterate op t1 f)"
                },
                {
                    "args": "disjoint_def",
                    "id": "5.11",
                    "prevs": [
                        "5.5"
                    ],
                    "rule": "rewrite_fact",
                    "th": "disjoint s (insert x t1) ⊢ s ∩ insert x t1 = ∅"
                },
                {
                    "args": "¬(x ∈ s ∪ t1)",
                    "id": "5.12",
                    "prevs": [
                        "5.11",
                        "5.3"
                    ],
                    "rule": "z3",
                    "th": "¬(x ∈ t1), disjoint s (insert x t1) ⊢ ¬(x ∈ s ∪ t1)"
                },
                {
                    "args": "if_not_P",
                    "id": "5.13",
                    "prevs": [
                        "5.9",
                        "5.12"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(x ∈ t1), disjoint s (insert x t1), disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f) ⊢ iterate op (insert x (s ∪ t1)) f = op (f x) (iterate op (s ∪ t1) f)"
                },
                {
                    "args": "s ∩ t1 = ∅",
                    "id": "5.14",
                    "prevs": [
                        "5.11"
                    ],
                    "rule": "z3",
                    "th": "disjoint s (insert x t1) ⊢ s ∩ t1 = ∅"
                },
                {
                    "args": "disjoint_def, disjoint s t1",
                    "id": "5.15",
                    "prevs": [
                        "5.14"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(x ∈ t1), disjoint s (insert x t1), disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f) ⊢ disjoint s t1"
                },
                {
                    "args": "",
                    "id": "5.16",
                    "prevs": [
                        "5.2",
                        "5.15"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(x ∈ t1), disjoint s (insert x t1), disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f) ⊢ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f)"
                },
                {
                    "args": "conjD2",
                    "id": "5.17",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "5.18",
                    "prevs": [
                        "5.17"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "5.19",
                    "prevs": [
                        "5.18"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "5.20",
                    "prevs": [
                        "5.19"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op a (op b c) = op b (op a c)"
                },
                {
                    "args": "f x, iterate op s f, iterate op t1 f",
                    "id": "5.21",
                    "prevs": [
                        "5.20"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op (f x) (op (iterate op s f) (iterate op t1 f)) = op (iterate op s f) (op (f x) (iterate op t1 f))"
                },
                {
                    "args": "op (f x) (op (iterate op s f) (iterate op t1 f)) = op (iterate op s f) (iterate op (insert x t1) f)",
                    "id": "5.22",
                    "prevs": [
                        "5.10",
                        "5.21"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(x ∈ t1), disjoint s (insert x t1), disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f) ⊢ op (f x) (op (iterate op s f) (iterate op t1 f)) = op (iterate op s f) (iterate op (insert x t1) f)"
                },
                {
                    "args": "op (f x) (iterate op (s ∪ t1) f) = op (iterate op s f) (iterate op (insert x t1) f)",
                    "id": "5.23",
                    "prevs": [
                        "5.16",
                        "5.22"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(x ∈ t1), disjoint s (insert x t1), disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f) ⊢ op (f x) (iterate op (s ∪ t1) f) = op (iterate op s f) (iterate op (insert x t1) f)"
                },
                {
                    "args": "iterate op (insert x (s ∪ t1)) f = op (iterate op s f) (iterate op (insert x t1) f)",
                    "id": "5.24",
                    "prevs": [
                        "5.13",
                        "5.23"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(x ∈ t1), disjoint s (insert x t1), disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f) ⊢ iterate op (insert x (s ∪ t1)) f = op (iterate op s f) (iterate op (insert x t1) f)"
                },
                {
                    "args": "iterate op (s ∪ insert x t1) f = op (iterate op s f) (iterate op (insert x t1) f)",
                    "id": "5.25",
                    "prevs": [
                        "5.6",
                        "5.24"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(x ∈ t1), disjoint s (insert x t1), disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f) ⊢ iterate op (s ∪ insert x t1) f = op (iterate op s f) (iterate op (insert x t1) f)"
                },
                {
                    "args": "",
                    "id": "5.26",
                    "prevs": [
                        "5.0",
                        "5.1",
                        "5.2",
                        "5.3",
                        "5.4",
                        "5.5",
                        "5.25"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op ⊢ ∀x. ∀t1. (disjoint s t1 ⟶ iterate op (s ∪ t1) f = op (iterate op s f) (iterate op t1 f)) ⟶ ¬(x ∈ t1) ⟶ finite t1 ⟶ disjoint s (insert x t1) ⟶ iterate op (s ∪ insert x t1) f = op (iterate op s f) (iterate op (insert x t1) f)"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "6",
                    "prevs": [
                        "2",
                        "4",
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op ⊢ disjoint s t ⟶ iterate op (s ∪ t) f = op (iterate op s f) (iterate op t f)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ finite t ⟶ disjoint s t ⟶ iterate op (s ∪ t) f = op (iterate op s f) (iterate op t f)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ",
                "   ⟶ finite t ",
                "      ⟶ disjoint s t ⟶ iterate op (s ∪ t) f = op (iterate op s f) (iterate op t f)"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_forward_step",
                    "theorem": "monoidal_ac"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "5",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "4.1"
                    ],
                    "goal_id": "4.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "4.3"
                    ],
                    "goal_id": "4.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "union_comm"
                },
                {
                    "goal_id": "4.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "union_empty"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction",
                    "names": "x,t1"
                },
                {
                    "goal": "s ∪ insert x t1 = insert x (s ∪ t1)",
                    "goal_id": "5.6",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5.6",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "5.6"
                    ],
                    "goal_id": "5.7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0",
                        "5.4"
                    ],
                    "goal_id": "5.7",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "iterate_insert"
                },
                {
                    "goal": "finite (s ∪ t1)",
                    "goal_id": "5.8",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5.8",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_union_imp"
                },
                {
                    "fact_ids": [
                        "0",
                        "5.8"
                    ],
                    "goal_id": "5.9",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "5.7",
                        "5.3"
                    ],
                    "goal_id": "5.10",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal": "~(x ∈ s ∪ t1)",
                    "goal_id": "5.11",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "5.5"
                    ],
                    "goal_id": "5.11",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "disjoint_def"
                },
                {
                    "fact_ids": [
                        "5.11",
                        "5.3"
                    ],
                    "goal_id": "5.12",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "5.9",
                        "5.12"
                    ],
                    "goal_id": "5.13",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal": "disjoint s t1",
                    "goal_id": "5.14",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5.14",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                },
                {
                    "fact_ids": [
                        "5.11"
                    ],
                    "goal_id": "5.14",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "5.2",
                        "5.15"
                    ],
                    "goal_id": "5.16",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "5.13"
                    ],
                    "goal_id": "5.17",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "5.16"
                    ],
                    "goal_id": "5.17",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "5.10"
                    ],
                    "goal_id": "5.17",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "5.17",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "5.17"
                    ],
                    "goal_id": "5.18",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "5.18"
                    ],
                    "goal_id": "5.19",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "5.19"
                    ],
                    "goal_id": "5.20",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "5.20"
                    ],
                    "goal_id": "5.21",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_diff",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "t ⊆ s",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "t ⊆ s ⊢ t ⊆ s"
                },
                {
                    "args": "s = {x. x ∈ s ∧ ¬(x ∈ t)} ∪ t",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "z3",
                    "th": "t ⊆ s ⊢ s = {x. x ∈ s ∧ ¬(x ∈ t)} ∪ t"
                },
                {
                    "args": "diff_def, s = diff s t ∪ t",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, t ⊆ s ⊢ s = diff s t ∪ t"
                },
                {
                    "args": "{x. x ∈ s ∧ ¬(x ∈ t)} ∩ t = ∅",
                    "id": "5",
                    "prevs": [
                        "2"
                    ],
                    "rule": "z3",
                    "th": "t ⊆ s ⊢ {x. x ∈ s ∧ ¬(x ∈ t)} ∩ t = ∅"
                },
                {
                    "args": "diff_def, diff s t ∩ t = ∅",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, t ⊆ s ⊢ diff s t ∩ t = ∅"
                },
                {
                    "args": "disjoint_def, disjoint (diff s t) t",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, t ⊆ s ⊢ disjoint (diff s t) t"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "8",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, monoidal op, t ⊆ s ⊢ diff s t ∪ t = s"
                },
                {
                    "args": "iterate op s f = iterate op (diff s t ∪ t) f",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op, t ⊆ s ⊢ iterate op s f = iterate op (diff s t ∪ t) f"
                },
                {
                    "args": "subset_diff, {s: s, t: t}",
                    "id": "10",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ diff s t ⊆ s"
                },
                {
                    "args": "finite_subset",
                    "id": "11",
                    "prevs": [
                        "1",
                        "10"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, t ⊆ s ⊢ finite (diff s t)"
                },
                {
                    "args": "finite_subset",
                    "id": "12",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, t ⊆ s ⊢ finite t"
                },
                {
                    "args": "iterate_union, {f: f, op: op, s: diff s t, t: t}",
                    "id": "13",
                    "prevs": [
                        "0",
                        "11",
                        "12",
                        "7"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op, t ⊆ s ⊢ iterate op (diff s t ∪ t) f = op (iterate op (diff s t) f) (iterate op t f)"
                },
                {
                    "args": "eq_sym_eq, op (iterate op (diff s t) f) (iterate op t f) = iterate op (diff s t ∪ t) f",
                    "id": "14",
                    "prevs": [
                        "13"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, t ⊆ s ⊢ op (iterate op (diff s t) f) (iterate op t f) = iterate op (diff s t ∪ t) f"
                },
                {
                    "args": "op (iterate op (diff s t) f) (iterate op t f) = iterate op s f",
                    "id": "15",
                    "prevs": [
                        "9",
                        "14"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op, t ⊆ s ⊢ op (iterate op (diff s t) f) (iterate op t f) = iterate op s f"
                },
                {
                    "args": "",
                    "id": "16",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "15"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ t ⊆ s ⟶ op (iterate op (diff s t) f) (iterate op t f) = iterate op s f"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ",
                "   ⟶ t ⊆ s ⟶ op (iterate op (diff s t) f) (iterate op t f) = iterate op s f"
            ],
            "steps": [
                {
                    "goal": "s = diff s t ∪ t",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "z3"
                },
                {
                    "goal": "disjoint (diff s t) t",
                    "goal_id": "5",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "5",
                    "method_name": "z3"
                },
                {
                    "goal": "iterate op s f = iterate op (diff s t ∪ t) f",
                    "goal_id": "8",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "9"
                    ],
                    "goal_id": "10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "10",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "10",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_union"
                },
                {
                    "goal_id": "10",
                    "method_name": "apply_backward_step",
                    "param_t": "s",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "10",
                    "method_name": "apply_backward_step",
                    "theorem": "subset_diff"
                },
                {
                    "goal_id": "12",
                    "method_name": "apply_backward_step",
                    "param_t": "s",
                    "theorem": "finite_subset"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_incl_excl",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "s ∪ t = {x. x ∈ s ∧ ¬(x ∈ t)} ∪ ({x. x ∈ t ∧ ¬(x ∈ s)} ∪ s ∩ t)",
                    "id": "3",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ s ∪ t = {x. x ∈ s ∧ ¬(x ∈ t)} ∪ ({x. x ∈ t ∧ ¬(x ∈ s)} ∪ s ∩ t)"
                },
                {
                    "args": "diff_def, s ∪ t = diff s t ∪ (diff t s ∪ s ∩ t)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op ⊢ s ∪ t = diff s t ∪ (diff t s ∪ s ∩ t)"
                },
                {
                    "args": "s = {x. x ∈ s ∧ ¬(x ∈ t)} ∪ s ∩ t",
                    "id": "5",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ s = {x. x ∈ s ∧ ¬(x ∈ t)} ∪ s ∩ t"
                },
                {
                    "args": "diff_def, s = diff s t ∪ s ∩ t",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op ⊢ s = diff s t ∪ s ∩ t"
                },
                {
                    "args": "t = {x. x ∈ t ∧ ¬(x ∈ s)} ∪ s ∩ t",
                    "id": "7",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ t = {x. x ∈ t ∧ ¬(x ∈ s)} ∪ s ∩ t"
                },
                {
                    "args": "diff_def, t = diff t s ∪ s ∩ t",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op ⊢ t = diff t s ∪ s ∩ t"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "9",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, finite t, monoidal op ⊢ diff s t ∪ s ∩ t = s"
                },
                {
                    "args": "iterate op s f = iterate op (diff s t ∪ s ∩ t) f",
                    "id": "10",
                    "prevs": [
                        "9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op ⊢ iterate op s f = iterate op (diff s t ∪ s ∩ t) f"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "11",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, finite t, monoidal op ⊢ diff t s ∪ s ∩ t = t"
                },
                {
                    "args": "iterate op t f = iterate op (diff t s ∪ s ∩ t) f",
                    "id": "12",
                    "prevs": [
                        "11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op ⊢ iterate op t f = iterate op (diff t s ∪ s ∩ t) f"
                },
                {
                    "args": "subset_diff, {s: s, t: t}",
                    "id": "13",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ diff s t ⊆ s"
                },
                {
                    "args": "finite_subset",
                    "id": "14",
                    "prevs": [
                        "1",
                        "13"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op ⊢ finite (diff s t)"
                },
                {
                    "args": "subset_diff, {s: t, t: s}",
                    "id": "15",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ diff t s ⊆ t"
                },
                {
                    "args": "finite_subset",
                    "id": "16",
                    "prevs": [
                        "2",
                        "15"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op ⊢ finite (diff t s)"
                },
                {
                    "args": "inter_subset_id, {A: s, B: t}",
                    "id": "17",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ s ∩ t ⊆ s"
                },
                {
                    "args": "finite_subset",
                    "id": "18",
                    "prevs": [
                        "1",
                        "17"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op ⊢ finite (s ∩ t)"
                },
                {
                    "args": "finite_union_imp",
                    "id": "19",
                    "prevs": [
                        "16",
                        "18"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op ⊢ finite (diff t s ∪ s ∩ t)"
                },
                {
                    "args": "diff s t ∩ (diff t s ∪ s ∩ t) = ∅",
                    "id": "20",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ diff s t ∩ (diff t s ∪ s ∩ t) = ∅"
                },
                {
                    "args": "disjoint_def, disjoint (diff s t) (diff t s ∪ s ∩ t)",
                    "id": "21",
                    "prevs": [
                        "20"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op ⊢ disjoint (diff s t) (diff t s ∪ s ∩ t)"
                },
                {
                    "args": "iterate_union, {f: f}",
                    "id": "22",
                    "prevs": [
                        "0",
                        "14",
                        "19",
                        "21"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op ⊢ iterate op (diff s t ∪ (diff t s ∪ s ∩ t)) f = op (iterate op (diff s t) f) (iterate op (diff t s ∪ s ∩ t) f)"
                },
                {
                    "args": "diff s t ∩ (s ∩ t) = ∅",
                    "id": "23",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ diff s t ∩ (s ∩ t) = ∅"
                },
                {
                    "args": "disjoint_def, disjoint (diff s t) (s ∩ t)",
                    "id": "24",
                    "prevs": [
                        "23"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op ⊢ disjoint (diff s t) (s ∩ t)"
                },
                {
                    "args": "iterate_union, {f: f}",
                    "id": "25",
                    "prevs": [
                        "0",
                        "14",
                        "18",
                        "24"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op ⊢ iterate op (diff s t ∪ s ∩ t) f = op (iterate op (diff s t) f) (iterate op (s ∩ t) f)"
                },
                {
                    "args": "monoidal_ac",
                    "id": "26",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op (neutral op) a = a) ∧ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "27",
                    "prevs": [
                        "26"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "28",
                    "prevs": [
                        "27"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD1",
                    "id": "29",
                    "prevs": [
                        "28"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. ∀b. op a b = op b a"
                },
                {
                    "args": "conjD2",
                    "id": "30",
                    "prevs": [
                        "28"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD1",
                    "id": "31",
                    "prevs": [
                        "30"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op (op a b) c = op a (op b c)"
                },
                {
                    "args": "iterate op (s ∩ t) f, iterate op (diff t s ∪ s ∩ t) f",
                    "id": "32",
                    "prevs": [
                        "29"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op (iterate op (s ∩ t) f) (iterate op (diff t s ∪ s ∩ t) f) = op (iterate op (diff t s ∪ s ∩ t) f) (iterate op (s ∩ t) f)"
                },
                {
                    "args": "op (iterate op (diff s t) f) (op (iterate op (s ∩ t) f) (iterate op (diff t s ∪ s ∩ t) f)) = op (iterate op (diff s t) f) (op (iterate op (diff t s ∪ s ∩ t) f) (iterate op (s ∩ t) f))",
                    "id": "33",
                    "prevs": [
                        "32"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op ⊢ op (iterate op (diff s t) f) (op (iterate op (s ∩ t) f) (iterate op (diff t s ∪ s ∩ t) f)) = op (iterate op (diff s t) f) (op (iterate op (diff t s ∪ s ∩ t) f) (iterate op (s ∩ t) f))"
                },
                {
                    "args": "op (op (iterate op (diff s t) f) (iterate op (s ∩ t) f)) (iterate op (diff t s ∪ s ∩ t) f) = op (op (iterate op (diff s t) f) (iterate op (diff t s ∪ s ∩ t) f)) (iterate op (s ∩ t) f)",
                    "id": "34",
                    "prevs": [
                        "31",
                        "33"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op ⊢ op (op (iterate op (diff s t) f) (iterate op (s ∩ t) f)) (iterate op (diff t s ∪ s ∩ t) f) = op (op (iterate op (diff s t) f) (iterate op (diff t s ∪ s ∩ t) f)) (iterate op (s ∩ t) f)"
                },
                {
                    "args": "op (iterate op (diff s t ∪ s ∩ t) f) (iterate op (diff t s ∪ s ∩ t) f) = op (op (iterate op (diff s t) f) (iterate op (diff t s ∪ s ∩ t) f)) (iterate op (s ∩ t) f)",
                    "id": "35",
                    "prevs": [
                        "25",
                        "34"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op ⊢ op (iterate op (diff s t ∪ s ∩ t) f) (iterate op (diff t s ∪ s ∩ t) f) = op (op (iterate op (diff s t) f) (iterate op (diff t s ∪ s ∩ t) f)) (iterate op (s ∩ t) f)"
                },
                {
                    "args": "op (iterate op (diff s t ∪ s ∩ t) f) (iterate op (diff t s ∪ s ∩ t) f) = op (iterate op (diff s t ∪ (diff t s ∪ s ∩ t)) f) (iterate op (s ∩ t) f)",
                    "id": "36",
                    "prevs": [
                        "22",
                        "35"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op ⊢ op (iterate op (diff s t ∪ s ∩ t) f) (iterate op (diff t s ∪ s ∩ t) f) = op (iterate op (diff s t ∪ (diff t s ∪ s ∩ t)) f) (iterate op (s ∩ t) f)"
                },
                {
                    "args": "op (iterate op (diff s t ∪ s ∩ t) f) (iterate op t f) = op (iterate op (diff s t ∪ (diff t s ∪ s ∩ t)) f) (iterate op (s ∩ t) f)",
                    "id": "37",
                    "prevs": [
                        "12",
                        "36"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op ⊢ op (iterate op (diff s t ∪ s ∩ t) f) (iterate op t f) = op (iterate op (diff s t ∪ (diff t s ∪ s ∩ t)) f) (iterate op (s ∩ t) f)"
                },
                {
                    "args": "op (iterate op s f) (iterate op t f) = op (iterate op (diff s t ∪ (diff t s ∪ s ∩ t)) f) (iterate op (s ∩ t) f)",
                    "id": "38",
                    "prevs": [
                        "10",
                        "37"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op ⊢ op (iterate op s f) (iterate op t f) = op (iterate op (diff s t ∪ (diff t s ∪ s ∩ t)) f) (iterate op (s ∩ t) f)"
                },
                {
                    "args": "op (iterate op s f) (iterate op t f) = op (iterate op (s ∪ t) f) (iterate op (s ∩ t) f)",
                    "id": "39",
                    "prevs": [
                        "4",
                        "38"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op ⊢ op (iterate op s f) (iterate op t f) = op (iterate op (s ∪ t) f) (iterate op (s ∩ t) f)"
                },
                {
                    "args": "",
                    "id": "40",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "39"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ finite t ⟶ op (iterate op s f) (iterate op t f) = op (iterate op (s ∪ t) f) (iterate op (s ∩ t) f)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ",
                "   ⟶ finite t ",
                "      ⟶ op (iterate op s f) (iterate op t f) = ",
                "         op (iterate op (s ∪ t) f) (iterate op (s ∩ t) f)"
            ],
            "steps": [
                {
                    "goal": "s ∪ t = diff s t ∪ (diff t s ∪ s ∩ t)",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "z3"
                },
                {
                    "goal": "s = diff s t ∪ s ∩ t ",
                    "goal_id": "5",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "5",
                    "method_name": "z3"
                },
                {
                    "goal": "t = diff t s ∪ s ∩ t",
                    "goal_id": "7",
                    "method_name": "cut"
                },
                {
                    "goal_id": "7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "7",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "iterate op s f = iterate op (diff s t ∪ s ∩ t) f",
                    "goal_id": "9",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "6"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "9"
                    ],
                    "goal_id": "10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "iterate op t f = iterate op (diff t s ∪ s ∩ t) f",
                    "goal_id": "11",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal_id": "11",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "11"
                    ],
                    "goal_id": "12",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "10"
                    ],
                    "goal_id": "13",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "12"
                    ],
                    "goal_id": "13",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "finite (diff s t)",
                    "goal_id": "13",
                    "method_name": "cut"
                },
                {
                    "goal_id": "13",
                    "method_name": "apply_backward_step",
                    "param_t": "s",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "13",
                    "method_name": "apply_backward_step",
                    "theorem": "subset_diff"
                },
                {
                    "goal": "finite (diff t s ∪ s ∩ t)",
                    "goal_id": "15",
                    "method_name": "cut"
                },
                {
                    "goal_id": "15",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_union_imp"
                },
                {
                    "goal_id": "15",
                    "method_name": "apply_backward_step",
                    "param_t": "t",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "15",
                    "method_name": "apply_backward_step",
                    "theorem": "subset_diff"
                },
                {
                    "goal_id": "17",
                    "method_name": "apply_backward_step",
                    "param_t": "s",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "17",
                    "method_name": "apply_backward_step",
                    "theorem": "inter_subset_id"
                },
                {
                    "goal": "disjoint (diff s t) (diff t s ∪ s ∩ t)",
                    "goal_id": "20",
                    "method_name": "cut"
                },
                {
                    "goal_id": "20",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                },
                {
                    "goal_id": "20",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "0",
                        "14",
                        "19",
                        "21"
                    ],
                    "goal_id": "22",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "theorem": "iterate_union"
                },
                {
                    "fact_ids": [
                        "22"
                    ],
                    "goal_id": "23",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "disjoint (diff s t) (s ∩ t)",
                    "goal_id": "23",
                    "method_name": "cut"
                },
                {
                    "goal_id": "23",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                },
                {
                    "goal_id": "23",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "0",
                        "14",
                        "18",
                        "24"
                    ],
                    "goal_id": "25",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "theorem": "iterate_union"
                },
                {
                    "fact_ids": [
                        "25"
                    ],
                    "goal_id": "26",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "26",
                    "method_name": "apply_forward_step",
                    "theorem": "monoidal_ac"
                },
                {
                    "fact_ids": [
                        "26"
                    ],
                    "goal_id": "27",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "27"
                    ],
                    "goal_id": "28",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "28"
                    ],
                    "goal_id": "29",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "28"
                    ],
                    "goal_id": "30",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "30"
                    ],
                    "goal_id": "31",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "31"
                    ],
                    "goal_id": "32",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "(op (iterate op (s ∩ t) f) (iterate op (diff t s ∪ s ∩ t) f)) = (op (iterate op (diff t s ∪ s ∩ t) f) (iterate op (s ∩ t) f))",
                    "goal_id": "32",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "29"
                    ],
                    "goal_id": "32",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "32"
                    ],
                    "goal_id": "33",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_closed",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "P (neutral op)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "P (neutral op) ⊢ P (neutral op)"
                },
                {
                    "args": "∀x. ∀y. P x ⟶ P y ⟶ P (op x y)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ ∀x. ∀y. P x ⟶ P y ⟶ P (op x y)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, P (neutral op), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x) ⊢ finite (support op f s) ⟶ P (if finite (support op f s) then iterate op (support op f s) f else neutral op)"
                },
                {
                    "args": "finite (support op f s)",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite (support op f s) ⊢ finite (support op f s)"
                },
                {
                    "args": "finite_induct_strong, {P: λs. (∀x. x ∈ s ⟶ P (f x)) ⟶ P (iterate op s f)}",
                    "id": "3.1",
                    "prevs": [
                        "3.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite (support op f s) ⊢ ((∀x. x ∈ ∅ ⟶ P (f x)) ⟶ P (iterate op ∅ f)) ⟶ (∀x. ∀s1. ((∀x1. x1 ∈ s1 ⟶ P (f x1)) ⟶ P (iterate op s1 f)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. x1 ∈ insert x s1 ⟶ P (f x1)) ⟶ P (iterate op (insert x s1) f)) ⟶ (∀x. x ∈ support op f s ⟶ P (f x)) ⟶ P (iterate op (support op f s) f)"
                },
                {
                    "args": "",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, P (neutral op), finite (support op f s), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ (∀x. x ∈ support op f s ⟶ P (f x)) ⟶ P (iterate op (support op f s) f)"
                },
                {
                    "args": "∀x. x ∈ support op f s ⟶ P (f x)",
                    "id": "3.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ support op f s ⟶ P (f x) ⊢ ∀x. x ∈ support op f s ⟶ P (f x)"
                },
                {
                    "args": "",
                    "id": "3.2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, P (neutral op), finite (support op f s), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ (∀x. x ∈ ∅ ⟶ P (f x)) ⟶ P (iterate op ∅ f)"
                },
                {
                    "args": "∀x. x ∈ ∅ ⟶ P (f x)",
                    "id": "3.2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ ∅ ⟶ P (f x) ⊢ ∀x. x ∈ ∅ ⟶ P (f x)"
                },
                {
                    "args": "iterate_empty, {f: f}",
                    "id": "3.2.1.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "P (iterate op ∅ f)",
                    "id": "3.2.1.2",
                    "prevs": [
                        "3.2.1.1",
                        "1"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, P (neutral op), finite (support op f s), ∀x. x ∈ ∅ ⟶ P (f x), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ P (iterate op ∅ f)"
                },
                {
                    "args": "",
                    "id": "3.2.1.3",
                    "prevs": [
                        "3.2.1.0",
                        "3.2.1.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, P (neutral op), finite (support op f s), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ (∀x. x ∈ ∅ ⟶ P (f x)) ⟶ P (iterate op ∅ f)"
                },
                {
                    "args": "",
                    "id": "3.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, P (neutral op), finite (support op f s), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ ∀x. ∀s1. ((∀x1. x1 ∈ s1 ⟶ P (f x1)) ⟶ P (iterate op s1 f)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. x1 ∈ insert x s1 ⟶ P (f x1)) ⟶ P (iterate op (insert x s1) f)"
                },
                {
                    "args": "x, 'b",
                    "id": "3.2.2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "s1, 'b set",
                    "id": "3.2.2.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s1"
                },
                {
                    "args": "(∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f)",
                    "id": "3.2.2.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f)"
                },
                {
                    "args": "¬(x ∈ s1)",
                    "id": "3.2.2.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s1) ⊢ ¬(x ∈ s1)"
                },
                {
                    "args": "finite s1",
                    "id": "3.2.2.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s1 ⊢ finite s1"
                },
                {
                    "args": "∀x1. x1 ∈ insert x s1 ⟶ P (f x1)",
                    "id": "3.2.2.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x1. x1 ∈ insert x s1 ⟶ P (f x1) ⊢ ∀x1. x1 ∈ insert x s1 ⟶ P (f x1)"
                },
                {
                    "args": "iterate_insert, {f: f, x: x}",
                    "id": "3.2.2.6",
                    "prevs": [
                        "0",
                        "3.2.2.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op ⊢ iterate op (insert x s1) f = (if x ∈ s1 then iterate op s1 f else op (f x) (iterate op s1 f))"
                },
                {
                    "args": "if_not_P",
                    "id": "3.2.2.7",
                    "prevs": [
                        "3.2.2.6",
                        "3.2.2.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1) ⊢ iterate op (insert x s1) f = op (f x) (iterate op s1 f)"
                },
                {
                    "args": "eq_refl, {x: x}",
                    "id": "3.2.2.8",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ x = x"
                },
                {
                    "args": "disjI1, {A: x = x, B: x ∈ s1}",
                    "id": "3.2.2.9",
                    "prevs": [
                        "3.2.2.8"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op, P (neutral op), ¬(x ∈ s1), finite (support op f s), ∀x1. x1 ∈ insert x s1 ⟶ P (f x1), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ x = x ∨ x ∈ s1"
                },
                {
                    "args": "member_insert, x ∈ insert x s1",
                    "id": "3.2.2.10",
                    "prevs": [
                        "3.2.2.9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s1, monoidal op, P (neutral op), ¬(x ∈ s1), finite (support op f s), ∀x1. x1 ∈ insert x s1 ⟶ P (f x1), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ x ∈ insert x s1"
                },
                {
                    "args": "",
                    "id": "3.2.2.11",
                    "prevs": [
                        "3.2.2.5",
                        "3.2.2.10"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s1, monoidal op, P (neutral op), ¬(x ∈ s1), finite (support op f s), ∀x1. x1 ∈ insert x s1 ⟶ P (f x1), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ P (f x)"
                },
                {
                    "args": "",
                    "id": "3.2.2.12",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s1, monoidal op, P (neutral op), ¬(x ∈ s1), finite (support op f s), ∀x1. x1 ∈ insert x s1 ⟶ P (f x1), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ ∀x. x ∈ s1 ⟶ P (f x)"
                },
                {
                    "args": "x1, 'b",
                    "id": "3.2.2.12.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ s1",
                    "id": "3.2.2.12.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s1 ⊢ x1 ∈ s1"
                },
                {
                    "args": "disjI2, {A: x1 = x, B: x1 ∈ s1}",
                    "id": "3.2.2.12.2",
                    "prevs": [
                        "3.2.2.12.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op, P (neutral op), x1 ∈ s1, ¬(x ∈ s1), finite (support op f s), ∀x1. x1 ∈ insert x s1 ⟶ P (f x1), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ x1 = x ∨ x1 ∈ s1"
                },
                {
                    "args": "member_insert, x1 ∈ insert x s1",
                    "id": "3.2.2.12.3",
                    "prevs": [
                        "3.2.2.12.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s1, monoidal op, P (neutral op), x1 ∈ s1, ¬(x ∈ s1), finite (support op f s), ∀x1. x1 ∈ insert x s1 ⟶ P (f x1), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ x1 ∈ insert x s1"
                },
                {
                    "args": "",
                    "id": "3.2.2.12.4",
                    "prevs": [
                        "3.2.2.5",
                        "3.2.2.12.3"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s1, monoidal op, P (neutral op), x1 ∈ s1, ¬(x ∈ s1), finite (support op f s), ∀x1. x1 ∈ insert x s1 ⟶ P (f x1), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ P (f x1)"
                },
                {
                    "args": "",
                    "id": "3.2.2.12.5",
                    "prevs": [
                        "3.2.2.12.0",
                        "3.2.2.12.1",
                        "3.2.2.12.4"
                    ],
                    "rule": "intros",
                    "th": "finite s1, monoidal op, P (neutral op), ¬(x ∈ s1), finite (support op f s), ∀x1. x1 ∈ insert x s1 ⟶ P (f x1), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ ∀x1. x1 ∈ s1 ⟶ P (f x1)"
                },
                {
                    "args": "",
                    "id": "3.2.2.13",
                    "prevs": [
                        "3.2.2.2",
                        "3.2.2.12"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s1, monoidal op, P (neutral op), ¬(x ∈ s1), finite (support op f s), ∀x1. x1 ∈ insert x s1 ⟶ P (f x1), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ P (iterate op s1 f)"
                },
                {
                    "args": "f x, iterate op s1 f",
                    "id": "3.2.2.14",
                    "prevs": [
                        "2",
                        "3.2.2.11",
                        "3.2.2.13"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s1, monoidal op, P (neutral op), ¬(x ∈ s1), finite (support op f s), ∀x1. x1 ∈ insert x s1 ⟶ P (f x1), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ P (op (f x) (iterate op s1 f))"
                },
                {
                    "args": "P (iterate op (insert x s1) f)",
                    "id": "3.2.2.15",
                    "prevs": [
                        "3.2.2.7",
                        "3.2.2.14"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s1, monoidal op, P (neutral op), ¬(x ∈ s1), finite (support op f s), ∀x1. x1 ∈ insert x s1 ⟶ P (f x1), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), (∀x. x ∈ s1 ⟶ P (f x)) ⟶ P (iterate op s1 f) ⊢ P (iterate op (insert x s1) f)"
                },
                {
                    "args": "",
                    "id": "3.2.2.16",
                    "prevs": [
                        "3.2.2.0",
                        "3.2.2.1",
                        "3.2.2.2",
                        "3.2.2.3",
                        "3.2.2.4",
                        "3.2.2.5",
                        "3.2.2.15"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, P (neutral op), finite (support op f s), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ ∀x. ∀s1. ((∀x1. x1 ∈ s1 ⟶ P (f x1)) ⟶ P (iterate op s1 f)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. x1 ∈ insert x s1 ⟶ P (f x1)) ⟶ P (iterate op (insert x s1) f)"
                },
                {
                    "args": "",
                    "id": "3.2.3",
                    "prevs": [
                        "3.1",
                        "3.2.1",
                        "3.2.2",
                        "3.2.0"
                    ],
                    "rule": "apply_fact",
                    "th": "monoidal op, P (neutral op), finite (support op f s), ∀x. x ∈ support op f s ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ P (iterate op (support op f s) f)"
                },
                {
                    "args": "",
                    "id": "3.2.4",
                    "prevs": [
                        "3.2.0",
                        "3.2.3"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, P (neutral op), finite (support op f s), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ (∀x. x ∈ support op f s ⟶ P (f x)) ⟶ P (iterate op (support op f s) f)"
                },
                {
                    "args": "in_support, (∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x)) ⟶ P (iterate op (support op f s) f)",
                    "id": "3.3",
                    "prevs": [
                        "3.2"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "monoidal op, P (neutral op), finite (support op f s), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ (∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x)) ⟶ P (iterate op (support op f s) f)"
                },
                {
                    "args": "if_P, P (if finite (support op f s) then iterate op (support op f s) f else neutral op)",
                    "id": "3.4",
                    "prevs": [
                        "3.3",
                        "3.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, P (neutral op), finite (support op f s), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x) ⊢ P (if finite (support op f s) then iterate op (support op f s) f else neutral op)"
                },
                {
                    "args": "",
                    "id": "3.5",
                    "prevs": [
                        "3.0",
                        "3.4"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, P (neutral op), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x) ⊢ finite (support op f s) ⟶ P (if finite (support op f s) then iterate op (support op f s) f else neutral op)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, P (neutral op), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x) ⊢ ¬(finite (support op f s)) ⟶ P (if finite (support op f s) then iterate op (support op f s) f else neutral op)"
                },
                {
                    "args": "¬(finite (support op f s))",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(finite (support op f s)) ⊢ ¬(finite (support op f s))"
                },
                {
                    "args": "if_not_P, P (if finite (support op f s) then iterate op (support op f s) f else neutral op)",
                    "id": "4.1",
                    "prevs": [
                        "1",
                        "4.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, P (neutral op), ¬(finite (support op f s)), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x) ⊢ P (if finite (support op f s) then iterate op (support op f s) f else neutral op)"
                },
                {
                    "args": "",
                    "id": "4.2",
                    "prevs": [
                        "4.0",
                        "4.1"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, P (neutral op), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x) ⊢ ¬(finite (support op f s)) ⟶ P (if finite (support op f s) then iterate op (support op f s) f else neutral op)"
                },
                {
                    "args": "classical_cases",
                    "id": "5",
                    "prevs": [
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, P (neutral op), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x) ⊢ P (if finite (support op f s) then iterate op (support op f s) f else neutral op)"
                },
                {
                    "args": "iterate_expand_cases, P (iterate op s f)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, P (neutral op), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x) ⊢ P (iterate op s f)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ P (neutral op) ⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (op x y)) ⟶ (∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x)) ⟶ P (iterate op s f)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ P (neutral op) ",
                "   ⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (op x y)) ",
                "      ⟶ (∀x. x ∈ s ∧ ¬(f x = neutral op) ⟶ P (f x)) ⟶ P (iterate op s f)"
            ],
            "steps": [
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_expand_cases"
                },
                {
                    "case": "finite (support op f s)",
                    "goal_id": "4",
                    "method_name": "cases"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "4.0"
                    ],
                    "goal_id": "4.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4.1",
                    "method_name": "revert_intro"
                },
                {
                    "goal_id": "3.1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "in_support"
                },
                {
                    "fact_ids": [
                        "3.0"
                    ],
                    "goal_id": "3.1",
                    "method_name": "apply_forward_step",
                    "param_P": "(%s. (∀x. x ∈ s ⟶ P (f x)) ⟶ P (iterate op s f))",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.1"
                    ],
                    "goal_id": "3.2.1",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "3.2.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "3.2.1.1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "3.2.1.1"
                    ],
                    "goal_id": "3.2.1.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3.2.2",
                    "method_name": "introduction",
                    "names": "x,s1"
                },
                {
                    "fact_ids": [
                        "0",
                        "3.2.2.4"
                    ],
                    "goal_id": "3.2.2.6",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "3.2.2.6",
                        "3.2.2.3"
                    ],
                    "goal_id": "3.2.2.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "3.2.2.7"
                    ],
                    "goal_id": "3.2.2.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3.2.2.8",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "3.2.2.5"
                    ],
                    "goal_id": "3.2.2.8",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "3.2.2.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "3.2.2.8",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "3.2.2.8",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "3.2.2.2"
                    ],
                    "goal_id": "3.2.2.12",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "3.2.2.12",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "3.2.2.5"
                    ],
                    "goal_id": "3.2.2.12.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "3.2.2.12.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "3.2.2.12.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "4.0"
                    ],
                    "goal_id": "4.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "'a ⇒ bool",
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_related",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "R (neutral op) (neutral op)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "R (neutral op) (neutral op) ⊢ R (neutral op) (neutral op)"
                },
                {
                    "args": "∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2)"
                },
                {
                    "args": "finite s",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, R (neutral op) (neutral op), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ (∀x. x ∈ ∅ ⟶ R (f x) (g x)) ⟶ R (iterate op ∅ f) (iterate op ∅ g)"
                },
                {
                    "args": "∀x. x ∈ ∅ ⟶ R (f x) (g x)",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ ∅ ⟶ R (f x) (g x) ⊢ ∀x. x ∈ ∅ ⟶ R (f x) (g x)"
                },
                {
                    "args": "iterate_empty, {f: f}",
                    "id": "4.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "iterate_empty, {f: g}",
                    "id": "4.2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ g = neutral op"
                },
                {
                    "args": "R (neutral op) (iterate op ∅ g)",
                    "id": "4.3",
                    "prevs": [
                        "4.2",
                        "1"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op, R (neutral op) (neutral op), ∀x. x ∈ ∅ ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ R (neutral op) (iterate op ∅ g)"
                },
                {
                    "args": "R (iterate op ∅ f) (iterate op ∅ g)",
                    "id": "4.4",
                    "prevs": [
                        "4.1",
                        "4.3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op, R (neutral op) (neutral op), ∀x. x ∈ ∅ ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ R (iterate op ∅ f) (iterate op ∅ g)"
                },
                {
                    "args": "",
                    "id": "4.5",
                    "prevs": [
                        "4.0",
                        "4.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, R (neutral op) (neutral op), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ (∀x. x ∈ ∅ ⟶ R (f x) (g x)) ⟶ R (iterate op ∅ f) (iterate op ∅ g)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, R (neutral op) (neutral op), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ ∀x. ∀s1. ((∀x1. x1 ∈ s1 ⟶ R (f x1) (g x1)) ⟶ R (iterate op s1 f) (iterate op s1 g)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1)) ⟶ R (iterate op (insert x s1) f) (iterate op (insert x s1) g)"
                },
                {
                    "args": "x, 'b",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "s1, 'b set",
                    "id": "5.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s1"
                },
                {
                    "args": "(∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g)",
                    "id": "5.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g) ⊢ (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g)"
                },
                {
                    "args": "¬(x ∈ s1)",
                    "id": "5.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s1) ⊢ ¬(x ∈ s1)"
                },
                {
                    "args": "finite s1",
                    "id": "5.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s1 ⊢ finite s1"
                },
                {
                    "args": "∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1)",
                    "id": "5.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1) ⊢ ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1)"
                },
                {
                    "args": "iterate_insert, {f: f, x: x}",
                    "id": "5.6",
                    "prevs": [
                        "0",
                        "5.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op ⊢ iterate op (insert x s1) f = (if x ∈ s1 then iterate op s1 f else op (f x) (iterate op s1 f))"
                },
                {
                    "args": "iterate_insert, {f: g, x: x}",
                    "id": "5.7",
                    "prevs": [
                        "0",
                        "5.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op ⊢ iterate op (insert x s1) g = (if x ∈ s1 then iterate op s1 g else op (g x) (iterate op s1 g))"
                },
                {
                    "args": "if_not_P",
                    "id": "5.8",
                    "prevs": [
                        "5.6",
                        "5.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1) ⊢ iterate op (insert x s1) f = op (f x) (iterate op s1 f)"
                },
                {
                    "args": "if_not_P",
                    "id": "5.9",
                    "prevs": [
                        "5.7",
                        "5.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1) ⊢ iterate op (insert x s1) g = op (g x) (iterate op s1 g)"
                },
                {
                    "args": "eq_refl, {x: x}",
                    "id": "5.10",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ x = x"
                },
                {
                    "args": "disjI1, {A: x = x, B: x ∈ s1}",
                    "id": "5.11",
                    "prevs": [
                        "5.10"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite s1, monoidal op, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ x = x ∨ x ∈ s1"
                },
                {
                    "args": "member_insert, x ∈ insert x s1",
                    "id": "5.12",
                    "prevs": [
                        "5.11"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite s1, monoidal op, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ x ∈ insert x s1"
                },
                {
                    "args": "",
                    "id": "5.13",
                    "prevs": [
                        "5.5",
                        "5.12"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, finite s1, monoidal op, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ R (f x) (g x)"
                },
                {
                    "args": "",
                    "id": "5.14",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite s1, monoidal op, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ ∀x. x ∈ s1 ⟶ R (f x) (g x)"
                },
                {
                    "args": "x1, 'b",
                    "id": "5.14.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ s1",
                    "id": "5.14.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s1 ⊢ x1 ∈ s1"
                },
                {
                    "args": "disjI2, {A: x1 = x, B: x1 ∈ s1}",
                    "id": "5.14.2",
                    "prevs": [
                        "5.14.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite s1, monoidal op, x1 ∈ s1, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ x1 = x ∨ x1 ∈ s1"
                },
                {
                    "args": "member_insert, x1 ∈ insert x s1",
                    "id": "5.14.3",
                    "prevs": [
                        "5.14.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite s1, monoidal op, x1 ∈ s1, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ x1 ∈ insert x s1"
                },
                {
                    "args": "",
                    "id": "5.14.4",
                    "prevs": [
                        "5.5",
                        "5.14.3"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, finite s1, monoidal op, x1 ∈ s1, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ R (f x1) (g x1)"
                },
                {
                    "args": "",
                    "id": "5.14.5",
                    "prevs": [
                        "5.14.0",
                        "5.14.1",
                        "5.14.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite s1, monoidal op, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ ∀x1. x1 ∈ s1 ⟶ R (f x1) (g x1)"
                },
                {
                    "args": "",
                    "id": "5.15",
                    "prevs": [
                        "5.2",
                        "5.14"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, finite s1, monoidal op, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ R (iterate op s1 f) (iterate op s1 g)"
                },
                {
                    "args": "f x, iterate op s1 f, g x, iterate op s1 g",
                    "id": "5.16",
                    "prevs": [
                        "2",
                        "5.13",
                        "5.15"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite s1, monoidal op, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ R (op (f x) (iterate op s1 f)) (op (g x) (iterate op s1 g))"
                },
                {
                    "args": "R (op (f x) (iterate op s1 f)) (iterate op (insert x s1) g)",
                    "id": "5.17",
                    "prevs": [
                        "5.9",
                        "5.16"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite s1, monoidal op, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ R (op (f x) (iterate op s1 f)) (iterate op (insert x s1) g)"
                },
                {
                    "args": "R (iterate op (insert x s1) f) (iterate op (insert x s1) g)",
                    "id": "5.18",
                    "prevs": [
                        "5.8",
                        "5.17"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite s1, monoidal op, ¬(x ∈ s1), R (neutral op) (neutral op), ∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1), (∀x. x ∈ s1 ⟶ R (f x) (g x)) ⟶ R (iterate op s1 f) (iterate op s1 g), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ R (iterate op (insert x s1) f) (iterate op (insert x s1) g)"
                },
                {
                    "args": "",
                    "id": "5.19",
                    "prevs": [
                        "5.0",
                        "5.1",
                        "5.2",
                        "5.3",
                        "5.4",
                        "5.5",
                        "5.18"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, R (neutral op) (neutral op), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ ∀x. ∀s1. ((∀x1. x1 ∈ s1 ⟶ R (f x1) (g x1)) ⟶ R (iterate op s1 f) (iterate op s1 g)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1)) ⟶ R (iterate op (insert x s1) f) (iterate op (insert x s1) g)"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "6",
                    "prevs": [
                        "3",
                        "4",
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, R (neutral op) (neutral op), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (iterate op s f) (iterate op s g)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ R (neutral op) (neutral op) ⟶ (∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2)) ⟶ finite s ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (iterate op s f) (iterate op s g)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ R (neutral op) (neutral op) ",
                "   ⟶ (∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2)) ",
                "      ⟶ finite s ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (iterate op s f) (iterate op s g)"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.2",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "4.1"
                    ],
                    "goal_id": "4.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction",
                    "names": "x,s1"
                },
                {
                    "fact_ids": [
                        "0",
                        "5.4"
                    ],
                    "goal_id": "5.6",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "0",
                        "5.4"
                    ],
                    "goal_id": "5.7",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "param_x": "x",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "5.6",
                        "5.3"
                    ],
                    "goal_id": "5.8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "5.7",
                        "5.3"
                    ],
                    "goal_id": "5.9",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "5.8"
                    ],
                    "goal_id": "5.10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "5.9"
                    ],
                    "goal_id": "5.10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "5.10",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "5.5"
                    ],
                    "goal_id": "5.10",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5.10",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "5.10",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "5.10",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "5.2"
                    ],
                    "goal_id": "5.14",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5.14",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "5.5"
                    ],
                    "goal_id": "5.14.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5.14.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "5.14.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "'a ⇒ 'a ⇒ bool",
                "f": "'b ⇒ 'a",
                "g": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_eq_neutral",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x = neutral op",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x = neutral op ⊢ ∀x. x ∈ s ⟶ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ ∀x. x ∈ s ∧ ¬(f x = neutral op) ⟷ x ∈ ∅"
                },
                {
                    "args": "x, 'b",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ x ∈ ∅"
                },
                {
                    "args": "x ∈ s ∧ ¬(f x = neutral op)",
                    "id": "2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "2.1.1",
                    "prevs": [
                        "2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "2.1.2",
                    "prevs": [
                        "2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "2.1.3",
                    "prevs": [
                        "1",
                        "2.1.1"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s ∧ ¬(f x = neutral op), ∀x. x ∈ s ⟶ f x = neutral op ⊢ f x = neutral op"
                },
                {
                    "args": "negE_gen, {A: f x = neutral op, C: x ∈ ∅}",
                    "id": "2.1.4",
                    "prevs": [
                        "2.1.2",
                        "2.1.3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x ∈ s ∧ ¬(f x = neutral op), ∀x. x ∈ s ⟶ f x = neutral op ⊢ x ∈ ∅"
                },
                {
                    "args": "",
                    "id": "2.1.5",
                    "prevs": [
                        "2.1.0",
                        "2.1.4"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ x ∈ ∅"
                },
                {
                    "args": "",
                    "id": "2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ x ∈ ∅ ⟶ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ ∅",
                    "id": "2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ ∅ ⊢ x ∈ ∅"
                },
                {
                    "args": "member_empty, x ∈ s ∧ ¬(f x = neutral op)",
                    "id": "2.2.1",
                    "prevs": [
                        "2.2.0"
                    ],
                    "rule": "resolve_theorem",
                    "th": "x ∈ ∅ ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "2.2.2",
                    "prevs": [
                        "2.2.0",
                        "2.2.1"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ x ∈ ∅ ⟶ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "2.3",
                    "prevs": [
                        "2.1",
                        "2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟷ x ∈ ∅"
                },
                {
                    "args": "",
                    "id": "2.4",
                    "prevs": [
                        "2.0",
                        "2.3"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ ∀x. x ∈ s ∧ ¬(f x = neutral op) ⟷ x ∈ ∅"
                },
                {
                    "args": "in_support, ∀x. x ∈ support op f s ⟷ x ∈ ∅",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ ∀x. x ∈ support op f s ⟷ x ∈ ∅"
                },
                {
                    "args": "member_ext",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ support op f s = ∅"
                },
                {
                    "args": "iterate_empty, {f: f, op: op}",
                    "id": "5",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "iterate op (support op f s) f = neutral op",
                    "id": "6",
                    "prevs": [
                        "4",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ iterate op (support op f s) f = neutral op"
                },
                {
                    "args": "iterate_support, iterate op s f = neutral op",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = neutral op ⊢ iterate op s f = neutral op"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "0",
                        "1",
                        "7"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ (∀x. x ∈ s ⟶ f x = neutral op) ⟶ iterate op s f = neutral op"
                }
            ],
            "prop": "monoidal op ⟶ (∀x. x ∈ s ⟶ f x = neutral op) ⟶ iterate op s f = neutral op",
            "steps": [
                {
                    "goal": "support op f s = {}",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.1.0"
                    ],
                    "goal_id": "2.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2.1.0"
                    ],
                    "goal_id": "2.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "1",
                        "2.1.1"
                    ],
                    "goal_id": "2.1.3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "2.1.2",
                        "2.1.3"
                    ],
                    "goal_id": "2.1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.2.0"
                    ],
                    "goal_id": "2.2.1",
                    "method_name": "apply_resolve_step",
                    "theorem": "member_empty"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "iterate_support"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "iterate_sing",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "iterate_insert, {f: f, s: (∅::'b set), x: x}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ finite (∅::'b set) ⟶ iterate op ({x}) f = (if x ∈ ∅ then iterate op ∅ f else op (f x) (iterate op ∅ f))"
                },
                {
                    "args": "finite_empty, {}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite (∅::'b set)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_fact",
                    "th": "monoidal op ⊢ iterate op ({x}) f = (if x ∈ ∅ then iterate op ∅ f else op (f x) (iterate op ∅ f))"
                },
                {
                    "args": "member_empty, {x: x}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ ¬(x ∈ ∅)"
                },
                {
                    "args": "if_not_P",
                    "id": "5",
                    "prevs": [
                        "3",
                        "4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ iterate op ({x}) f = op (f x) (iterate op ∅ f)"
                },
                {
                    "args": "iterate_empty, {f: f}",
                    "id": "6",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "6",
                        "5"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "monoidal op ⊢ iterate op ({x}) f = op (f x) (neutral op)"
                },
                {
                    "args": "monoidal_ac",
                    "id": "8",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op (neutral op) a = a) ∧ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD1",
                    "id": "10",
                    "prevs": [
                        "9"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. op a (neutral op) = a"
                },
                {
                    "args": "f x",
                    "id": "11",
                    "prevs": [
                        "10"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op (f x) (neutral op) = f x"
                },
                {
                    "args": "iterate op ({x}) f = f x",
                    "id": "12",
                    "prevs": [
                        "7",
                        "11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op ⊢ iterate op ({x}) f = f x"
                },
                {
                    "args": "",
                    "id": "13",
                    "prevs": [
                        "0",
                        "12"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op ({x}) f = f x"
                }
            ],
            "prop": "monoidal op ⟶ iterate op ({x}) f = f x",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_s": "({}::'b set)",
                    "param_x": "x",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal": "finite (∅::'b set)",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_empty"
                },
                {
                    "fact_ids": [
                        "1",
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal": "~(x ∈ ∅)",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "member_empty"
                },
                {
                    "fact_ids": [
                        "3",
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "6",
                        "5"
                    ],
                    "goal_id": "7",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal_id": "8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "8",
                    "method_name": "apply_forward_step",
                    "theorem": "monoidal_ac"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "9"
                    ],
                    "goal_id": "10",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "10"
                    ],
                    "goal_id": "11",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "x": "'b"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_closed_nonempty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "∀x. ∀y. P x ⟶ P y ⟶ P (op x y)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ ∀x. ∀y. P x ⟶ P y ⟶ P (op x y)"
                },
                {
                    "args": "finite s",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ ¬((∅::'b set) = ∅) ⟶ (∀x. x ∈ ∅ ⟶ P (f x)) ⟶ P (iterate op ∅ f)"
                },
                {
                    "args": "¬((∅::'b set) = ∅)",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬((∅::'b set) = ∅) ⊢ ¬((∅::'b set) = ∅)"
                },
                {
                    "args": "∀x. x ∈ ∅ ⟶ P (f x)",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ ∅ ⟶ P (f x) ⊢ ∀x. x ∈ ∅ ⟶ P (f x)"
                },
                {
                    "args": "eq_refl, {x: (∅::'b set)}",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (∅::'b set) = ∅"
                },
                {
                    "args": "negE_gen, {A: (∅::'b set) = ∅, C: P (iterate op ∅ f)}",
                    "id": "3.3",
                    "prevs": [
                        "3.0",
                        "3.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op, ¬((∅::'b set) = ∅), ∀x. x ∈ ∅ ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ P (iterate op ∅ f)"
                },
                {
                    "args": "",
                    "id": "3.4",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ ¬((∅::'b set) = ∅) ⟶ (∀x. x ∈ ∅ ⟶ P (f x)) ⟶ P (iterate op ∅ f)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ ∀x. ∀s1. (¬(s1 = ∅) ⟶ (∀x1. x1 ∈ s1 ⟶ P (f x1)) ⟶ P (iterate op s1 f)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ ¬(insert x s1 = ∅) ⟶ (∀x1. x1 ∈ insert x s1 ⟶ P (f x1)) ⟶ P (iterate op (insert x s1) f)"
                },
                {
                    "args": "a, 'b",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "t, 'b set",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR t"
                },
                {
                    "args": "¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f)",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f)"
                },
                {
                    "args": "¬(a ∈ t)",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ t) ⊢ ¬(a ∈ t)"
                },
                {
                    "args": "finite t",
                    "id": "4.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "¬(insert a t = ∅)",
                    "id": "4.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(insert a t = ∅) ⊢ ¬(insert a t = ∅)"
                },
                {
                    "args": "∀x. x ∈ insert a t ⟶ P (f x)",
                    "id": "4.6",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ insert a t ⟶ P (f x) ⊢ ∀x. x ∈ insert a t ⟶ P (f x)"
                },
                {
                    "args": "member_insert",
                    "id": "4.7",
                    "prevs": [
                        "4.6"
                    ],
                    "rule": "rewrite_fact",
                    "th": "∀x. x ∈ insert a t ⟶ P (f x) ⊢ ∀x. x = a ∨ x ∈ t ⟶ P (f x)"
                },
                {
                    "args": "",
                    "id": "4.8",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ t = ∅ ⟶ P (iterate op (insert a t) f)"
                },
                {
                    "args": "t = ∅",
                    "id": "4.8.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "t = ∅ ⊢ t = ∅"
                },
                {
                    "args": "iterate_sing, {f: f, x: a}",
                    "id": "4.8.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({a}) f = f a"
                },
                {
                    "args": "eq_refl, {x: a}",
                    "id": "4.8.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ a = a"
                },
                {
                    "args": "disjI1, {A: a = a, B: a ∈ t}",
                    "id": "4.8.3",
                    "prevs": [
                        "4.8.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, t = ∅, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ a = a ∨ a ∈ t"
                },
                {
                    "args": "a",
                    "id": "4.8.4",
                    "prevs": [
                        "4.7",
                        "4.8.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, monoidal op, t = ∅, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ P (f a)"
                },
                {
                    "args": "P (iterate op ({a}) f)",
                    "id": "4.8.5",
                    "prevs": [
                        "4.8.1",
                        "4.8.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, t = ∅, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ P (iterate op ({a}) f)"
                },
                {
                    "args": "P (iterate op (insert a t) f)",
                    "id": "4.8.6",
                    "prevs": [
                        "4.8.0",
                        "4.8.5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, t = ∅, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ P (iterate op (insert a t) f)"
                },
                {
                    "args": "",
                    "id": "4.8.7",
                    "prevs": [
                        "4.8.0",
                        "4.8.6"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ t = ∅ ⟶ P (iterate op (insert a t) f)"
                },
                {
                    "args": "",
                    "id": "4.9",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ ¬(t = ∅) ⟶ P (iterate op (insert a t) f)"
                },
                {
                    "args": "¬(t = ∅)",
                    "id": "4.9.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(t = ∅) ⊢ ¬(t = ∅)"
                },
                {
                    "args": "iterate_insert, {f: f, x: a}",
                    "id": "4.9.1",
                    "prevs": [
                        "0",
                        "4.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t, monoidal op ⊢ iterate op (insert a t) f = (if a ∈ t then iterate op t f else op (f a) (iterate op t f))"
                },
                {
                    "args": "if_not_P",
                    "id": "4.9.2",
                    "prevs": [
                        "4.9.1",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite t, monoidal op, ¬(a ∈ t) ⊢ iterate op (insert a t) f = op (f a) (iterate op t f)"
                },
                {
                    "args": "eq_refl, {x: a}",
                    "id": "4.9.3",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ a = a"
                },
                {
                    "args": "disjI1, {A: a = a, B: a ∈ t}",
                    "id": "4.9.4",
                    "prevs": [
                        "4.9.3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ a = a ∨ a ∈ t"
                },
                {
                    "args": "a",
                    "id": "4.9.5",
                    "prevs": [
                        "4.7",
                        "4.9.4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ P (f a)"
                },
                {
                    "args": "",
                    "id": "4.9.6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ ∀x. x ∈ t ⟶ P (f x)"
                },
                {
                    "args": "x, 'b",
                    "id": "4.9.6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ t",
                    "id": "4.9.6.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ⊢ x ∈ t"
                },
                {
                    "args": "disjI2, {A: x = a, B: x ∈ t}",
                    "id": "4.9.6.2",
                    "prevs": [
                        "4.9.6.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, x ∈ t, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ x = a ∨ x ∈ t"
                },
                {
                    "args": "x",
                    "id": "4.9.6.3",
                    "prevs": [
                        "4.7",
                        "4.9.6.2"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, monoidal op, x ∈ t, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ P (f x)"
                },
                {
                    "args": "",
                    "id": "4.9.6.4",
                    "prevs": [
                        "4.9.6.0",
                        "4.9.6.1",
                        "4.9.6.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ ∀x. x ∈ t ⟶ P (f x)"
                },
                {
                    "args": "",
                    "id": "4.9.7",
                    "prevs": [
                        "4.2",
                        "4.9.0",
                        "4.9.6"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ P (iterate op t f)"
                },
                {
                    "args": "f a, iterate op t f",
                    "id": "4.9.8",
                    "prevs": [
                        "1",
                        "4.9.5",
                        "4.9.7"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ P (op (f a) (iterate op t f))"
                },
                {
                    "args": "P (iterate op (insert a t) f)",
                    "id": "4.9.9",
                    "prevs": [
                        "4.9.2",
                        "4.9.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ P (iterate op (insert a t) f)"
                },
                {
                    "args": "",
                    "id": "4.9.10",
                    "prevs": [
                        "4.9.0",
                        "4.9.9"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ ¬(t = ∅) ⟶ P (iterate op (insert a t) f)"
                },
                {
                    "args": "classical_cases",
                    "id": "4.10",
                    "prevs": [
                        "4.8",
                        "4.9"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ P (f x), ∀x. ∀y. P x ⟶ P y ⟶ P (op x y), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f) ⊢ P (iterate op (insert a t) f)"
                },
                {
                    "args": "",
                    "id": "4.11",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.3",
                        "4.4",
                        "4.5",
                        "4.6",
                        "4.10"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ ∀a. ∀t. (¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ P (f x)) ⟶ P (iterate op t f)) ⟶ ¬(a ∈ t) ⟶ finite t ⟶ ¬(insert a t = ∅) ⟶ (∀x. x ∈ insert a t ⟶ P (f x)) ⟶ P (iterate op (insert a t) f)"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "5",
                    "prevs": [
                        "2",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, ∀x. ∀y. P x ⟶ P y ⟶ P (op x y) ⊢ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ P (f x)) ⟶ P (iterate op s f)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (op x y)) ⟶ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ P (f x)) ⟶ P (iterate op s f)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (op x y)) ",
                "   ⟶ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ P (f x)) ⟶ P (iterate op s f)"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.0"
                    ],
                    "goal_id": "3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "a,t"
                },
                {
                    "fact_ids": [
                        "4.6"
                    ],
                    "goal_id": "4.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "case": "t = {}",
                    "goal_id": "4.8",
                    "method_name": "cases"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "4.8.0"
                    ],
                    "goal_id": "4.8.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.8.1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "a",
                    "theorem": "iterate_sing"
                },
                {
                    "fact_ids": [
                        "4.8.1"
                    ],
                    "goal_id": "4.8.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4.7"
                    ],
                    "goal_id": "4.8.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "4.8.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "4.8.2",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "goal_id": "4.9",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0",
                        "4.4"
                    ],
                    "goal_id": "4.9.1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "a",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "4.9.1",
                        "4.3"
                    ],
                    "goal_id": "4.9.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "4.9.2"
                    ],
                    "goal_id": "4.9.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "4.9.3",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "4.7"
                    ],
                    "goal_id": "4.9.3",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "4.9.3",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "4.9.3",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.9.6",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "4.9.6",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "4.7"
                    ],
                    "goal_id": "4.9.6.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "4.9.6.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "'a ⇒ bool",
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_related_nonempty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2)"
                },
                {
                    "args": "finite s",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ ¬((∅::'b set) = ∅) ⟶ (∀x. x ∈ ∅ ⟶ R (f x) (g x)) ⟶ R (iterate op ∅ f) (iterate op ∅ g)"
                },
                {
                    "args": "¬((∅::'b set) = ∅)",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬((∅::'b set) = ∅) ⊢ ¬((∅::'b set) = ∅)"
                },
                {
                    "args": "∀x. x ∈ ∅ ⟶ R (f x) (g x)",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ ∅ ⟶ R (f x) (g x) ⊢ ∀x. x ∈ ∅ ⟶ R (f x) (g x)"
                },
                {
                    "args": "eq_refl, {x: (∅::'b set)}",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (∅::'b set) = ∅"
                },
                {
                    "args": "negE_gen, {A: (∅::'b set) = ∅, C: R (iterate op ∅ f) (iterate op ∅ g)}",
                    "id": "3.3",
                    "prevs": [
                        "3.0",
                        "3.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op, ¬((∅::'b set) = ∅), ∀x. x ∈ ∅ ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ R (iterate op ∅ f) (iterate op ∅ g)"
                },
                {
                    "args": "",
                    "id": "3.4",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ ¬((∅::'b set) = ∅) ⟶ (∀x. x ∈ ∅ ⟶ R (f x) (g x)) ⟶ R (iterate op ∅ f) (iterate op ∅ g)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ ∀x. ∀s1. (¬(s1 = ∅) ⟶ (∀x1. x1 ∈ s1 ⟶ R (f x1) (g x1)) ⟶ R (iterate op s1 f) (iterate op s1 g)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ ¬(insert x s1 = ∅) ⟶ (∀x1. x1 ∈ insert x s1 ⟶ R (f x1) (g x1)) ⟶ R (iterate op (insert x s1) f) (iterate op (insert x s1) g)"
                },
                {
                    "args": "a, 'b",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "t, 'b set",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR t"
                },
                {
                    "args": "¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g)",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g)"
                },
                {
                    "args": "¬(a ∈ t)",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ t) ⊢ ¬(a ∈ t)"
                },
                {
                    "args": "finite t",
                    "id": "4.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "¬(insert a t = ∅)",
                    "id": "4.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(insert a t = ∅) ⊢ ¬(insert a t = ∅)"
                },
                {
                    "args": "∀x. x ∈ insert a t ⟶ R (f x) (g x)",
                    "id": "4.6",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ insert a t ⟶ R (f x) (g x) ⊢ ∀x. x ∈ insert a t ⟶ R (f x) (g x)"
                },
                {
                    "args": "",
                    "id": "4.7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ t = ∅ ⟶ R (iterate op (insert a t) f) (iterate op (insert a t) g)"
                },
                {
                    "args": "t = ∅",
                    "id": "4.7.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "t = ∅ ⊢ t = ∅"
                },
                {
                    "args": "iterate_sing, {f: f, x: a}",
                    "id": "4.7.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({a}) f = f a"
                },
                {
                    "args": "iterate_sing, {f: g, x: a}",
                    "id": "4.7.2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({a}) g = g a"
                },
                {
                    "args": "eq_refl, {x: a}",
                    "id": "4.7.3",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ a = a"
                },
                {
                    "args": "disjI1, {A: a = a, B: a ∈ t}",
                    "id": "4.7.4",
                    "prevs": [
                        "4.7.3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, t = ∅, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ a = a ∨ a ∈ t"
                },
                {
                    "args": "member_insert, a ∈ insert a t",
                    "id": "4.7.5",
                    "prevs": [
                        "4.7.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, t = ∅, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ a ∈ insert a t"
                },
                {
                    "args": "a",
                    "id": "4.7.6",
                    "prevs": [
                        "4.6",
                        "4.7.5"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, monoidal op, t = ∅, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ R (f a) (g a)"
                },
                {
                    "args": "R (f a) (iterate op ({a}) g)",
                    "id": "4.7.7",
                    "prevs": [
                        "4.7.2",
                        "4.7.6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, t = ∅, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ R (f a) (iterate op ({a}) g)"
                },
                {
                    "args": "R (iterate op ({a}) f) (iterate op ({a}) g)",
                    "id": "4.7.8",
                    "prevs": [
                        "4.7.1",
                        "4.7.7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, t = ∅, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ R (iterate op ({a}) f) (iterate op ({a}) g)"
                },
                {
                    "args": "R (iterate op (insert a t) f) (iterate op (insert a t) g)",
                    "id": "4.7.9",
                    "prevs": [
                        "4.7.0",
                        "4.7.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, t = ∅, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ R (iterate op (insert a t) f) (iterate op (insert a t) g)"
                },
                {
                    "args": "",
                    "id": "4.7.10",
                    "prevs": [
                        "4.7.0",
                        "4.7.9"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ t = ∅ ⟶ R (iterate op (insert a t) f) (iterate op (insert a t) g)"
                },
                {
                    "args": "",
                    "id": "4.8",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ ¬(t = ∅) ⟶ R (iterate op (insert a t) f) (iterate op (insert a t) g)"
                },
                {
                    "args": "¬(t = ∅)",
                    "id": "4.8.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(t = ∅) ⊢ ¬(t = ∅)"
                },
                {
                    "args": "iterate_insert, {f: f, x: a}",
                    "id": "4.8.1",
                    "prevs": [
                        "0",
                        "4.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t, monoidal op ⊢ iterate op (insert a t) f = (if a ∈ t then iterate op t f else op (f a) (iterate op t f))"
                },
                {
                    "args": "iterate_insert, {f: g, x: a}",
                    "id": "4.8.2",
                    "prevs": [
                        "0",
                        "4.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t, monoidal op ⊢ iterate op (insert a t) g = (if a ∈ t then iterate op t g else op (g a) (iterate op t g))"
                },
                {
                    "args": "if_not_P",
                    "id": "4.8.3",
                    "prevs": [
                        "4.8.1",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite t, monoidal op, ¬(a ∈ t) ⊢ iterate op (insert a t) f = op (f a) (iterate op t f)"
                },
                {
                    "args": "if_not_P",
                    "id": "4.8.4",
                    "prevs": [
                        "4.8.2",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite t, monoidal op, ¬(a ∈ t) ⊢ iterate op (insert a t) g = op (g a) (iterate op t g)"
                },
                {
                    "args": "eq_refl, {x: a}",
                    "id": "4.8.5",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ a = a"
                },
                {
                    "args": "disjI1, {A: a = a, B: a ∈ t}",
                    "id": "4.8.6",
                    "prevs": [
                        "4.8.5"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ a = a ∨ a ∈ t"
                },
                {
                    "args": "member_insert, a ∈ insert a t",
                    "id": "4.8.7",
                    "prevs": [
                        "4.8.6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ a ∈ insert a t"
                },
                {
                    "args": "a",
                    "id": "4.8.8",
                    "prevs": [
                        "4.6",
                        "4.8.7"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ R (f a) (g a)"
                },
                {
                    "args": "",
                    "id": "4.8.9",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ ∀x. x ∈ t ⟶ R (f x) (g x)"
                },
                {
                    "args": "x, 'b",
                    "id": "4.8.9.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ t",
                    "id": "4.8.9.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ⊢ x ∈ t"
                },
                {
                    "args": "disjI2, {A: x = a, B: x ∈ t}",
                    "id": "4.8.9.2",
                    "prevs": [
                        "4.8.9.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, x ∈ t, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ x = a ∨ x ∈ t"
                },
                {
                    "args": "member_insert, x ∈ insert a t",
                    "id": "4.8.9.3",
                    "prevs": [
                        "4.8.9.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, x ∈ t, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ x ∈ insert a t"
                },
                {
                    "args": "x",
                    "id": "4.8.9.4",
                    "prevs": [
                        "4.6",
                        "4.8.9.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, monoidal op, x ∈ t, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ R (f x) (g x)"
                },
                {
                    "args": "",
                    "id": "4.8.9.5",
                    "prevs": [
                        "4.8.9.0",
                        "4.8.9.1",
                        "4.8.9.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ ∀x. x ∈ t ⟶ R (f x) (g x)"
                },
                {
                    "args": "",
                    "id": "4.8.10",
                    "prevs": [
                        "4.2",
                        "4.8.0",
                        "4.8.9"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ R (iterate op t f) (iterate op t g)"
                },
                {
                    "args": "f a, iterate op t f, g a, iterate op t g",
                    "id": "4.8.11",
                    "prevs": [
                        "1",
                        "4.8.8",
                        "4.8.10"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ R (op (f a) (iterate op t f)) (op (g a) (iterate op t g))"
                },
                {
                    "args": "R (op (f a) (iterate op t f)) (iterate op (insert a t) g)",
                    "id": "4.8.12",
                    "prevs": [
                        "4.8.4",
                        "4.8.11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ R (op (f a) (iterate op t f)) (iterate op (insert a t) g)"
                },
                {
                    "args": "R (iterate op (insert a t) f) (iterate op (insert a t) g)",
                    "id": "4.8.13",
                    "prevs": [
                        "4.8.3",
                        "4.8.12"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, ¬(t = ∅), ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ R (iterate op (insert a t) f) (iterate op (insert a t) g)"
                },
                {
                    "args": "",
                    "id": "4.8.14",
                    "prevs": [
                        "4.8.0",
                        "4.8.13"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ ¬(t = ∅) ⟶ R (iterate op (insert a t) f) (iterate op (insert a t) g)"
                },
                {
                    "args": "classical_cases",
                    "id": "4.9",
                    "prevs": [
                        "4.7",
                        "4.8"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ¬(insert a t = ∅), ∀x. x ∈ insert a t ⟶ R (f x) (g x), ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2), ¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g) ⊢ R (iterate op (insert a t) f) (iterate op (insert a t) g)"
                },
                {
                    "args": "",
                    "id": "4.10",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.3",
                        "4.4",
                        "4.5",
                        "4.6",
                        "4.9"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ ∀a. ∀t. (¬(t = ∅) ⟶ (∀x. x ∈ t ⟶ R (f x) (g x)) ⟶ R (iterate op t f) (iterate op t g)) ⟶ ¬(a ∈ t) ⟶ finite t ⟶ ¬(insert a t = ∅) ⟶ (∀x. x ∈ insert a t ⟶ R (f x) (g x)) ⟶ R (iterate op (insert a t) f) (iterate op (insert a t) g)"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "5",
                    "prevs": [
                        "2",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2) ⊢ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (iterate op s f) (iterate op s g)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ (∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2)) ⟶ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (iterate op s f) (iterate op s g)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ (∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (op x1 y1) (op x2 y2)) ",
                "   ⟶ finite s ",
                "      ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (iterate op s f) (iterate op s g)"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.0"
                    ],
                    "goal_id": "3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "a,t"
                },
                {
                    "case": "t = ∅",
                    "goal_id": "4.7",
                    "method_name": "cases"
                },
                {
                    "goal_id": "4.7",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "4.7.0"
                    ],
                    "goal_id": "4.7.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.7.1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "a",
                    "theorem": "iterate_sing"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.7.2",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "param_x": "a",
                    "theorem": "iterate_sing"
                },
                {
                    "fact_ids": [
                        "4.7.1"
                    ],
                    "goal_id": "4.7.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4.7.2"
                    ],
                    "goal_id": "4.7.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4.6"
                    ],
                    "goal_id": "4.7.3",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "4.7.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "4.7.3",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "4.7.3",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0",
                        "4.4"
                    ],
                    "goal_id": "4.8.1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "a",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "0",
                        "4.4"
                    ],
                    "goal_id": "4.8.2",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "param_x": "a",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "4.8.1",
                        "4.3"
                    ],
                    "goal_id": "4.8.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "4.8.2",
                        "4.3"
                    ],
                    "goal_id": "4.8.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "4.8.3"
                    ],
                    "goal_id": "4.8.5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4.8.4"
                    ],
                    "goal_id": "4.8.5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "4.8.5",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "4.6"
                    ],
                    "goal_id": "4.8.5",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "4.8.5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "4.8.5",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "4.8.5",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.8.9",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "4.8.9",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "4.6"
                    ],
                    "goal_id": "4.8.9.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "4.8.9.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "4.8.9.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "'a ⇒ 'a ⇒ bool",
                "f": "'b ⇒ 'a",
                "g": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_delete",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "a ∈ s",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ⊢ a ∈ s"
                },
                {
                    "args": "insert_delete",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "a ∈ s ⊢ insert a (delete s a) = s"
                },
                {
                    "args": "iterate op s f = iterate op (insert a (delete s a)) f",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "a ∈ s ⊢ iterate op s f = iterate op (insert a (delete s a)) f"
                },
                {
                    "args": "∀x. ¬(x = a) ∧ x ∈ s ⟶ x ∈ s",
                    "id": "5",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x. ¬(x = a) ∧ x ∈ s ⟶ x ∈ s"
                },
                {
                    "args": "member_delete, ∀x. x ∈ delete s a ⟶ x ∈ s",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, a ∈ s ⊢ ∀x. x ∈ delete s a ⟶ x ∈ s"
                },
                {
                    "args": "subsetI",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, a ∈ s ⊢ delete s a ⊆ s"
                },
                {
                    "args": "finite_subset",
                    "id": "8",
                    "prevs": [
                        "1",
                        "7"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, a ∈ s ⊢ finite (delete s a)"
                },
                {
                    "args": "iterate_insert, {f: f, x: a}",
                    "id": "9",
                    "prevs": [
                        "0",
                        "8"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op, a ∈ s ⊢ iterate op (insert a (delete s a)) f = (if a ∈ delete s a then iterate op (delete s a) f else op (f a) (iterate op (delete s a) f))"
                },
                {
                    "args": "¬(¬(a = a) ∧ a ∈ s)",
                    "id": "10",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ¬(¬(a = a) ∧ a ∈ s)"
                },
                {
                    "args": "member_delete, ¬(a ∈ delete s a)",
                    "id": "11",
                    "prevs": [
                        "10"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, a ∈ s ⊢ ¬(a ∈ delete s a)"
                },
                {
                    "args": "if_not_P",
                    "id": "12",
                    "prevs": [
                        "9",
                        "11"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, monoidal op, a ∈ s ⊢ iterate op (insert a (delete s a)) f = op (f a) (iterate op (delete s a) f)"
                },
                {
                    "args": "eq_sym_eq, op (f a) (iterate op (delete s a) f) = iterate op (insert a (delete s a)) f",
                    "id": "13",
                    "prevs": [
                        "12"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, a ∈ s ⊢ op (f a) (iterate op (delete s a) f) = iterate op (insert a (delete s a)) f"
                },
                {
                    "args": "op (f a) (iterate op (delete s a) f) = iterate op s f",
                    "id": "14",
                    "prevs": [
                        "4",
                        "13"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op, a ∈ s ⊢ op (f a) (iterate op (delete s a) f) = iterate op s f"
                },
                {
                    "args": "",
                    "id": "15",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "14"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ a ∈ s ⟶ op (f a) (iterate op (delete s a) f) = iterate op s f"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ⟶ a ∈ s ⟶ op (f a) (iterate op (delete s a) f) = iterate op s f"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_forward_step",
                    "theorem": "insert_delete"
                },
                {
                    "goal": "iterate op s f = iterate op (insert a (delete s a)) f",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "finite (delete s a)",
                    "goal_id": "5",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "param_t": "s",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_delete"
                },
                {
                    "goal_id": "5",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "0",
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "a",
                    "theorem": "iterate_insert"
                },
                {
                    "goal": "~(a ∈ delete s a)",
                    "goal_id": "10",
                    "method_name": "cut"
                },
                {
                    "goal_id": "10",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_delete"
                },
                {
                    "goal_id": "10",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "9",
                        "11"
                    ],
                    "goal_id": "12",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "13",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'b",
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "iterate_delta",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ a ∈ s ⟶ iterate op (if a ∈ s then support op f ({a}) else ∅) (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)"
                },
                {
                    "args": "a ∈ s",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ⊢ a ∈ s"
                },
                {
                    "args": "",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, a ∈ s ⊢ f a = neutral op ⟶ iterate op (if f a = neutral op then support op f ∅ else insert a (support op f ∅)) (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "f a = neutral op",
                    "id": "1.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "f a = neutral op ⊢ f a = neutral op"
                },
                {
                    "args": "iterate_empty, {f: λx. if x = a then f x else neutral op}",
                    "id": "1.1.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ (λx. if x = a then f x else neutral op) = neutral op"
                },
                {
                    "args": "neutral op = f a",
                    "id": "1.1.2",
                    "prevs": [
                        "1.1.0"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "f a = neutral op ⊢ neutral op = f a"
                },
                {
                    "args": "iterate op ∅ (λx. if x = a then f x else neutral op) = f a",
                    "id": "1.1.3",
                    "prevs": [
                        "1.1.1",
                        "1.1.2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, a ∈ s, f a = neutral op ⊢ iterate op ∅ (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "support_empty, iterate op (support op f ∅) (λx. if x = a then f x else neutral op) = f a",
                    "id": "1.1.4",
                    "prevs": [
                        "1.1.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, a ∈ s, f a = neutral op ⊢ iterate op (support op f ∅) (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "if_P, iterate op (if f a = neutral op then support op f ∅ else insert a (support op f ∅)) (λx. if x = a then f x else neutral op) = f a",
                    "id": "1.1.5",
                    "prevs": [
                        "1.1.4",
                        "1.1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, a ∈ s, f a = neutral op ⊢ iterate op (if f a = neutral op then support op f ∅ else insert a (support op f ∅)) (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "",
                    "id": "1.1.6",
                    "prevs": [
                        "1.1.0",
                        "1.1.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, a ∈ s ⊢ f a = neutral op ⟶ iterate op (if f a = neutral op then support op f ∅ else insert a (support op f ∅)) (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, a ∈ s ⊢ ¬(f a = neutral op) ⟶ iterate op (if f a = neutral op then support op f ∅ else insert a (support op f ∅)) (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "¬(f a = neutral op)",
                    "id": "1.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(f a = neutral op) ⊢ ¬(f a = neutral op)"
                },
                {
                    "args": "iterate_sing, {f: λx. if x = a then f x else neutral op, x: a}",
                    "id": "1.2.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({a}) (λx. if x = a then f x else neutral op) = (if a = a then f a else neutral op)"
                },
                {
                    "args": "eq_refl, {x: a}",
                    "id": "1.2.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ a = a"
                },
                {
                    "args": "if_P",
                    "id": "1.2.3",
                    "prevs": [
                        "1.2.1",
                        "1.2.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ iterate op ({a}) (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "support_empty, iterate op (insert a (support op f ∅)) (λx. if x = a then f x else neutral op) = f a",
                    "id": "1.2.4",
                    "prevs": [
                        "1.2.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, a ∈ s, ¬(f a = neutral op) ⊢ iterate op (insert a (support op f ∅)) (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "if_not_P, iterate op (if f a = neutral op then support op f ∅ else insert a (support op f ∅)) (λx. if x = a then f x else neutral op) = f a",
                    "id": "1.2.5",
                    "prevs": [
                        "1.2.4",
                        "1.2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, a ∈ s, ¬(f a = neutral op) ⊢ iterate op (if f a = neutral op then support op f ∅ else insert a (support op f ∅)) (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "",
                    "id": "1.2.6",
                    "prevs": [
                        "1.2.0",
                        "1.2.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, a ∈ s ⊢ ¬(f a = neutral op) ⟶ iterate op (if f a = neutral op then support op f ∅ else insert a (support op f ∅)) (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "classical_cases",
                    "id": "1.3",
                    "prevs": [
                        "1.1",
                        "1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, a ∈ s ⊢ iterate op (if f a = neutral op then support op f ∅ else insert a (support op f ∅)) (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "support_insert, iterate op (support op f ({a})) (λx. if x = a then f x else neutral op) = f a",
                    "id": "1.4",
                    "prevs": [
                        "1.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, a ∈ s ⊢ iterate op (support op f ({a})) (λx. if x = a then f x else neutral op) = f a"
                },
                {
                    "args": "if_P, iterate op (if a ∈ s then support op f ({a}) else ∅) (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)",
                    "id": "1.5",
                    "prevs": [
                        "1.4",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, a ∈ s ⊢ iterate op (if a ∈ s then support op f ({a}) else ∅) (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)"
                },
                {
                    "args": "",
                    "id": "1.6",
                    "prevs": [
                        "1.0",
                        "1.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ a ∈ s ⟶ iterate op (if a ∈ s then support op f ({a}) else ∅) (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ ¬(a ∈ s) ⟶ iterate op (if a ∈ s then support op f ({a}) else ∅) (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)"
                },
                {
                    "args": "¬(a ∈ s)",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s) ⊢ ¬(a ∈ s)"
                },
                {
                    "args": "iterate_empty, {f: λx. if x = a then f x else neutral op, op: op}",
                    "id": "2.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, ¬(a ∈ s) ⊢ iterate op ∅ (λx. if x = a then f x else neutral op) = neutral op"
                },
                {
                    "args": "if_not_P, iterate op (if a ∈ s then support op f ({a}) else ∅) (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)",
                    "id": "2.2",
                    "prevs": [
                        "2.1",
                        "2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ¬(a ∈ s) ⊢ iterate op (if a ∈ s then support op f ({a}) else ∅) (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)"
                },
                {
                    "args": "",
                    "id": "2.3",
                    "prevs": [
                        "2.0",
                        "2.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ ¬(a ∈ s) ⟶ iterate op (if a ∈ s then support op f ({a}) else ∅) (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)"
                },
                {
                    "args": "classical_cases",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ iterate op (if a ∈ s then support op f ({a}) else ∅) (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)"
                },
                {
                    "args": "support_delta, iterate op (support op (λx. if x = a then f x else neutral op) s) (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op (support op (λx. if x = a then f x else neutral op) s) (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)"
                },
                {
                    "args": "iterate_support, iterate op s (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "monoidal op ⊢ iterate op s (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op s (λx. if x = a then f x else neutral op) = (if a ∈ s then f a else neutral op)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ iterate op s (λx. if x = a then f x else neutral op) = ",
                "   (if a ∈ s then f a else neutral op)"
            ],
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "iterate_support"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_delta"
                },
                {
                    "case": "a ∈ s",
                    "goal_id": "1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_insert"
                },
                {
                    "case": "f a = neutral op",
                    "goal_id": "1.1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.1.0"
                    ],
                    "goal_id": "1.1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "1.1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_empty"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.1.1",
                    "method_name": "apply_forward_step",
                    "param_f": "(λx. if x = a then f x else neutral op)",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "1.1.1"
                    ],
                    "goal_id": "1.1.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "1.1.0"
                    ],
                    "goal_id": "1.1.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.2.0"
                    ],
                    "goal_id": "1.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "1.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_empty"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.2.1",
                    "method_name": "apply_forward_step",
                    "param_f": "(λx. if x = a then f x else neutral op)",
                    "param_x": "a",
                    "theorem": "iterate_sing"
                },
                {
                    "goal": "a = a",
                    "goal_id": "1.2.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "1.2.1",
                        "1.2.2"
                    ],
                    "goal_id": "1.2.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'b",
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_image",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ ∀s. finite s ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f s) g = iterate op s (g ∘ f)"
                },
                {
                    "args": "t, 'b set",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR t"
                },
                {
                    "args": "finite t",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "",
                    "id": "2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite t, monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ (∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f ∅) g = iterate op ∅ (g ∘ f)"
                },
                {
                    "args": "∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ f x = f y ⟶ x = y",
                    "id": "2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ f x = f y ⟶ x = y ⊢ ∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ f x = f y ⟶ x = y"
                },
                {
                    "args": "iterate_empty, {f: g}",
                    "id": "2.2.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ g = neutral op"
                },
                {
                    "args": "iterate_empty, {f: g ∘ f}",
                    "id": "2.2.2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ (g ∘ f) = neutral op"
                },
                {
                    "args": "neutral op = iterate op ∅ (g ∘ f)",
                    "id": "2.2.3",
                    "prevs": [
                        "2.2.2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op ⊢ neutral op = iterate op ∅ (g ∘ f)"
                },
                {
                    "args": "iterate op ∅ g = iterate op ∅ (g ∘ f)",
                    "id": "2.2.4",
                    "prevs": [
                        "2.2.1",
                        "2.2.3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite t, monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ f x = f y ⟶ x = y ⊢ iterate op ∅ g = iterate op ∅ (g ∘ f)"
                },
                {
                    "args": "image_empty, iterate op (image f ∅) g = iterate op ∅ (g ∘ f)",
                    "id": "2.2.5",
                    "prevs": [
                        "2.2.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite t, monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ f x = f y ⟶ x = y ⊢ iterate op (image f ∅) g = iterate op ∅ (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "2.2.6",
                    "prevs": [
                        "2.2.0",
                        "2.2.5"
                    ],
                    "rule": "intros",
                    "th": "finite t, monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ (∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f ∅) g = iterate op ∅ (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "2.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite t, monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ ∀x. ∀s1. ((∀x1. ∀y. x1 ∈ s1 ⟶ y ∈ s1 ⟶ f x1 = f y ⟶ x1 = y) ⟶ iterate op (image f s1) g = iterate op s1 (g ∘ f)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. ∀y. x1 ∈ insert x s1 ⟶ y ∈ insert x s1 ⟶ f x1 = f y ⟶ x1 = y) ⟶ iterate op (image f (insert x s1)) g = iterate op (insert x s1) (g ∘ f)"
                },
                {
                    "args": "a, 'b",
                    "id": "2.3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "t1, 'b set",
                    "id": "2.3.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR t1"
                },
                {
                    "args": "(∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f)",
                    "id": "2.3.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f)"
                },
                {
                    "args": "¬(a ∈ t1)",
                    "id": "2.3.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ t1) ⊢ ¬(a ∈ t1)"
                },
                {
                    "args": "finite t1",
                    "id": "2.3.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t1 ⊢ finite t1"
                },
                {
                    "args": "∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y",
                    "id": "2.3.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y ⊢ ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y"
                },
                {
                    "args": "finite_image, {f: f, s: t1}",
                    "id": "2.3.6",
                    "prevs": [
                        "2.3.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ finite (image f t1)"
                },
                {
                    "args": "iterate_insert, {f: g, x: f a}",
                    "id": "2.3.7",
                    "prevs": [
                        "0",
                        "2.3.6"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ iterate op (insert (f a) (image f t1)) g = (if f a ∈ image f t1 then iterate op (image f t1) g else op (g (f a)) (iterate op (image f t1) g))"
                },
                {
                    "args": "",
                    "id": "2.3.8",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ (∃x. f a = f x ∧ x ∈ t1) ⟶ a ∈ t1"
                },
                {
                    "args": "∃x. f a = f x ∧ x ∈ t1",
                    "id": "2.3.8.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x. f a = f x ∧ x ∈ t1 ⊢ ∃x. f a = f x ∧ x ∈ t1"
                },
                {
                    "args": "x, 'b",
                    "id": "2.3.8.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "f a = f x ∧ x ∈ t1",
                    "id": "2.3.8.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "f a = f x ∧ x ∈ t1 ⊢ f a = f x ∧ x ∈ t1"
                },
                {
                    "args": "conjD1",
                    "id": "2.3.8.3",
                    "prevs": [
                        "2.3.8.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "f a = f x ∧ x ∈ t1 ⊢ f a = f x"
                },
                {
                    "args": "conjD2",
                    "id": "2.3.8.4",
                    "prevs": [
                        "2.3.8.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "f a = f x ∧ x ∈ t1 ⊢ x ∈ t1"
                },
                {
                    "args": "eq_refl, {x: a}",
                    "id": "2.3.8.5",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ a = a"
                },
                {
                    "args": "disjI1, {A: a = a, B: a ∈ t1}",
                    "id": "2.3.8.6",
                    "prevs": [
                        "2.3.8.5"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), f a = f x ∧ x ∈ t1, ∃x. f a = f x ∧ x ∈ t1, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ a = a ∨ a ∈ t1"
                },
                {
                    "args": "member_insert, a ∈ insert a t1",
                    "id": "2.3.8.7",
                    "prevs": [
                        "2.3.8.6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), f a = f x ∧ x ∈ t1, ∃x. f a = f x ∧ x ∈ t1, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ a ∈ insert a t1"
                },
                {
                    "args": "disjI2, {A: x = a, B: x ∈ t1}",
                    "id": "2.3.8.8",
                    "prevs": [
                        "2.3.8.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), f a = f x ∧ x ∈ t1, ∃x. f a = f x ∧ x ∈ t1, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ x = a ∨ x ∈ t1"
                },
                {
                    "args": "member_insert, x ∈ insert a t1",
                    "id": "2.3.8.9",
                    "prevs": [
                        "2.3.8.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), f a = f x ∧ x ∈ t1, ∃x. f a = f x ∧ x ∈ t1, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ x ∈ insert a t1"
                },
                {
                    "args": "a, x",
                    "id": "2.3.8.10",
                    "prevs": [
                        "2.3.5",
                        "2.3.8.7",
                        "2.3.8.9",
                        "2.3.8.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), f a = f x ∧ x ∈ t1, ∃x. f a = f x ∧ x ∈ t1, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ a = x"
                },
                {
                    "args": "a ∈ t1",
                    "id": "2.3.8.11",
                    "prevs": [
                        "2.3.8.10",
                        "2.3.8.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), f a = f x ∧ x ∈ t1, ∃x. f a = f x ∧ x ∈ t1, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ a ∈ t1"
                },
                {
                    "args": "∃x. f a = f x ∧ x ∈ t1",
                    "id": "2.3.8.12",
                    "prevs": [
                        "2.3.8.0",
                        "2.3.8.0",
                        "2.3.8.1",
                        "2.3.8.2",
                        "2.3.8.11"
                    ],
                    "rule": "intros",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ (∃x. f a = f x ∧ x ∈ t1) ⟶ a ∈ t1"
                },
                {
                    "args": "in_image, f a ∈ image f t1 ⟶ a ∈ t1",
                    "id": "2.3.9",
                    "prevs": [
                        "2.3.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ f a ∈ image f t1 ⟶ a ∈ t1"
                },
                {
                    "args": "double_neg, ¬¬(f a ∈ image f t1) ⟶ ¬¬(a ∈ t1)",
                    "id": "2.3.10",
                    "prevs": [
                        "2.3.9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ ¬¬(f a ∈ image f t1) ⟶ ¬¬(a ∈ t1)"
                },
                {
                    "args": "contrapositive",
                    "id": "2.3.11",
                    "prevs": [
                        "2.3.3",
                        "2.3.10"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ ¬(f a ∈ image f t1)"
                },
                {
                    "args": "if_not_P",
                    "id": "2.3.12",
                    "prevs": [
                        "2.3.7",
                        "2.3.11"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ iterate op (insert (f a) (image f t1)) g = op (g (f a)) (iterate op (image f t1) g)"
                },
                {
                    "args": "iterate_insert, {f: g ∘ f, x: a}",
                    "id": "2.3.13",
                    "prevs": [
                        "0",
                        "2.3.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t1, monoidal op ⊢ iterate op (insert a t1) (g ∘ f) = (if a ∈ t1 then iterate op t1 (g ∘ f) else op ((g ∘ f) a) (iterate op t1 (g ∘ f)))"
                },
                {
                    "args": "if_not_P",
                    "id": "2.3.14",
                    "prevs": [
                        "2.3.13",
                        "2.3.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite t1, monoidal op, ¬(a ∈ t1) ⊢ iterate op (insert a t1) (g ∘ f) = op ((g ∘ f) a) (iterate op t1 (g ∘ f))"
                },
                {
                    "args": "",
                    "id": "2.3.15",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ ∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y"
                },
                {
                    "args": "x, 'b",
                    "id": "2.3.15.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "y, 'b",
                    "id": "2.3.15.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "x ∈ t1",
                    "id": "2.3.15.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t1 ⊢ x ∈ t1"
                },
                {
                    "args": "y ∈ t1",
                    "id": "2.3.15.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y ∈ t1 ⊢ y ∈ t1"
                },
                {
                    "args": "f x = f y",
                    "id": "2.3.15.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "f x = f y ⊢ f x = f y"
                },
                {
                    "args": "disjI2, {A: x = a, B: x ∈ t1}",
                    "id": "2.3.15.5",
                    "prevs": [
                        "2.3.15.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t, finite t1, monoidal op, x ∈ t1, y ∈ t1, ¬(a ∈ t1), f x = f y, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ x = a ∨ x ∈ t1"
                },
                {
                    "args": "member_insert, x ∈ insert a t1",
                    "id": "2.3.15.6",
                    "prevs": [
                        "2.3.15.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite t, finite t1, monoidal op, x ∈ t1, y ∈ t1, ¬(a ∈ t1), f x = f y, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ x ∈ insert a t1"
                },
                {
                    "args": "disjI2, {A: y = a, B: y ∈ t1}",
                    "id": "2.3.15.7",
                    "prevs": [
                        "2.3.15.3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t, finite t1, monoidal op, x ∈ t1, y ∈ t1, ¬(a ∈ t1), f x = f y, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ y = a ∨ y ∈ t1"
                },
                {
                    "args": "member_insert, y ∈ insert a t1",
                    "id": "2.3.15.8",
                    "prevs": [
                        "2.3.15.7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite t, finite t1, monoidal op, x ∈ t1, y ∈ t1, ¬(a ∈ t1), f x = f y, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ y ∈ insert a t1"
                },
                {
                    "args": "x, y",
                    "id": "2.3.15.9",
                    "prevs": [
                        "2.3.5",
                        "2.3.15.6",
                        "2.3.15.8",
                        "2.3.15.4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite t, finite t1, monoidal op, x ∈ t1, y ∈ t1, ¬(a ∈ t1), f x = f y, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ x = y"
                },
                {
                    "args": "",
                    "id": "2.3.15.10",
                    "prevs": [
                        "2.3.15.0",
                        "2.3.15.1",
                        "2.3.15.2",
                        "2.3.15.3",
                        "2.3.15.4",
                        "2.3.15.9"
                    ],
                    "rule": "intros",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ ∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y"
                },
                {
                    "args": "",
                    "id": "2.3.16",
                    "prevs": [
                        "2.3.2",
                        "2.3.15"
                    ],
                    "rule": "apply_fact",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ iterate op (image f t1) g = iterate op t1 (g ∘ f)"
                },
                {
                    "args": "op (g (f a)) (iterate op (image f t1) g) = op (g (f a)) (iterate op t1 (g ∘ f))",
                    "id": "2.3.17",
                    "prevs": [
                        "2.3.16"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ op (g (f a)) (iterate op (image f t1) g) = op (g (f a)) (iterate op t1 (g ∘ f))"
                },
                {
                    "args": "comp_fun_eval, op (g (f a)) (iterate op (image f t1) g) = op ((g ∘ f) a) (iterate op t1 (g ∘ f))",
                    "id": "2.3.18",
                    "prevs": [
                        "2.3.17"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ op (g (f a)) (iterate op (image f t1) g) = op ((g ∘ f) a) (iterate op t1 (g ∘ f))"
                },
                {
                    "args": "op (g (f a)) (iterate op (image f t1) g) = iterate op (insert a t1) (g ∘ f)",
                    "id": "2.3.19",
                    "prevs": [
                        "2.3.14",
                        "2.3.18"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ op (g (f a)) (iterate op (image f t1) g) = iterate op (insert a t1) (g ∘ f)"
                },
                {
                    "args": "iterate op (insert (f a) (image f t1)) g = iterate op (insert a t1) (g ∘ f)",
                    "id": "2.3.20",
                    "prevs": [
                        "2.3.12",
                        "2.3.19"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ iterate op (insert (f a) (image f t1)) g = iterate op (insert a t1) (g ∘ f)"
                },
                {
                    "args": "image_insert, iterate op (image f (insert a t1)) g = iterate op (insert a t1) (g ∘ f)",
                    "id": "2.3.21",
                    "prevs": [
                        "2.3.20"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite t, finite t1, monoidal op, ¬(a ∈ t1), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y, ∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y, (∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f) ⊢ iterate op (image f (insert a t1)) g = iterate op (insert a t1) (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "2.3.22",
                    "prevs": [
                        "2.3.0",
                        "2.3.1",
                        "2.3.2",
                        "2.3.3",
                        "2.3.4",
                        "2.3.5",
                        "2.3.21"
                    ],
                    "rule": "intros",
                    "th": "finite t, monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ ∀a. ∀t1. ((∀x. ∀y. x ∈ t1 ⟶ y ∈ t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t1) g = iterate op t1 (g ∘ f)) ⟶ ¬(a ∈ t1) ⟶ finite t1 ⟶ (∀x. ∀y. x ∈ insert a t1 ⟶ y ∈ insert a t1 ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f (insert a t1)) g = iterate op (insert a t1) (g ∘ f)"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "2.4",
                    "prevs": [
                        "2.1",
                        "2.2",
                        "2.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite t, monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t) g = iterate op t (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "2.5",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.4"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ ∀t. finite t ⟶ (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f t) g = iterate op t (g ∘ f)"
                },
                {
                    "args": "∀a. ∀a1. ∀b::'a. ∀b1. ∀c. a ⟷ a1 ⟶ (a1 ⟶ b = b1) ⟶ (if a then b else c) = (if a1 then b1 else c)",
                    "id": "3",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀a. ∀a1. ∀b::'a. ∀b1. ∀c. a ⟷ a1 ⟶ (a1 ⟶ b = b1) ⟶ (if a then b else c) = (if a1 then b1 else c)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ ∀x. ∀y. x ∈ support op (g ∘ f) s ⟶ y ∈ support op (g ∘ f) s ⟶ f x = f y ⟶ x = y"
                },
                {
                    "args": "x, 'b",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "y, 'b",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "x ∈ support op (g ∘ f) s",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op (g ∘ f) s ⊢ x ∈ support op (g ∘ f) s"
                },
                {
                    "args": "y ∈ support op (g ∘ f) s",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y ∈ support op (g ∘ f) s ⊢ y ∈ support op (g ∘ f) s"
                },
                {
                    "args": "f x = f y",
                    "id": "4.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "f x = f y ⊢ f x = f y"
                },
                {
                    "args": "support_subset, {f: g ∘ f, op: op, s: s}",
                    "id": "4.5",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ support op (g ∘ f) s ⊆ s"
                },
                {
                    "args": "subsetE",
                    "id": "4.6",
                    "prevs": [
                        "4.5",
                        "4.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, f x = f y, x ∈ support op (g ∘ f) s, y ∈ support op (g ∘ f) s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ x ∈ s"
                },
                {
                    "args": "subsetE",
                    "id": "4.7",
                    "prevs": [
                        "4.5",
                        "4.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, f x = f y, x ∈ support op (g ∘ f) s, y ∈ support op (g ∘ f) s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ y ∈ s"
                },
                {
                    "args": "x, y",
                    "id": "4.8",
                    "prevs": [
                        "1",
                        "4.6",
                        "4.7",
                        "4.4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op, f x = f y, x ∈ support op (g ∘ f) s, y ∈ support op (g ∘ f) s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ x = y"
                },
                {
                    "args": "",
                    "id": "4.9",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.3",
                        "4.4",
                        "4.8"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ ∀x. ∀y. x ∈ support op (g ∘ f) s ⟶ y ∈ support op (g ∘ f) s ⟶ f x = f y ⟶ x = y"
                },
                {
                    "args": "finite_image_inj_eq",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ finite (image f (support op (g ∘ f) s)) ⟷ finite (support op (g ∘ f) s)"
                },
                {
                    "args": "support_image, finite (support op g (image f s)) ⟷ finite (support op (g ∘ f) s)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ finite (support op g (image f s)) ⟷ finite (support op (g ∘ f) s)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ finite (support op (g ∘ f) s) ⟶ iterate op (image f (support op (g ∘ f) s)) g = iterate op (support op (g ∘ f) s) (g ∘ f)"
                },
                {
                    "args": "finite (support op (g ∘ f) s)",
                    "id": "7.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite (support op (g ∘ f) s) ⊢ finite (support op (g ∘ f) s)"
                },
                {
                    "args": "support op (g ∘ f) s",
                    "id": "7.1",
                    "prevs": [
                        "2",
                        "7.0",
                        "4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op, finite (support op (g ∘ f) s), ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ iterate op (image f (support op (g ∘ f) s)) g = iterate op (support op (g ∘ f) s) (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "7.2",
                    "prevs": [
                        "7.0",
                        "7.1"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ finite (support op (g ∘ f) s) ⟶ iterate op (image f (support op (g ∘ f) s)) g = iterate op (support op (g ∘ f) s) (g ∘ f)"
                },
                {
                    "args": "support_image, finite (support op (g ∘ f) s) ⟶ iterate op (support op g (image f s)) g = iterate op (support op (g ∘ f) s) (g ∘ f)",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ finite (support op (g ∘ f) s) ⟶ iterate op (support op g (image f s)) g = iterate op (support op (g ∘ f) s) (g ∘ f)"
                },
                {
                    "args": "finite (support op g (image f s)), finite (support op (g ∘ f) s), iterate op (support op g (image f s)) g, iterate op (support op (g ∘ f) s) (g ∘ f), neutral op",
                    "id": "9",
                    "prevs": [
                        "3",
                        "6",
                        "8"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ (if finite (support op g (image f s)) then iterate op (support op g (image f s)) g else neutral op) = (if finite (support op (g ∘ f) s) then iterate op (support op (g ∘ f) s) (g ∘ f) else neutral op)"
                },
                {
                    "args": "iterate_expand_cases, iterate op (image f s) g = iterate op s (g ∘ f)",
                    "id": "10",
                    "prevs": [
                        "9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ iterate op (image f s) g = iterate op s (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "11",
                    "prevs": [
                        "0",
                        "1",
                        "10"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y) ⟶ iterate op (image f s) g = iterate op s (g ∘ f)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y) ",
                "   ⟶ iterate op (image f s) g = iterate op s (g ∘ f)"
            ],
            "steps": [
                {
                    "goal": "!s. finite s ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y) \n   ⟶ iterate op (image f s) g = iterate op s (g ∘ f)",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "t"
                },
                {
                    "fact_ids": [
                        "2.2"
                    ],
                    "goal_id": "2.3",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "2.2",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "2.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "image_empty"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.2.1",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.2.2",
                    "method_name": "apply_forward_step",
                    "param_f": "g ∘ f",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "2.2.1"
                    ],
                    "goal_id": "2.2.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2.2.2"
                    ],
                    "goal_id": "2.2.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.3",
                    "method_name": "introduction",
                    "names": "a,t1"
                },
                {
                    "goal_id": "2.3.6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "image_insert"
                },
                {
                    "goal": "finite (image f t1)",
                    "goal_id": "2.3.6",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2.3.6",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_image"
                },
                {
                    "fact_ids": [
                        "0",
                        "2.3.6"
                    ],
                    "goal_id": "2.3.7",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "param_x": "f a",
                    "theorem": "iterate_insert"
                },
                {
                    "goal": "~(f a ∈ image f t1)",
                    "goal_id": "2.3.8",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "2.3.3"
                    ],
                    "goal_id": "2.3.8",
                    "method_name": "apply_backward_step",
                    "theorem": "contrapositive"
                },
                {
                    "goal_id": "2.3.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "double_neg"
                },
                {
                    "goal_id": "2.3.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "goal_id": "2.3.8",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.3.8.0"
                    ],
                    "goal_id": "2.3.8.1",
                    "method_name": "exists_elim",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "2.3.8.2"
                    ],
                    "goal_id": "2.3.8.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2.3.8.2"
                    ],
                    "goal_id": "2.3.8.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal": "a=x",
                    "goal_id": "2.3.8.5",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "2.3.5"
                    ],
                    "goal_id": "2.3.8.5",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2.3.8.5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "2.3.8.5",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "2.3.8.5",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "goal_id": "2.3.8.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "2.3.8.8",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "fact_ids": [
                        "2.3.8.10"
                    ],
                    "goal_id": "2.3.8.11",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2.3.7",
                        "2.3.11"
                    ],
                    "goal_id": "2.3.12",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0",
                        "2.3.4"
                    ],
                    "goal_id": "2.3.13",
                    "method_name": "apply_forward_step",
                    "param_f": "g ∘ f",
                    "param_x": "a",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "2.3.13",
                        "2.3.3"
                    ],
                    "goal_id": "2.3.14",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "2.3.12"
                    ],
                    "goal_id": "2.3.15",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2.3.14"
                    ],
                    "goal_id": "2.3.15",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.3.15",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "comp_fun_eval"
                },
                {
                    "goal": "iterate op (image f t1) g = iterate op t1 (g ∘ f)",
                    "goal_id": "2.3.15",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "2.3.2"
                    ],
                    "goal_id": "2.3.15",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2.3.15",
                    "method_name": "introduction",
                    "names": "x,y"
                },
                {
                    "fact_ids": [
                        "2.3.5"
                    ],
                    "goal_id": "2.3.15.5",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2.3.15.5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "2.3.15.5",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "2.3.15.7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "2.3.15.7",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "fact_ids": [
                        "2.3.16"
                    ],
                    "goal_id": "2.3.17",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_expand_cases"
                },
                {
                    "goal": "!a::bool. !a1. !b::'a. !b1. !c. (a <--> a1) --> (a1 --> (b = b1))\n      --> (if a then b else c) = (if a1 then b1 else c)",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_image"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_image_inj_eq"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x,y"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "4.5",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "4.5",
                    "method_name": "apply_backward_step",
                    "param_A": "support op (g ∘ f) s",
                    "theorem": "subsetE"
                },
                {
                    "goal_id": "4.5",
                    "method_name": "apply_backward_step",
                    "theorem": "support_subset"
                },
                {
                    "goal_id": "4.7",
                    "method_name": "apply_backward_step",
                    "param_A": "support op (g ∘ f) s",
                    "theorem": "subsetE"
                },
                {
                    "goal_id": "7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_image"
                },
                {
                    "goal_id": "7",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "7.1",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'c",
                "g": "'c ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_bijection",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "∀x. x ∈ s ⟶ p x ∈ s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ p x ∈ s ⊢ ∀x. x ∈ s ⟶ p x ∈ s"
                },
                {
                    "args": "∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∀x. x ∈ s ⟷ (∃x1. x = p x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "x, 'b",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ x ∈ s ⟶ (∃x1. x = p x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "x ∈ s",
                    "id": "3.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "3.1.1",
                    "prevs": [
                        "2",
                        "3.1.0"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∃!x1. x1 ∈ s ∧ p x1 = x"
                },
                {
                    "args": "theI'",
                    "id": "3.1.2",
                    "prevs": [
                        "3.1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ (THE x1. x1 ∈ s ∧ p x1 = x) ∈ s ∧ p (THE x1. x1 ∈ s ∧ p x1 = x) = x"
                },
                {
                    "args": "conjD1",
                    "id": "3.1.3",
                    "prevs": [
                        "3.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ (THE x1. x1 ∈ s ∧ p x1 = x) ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "3.1.4",
                    "prevs": [
                        "3.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ p (THE x1. x1 ∈ s ∧ p x1 = x) = x"
                },
                {
                    "args": "x = p (THE x1. x1 ∈ s ∧ p x1 = x)",
                    "id": "3.1.5",
                    "prevs": [
                        "3.1.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ x = p (THE x1. x1 ∈ s ∧ p x1 = x)"
                },
                {
                    "args": "conjI",
                    "id": "3.1.6",
                    "prevs": [
                        "3.1.5",
                        "3.1.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ s, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ x = p (THE x1. x1 ∈ s ∧ p x1 = x) ∧ (THE x1. x1 ∈ s ∧ p x1 = x) ∈ s"
                },
                {
                    "args": "exI, {P: λx1. x = p x1 ∧ x1 ∈ s, a: THE x1. x1 ∈ s ∧ p x1 = x}",
                    "id": "3.1.7",
                    "prevs": [
                        "3.1.6"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, x ∈ s, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∃a1. x = p a1 ∧ a1 ∈ s"
                },
                {
                    "args": "",
                    "id": "3.1.8",
                    "prevs": [
                        "3.1.0",
                        "3.1.7"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ x ∈ s ⟶ (∃x1. x = p x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ (∃x1. x = p x1 ∧ x1 ∈ s) ⟶ x ∈ s"
                },
                {
                    "args": "∃x1. x = p x1 ∧ x1 ∈ s",
                    "id": "3.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x1. x = p x1 ∧ x1 ∈ s ⊢ ∃x1. x = p x1 ∧ x1 ∈ s"
                },
                {
                    "args": "x1, 'b",
                    "id": "3.2.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x = p x1 ∧ x1 ∈ s",
                    "id": "3.2.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = p x1 ∧ x1 ∈ s ⊢ x = p x1 ∧ x1 ∈ s"
                },
                {
                    "args": "conjD1",
                    "id": "3.2.3",
                    "prevs": [
                        "3.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = p x1 ∧ x1 ∈ s ⊢ x = p x1"
                },
                {
                    "args": "conjD2",
                    "id": "3.2.4",
                    "prevs": [
                        "3.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = p x1 ∧ x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "x1",
                    "id": "3.2.5",
                    "prevs": [
                        "1",
                        "3.2.4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op, x = p x1 ∧ x1 ∈ s, ∀x. x ∈ s ⟶ p x ∈ s, ∃x1. x = p x1 ∧ x1 ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ p x1 ∈ s"
                },
                {
                    "args": "x ∈ s",
                    "id": "3.2.6",
                    "prevs": [
                        "3.2.3",
                        "3.2.5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, x = p x1 ∧ x1 ∈ s, ∀x. x ∈ s ⟶ p x ∈ s, ∃x1. x = p x1 ∧ x1 ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ x ∈ s"
                },
                {
                    "args": "∃x1. x = p x1 ∧ x1 ∈ s",
                    "id": "3.2.7",
                    "prevs": [
                        "3.2.0",
                        "3.2.0",
                        "3.2.1",
                        "3.2.2",
                        "3.2.6"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ (∃x1. x = p x1 ∧ x1 ∈ s) ⟶ x ∈ s"
                },
                {
                    "args": "iffI",
                    "id": "3.3",
                    "prevs": [
                        "3.1",
                        "3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ x ∈ s ⟷ (∃x1. x = p x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "",
                    "id": "3.4",
                    "prevs": [
                        "3.0",
                        "3.3"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∀x. x ∈ s ⟷ (∃x1. x = p x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "in_image, ∀x. x ∈ s ⟷ x ∈ image p s",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∀x. x ∈ s ⟷ x ∈ image p s"
                },
                {
                    "args": "member_ext",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ s = image p s"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ image p s = s"
                },
                {
                    "args": "iterate op s f = iterate op (image p s) f",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ iterate op s f = iterate op (image p s) f"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y"
                },
                {
                    "args": "x, 'b",
                    "id": "8.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "y, 'b",
                    "id": "8.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "x ∈ s",
                    "id": "8.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "y ∈ s",
                    "id": "8.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y ∈ s ⊢ y ∈ s"
                },
                {
                    "args": "p x = p y",
                    "id": "8.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "p x = p y ⊢ p x = p y"
                },
                {
                    "args": "",
                    "id": "8.5",
                    "prevs": [
                        "1",
                        "8.2"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ p x ∈ s ⊢ p x ∈ s"
                },
                {
                    "args": "",
                    "id": "8.6",
                    "prevs": [
                        "2",
                        "8.5"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∃!x1. x1 ∈ s ∧ p x1 = p x"
                },
                {
                    "args": "exists1_def",
                    "id": "8.7",
                    "prevs": [
                        "8.6"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∃x1. (x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1)"
                },
                {
                    "args": "x1, 'b",
                    "id": "8.8",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "(x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1)",
                    "id": "8.9",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1) ⊢ (x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1)"
                },
                {
                    "args": "conjD1",
                    "id": "8.10",
                    "prevs": [
                        "8.9"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1) ⊢ x1 ∈ s ∧ p x1 = p x"
                },
                {
                    "args": "conjD2",
                    "id": "8.11",
                    "prevs": [
                        "8.9"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1) ⊢ ∀y. y ∈ s ∧ p y = p x ⟶ y = x1"
                },
                {
                    "args": "eq_refl, {x: p x}",
                    "id": "8.12",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ p x = p x"
                },
                {
                    "args": "conjI",
                    "id": "8.13",
                    "prevs": [
                        "8.2",
                        "8.12"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ s, y ∈ s, p x = p y, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y), (x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1) ⊢ x ∈ s ∧ p x = p x"
                },
                {
                    "args": "x",
                    "id": "8.14",
                    "prevs": [
                        "8.11",
                        "8.13"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op, x ∈ s, y ∈ s, p x = p y, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y), (x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1) ⊢ x = x1"
                },
                {
                    "args": "eq_sym_eq, p y = p x",
                    "id": "8.15",
                    "prevs": [
                        "8.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, x ∈ s, y ∈ s, p x = p y, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y), (x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1) ⊢ p y = p x"
                },
                {
                    "args": "conjI",
                    "id": "8.16",
                    "prevs": [
                        "8.3",
                        "8.15"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ s, y ∈ s, p x = p y, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y), (x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1) ⊢ y ∈ s ∧ p y = p x"
                },
                {
                    "args": "y",
                    "id": "8.17",
                    "prevs": [
                        "8.11",
                        "8.16"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op, x ∈ s, y ∈ s, p x = p y, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y), (x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1) ⊢ y = x1"
                },
                {
                    "args": "y = x",
                    "id": "8.18",
                    "prevs": [
                        "8.14",
                        "8.17"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, x ∈ s, y ∈ s, p x = p y, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y), (x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1) ⊢ y = x"
                },
                {
                    "args": "eq_sym_eq, x = y",
                    "id": "8.19",
                    "prevs": [
                        "8.18"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, x ∈ s, y ∈ s, p x = p y, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y), (x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1) ⊢ x = y"
                },
                {
                    "args": "∃x1. (x1 ∈ s ∧ p x1 = p x) ∧ (∀y. y ∈ s ∧ p y = p x ⟶ y = x1)",
                    "id": "8.20",
                    "prevs": [
                        "8.0",
                        "8.1",
                        "8.2",
                        "8.3",
                        "8.4",
                        "8.7",
                        "8.8",
                        "8.9",
                        "8.19"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y"
                },
                {
                    "args": "iterate_image, {f: p, g: f, op: op, s: s}",
                    "id": "9",
                    "prevs": [
                        "0",
                        "8"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ iterate op (image p s) f = iterate op s (f ∘ p)"
                },
                {
                    "args": "iterate op s f = iterate op s (f ∘ p)",
                    "id": "10",
                    "prevs": [
                        "7",
                        "9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ iterate op s f = iterate op s (f ∘ p)"
                },
                {
                    "args": "",
                    "id": "11",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "10"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ (∀x. x ∈ s ⟶ p x ∈ s) ⟶ (∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)) ⟶ iterate op s f = iterate op s (f ∘ p)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ (∀x. x ∈ s ⟶ p x ∈ s) ",
                "   ⟶ (∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)) ⟶ iterate op s f = iterate op s (f ∘ p)"
            ],
            "steps": [
                {
                    "goal": "s = (image p s)",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "3.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "3.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2",
                        "3.1.0"
                    ],
                    "goal_id": "3.1.1",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3.1.1"
                    ],
                    "goal_id": "3.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "theI'"
                },
                {
                    "goal_id": "3.1.3",
                    "method_name": "inst_exists_goal",
                    "s": "(THE x1. x1 ∈ s ∧ p x1 = x)"
                },
                {
                    "fact_ids": [
                        "3.1.2"
                    ],
                    "goal_id": "3.1.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.1.2"
                    ],
                    "goal_id": "3.1.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "3.1.5",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "3.1.4"
                    ],
                    "goal_id": "3.1.5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.2.0"
                    ],
                    "goal_id": "3.2.1",
                    "method_name": "exists_elim",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "3.2.2"
                    ],
                    "goal_id": "3.2.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.2.2"
                    ],
                    "goal_id": "3.2.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "3.2.3"
                    ],
                    "goal_id": "3.2.5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "3.2.5",
                    "method_name": "apply_prev"
                },
                {
                    "goal": "iterate op s f = iterate op (image p s) f",
                    "goal_id": "6",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "6"
                    ],
                    "goal_id": "7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal_id": "8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "8",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_image"
                },
                {
                    "goal_id": "8",
                    "method_name": "introduction",
                    "names": "x,y"
                },
                {
                    "fact_ids": [
                        "1",
                        "8.2"
                    ],
                    "goal_id": "8.5",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "2",
                        "8.5"
                    ],
                    "goal_id": "8.6",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "8.6"
                    ],
                    "goal_id": "8.7",
                    "method_name": "rewrite_fact",
                    "sym": "",
                    "theorem": "exists1_def"
                },
                {
                    "fact_ids": [
                        "8.7"
                    ],
                    "goal_id": "8.8",
                    "method_name": "exists_elim",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "8.9"
                    ],
                    "goal_id": "8.10",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "8.9"
                    ],
                    "goal_id": "8.11",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "8.12",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal": "x=x1",
                    "goal_id": "8.12",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "8.11"
                    ],
                    "goal_id": "8.12",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "8.12",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "8.12",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "8.14"
                    ],
                    "goal_id": "8.15",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "8.11"
                    ],
                    "goal_id": "8.15",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "8.15",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "8.15",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "p": "'b ⇒ 'b",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_eq",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x = g x",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x = g x ⊢ ∀x. x ∈ s ⟶ f x = g x"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ ∀x. x ∈ s ∧ ¬(g x = neutral op) ⟷ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x, 'b",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ x ∈ s ∧ ¬(g x = neutral op) ⟶ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ s ∧ ¬(g x = neutral op)",
                    "id": "2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(g x = neutral op) ⊢ x ∈ s ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "2.1.1",
                    "prevs": [
                        "2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(g x = neutral op) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "2.1.2",
                    "prevs": [
                        "2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(g x = neutral op) ⊢ ¬(g x = neutral op)"
                },
                {
                    "args": "",
                    "id": "2.1.3",
                    "prevs": [
                        "1",
                        "2.1.1"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s ∧ ¬(g x = neutral op), ∀x. x ∈ s ⟶ f x = g x ⊢ f x = g x"
                },
                {
                    "args": "¬(f x = neutral op)",
                    "id": "2.1.4",
                    "prevs": [
                        "2.1.3",
                        "2.1.2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, x ∈ s ∧ ¬(g x = neutral op), ∀x. x ∈ s ⟶ f x = g x ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "conjI",
                    "id": "2.1.5",
                    "prevs": [
                        "2.1.1",
                        "2.1.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ s ∧ ¬(g x = neutral op), ∀x. x ∈ s ⟶ f x = g x ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "2.1.6",
                    "prevs": [
                        "2.1.0",
                        "2.1.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ x ∈ s ∧ ¬(g x = neutral op) ⟶ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ x ∈ s ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "x ∈ s ∧ ¬(f x = neutral op)",
                    "id": "2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "2.2.1",
                    "prevs": [
                        "2.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "2.2.2",
                    "prevs": [
                        "2.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "2.2.3",
                    "prevs": [
                        "1",
                        "2.2.1"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s ∧ ¬(f x = neutral op), ∀x. x ∈ s ⟶ f x = g x ⊢ f x = g x"
                },
                {
                    "args": "",
                    "id": "2.2.4",
                    "prevs": [
                        "2.2.3",
                        "2.2.2"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "x ∈ s ∧ ¬(f x = neutral op), ∀x. x ∈ s ⟶ f x = g x ⊢ ¬(g x = neutral op)"
                },
                {
                    "args": "conjI",
                    "id": "2.2.5",
                    "prevs": [
                        "2.2.1",
                        "2.2.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ s ∧ ¬(f x = neutral op), ∀x. x ∈ s ⟶ f x = g x ⊢ x ∈ s ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "",
                    "id": "2.2.6",
                    "prevs": [
                        "2.2.0",
                        "2.2.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ x ∈ s ∧ ¬(f x = neutral op) ⟶ x ∈ s ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "2.3",
                    "prevs": [
                        "2.1",
                        "2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ x ∈ s ∧ ¬(g x = neutral op) ⟷ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "2.4",
                    "prevs": [
                        "2.0",
                        "2.3"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ ∀x. x ∈ s ∧ ¬(g x = neutral op) ⟷ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "in_support, ∀x. x ∈ support op g s ⟷ x ∈ support op f s",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ ∀x. x ∈ support op g s ⟷ x ∈ support op f s"
                },
                {
                    "args": "member_ext",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ support op g s = support op f s"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ finite (support op f s) ⟶ (if finite (support op f s) then iterate op (support op f s) f else neutral op) = (if finite (support op f s) then iterate op (support op f s) g else neutral op)"
                },
                {
                    "args": "finite (support op f s)",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite (support op f s) ⊢ finite (support op f s)"
                },
                {
                    "args": "",
                    "id": "5.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), ∀x. x ∈ s ⟶ f x = g x ⊢ ∀x. x ∈ support op f s ⟶ f x = g x"
                },
                {
                    "args": "x, 'b",
                    "id": "5.1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ support op f s",
                    "id": "5.1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op f s ⊢ x ∈ support op f s"
                },
                {
                    "args": "support_subset, {f: f, op: op, s: s}",
                    "id": "5.1.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ support op f s ⊆ s"
                },
                {
                    "args": "subsetE",
                    "id": "5.1.3",
                    "prevs": [
                        "5.1.2",
                        "5.1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), x ∈ support op f s, ∀x. x ∈ s ⟶ f x = g x ⊢ x ∈ s"
                },
                {
                    "args": "x",
                    "id": "5.1.4",
                    "prevs": [
                        "1",
                        "5.1.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op, finite (support op f s), x ∈ support op f s, ∀x. x ∈ s ⟶ f x = g x ⊢ f x = g x"
                },
                {
                    "args": "",
                    "id": "5.1.5",
                    "prevs": [
                        "5.1.0",
                        "5.1.1",
                        "5.1.4"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), ∀x. x ∈ s ⟶ f x = g x ⊢ ∀x. x ∈ support op f s ⟶ f x = g x"
                },
                {
                    "args": "finite_induct_strong, {P: λs. (∀x. x ∈ s ⟶ f x = g x) ⟶ iterate op s f = iterate op s g}",
                    "id": "5.2",
                    "prevs": [
                        "5.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite (support op f s) ⊢ ((∀x. x ∈ ∅ ⟶ f x = g x) ⟶ iterate op ∅ f = iterate op ∅ g) ⟶ (∀x. ∀s1. ((∀x1. x1 ∈ s1 ⟶ f x1 = g x1) ⟶ iterate op s1 f = iterate op s1 g) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1) ⟶ iterate op (insert x s1) f = iterate op (insert x s1) g) ⟶ (∀x. x ∈ support op f s ⟶ f x = g x) ⟶ iterate op (support op f s) f = iterate op (support op f s) g"
                },
                {
                    "args": "",
                    "id": "5.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), ∀x. x ∈ s ⟶ f x = g x ⊢ (∀x. x ∈ ∅ ⟶ f x = g x) ⟶ iterate op ∅ f = iterate op ∅ g"
                },
                {
                    "args": "∀x. x ∈ ∅ ⟶ f x = g x",
                    "id": "5.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ ∅ ⟶ f x = g x ⊢ ∀x. x ∈ ∅ ⟶ f x = g x"
                },
                {
                    "args": "iterate_empty, {f: g}",
                    "id": "5.3.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ g = neutral op"
                },
                {
                    "args": "iterate_empty, {f: f, op: op}",
                    "id": "5.3.2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x. x ∈ ∅ ⟶ f x = g x ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "iterate op ∅ f = iterate op ∅ g",
                    "id": "5.3.3",
                    "prevs": [
                        "5.3.1",
                        "5.3.2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x. x ∈ ∅ ⟶ f x = g x ⊢ iterate op ∅ f = iterate op ∅ g"
                },
                {
                    "args": "",
                    "id": "5.3.4",
                    "prevs": [
                        "5.3.0",
                        "5.3.3"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), ∀x. x ∈ s ⟶ f x = g x ⊢ (∀x. x ∈ ∅ ⟶ f x = g x) ⟶ iterate op ∅ f = iterate op ∅ g"
                },
                {
                    "args": "",
                    "id": "5.4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), ∀x. x ∈ s ⟶ f x = g x ⊢ ∀x. ∀s1. ((∀x1. x1 ∈ s1 ⟶ f x1 = g x1) ⟶ iterate op s1 f = iterate op s1 g) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1) ⟶ iterate op (insert x s1) f = iterate op (insert x s1) g"
                },
                {
                    "args": "x, 'b",
                    "id": "5.4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "s1, 'b set",
                    "id": "5.4.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s1"
                },
                {
                    "args": "(∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g",
                    "id": "5.4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g"
                },
                {
                    "args": "¬(x ∈ s1)",
                    "id": "5.4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s1) ⊢ ¬(x ∈ s1)"
                },
                {
                    "args": "finite s1",
                    "id": "5.4.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s1 ⊢ finite s1"
                },
                {
                    "args": "∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1",
                    "id": "5.4.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1 ⊢ ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1"
                },
                {
                    "args": "iterate_insert, {f: g, x: x}",
                    "id": "5.4.6",
                    "prevs": [
                        "0",
                        "5.4.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op ⊢ iterate op (insert x s1) g = (if x ∈ s1 then iterate op s1 g else op (g x) (iterate op s1 g))"
                },
                {
                    "args": "if_not_P",
                    "id": "5.4.7",
                    "prevs": [
                        "5.4.6",
                        "5.4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1) ⊢ iterate op (insert x s1) g = op (g x) (iterate op s1 g)"
                },
                {
                    "args": "iterate_insert, {f: f, x: x}",
                    "id": "5.4.8",
                    "prevs": [
                        "0",
                        "5.4.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op ⊢ iterate op (insert x s1) f = (if x ∈ s1 then iterate op s1 f else op (f x) (iterate op s1 f))"
                },
                {
                    "args": "if_not_P",
                    "id": "5.4.9",
                    "prevs": [
                        "5.4.8",
                        "5.4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1) ⊢ iterate op (insert x s1) f = op (f x) (iterate op s1 f)"
                },
                {
                    "args": "eq_refl, {x: x}",
                    "id": "5.4.10",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ x = x"
                },
                {
                    "args": "disjI1, {A: x = x, B: x ∈ s1}",
                    "id": "5.4.11",
                    "prevs": [
                        "5.4.10"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ x = x ∨ x ∈ s1"
                },
                {
                    "args": "member_insert, x ∈ insert x s1",
                    "id": "5.4.12",
                    "prevs": [
                        "5.4.11"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ x ∈ insert x s1"
                },
                {
                    "args": "",
                    "id": "5.4.13",
                    "prevs": [
                        "5.4.5",
                        "5.4.12"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ f x = g x"
                },
                {
                    "args": "",
                    "id": "5.4.14",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ ∀x. x ∈ s1 ⟶ f x = g x"
                },
                {
                    "args": "x1, 'b",
                    "id": "5.4.14.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ s1",
                    "id": "5.4.14.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s1 ⊢ x1 ∈ s1"
                },
                {
                    "args": "disjI2, {A: x1 = x, B: x1 ∈ s1}",
                    "id": "5.4.14.2",
                    "prevs": [
                        "5.4.14.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op, x1 ∈ s1, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ x1 = x ∨ x1 ∈ s1"
                },
                {
                    "args": "member_insert, x1 ∈ insert x s1",
                    "id": "5.4.14.3",
                    "prevs": [
                        "5.4.14.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s1, monoidal op, x1 ∈ s1, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ x1 ∈ insert x s1"
                },
                {
                    "args": "",
                    "id": "5.4.14.4",
                    "prevs": [
                        "5.4.5",
                        "5.4.14.3"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s1, monoidal op, x1 ∈ s1, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ f x1 = g x1"
                },
                {
                    "args": "",
                    "id": "5.4.14.5",
                    "prevs": [
                        "5.4.14.0",
                        "5.4.14.1",
                        "5.4.14.4"
                    ],
                    "rule": "intros",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ ∀x1. x1 ∈ s1 ⟶ f x1 = g x1"
                },
                {
                    "args": "",
                    "id": "5.4.15",
                    "prevs": [
                        "5.4.2",
                        "5.4.14"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ iterate op s1 f = iterate op s1 g"
                },
                {
                    "args": "op (f x) (iterate op s1 g) = op (g x) (iterate op s1 g)",
                    "id": "5.4.16",
                    "prevs": [
                        "5.4.13"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ op (f x) (iterate op s1 g) = op (g x) (iterate op s1 g)"
                },
                {
                    "args": "op (f x) (iterate op s1 f) = op (g x) (iterate op s1 g)",
                    "id": "5.4.17",
                    "prevs": [
                        "5.4.15",
                        "5.4.16"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ op (f x) (iterate op s1 f) = op (g x) (iterate op s1 g)"
                },
                {
                    "args": "op (f x) (iterate op s1 f) = iterate op (insert x s1) g",
                    "id": "5.4.18",
                    "prevs": [
                        "5.4.7",
                        "5.4.17"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ op (f x) (iterate op s1 f) = iterate op (insert x s1) g"
                },
                {
                    "args": "iterate op (insert x s1) f = iterate op (insert x s1) g",
                    "id": "5.4.19",
                    "prevs": [
                        "5.4.9",
                        "5.4.18"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s1, monoidal op, ¬(x ∈ s1), finite (support op f s), ∀x. x ∈ s ⟶ f x = g x, ∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1, (∀x. x ∈ s1 ⟶ f x = g x) ⟶ iterate op s1 f = iterate op s1 g ⊢ iterate op (insert x s1) f = iterate op (insert x s1) g"
                },
                {
                    "args": "",
                    "id": "5.4.20",
                    "prevs": [
                        "5.4.0",
                        "5.4.1",
                        "5.4.2",
                        "5.4.3",
                        "5.4.4",
                        "5.4.5",
                        "5.4.19"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), ∀x. x ∈ s ⟶ f x = g x ⊢ ∀x. ∀s1. ((∀x1. x1 ∈ s1 ⟶ f x1 = g x1) ⟶ iterate op s1 f = iterate op s1 g) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. x1 ∈ insert x s1 ⟶ f x1 = g x1) ⟶ iterate op (insert x s1) f = iterate op (insert x s1) g"
                },
                {
                    "args": "",
                    "id": "5.5",
                    "prevs": [
                        "5.2",
                        "5.3",
                        "5.4",
                        "5.1"
                    ],
                    "rule": "apply_fact",
                    "th": "monoidal op, finite (support op f s), ∀x. x ∈ s ⟶ f x = g x ⊢ iterate op (support op f s) f = iterate op (support op f s) g"
                },
                {
                    "args": "if_P, (if finite (support op f s) then iterate op (support op f s) f else neutral op) = (if finite (support op f s) then iterate op (support op f s) g else neutral op)",
                    "id": "5.6",
                    "prevs": [
                        "5.5",
                        "5.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, finite (support op f s), ∀x. x ∈ s ⟶ f x = g x ⊢ (if finite (support op f s) then iterate op (support op f s) f else neutral op) = (if finite (support op f s) then iterate op (support op f s) g else neutral op)"
                },
                {
                    "args": "",
                    "id": "5.7",
                    "prevs": [
                        "5.0",
                        "5.6"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ finite (support op f s) ⟶ (if finite (support op f s) then iterate op (support op f s) f else neutral op) = (if finite (support op f s) then iterate op (support op f s) g else neutral op)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ ¬(finite (support op f s)) ⟶ (if finite (support op f s) then iterate op (support op f s) f else neutral op) = (if finite (support op f s) then iterate op (support op f s) g else neutral op)"
                },
                {
                    "args": "¬(finite (support op f s))",
                    "id": "6.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(finite (support op f s)) ⊢ ¬(finite (support op f s))"
                },
                {
                    "args": "if_not_P, (if finite (support op f s) then iterate op (support op f s) f else neutral op) = (if finite (support op f s) then iterate op (support op f s) g else neutral op)",
                    "id": "6.1",
                    "prevs": [
                        "6.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite (support op f s)) ⊢ (if finite (support op f s) then iterate op (support op f s) f else neutral op) = (if finite (support op f s) then iterate op (support op f s) g else neutral op)"
                },
                {
                    "args": "",
                    "id": "6.2",
                    "prevs": [
                        "6.0",
                        "6.1"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ ¬(finite (support op f s)) ⟶ (if finite (support op f s) then iterate op (support op f s) f else neutral op) = (if finite (support op f s) then iterate op (support op f s) g else neutral op)"
                },
                {
                    "args": "classical_cases",
                    "id": "7",
                    "prevs": [
                        "5",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ (if finite (support op f s) then iterate op (support op f s) f else neutral op) = (if finite (support op f s) then iterate op (support op f s) g else neutral op)"
                },
                {
                    "args": "(if finite (support op f s) then iterate op (support op f s) f else neutral op) = (if finite (support op g s) then iterate op (support op g s) g else neutral op)",
                    "id": "8",
                    "prevs": [
                        "4",
                        "7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ (if finite (support op f s) then iterate op (support op f s) f else neutral op) = (if finite (support op g s) then iterate op (support op g s) g else neutral op)"
                },
                {
                    "args": "iterate_expand_cases, iterate op s f = iterate op s g",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ∀x. x ∈ s ⟶ f x = g x ⊢ iterate op s f = iterate op s g"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "0",
                        "1",
                        "9"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ (∀x. x ∈ s ⟶ f x = g x) ⟶ iterate op s f = iterate op s g"
                }
            ],
            "prop": "monoidal op ⟶ (∀x. x ∈ s ⟶ f x = g x) ⟶ iterate op s f = iterate op s g",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_expand_cases"
                },
                {
                    "goal": "support op g s = support op f s",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.1.0"
                    ],
                    "goal_id": "2.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2.1.0"
                    ],
                    "goal_id": "2.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "2.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "1",
                        "2.1.1"
                    ],
                    "goal_id": "2.1.3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "2.1.3"
                    ],
                    "goal_id": "2.1.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.2.0"
                    ],
                    "goal_id": "2.2.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2.2.0"
                    ],
                    "goal_id": "2.2.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "2.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "1",
                        "2.2.1"
                    ],
                    "goal_id": "2.2.3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "2.2.3",
                        "2.2.2"
                    ],
                    "goal_id": "2.2.4",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "case": "finite (support op f s)",
                    "goal_id": "5",
                    "method_name": "cases"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "5.0"
                    ],
                    "goal_id": "5.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal": "(!x. x ∈ (support op f s) --> f x = g x)",
                    "goal_id": "5.1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5.1",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "5.1.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5.1.2",
                    "method_name": "apply_backward_step",
                    "param_A": "support op f s",
                    "theorem": "subsetE"
                },
                {
                    "goal_id": "5.1.2",
                    "method_name": "apply_backward_step",
                    "theorem": "support_subset"
                },
                {
                    "fact_ids": [
                        "5.0"
                    ],
                    "goal_id": "5.2",
                    "method_name": "apply_forward_step",
                    "param_P": "(%s. (∀x. x ∈ s ⟶ f x = g x) ⟶ iterate op s f = iterate op s g)",
                    "theorem": "finite_induct_strong"
                },
                {
                    "fact_ids": [
                        "5.2"
                    ],
                    "goal_id": "5.3",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5.3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "5.3.1",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "5.3.1"
                    ],
                    "goal_id": "5.3.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "5.3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                },
                {
                    "goal_id": "5.4",
                    "method_name": "introduction",
                    "names": "x,s1"
                },
                {
                    "fact_ids": [
                        "0",
                        "5.4.4"
                    ],
                    "goal_id": "5.4.6",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "param_x": "x",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "5.4.6",
                        "5.4.3"
                    ],
                    "goal_id": "5.4.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0",
                        "5.4.4"
                    ],
                    "goal_id": "5.4.8",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "5.4.8",
                        "5.4.3"
                    ],
                    "goal_id": "5.4.9",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "5.4.9"
                    ],
                    "goal_id": "5.4.10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "5.4.7"
                    ],
                    "goal_id": "5.4.10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "f x = g x",
                    "goal_id": "5.4.10",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "5.4.5"
                    ],
                    "goal_id": "5.4.10",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5.4.10",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "5.4.10",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "5.4.10",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "goal": "iterate op s1 f = iterate op s1 g",
                    "goal_id": "5.4.14",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "5.4.2"
                    ],
                    "goal_id": "5.4.14",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5.4.14",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "5.4.5"
                    ],
                    "goal_id": "5.4.14.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5.4.14.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "5.4.14.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "fact_ids": [
                        "5.4.15"
                    ],
                    "goal_id": "5.4.16",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "5.4.13"
                    ],
                    "goal_id": "5.4.16",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "6",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "6.0"
                    ],
                    "goal_id": "6.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "g": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_restrict_set",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "∀x. ∀a. ¬((if P x then f x else a) = a) ⟷ P x ∧ ¬(f x = a)",
                    "id": "1",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x. ∀a. ¬((if P x then f x else a) = a) ⟷ P x ∧ ¬(f x = a)"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ ∀x. (x ∈ s ∧ P x) ∧ ¬(f x = neutral op) ⟶ f x = (if P x then f x else neutral op)"
                },
                {
                    "args": "x, 'b",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "(x ∈ s ∧ P x) ∧ ¬(f x = neutral op)",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x ∈ s ∧ P x) ∧ ¬(f x = neutral op) ⊢ (x ∈ s ∧ P x) ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "2.2",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ P x) ∧ ¬(f x = neutral op) ⊢ x ∈ s ∧ P x"
                },
                {
                    "args": "conjD2",
                    "id": "2.3",
                    "prevs": [
                        "2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x ∈ s ∧ P x) ∧ ¬(f x = neutral op) ⊢ P x"
                },
                {
                    "args": "if_P, f x = (if P x then f x else neutral op)",
                    "id": "2.4",
                    "prevs": [
                        "2.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "(x ∈ s ∧ P x) ∧ ¬(f x = neutral op) ⊢ f x = (if P x then f x else neutral op)"
                },
                {
                    "args": "",
                    "id": "2.5",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.4"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ ∀x. (x ∈ s ∧ P x) ∧ ¬(f x = neutral op) ⟶ f x = (if P x then f x else neutral op)"
                },
                {
                    "args": "member_collect, ∀x. x ∈ {x1. (x1 ∈ s ∧ P x1) ∧ ¬(f x1 = neutral op)} ⟶ f x = (if P x then f x else neutral op)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ ∀x. x ∈ {x1. (x1 ∈ s ∧ P x1) ∧ ¬(f x1 = neutral op)} ⟶ f x = (if P x then f x else neutral op)"
                },
                {
                    "args": "iterate_eq",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ iterate op ({x. (x ∈ s ∧ P x) ∧ ¬(f x = neutral op)}) f = iterate op ({x. (x ∈ s ∧ P x) ∧ ¬(f x = neutral op)}) (λx. if P x then f x else neutral op)"
                },
                {
                    "args": "conj_assoc, iterate op ({x. (x ∈ s ∧ P x) ∧ ¬(f x = neutral op)}) f = iterate op ({x. x ∈ s ∧ P x ∧ ¬(f x = neutral op)}) (λx. if P x then f x else neutral op)",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op ({x. (x ∈ s ∧ P x) ∧ ¬(f x = neutral op)}) f = iterate op ({x. x ∈ s ∧ P x ∧ ¬(f x = neutral op)}) (λx. if P x then f x else neutral op)"
                },
                {
                    "args": "iterate op ({x. (x ∈ s ∧ P x) ∧ ¬(f x = neutral op)}) f = iterate op ({x. x ∈ s ∧ ¬((if P x then f x else neutral op) = neutral op)}) (λx. if P x then f x else neutral op)",
                    "id": "6",
                    "prevs": [
                        "1",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op ⊢ iterate op ({x. (x ∈ s ∧ P x) ∧ ¬(f x = neutral op)}) f = iterate op ({x. x ∈ s ∧ ¬((if P x then f x else neutral op) = neutral op)}) (λx. if P x then f x else neutral op)"
                },
                {
                    "args": "member_collect, iterate op ({x. x ∈ {x1. x1 ∈ s ∧ P x1} ∧ ¬(f x = neutral op)}) f = iterate op ({x. x ∈ s ∧ ¬((if P x then f x else neutral op) = neutral op)}) (λx. if P x then f x else neutral op)",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op ({x. x ∈ {x1. x1 ∈ s ∧ P x1} ∧ ¬(f x = neutral op)}) f = iterate op ({x. x ∈ s ∧ ¬((if P x then f x else neutral op) = neutral op)}) (λx. if P x then f x else neutral op)"
                },
                {
                    "args": "support_def, iterate op (support op f ({x. x ∈ s ∧ P x})) f = iterate op (support op (λx. if P x then f x else neutral op) s) (λx. if P x then f x else neutral op)",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op (support op f ({x. x ∈ s ∧ P x})) f = iterate op (support op (λx. if P x then f x else neutral op) s) (λx. if P x then f x else neutral op)"
                },
                {
                    "args": "iterate_support, iterate op ({x. x ∈ s ∧ P x}) f = iterate op s (λx. if P x then f x else neutral op)",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "monoidal op ⊢ iterate op ({x. x ∈ s ∧ P x}) f = iterate op s (λx. if P x then f x else neutral op)"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "0",
                        "9"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op ({x. x ∈ s ∧ P x}) f = iterate op s (λx. if P x then f x else neutral op)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ iterate op ({x. x ∈ s ∧ P x}) f = ",
                "   iterate op s (λx. if P x then f x else neutral op)"
            ],
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "iterate_support"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal": "∀x. ∀a. ¬((if P x then f x else a) = a) ⟷ P x ∧ ¬(f x = a)",
                    "goal_id": "1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "conj_assoc"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_eq"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2.2"
                    ],
                    "goal_id": "2.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "2.3"
                    ],
                    "goal_id": "2.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "'b ⇒ bool",
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_eq_general",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y) ⊢ ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∀x. x ∈ t ⟷ (∃x1. x = h x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "x, 'b",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ x ∈ t ⟶ (∃x1. x = h x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "x ∈ t",
                    "id": "3.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ⊢ x ∈ t"
                },
                {
                    "args": "",
                    "id": "3.1.1",
                    "prevs": [
                        "1",
                        "3.1.0"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ t, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y) ⊢ ∃!x1. x1 ∈ s ∧ h x1 = x"
                },
                {
                    "args": "theI'",
                    "id": "3.1.2",
                    "prevs": [
                        "3.1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ t, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y) ⊢ (THE x1. x1 ∈ s ∧ h x1 = x) ∈ s ∧ h (THE x1. x1 ∈ s ∧ h x1 = x) = x"
                },
                {
                    "args": "exI, {P: λa1. a1 ∈ s ∧ h a1 = x, a: THE x1. x1 ∈ s ∧ h x1 = x}",
                    "id": "3.1.3",
                    "prevs": [
                        "3.1.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x ∈ t, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y) ⊢ ∃a1. a1 ∈ s ∧ h a1 = x"
                },
                {
                    "args": "eq_sym_eq, ∃x1. x1 ∈ s ∧ x = h x1",
                    "id": "3.1.4",
                    "prevs": [
                        "3.1.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, x ∈ t, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∃x1. x1 ∈ s ∧ x = h x1"
                },
                {
                    "args": "conj_comm, ∃x1. x = h x1 ∧ x1 ∈ s",
                    "id": "3.1.5",
                    "prevs": [
                        "3.1.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, x ∈ t, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∃x1. x = h x1 ∧ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "3.1.6",
                    "prevs": [
                        "3.1.0",
                        "3.1.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ x ∈ t ⟶ (∃x1. x = h x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ (∃x1. x = h x1 ∧ x1 ∈ s) ⟶ x ∈ t"
                },
                {
                    "args": "∃x1. x = h x1 ∧ x1 ∈ s",
                    "id": "3.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x1. x = h x1 ∧ x1 ∈ s ⊢ ∃x1. x = h x1 ∧ x1 ∈ s"
                },
                {
                    "args": "x1, 'c",
                    "id": "3.2.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x = h x1 ∧ x1 ∈ s",
                    "id": "3.2.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = h x1 ∧ x1 ∈ s ⊢ x = h x1 ∧ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "3.2.3",
                    "prevs": [
                        "3.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = h x1 ∧ x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "conjD1",
                    "id": "3.2.4",
                    "prevs": [
                        "3.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = h x1 ∧ x1 ∈ s ⊢ x = h x1"
                },
                {
                    "args": "",
                    "id": "3.2.5",
                    "prevs": [
                        "2",
                        "3.2.3"
                    ],
                    "rule": "apply_fact",
                    "th": "x = h x1 ∧ x1 ∈ s, ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ h x1 ∈ t ∧ g (h x1) = f x1"
                },
                {
                    "args": "conjD1",
                    "id": "3.2.6",
                    "prevs": [
                        "3.2.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = h x1 ∧ x1 ∈ s, ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ h x1 ∈ t"
                },
                {
                    "args": "x ∈ t",
                    "id": "3.2.7",
                    "prevs": [
                        "3.2.4",
                        "3.2.6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, x = h x1 ∧ x1 ∈ s, ∃x1. x = h x1 ∧ x1 ∈ s, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ x ∈ t"
                },
                {
                    "args": "∃x1. x = h x1 ∧ x1 ∈ s",
                    "id": "3.2.8",
                    "prevs": [
                        "3.2.0",
                        "3.2.0",
                        "3.2.1",
                        "3.2.2",
                        "3.2.7"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ (∃x1. x = h x1 ∧ x1 ∈ s) ⟶ x ∈ t"
                },
                {
                    "args": "iffI",
                    "id": "3.3",
                    "prevs": [
                        "3.1",
                        "3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ x ∈ t ⟷ (∃x1. x = h x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "",
                    "id": "3.4",
                    "prevs": [
                        "3.0",
                        "3.3"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∀x. x ∈ t ⟷ (∃x1. x = h x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "in_image, ∀x. x ∈ t ⟷ x ∈ image h s",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∀x. x ∈ t ⟷ x ∈ image h s"
                },
                {
                    "args": "member_ext",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ t = image h s"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∀x. x ∈ s ⟶ f x = g (h x)"
                },
                {
                    "args": "x, 'c",
                    "id": "6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "6.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "6.2",
                    "prevs": [
                        "2",
                        "6.1"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ h x ∈ t ∧ g (h x) = f x"
                },
                {
                    "args": "conjD2",
                    "id": "6.3",
                    "prevs": [
                        "6.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ g (h x) = f x"
                },
                {
                    "args": "f x = g (h x)",
                    "id": "6.4",
                    "prevs": [
                        "6.3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ f x = g (h x)"
                },
                {
                    "args": "",
                    "id": "6.5",
                    "prevs": [
                        "6.0",
                        "6.1",
                        "6.4"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∀x. x ∈ s ⟶ f x = g (h x)"
                },
                {
                    "args": "comp_fun_eval, ∀x. x ∈ s ⟶ f x = (g ∘ h) x",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∀x. x ∈ s ⟶ f x = (g ∘ h) x"
                },
                {
                    "args": "iterate_eq",
                    "id": "8",
                    "prevs": [
                        "0",
                        "7"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ iterate op s f = iterate op s (g ∘ h)"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ h x = h y ⟶ x = y"
                },
                {
                    "args": "x, 'c",
                    "id": "9.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "y, 'c",
                    "id": "9.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "x ∈ s",
                    "id": "9.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "y ∈ s",
                    "id": "9.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y ∈ s ⊢ y ∈ s"
                },
                {
                    "args": "h x = h y",
                    "id": "9.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "h x = h y ⊢ h x = h y"
                },
                {
                    "args": "",
                    "id": "9.5",
                    "prevs": [
                        "2",
                        "9.3"
                    ],
                    "rule": "apply_fact",
                    "th": "y ∈ s, ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ h y ∈ t ∧ g (h y) = f y"
                },
                {
                    "args": "conjD1",
                    "id": "9.6",
                    "prevs": [
                        "9.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "y ∈ s, ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ h y ∈ t"
                },
                {
                    "args": "",
                    "id": "9.7",
                    "prevs": [
                        "1",
                        "9.6"
                    ],
                    "rule": "apply_fact",
                    "th": "y ∈ s, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∃!x. x ∈ s ∧ h x = h y"
                },
                {
                    "args": "exists1_def",
                    "id": "9.8",
                    "prevs": [
                        "9.7"
                    ],
                    "rule": "rewrite_fact",
                    "th": "y ∈ s, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∃x. (x ∈ s ∧ h x = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x)"
                },
                {
                    "args": "x1, 'c",
                    "id": "9.9",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "(x1 ∈ s ∧ h x1 = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x1)",
                    "id": "9.10",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x1 ∈ s ∧ h x1 = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x1) ⊢ (x1 ∈ s ∧ h x1 = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x1)"
                },
                {
                    "args": "conjD2",
                    "id": "9.11",
                    "prevs": [
                        "9.10"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x1 ∈ s ∧ h x1 = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x1) ⊢ ∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x1"
                },
                {
                    "args": "conjI",
                    "id": "9.12",
                    "prevs": [
                        "9.2",
                        "9.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ s, y ∈ s, h x = h y, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x, (x1 ∈ s ∧ h x1 = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x1) ⊢ x ∈ s ∧ h x = h y"
                },
                {
                    "args": "x",
                    "id": "9.13",
                    "prevs": [
                        "9.11",
                        "9.12"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op, x ∈ s, y ∈ s, h x = h y, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x, (x1 ∈ s ∧ h x1 = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x1) ⊢ x = x1"
                },
                {
                    "args": "eq_refl, {x: h y}",
                    "id": "9.14",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ h y = h y"
                },
                {
                    "args": "conjI",
                    "id": "9.15",
                    "prevs": [
                        "9.3",
                        "9.14"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ s, y ∈ s, h x = h y, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x, (x1 ∈ s ∧ h x1 = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x1) ⊢ y ∈ s ∧ h y = h y"
                },
                {
                    "args": "y",
                    "id": "9.16",
                    "prevs": [
                        "9.11",
                        "9.15"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op, x ∈ s, y ∈ s, h x = h y, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x, (x1 ∈ s ∧ h x1 = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x1) ⊢ y = x1"
                },
                {
                    "args": "eq_sym_eq, x1 = y",
                    "id": "9.17",
                    "prevs": [
                        "9.16"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, x ∈ s, y ∈ s, h x = h y, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x, (x1 ∈ s ∧ h x1 = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x1) ⊢ x1 = y"
                },
                {
                    "args": "x = y",
                    "id": "9.18",
                    "prevs": [
                        "9.13",
                        "9.17"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, x ∈ s, y ∈ s, h x = h y, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x, (x1 ∈ s ∧ h x1 = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x1) ⊢ x = y"
                },
                {
                    "args": "∃x. (x ∈ s ∧ h x = h y) ∧ (∀y1. y1 ∈ s ∧ h y1 = h y ⟶ y1 = x)",
                    "id": "9.19",
                    "prevs": [
                        "9.0",
                        "9.1",
                        "9.2",
                        "9.3",
                        "9.4",
                        "9.8",
                        "9.9",
                        "9.10",
                        "9.18"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ h x = h y ⟶ x = y"
                },
                {
                    "args": "iterate_image, {f: h, g: g, op: op, s: s}",
                    "id": "10",
                    "prevs": [
                        "0",
                        "9"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ iterate op (image h s) g = iterate op s (g ∘ h)"
                },
                {
                    "args": "eq_sym_eq, iterate op s (g ∘ h) = iterate op (image h s) g",
                    "id": "11",
                    "prevs": [
                        "10"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ iterate op s (g ∘ h) = iterate op (image h s) g"
                },
                {
                    "args": "iterate op s f = iterate op (image h s) g",
                    "id": "12",
                    "prevs": [
                        "8",
                        "11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ iterate op s f = iterate op (image h s) g"
                },
                {
                    "args": "iterate op s f = iterate op t g",
                    "id": "13",
                    "prevs": [
                        "5",
                        "12"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ iterate op s f = iterate op t g"
                },
                {
                    "args": "",
                    "id": "14",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "13"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ (∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)) ⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x) ⟶ iterate op s f = iterate op t g"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ (∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)) ",
                "   ⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x) ⟶ iterate op s f = iterate op t g"
            ],
            "steps": [
                {
                    "goal": "t = image h s",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "3.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "3.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1",
                        "3.1.0"
                    ],
                    "goal_id": "3.1.1",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3.1.1"
                    ],
                    "goal_id": "3.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "theI'"
                },
                {
                    "goal_id": "3.1.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "conj_comm"
                },
                {
                    "goal_id": "3.1.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "3.1.2"
                    ],
                    "goal_id": "3.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "exI"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.2.0"
                    ],
                    "goal_id": "3.2.1",
                    "method_name": "exists_elim",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "3.2.2"
                    ],
                    "goal_id": "3.2.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "3.2.2"
                    ],
                    "goal_id": "3.2.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.2.4"
                    ],
                    "goal_id": "3.2.5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2",
                        "3.2.3"
                    ],
                    "goal_id": "3.2.5",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3.2.5"
                    ],
                    "goal_id": "3.2.6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "goal": "iterate op s f = iterate op s ((g) O (h))",
                    "goal_id": "6",
                    "method_name": "cut"
                },
                {
                    "goal_id": "6",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_eq"
                },
                {
                    "goal_id": "6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "comp_fun_eval"
                },
                {
                    "goal_id": "6",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "2",
                        "6.1"
                    ],
                    "goal_id": "6.2",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "6.2"
                    ],
                    "goal_id": "6.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "6.3"
                    ],
                    "goal_id": "6.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "5"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "9",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal_id": "9",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_image"
                },
                {
                    "goal_id": "9",
                    "method_name": "introduction",
                    "names": "x,y"
                },
                {
                    "fact_ids": [
                        "2",
                        "9.3"
                    ],
                    "goal_id": "9.5",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "9.5"
                    ],
                    "goal_id": "9.6",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1",
                        "9.6"
                    ],
                    "goal_id": "9.7",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "9.7"
                    ],
                    "goal_id": "9.8",
                    "method_name": "rewrite_fact",
                    "sym": "",
                    "theorem": "exists1_def"
                },
                {
                    "fact_ids": [
                        "9.8"
                    ],
                    "goal_id": "9.9",
                    "method_name": "exists_elim",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "9.10"
                    ],
                    "goal_id": "9.11",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal": "x=x1",
                    "goal_id": "9.12",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "9.11"
                    ],
                    "goal_id": "9.12",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "9.12",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "9.13"
                    ],
                    "goal_id": "9.14",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "9.14",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "9.11"
                    ],
                    "goal_id": "9.14",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "9.14",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "9.14",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'c ⇒ 'a",
                "g": "'b ⇒ 'a",
                "h": "'c ⇒ 'b",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'c set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_eq_general_inverses",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y ⊢ ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y"
                },
                {
                    "args": "∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)"
                },
                {
                    "args": "y, 'b",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "y ∈ t",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y ∈ t ⊢ y ∈ t"
                },
                {
                    "args": "",
                    "id": "3.2",
                    "prevs": [
                        "1",
                        "3.1"
                    ],
                    "rule": "apply_fact",
                    "th": "y ∈ t, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y ⊢ k y ∈ s ∧ h (k y) = y"
                },
                {
                    "args": "",
                    "id": "3.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, y ∈ t, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ ∀y1. y1 ∈ s ∧ h y1 = y ⟶ y1 = k y"
                },
                {
                    "args": "y1, 'c",
                    "id": "3.3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y1"
                },
                {
                    "args": "y1 ∈ s ∧ h y1 = y",
                    "id": "3.3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y1 ∈ s ∧ h y1 = y ⊢ y1 ∈ s ∧ h y1 = y"
                },
                {
                    "args": "conjD1",
                    "id": "3.3.2",
                    "prevs": [
                        "3.3.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "y1 ∈ s ∧ h y1 = y ⊢ y1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "3.3.3",
                    "prevs": [
                        "3.3.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "y1 ∈ s ∧ h y1 = y ⊢ h y1 = y"
                },
                {
                    "args": "",
                    "id": "3.3.4",
                    "prevs": [
                        "2",
                        "3.3.2"
                    ],
                    "rule": "apply_fact",
                    "th": "y1 ∈ s ∧ h y1 = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ h y1 ∈ t ∧ k (h y1) = y1 ∧ g (h y1) = f y1"
                },
                {
                    "args": "conjD1",
                    "id": "3.3.5",
                    "prevs": [
                        "3.3.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "y1 ∈ s ∧ h y1 = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ h y1 ∈ t"
                },
                {
                    "args": "",
                    "id": "3.3.6",
                    "prevs": [
                        "1",
                        "3.3.5"
                    ],
                    "rule": "apply_fact",
                    "th": "y1 ∈ s ∧ h y1 = y, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ k (h y1) ∈ s ∧ h (k (h y1)) = h y1"
                },
                {
                    "args": "conjD2",
                    "id": "3.3.7",
                    "prevs": [
                        "3.3.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "y1 ∈ s ∧ h y1 = y, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ h (k (h y1)) = h y1"
                },
                {
                    "args": "conjD2",
                    "id": "3.3.8",
                    "prevs": [
                        "3.3.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "y1 ∈ s ∧ h y1 = y ⊢ h y1 = y"
                },
                {
                    "args": "",
                    "id": "3.3.9",
                    "prevs": [
                        "3.3.8",
                        "3.3.7"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "y1 ∈ s ∧ h y1 = y, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ h (k y) = y"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "3.3.10",
                    "prevs": [
                        "3.3.8"
                    ],
                    "rule": "rewrite_fact",
                    "th": "y1 ∈ s ∧ h y1 = y ⊢ y = h y1"
                },
                {
                    "args": "conjD2",
                    "id": "3.3.11",
                    "prevs": [
                        "3.3.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "y1 ∈ s ∧ h y1 = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ k (h y1) = y1 ∧ g (h y1) = f y1"
                },
                {
                    "args": "conjD1",
                    "id": "3.3.12",
                    "prevs": [
                        "3.3.11"
                    ],
                    "rule": "apply_theorem",
                    "th": "y1 ∈ s ∧ h y1 = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ k (h y1) = y1"
                },
                {
                    "args": "y1 = k (h y1)",
                    "id": "3.3.13",
                    "prevs": [
                        "3.3.12"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "y1 ∈ s ∧ h y1 = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ y1 = k (h y1)"
                },
                {
                    "args": "y1 = k y",
                    "id": "3.3.14",
                    "prevs": [
                        "3.3.10",
                        "3.3.13"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, y ∈ t, y1 ∈ s ∧ h y1 = y, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ y1 = k y"
                },
                {
                    "args": "",
                    "id": "3.3.15",
                    "prevs": [
                        "3.3.0",
                        "3.3.1",
                        "3.3.14"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, y ∈ t, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ ∀y1. y1 ∈ s ∧ h y1 = y ⟶ y1 = k y"
                },
                {
                    "args": "conjI",
                    "id": "3.4",
                    "prevs": [
                        "3.2",
                        "3.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, y ∈ t, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ (k y ∈ s ∧ h (k y) = y) ∧ (∀y1. y1 ∈ s ∧ h y1 = y ⟶ y1 = k y)"
                },
                {
                    "args": "exI, {P: λx. (x ∈ s ∧ h x = y) ∧ (∀y1. y1 ∈ s ∧ h y1 = y ⟶ y1 = x), a: k y}",
                    "id": "3.5",
                    "prevs": [
                        "3.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, y ∈ t, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ ∃a1. (a1 ∈ s ∧ h a1 = y) ∧ (∀y1. y1 ∈ s ∧ h y1 = y ⟶ y1 = a1)"
                },
                {
                    "args": "exists1_def, ∃!x. x ∈ s ∧ h x = y",
                    "id": "3.6",
                    "prevs": [
                        "3.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, y ∈ t, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ ∃!x. x ∈ s ∧ h x = y"
                },
                {
                    "args": "",
                    "id": "3.7",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.6"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x"
                },
                {
                    "args": "x, 'c",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "4.2",
                    "prevs": [
                        "2",
                        "4.1"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x"
                },
                {
                    "args": "conjD1",
                    "id": "4.3",
                    "prevs": [
                        "4.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ h x ∈ t"
                },
                {
                    "args": "conjD2",
                    "id": "4.4",
                    "prevs": [
                        "4.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ k (h x) = x ∧ g (h x) = f x"
                },
                {
                    "args": "conjD2",
                    "id": "4.5",
                    "prevs": [
                        "4.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ g (h x) = f x"
                },
                {
                    "args": "conjI",
                    "id": "4.6",
                    "prevs": [
                        "4.3",
                        "4.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ s, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ h x ∈ t ∧ g (h x) = f x"
                },
                {
                    "args": "",
                    "id": "4.7",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.6"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x"
                },
                {
                    "args": "iterate_eq_general, {f: f, g: g, h: h, op: op, s: s, t: t}",
                    "id": "5",
                    "prevs": [
                        "0",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ iterate op s f = iterate op t g"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ (∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y) ⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x) ⟶ iterate op s f = iterate op t g"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ (∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y) ",
                "   ⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x) ",
                "      ⟶ iterate op s f = iterate op t g"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "param_h": "h",
                    "theorem": "iterate_eq_general"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "y"
                },
                {
                    "fact_ids": [
                        "1",
                        "3.1"
                    ],
                    "goal_id": "3.2",
                    "method_name": "apply_fact"
                },
                {
                    "goal_id": "3.3",
                    "method_name": "rewrite_goal",
                    "sym": "",
                    "theorem": "exists1_def"
                },
                {
                    "goal_id": "3.3",
                    "method_name": "inst_exists_goal",
                    "s": "k y"
                },
                {
                    "goal_id": "3.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "3.3",
                    "method_name": "introduction",
                    "names": "y1"
                },
                {
                    "fact_ids": [
                        "3.3.1"
                    ],
                    "goal_id": "3.3.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.3.1"
                    ],
                    "goal_id": "3.3.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "2",
                        "3.3.2"
                    ],
                    "goal_id": "3.3.4",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3.3.4"
                    ],
                    "goal_id": "3.3.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1",
                        "3.3.5"
                    ],
                    "goal_id": "3.3.6",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3.3.6"
                    ],
                    "goal_id": "3.3.7",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "3.3.1"
                    ],
                    "goal_id": "3.3.8",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "3.3.8",
                        "3.3.7"
                    ],
                    "goal_id": "3.3.9",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "3.3.8"
                    ],
                    "goal_id": "3.3.10",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "3.3.10"
                    ],
                    "goal_id": "3.3.11",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3.3.4"
                    ],
                    "goal_id": "3.3.11",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "3.3.11"
                    ],
                    "goal_id": "3.3.12",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.3.12"
                    ],
                    "goal_id": "3.3.13",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "2",
                        "4.1"
                    ],
                    "goal_id": "4.2",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "4.4"
                    ],
                    "goal_id": "4.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "4.6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'c ⇒ 'a",
                "g": "'b ⇒ 'a",
                "h": "'c ⇒ 'b",
                "k": "'b ⇒ 'c",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'c set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_injection",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ p x ∈ s",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ p x ∈ s ⊢ ∀x. x ∈ s ⟶ p x ∈ s"
                },
                {
                    "args": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∀x. (∃x1. x = p x1 ∧ x1 ∈ s) ⟶ x ∈ s"
                },
                {
                    "args": "x, 'b",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "∃x1. x = p x1 ∧ x1 ∈ s",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x1. x = p x1 ∧ x1 ∈ s ⊢ ∃x1. x = p x1 ∧ x1 ∈ s"
                },
                {
                    "args": "x1, 'b",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x = p x1 ∧ x1 ∈ s",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = p x1 ∧ x1 ∈ s ⊢ x = p x1 ∧ x1 ∈ s"
                },
                {
                    "args": "conjD1",
                    "id": "4.4",
                    "prevs": [
                        "4.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = p x1 ∧ x1 ∈ s ⊢ x = p x1"
                },
                {
                    "args": "conjD2",
                    "id": "4.5",
                    "prevs": [
                        "4.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = p x1 ∧ x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "4.6",
                    "prevs": [
                        "2",
                        "4.5"
                    ],
                    "rule": "apply_fact",
                    "th": "x = p x1 ∧ x1 ∈ s, ∀x. x ∈ s ⟶ p x ∈ s ⊢ p x1 ∈ s"
                },
                {
                    "args": "x ∈ s",
                    "id": "4.7",
                    "prevs": [
                        "4.4",
                        "4.6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op, x = p x1 ∧ x1 ∈ s, ∀x. x ∈ s ⟶ p x ∈ s, ∃x1. x = p x1 ∧ x1 ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ x ∈ s"
                },
                {
                    "args": "∃x1. x = p x1 ∧ x1 ∈ s",
                    "id": "4.8",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.1",
                        "4.2",
                        "4.3",
                        "4.7"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∀x. (∃x1. x = p x1 ∧ x1 ∈ s) ⟶ x ∈ s"
                },
                {
                    "args": "in_image, ∀x. x ∈ image p s ⟶ x ∈ s",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∀x. x ∈ image p s ⟶ x ∈ s"
                },
                {
                    "args": "subsetI",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ image p s ⊆ s"
                },
                {
                    "args": "surjective_iff_injective",
                    "id": "7",
                    "prevs": [
                        "1",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ (∀y. y ∈ s ⟶ (∃x. x ∈ s ∧ p x = y)) ⟷ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y)"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y) ⟷ (∀y. y ∈ s ⟶ (∃x. x ∈ s ∧ p x = y))"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [
                        "8",
                        "3"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite s, monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∀y. y ∈ s ⟶ (∃x. x ∈ s ∧ p x = y)"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)"
                },
                {
                    "args": "y, 'b",
                    "id": "10.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "y ∈ s",
                    "id": "10.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y ∈ s ⊢ y ∈ s"
                },
                {
                    "args": "",
                    "id": "10.2",
                    "prevs": [
                        "9",
                        "10.1"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, monoidal op, y ∈ s, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∃x. x ∈ s ∧ p x = y"
                },
                {
                    "args": "x, 'b",
                    "id": "10.3",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s ∧ p x = y",
                    "id": "10.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ p x = y ⊢ x ∈ s ∧ p x = y"
                },
                {
                    "args": "",
                    "id": "10.5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, y ∈ s, x ∈ s ∧ p x = y, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∀y1. y1 ∈ s ∧ p y1 = y ⟶ y1 = x"
                },
                {
                    "args": "y1, 'b",
                    "id": "10.5.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y1"
                },
                {
                    "args": "y1 ∈ s ∧ p y1 = y",
                    "id": "10.5.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y1 ∈ s ∧ p y1 = y ⊢ y1 ∈ s ∧ p y1 = y"
                },
                {
                    "args": "conjD1",
                    "id": "10.5.2",
                    "prevs": [
                        "10.5.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "y1 ∈ s ∧ p y1 = y ⊢ y1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "10.5.3",
                    "prevs": [
                        "10.5.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "y1 ∈ s ∧ p y1 = y ⊢ p y1 = y"
                },
                {
                    "args": "conjD1",
                    "id": "10.5.4",
                    "prevs": [
                        "10.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ p x = y ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "10.5.5",
                    "prevs": [
                        "10.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ p x = y ⊢ p x = y"
                },
                {
                    "args": "eq_sym_eq, y = p x",
                    "id": "10.5.6",
                    "prevs": [
                        "10.5.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, y ∈ s, x ∈ s ∧ p x = y, y1 ∈ s ∧ p y1 = y, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ y = p x"
                },
                {
                    "args": "p y1 = p x",
                    "id": "10.5.7",
                    "prevs": [
                        "10.5.3",
                        "10.5.6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op, y ∈ s, x ∈ s ∧ p x = y, y1 ∈ s ∧ p y1 = y, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ p y1 = p x"
                },
                {
                    "args": "y1, x",
                    "id": "10.5.8",
                    "prevs": [
                        "3",
                        "10.5.2",
                        "10.5.4",
                        "10.5.7"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, monoidal op, y ∈ s, x ∈ s ∧ p x = y, y1 ∈ s ∧ p y1 = y, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ y1 = x"
                },
                {
                    "args": "",
                    "id": "10.5.9",
                    "prevs": [
                        "10.5.0",
                        "10.5.1",
                        "10.5.8"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, y ∈ s, x ∈ s ∧ p x = y, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∀y1. y1 ∈ s ∧ p y1 = y ⟶ y1 = x"
                },
                {
                    "args": "conjI",
                    "id": "10.6",
                    "prevs": [
                        "10.4",
                        "10.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, y ∈ s, x ∈ s ∧ p x = y, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ (x ∈ s ∧ p x = y) ∧ (∀y1. y1 ∈ s ∧ p y1 = y ⟶ y1 = x)"
                },
                {
                    "args": "exI, {P: λx. (x ∈ s ∧ p x = y) ∧ (∀y1. y1 ∈ s ∧ p y1 = y ⟶ y1 = x), a: x}",
                    "id": "10.7",
                    "prevs": [
                        "10.6"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op, y ∈ s, x ∈ s ∧ p x = y, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∃a1. (a1 ∈ s ∧ p a1 = y) ∧ (∀y1. y1 ∈ s ∧ p y1 = y ⟶ y1 = a1)"
                },
                {
                    "args": "exists1_def, ∃!x. x ∈ s ∧ p x = y",
                    "id": "10.8",
                    "prevs": [
                        "10.7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, y ∈ s, x ∈ s ∧ p x = y, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∃!x. x ∈ s ∧ p x = y"
                },
                {
                    "args": "∃x. x ∈ s ∧ p x = y",
                    "id": "10.9",
                    "prevs": [
                        "10.0",
                        "10.1",
                        "10.2",
                        "10.3",
                        "10.4",
                        "10.8"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)"
                },
                {
                    "args": "iterate_bijection, {f: f, op: op, p: p, s: s}",
                    "id": "11",
                    "prevs": [
                        "0",
                        "2",
                        "10"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ iterate op s f = iterate op s (f ∘ p)"
                },
                {
                    "args": "eq_sym_eq, iterate op s (f ∘ p) = iterate op s f",
                    "id": "12",
                    "prevs": [
                        "11"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ iterate op s (f ∘ p) = iterate op s f"
                },
                {
                    "args": "",
                    "id": "13",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "12"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ (∀x. x ∈ s ⟶ p x ∈ s) ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y) ⟶ iterate op s (f ∘ p) = iterate op s f"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ",
                "   ⟶ (∀x. x ∈ s ⟶ p x ∈ s) ",
                "      ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y) ",
                "         ⟶ iterate op s (f ∘ p) = iterate op s f"
            ],
            "steps": [
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "0",
                        "2"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_bijection"
                },
                {
                    "goal": "image p s ⊆ s",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "4.1"
                    ],
                    "goal_id": "4.2",
                    "method_name": "exists_elim",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "4.3"
                    ],
                    "goal_id": "4.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "4.3"
                    ],
                    "goal_id": "4.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "2",
                        "4.5"
                    ],
                    "goal_id": "4.6",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "4.4"
                    ],
                    "goal_id": "4.7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "1",
                        "6"
                    ],
                    "goal_id": "7",
                    "method_name": "apply_forward_step",
                    "theorem": "surjective_iff_injective"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal_id": "8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "8",
                        "3"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "goal_id": "10",
                    "method_name": "introduction",
                    "names": "y"
                },
                {
                    "goal_id": "10.2",
                    "method_name": "rewrite_goal",
                    "sym": "",
                    "theorem": "exists1_def"
                },
                {
                    "fact_ids": [
                        "9",
                        "10.1"
                    ],
                    "goal_id": "10.2",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "10.2"
                    ],
                    "goal_id": "10.3",
                    "method_name": "exists_elim",
                    "names": "x"
                },
                {
                    "goal_id": "10.5",
                    "method_name": "inst_exists_goal",
                    "s": "x"
                },
                {
                    "goal_id": "10.5",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "10.5",
                    "method_name": "introduction",
                    "names": "y1"
                },
                {
                    "fact_ids": [
                        "10.5.1"
                    ],
                    "goal_id": "10.5.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "10.5.1"
                    ],
                    "goal_id": "10.5.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "10.5.4",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "10.4"
                    ],
                    "goal_id": "10.5.4",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "10.5.3"
                    ],
                    "goal_id": "10.5.5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "10.5.5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "10.4"
                    ],
                    "goal_id": "10.5.5",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "p": "'b ⇒ 'b",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_union_nonzero",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "∀x. x ∈ s ∩ t ⟶ f x = neutral op",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ ∀x. x ∈ s ∩ t ⟶ f x = neutral op"
                },
                {
                    "args": "finite_support, {f: f, op: op, s: s}",
                    "id": "4",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ finite (support op f s)"
                },
                {
                    "args": "finite_support, {f: f, op: op, s: t}",
                    "id": "5",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ finite (support op f t)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ ∀x. x ∈ s ∩ t ∧ ¬(f x = neutral op) ⟷ x ∈ ∅"
                },
                {
                    "args": "x, 'b",
                    "id": "6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "6.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ x ∈ s ∩ t ∧ ¬(f x = neutral op) ⟶ x ∈ ∅"
                },
                {
                    "args": "x ∈ s ∩ t ∧ ¬(f x = neutral op)",
                    "id": "6.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∩ t ∧ ¬(f x = neutral op) ⊢ x ∈ s ∩ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "6.1.1",
                    "prevs": [
                        "6.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∩ t ∧ ¬(f x = neutral op) ⊢ x ∈ s ∩ t"
                },
                {
                    "args": "conjD2",
                    "id": "6.1.2",
                    "prevs": [
                        "6.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∩ t ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "6.1.3",
                    "prevs": [
                        "3",
                        "6.1.1"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s ∩ t ∧ ¬(f x = neutral op), ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ f x = neutral op"
                },
                {
                    "args": "negE_gen, {A: f x = neutral op, C: x ∈ ∅}",
                    "id": "6.1.4",
                    "prevs": [
                        "6.1.2",
                        "6.1.3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x ∈ s ∩ t ∧ ¬(f x = neutral op), ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ x ∈ ∅"
                },
                {
                    "args": "",
                    "id": "6.1.5",
                    "prevs": [
                        "6.1.0",
                        "6.1.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ x ∈ s ∩ t ∧ ¬(f x = neutral op) ⟶ x ∈ ∅"
                },
                {
                    "args": "",
                    "id": "6.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ x ∈ ∅ ⟶ x ∈ s ∩ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ ∅",
                    "id": "6.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ ∅ ⊢ x ∈ ∅"
                },
                {
                    "args": "member_empty, x ∈ s ∩ t ∧ ¬(f x = neutral op)",
                    "id": "6.2.1",
                    "prevs": [
                        "6.2.0"
                    ],
                    "rule": "resolve_theorem",
                    "th": "x ∈ ∅ ⊢ x ∈ s ∩ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "6.2.2",
                    "prevs": [
                        "6.2.0",
                        "6.2.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ x ∈ ∅ ⟶ x ∈ s ∩ t ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "6.3",
                    "prevs": [
                        "6.1",
                        "6.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ x ∈ s ∩ t ∧ ¬(f x = neutral op) ⟷ x ∈ ∅"
                },
                {
                    "args": "",
                    "id": "6.4",
                    "prevs": [
                        "6.0",
                        "6.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ ∀x. x ∈ s ∩ t ∧ ¬(f x = neutral op) ⟷ x ∈ ∅"
                },
                {
                    "args": "in_support, ∀x. x ∈ support op f (s ∩ t) ⟷ x ∈ ∅",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ ∀x. x ∈ support op f (s ∩ t) ⟷ x ∈ ∅"
                },
                {
                    "args": "member_ext",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ support op f (s ∩ t) = ∅"
                },
                {
                    "args": "support_inter, support op f s ∩ support op f t = ∅",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ support op f s ∩ support op f t = ∅"
                },
                {
                    "args": "disjoint_def, disjoint (support op f s) (support op f t)",
                    "id": "10",
                    "prevs": [
                        "9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ disjoint (support op f s) (support op f t)"
                },
                {
                    "args": "iterate_union, {f: f, op: op, s: support op f s, t: support op f t}",
                    "id": "11",
                    "prevs": [
                        "0",
                        "4",
                        "5",
                        "10"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ iterate op (support op f s ∪ support op f t) f = op (iterate op (support op f s) f) (iterate op (support op f t) f)"
                },
                {
                    "args": "support_union, iterate op (support op f (s ∪ t)) f = op (iterate op (support op f s) f) (iterate op (support op f t) f)",
                    "id": "12",
                    "prevs": [
                        "11"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ iterate op (support op f (s ∪ t)) f = op (iterate op (support op f s) f) (iterate op (support op f t) f)"
                },
                {
                    "args": "iterate_support, iterate op (s ∪ t) f = op (iterate op s f) (iterate op t f)",
                    "id": "13",
                    "prevs": [
                        "12"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite s, finite t, monoidal op, ∀x. x ∈ s ∩ t ⟶ f x = neutral op ⊢ iterate op (s ∪ t) f = op (iterate op s f) (iterate op t f)"
                },
                {
                    "args": "",
                    "id": "14",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "13"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ finite t ⟶ (∀x. x ∈ s ∩ t ⟶ f x = neutral op) ⟶ iterate op (s ∪ t) f = op (iterate op s f) (iterate op t f)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ",
                "   ⟶ finite t ",
                "      ⟶ (∀x. x ∈ s ∩ t ⟶ f x = neutral op) ",
                "         ⟶ iterate op (s ∪ t) f = op (iterate op s f) (iterate op t f)"
            ],
            "steps": [
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "iterate_support"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_union"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_union"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_support"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_support"
                },
                {
                    "goal_id": "6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                },
                {
                    "goal_id": "6",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "support_inter"
                },
                {
                    "goal_id": "6",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "goal_id": "6",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "6.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "6.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "6.1.0"
                    ],
                    "goal_id": "6.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "6.1.0"
                    ],
                    "goal_id": "6.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "3",
                        "6.1.1"
                    ],
                    "goal_id": "6.1.3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "6.1.2",
                        "6.1.3"
                    ],
                    "goal_id": "6.1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "6.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "6.2.0"
                    ],
                    "goal_id": "6.2.1",
                    "method_name": "apply_resolve_step",
                    "theorem": "member_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_op",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "monoidal_ac",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op (neutral op) a = a) ∧ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD1",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. op (neutral op) a = a"
                },
                {
                    "args": "conjD2",
                    "id": "4",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "iterate_empty, {f: f}",
                    "id": "5",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "iterate_empty, {f: g}",
                    "id": "6",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ g = neutral op"
                },
                {
                    "args": "iterate_empty, {f: λx. op (f x) (g x), op: op}",
                    "id": "7",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op ⊢ iterate op ∅ (λx. op (f x) (g x)) = neutral op"
                },
                {
                    "args": "iterate op ∅ (λx. op (f x) (g x)) = iterate op ∅ g",
                    "id": "8",
                    "prevs": [
                        "6",
                        "7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op ⊢ iterate op ∅ (λx. op (f x) (g x)) = iterate op ∅ g"
                },
                {
                    "args": "iterate op ∅ (λx. op (f x) (g x)) = op (neutral op) (iterate op ∅ g)",
                    "id": "9",
                    "prevs": [
                        "3",
                        "8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op ⊢ iterate op ∅ (λx. op (f x) (g x)) = op (neutral op) (iterate op ∅ g)"
                },
                {
                    "args": "iterate op ∅ (λx. op (f x) (g x)) = op (iterate op ∅ f) (iterate op ∅ g)",
                    "id": "10",
                    "prevs": [
                        "5",
                        "9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op ⊢ iterate op ∅ (λx. op (f x) (g x)) = op (iterate op ∅ f) (iterate op ∅ g)"
                },
                {
                    "args": "",
                    "id": "11",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op ⊢ ∀x. ∀s1. iterate op s1 (λx1. op (f x1) (g x1)) = op (iterate op s1 f) (iterate op s1 g) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ iterate op (insert x s1) (λx1. op (f x1) (g x1)) = op (iterate op (insert x s1) f) (iterate op (insert x s1) g)"
                },
                {
                    "args": "a, 'b",
                    "id": "11.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "s1, 'b set",
                    "id": "11.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s1"
                },
                {
                    "args": "iterate op s1 (λx. op (f x) (g x)) = op (iterate op s1 f) (iterate op s1 g)",
                    "id": "11.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "iterate op s1 (λx. op (f x) (g x)) = op (iterate op s1 f) (iterate op s1 g) ⊢ iterate op s1 (λx. op (f x) (g x)) = op (iterate op s1 f) (iterate op s1 g)"
                },
                {
                    "args": "¬(a ∈ s1)",
                    "id": "11.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s1) ⊢ ¬(a ∈ s1)"
                },
                {
                    "args": "finite s1",
                    "id": "11.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s1 ⊢ finite s1"
                },
                {
                    "args": "iterate_insert, {f: λx. op (f x) (g x), x: a}",
                    "id": "11.5",
                    "prevs": [
                        "0",
                        "11.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op ⊢ iterate op (insert a s1) (λx. op (f x) (g x)) = (if a ∈ s1 then iterate op s1 (λx. op (f x) (g x)) else op (op (f a) (g a)) (iterate op s1 (λx. op (f x) (g x))))"
                },
                {
                    "args": "if_not_P",
                    "id": "11.6",
                    "prevs": [
                        "11.5",
                        "11.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, monoidal op, ¬(a ∈ s1) ⊢ iterate op (insert a s1) (λx. op (f x) (g x)) = op (op (f a) (g a)) (iterate op s1 (λx. op (f x) (g x)))"
                },
                {
                    "args": "iterate_insert, {f: f, x: a}",
                    "id": "11.7",
                    "prevs": [
                        "0",
                        "11.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op ⊢ iterate op (insert a s1) f = (if a ∈ s1 then iterate op s1 f else op (f a) (iterate op s1 f))"
                },
                {
                    "args": "if_not_P",
                    "id": "11.8",
                    "prevs": [
                        "11.7",
                        "11.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, monoidal op, ¬(a ∈ s1) ⊢ iterate op (insert a s1) f = op (f a) (iterate op s1 f)"
                },
                {
                    "args": "iterate_insert, {f: g, x: a}",
                    "id": "11.9",
                    "prevs": [
                        "0",
                        "11.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1, monoidal op ⊢ iterate op (insert a s1) g = (if a ∈ s1 then iterate op s1 g else op (g a) (iterate op s1 g))"
                },
                {
                    "args": "if_not_P",
                    "id": "11.10",
                    "prevs": [
                        "11.9",
                        "11.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, monoidal op, ¬(a ∈ s1) ⊢ iterate op (insert a s1) g = op (g a) (iterate op s1 g)"
                },
                {
                    "args": "conjD2",
                    "id": "11.11",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "11.12",
                    "prevs": [
                        "11.11"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD1",
                    "id": "11.13",
                    "prevs": [
                        "11.12"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op (op a b) c = op a (op b c)"
                },
                {
                    "args": "conjD2",
                    "id": "11.14",
                    "prevs": [
                        "11.12"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op a (op b c) = op b (op a c)"
                },
                {
                    "args": "iterate op s1 f, g a, iterate op s1 g",
                    "id": "11.15",
                    "prevs": [
                        "11.14"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op (iterate op s1 f) (op (g a) (iterate op s1 g)) = op (g a) (op (iterate op s1 f) (iterate op s1 g))"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "11.16",
                    "prevs": [
                        "11.13"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op a (op b c) = op (op a b) c"
                },
                {
                    "args": "op (op (f a) (g a)) (iterate op s1 (λx. op (f x) (g x))) = op (op (f a) (g a)) (op (iterate op s1 f) (iterate op s1 g))",
                    "id": "11.17",
                    "prevs": [
                        "11.2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "iterate op s1 (λx. op (f x) (g x)) = op (iterate op s1 f) (iterate op s1 g) ⊢ op (op (f a) (g a)) (iterate op s1 (λx. op (f x) (g x))) = op (op (f a) (g a)) (op (iterate op s1 f) (iterate op s1 g))"
                },
                {
                    "args": "iterate op (insert a s1) (λx. op (f x) (g x)) = op (op (f a) (g a)) (op (iterate op s1 f) (iterate op s1 g))",
                    "id": "11.18",
                    "prevs": [
                        "11.6",
                        "11.17"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite s1, monoidal op, ¬(a ∈ s1), iterate op s1 (λx. op (f x) (g x)) = op (iterate op s1 f) (iterate op s1 g) ⊢ iterate op (insert a s1) (λx. op (f x) (g x)) = op (op (f a) (g a)) (op (iterate op s1 f) (iterate op s1 g))"
                },
                {
                    "args": "iterate op (insert a s1) (λx. op (f x) (g x)) = op (f a) (op (g a) (op (iterate op s1 f) (iterate op s1 g)))",
                    "id": "11.19",
                    "prevs": [
                        "11.16",
                        "11.18"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite s1, monoidal op, ¬(a ∈ s1), iterate op s1 (λx. op (f x) (g x)) = op (iterate op s1 f) (iterate op s1 g) ⊢ iterate op (insert a s1) (λx. op (f x) (g x)) = op (f a) (op (g a) (op (iterate op s1 f) (iterate op s1 g)))"
                },
                {
                    "args": "iterate op (insert a s1) (λx. op (f x) (g x)) = op (f a) (op (iterate op s1 f) (op (g a) (iterate op s1 g)))",
                    "id": "11.20",
                    "prevs": [
                        "11.15",
                        "11.19"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite s1, monoidal op, ¬(a ∈ s1), iterate op s1 (λx. op (f x) (g x)) = op (iterate op s1 f) (iterate op s1 g) ⊢ iterate op (insert a s1) (λx. op (f x) (g x)) = op (f a) (op (iterate op s1 f) (op (g a) (iterate op s1 g)))"
                },
                {
                    "args": "iterate op (insert a s1) (λx. op (f x) (g x)) = op (op (f a) (iterate op s1 f)) (op (g a) (iterate op s1 g))",
                    "id": "11.21",
                    "prevs": [
                        "11.13",
                        "11.20"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite s1, monoidal op, ¬(a ∈ s1), iterate op s1 (λx. op (f x) (g x)) = op (iterate op s1 f) (iterate op s1 g) ⊢ iterate op (insert a s1) (λx. op (f x) (g x)) = op (op (f a) (iterate op s1 f)) (op (g a) (iterate op s1 g))"
                },
                {
                    "args": "iterate op (insert a s1) (λx. op (f x) (g x)) = op (iterate op (insert a s1) f) (op (g a) (iterate op s1 g))",
                    "id": "11.22",
                    "prevs": [
                        "11.8",
                        "11.21"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite s1, monoidal op, ¬(a ∈ s1), iterate op s1 (λx. op (f x) (g x)) = op (iterate op s1 f) (iterate op s1 g) ⊢ iterate op (insert a s1) (λx. op (f x) (g x)) = op (iterate op (insert a s1) f) (op (g a) (iterate op s1 g))"
                },
                {
                    "args": "iterate op (insert a s1) (λx. op (f x) (g x)) = op (iterate op (insert a s1) f) (iterate op (insert a s1) g)",
                    "id": "11.23",
                    "prevs": [
                        "11.10",
                        "11.22"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite s1, monoidal op, ¬(a ∈ s1), iterate op s1 (λx. op (f x) (g x)) = op (iterate op s1 f) (iterate op s1 g) ⊢ iterate op (insert a s1) (λx. op (f x) (g x)) = op (iterate op (insert a s1) f) (iterate op (insert a s1) g)"
                },
                {
                    "args": "",
                    "id": "11.24",
                    "prevs": [
                        "11.0",
                        "11.1",
                        "11.2",
                        "11.3",
                        "11.4",
                        "11.23"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op ⊢ ∀a. ∀s1. iterate op s1 (λx. op (f x) (g x)) = op (iterate op s1 f) (iterate op s1 g) ⟶ ¬(a ∈ s1) ⟶ finite s1 ⟶ iterate op (insert a s1) (λx. op (f x) (g x)) = op (iterate op (insert a s1) f) (iterate op (insert a s1) g)"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "12",
                    "prevs": [
                        "1",
                        "10",
                        "11"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op ⊢ iterate op s (λx. op (f x) (g x)) = op (iterate op s f) (iterate op s g)"
                },
                {
                    "args": "",
                    "id": "13",
                    "prevs": [
                        "0",
                        "1",
                        "12"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ iterate op s (λx. op (f x) (g x)) = op (iterate op s f) (iterate op s g)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ",
                "   ⟶ iterate op s (λx. op (f x) (g x)) = op (iterate op s f) (iterate op s g)"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "theorem": "monoidal_ac"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "6"
                    ],
                    "goal_id": "7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "7",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                },
                {
                    "goal_id": "11",
                    "method_name": "introduction",
                    "names": "a,s1"
                },
                {
                    "fact_ids": [
                        "0",
                        "11.4"
                    ],
                    "goal_id": "11.5",
                    "method_name": "apply_forward_step",
                    "param_f": "(λx. op (f x) (g x))",
                    "param_x": "a",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "11.5",
                        "11.3"
                    ],
                    "goal_id": "11.6",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0",
                        "11.4"
                    ],
                    "goal_id": "11.7",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "a",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "11.7",
                        "11.3"
                    ],
                    "goal_id": "11.8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0",
                        "11.4"
                    ],
                    "goal_id": "11.9",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "param_x": "a",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "11.9",
                        "11.3"
                    ],
                    "goal_id": "11.10",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "11.10"
                    ],
                    "goal_id": "11.11",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "11.8"
                    ],
                    "goal_id": "11.11",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "11.11",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "11.11"
                    ],
                    "goal_id": "11.12",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "11.12"
                    ],
                    "goal_id": "11.13",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "11.12"
                    ],
                    "goal_id": "11.14",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "11.13"
                    ],
                    "goal_id": "11.15",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "(op (iterate op s1 f) (op (g a) (iterate op s1 g))) = op (g a) (op (iterate op s1 f) ((iterate op s1 g)))",
                    "goal_id": "11.15",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "11.14"
                    ],
                    "goal_id": "11.15",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "11.15"
                    ],
                    "goal_id": "11.16",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "11.13"
                    ],
                    "goal_id": "11.16",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "11.16"
                    ],
                    "goal_id": "11.17",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "11.6"
                    ],
                    "goal_id": "11.17",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "11.2"
                    ],
                    "goal_id": "11.17",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "g": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_superset",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "u ⊆ v",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "u ⊆ v ⊢ u ⊆ v"
                },
                {
                    "args": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ ∀x. x ∈ v ∧ ¬(f x = neutral op) ⟷ x ∈ u ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x, 'b",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ x ∈ v ∧ ¬(f x = neutral op) ⟶ x ∈ u ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ v ∧ ¬(f x = neutral op)",
                    "id": "3.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ v ∧ ¬(f x = neutral op) ⊢ x ∈ v ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "3.1.1",
                    "prevs": [
                        "3.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ v ∧ ¬(f x = neutral op) ⊢ x ∈ v"
                },
                {
                    "args": "conjD2",
                    "id": "3.1.2",
                    "prevs": [
                        "3.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ v ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "3.1.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, u ⊆ v, x ∈ v ∧ ¬(f x = neutral op), ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ ¬(x ∈ u) ⟶ f x = neutral op"
                },
                {
                    "args": "¬(x ∈ u)",
                    "id": "3.1.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ u) ⊢ ¬(x ∈ u)"
                },
                {
                    "args": "x",
                    "id": "3.1.3.1",
                    "prevs": [
                        "2",
                        "3.1.1",
                        "3.1.3.0"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op, u ⊆ v, ¬(x ∈ u), x ∈ v ∧ ¬(f x = neutral op), ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "3.1.3.2",
                    "prevs": [
                        "3.1.3.0",
                        "3.1.3.1"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, u ⊆ v, x ∈ v ∧ ¬(f x = neutral op), ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ ¬(x ∈ u) ⟶ f x = neutral op"
                },
                {
                    "args": "double_neg, ¬(x ∈ u) ⟶ ¬¬(f x = neutral op)",
                    "id": "3.1.4",
                    "prevs": [
                        "3.1.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, u ⊆ v, x ∈ v ∧ ¬(f x = neutral op), ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ ¬(x ∈ u) ⟶ ¬¬(f x = neutral op)"
                },
                {
                    "args": "contrapositive",
                    "id": "3.1.5",
                    "prevs": [
                        "3.1.2",
                        "3.1.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, u ⊆ v, x ∈ v ∧ ¬(f x = neutral op), ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ x ∈ u"
                },
                {
                    "args": "conjI",
                    "id": "3.1.6",
                    "prevs": [
                        "3.1.5",
                        "3.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, u ⊆ v, x ∈ v ∧ ¬(f x = neutral op), ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ x ∈ u ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "3.1.7",
                    "prevs": [
                        "3.1.0",
                        "3.1.6"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ x ∈ v ∧ ¬(f x = neutral op) ⟶ x ∈ u ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ x ∈ u ∧ ¬(f x = neutral op) ⟶ x ∈ v ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "x ∈ u ∧ ¬(f x = neutral op)",
                    "id": "3.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ u ∧ ¬(f x = neutral op) ⊢ x ∈ u ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "3.2.1",
                    "prevs": [
                        "3.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ u ∧ ¬(f x = neutral op) ⊢ x ∈ u"
                },
                {
                    "args": "conjD2",
                    "id": "3.2.2",
                    "prevs": [
                        "3.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ u ∧ ¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "subsetE",
                    "id": "3.2.3",
                    "prevs": [
                        "1",
                        "3.2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, u ⊆ v, x ∈ u ∧ ¬(f x = neutral op), ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ x ∈ v"
                },
                {
                    "args": "conjI",
                    "id": "3.2.4",
                    "prevs": [
                        "3.2.3",
                        "3.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, u ⊆ v, x ∈ u ∧ ¬(f x = neutral op), ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ x ∈ v ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "3.2.5",
                    "prevs": [
                        "3.2.0",
                        "3.2.4"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ x ∈ u ∧ ¬(f x = neutral op) ⟶ x ∈ v ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "iffI",
                    "id": "3.3",
                    "prevs": [
                        "3.1",
                        "3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ x ∈ v ∧ ¬(f x = neutral op) ⟷ x ∈ u ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "3.4",
                    "prevs": [
                        "3.0",
                        "3.3"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ ∀x. x ∈ v ∧ ¬(f x = neutral op) ⟷ x ∈ u ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "in_support, ∀x. x ∈ support op f v ⟷ x ∈ support op f u",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ ∀x. x ∈ support op f v ⟷ x ∈ support op f u"
                },
                {
                    "args": "member_ext",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ support op f v = support op f u"
                },
                {
                    "args": "iterate op (support op f v) f = iterate op (support op f u) f",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ iterate op (support op f v) f = iterate op (support op f u) f"
                },
                {
                    "args": "iterate_support, iterate op v f = iterate op u f",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "monoidal op, u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op ⊢ iterate op v f = iterate op u f"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "7"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ u ⊆ v ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op) ⟶ iterate op v f = iterate op u f"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ u ⊆ v ",
                "   ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral op) ⟶ iterate op v f = iterate op u f"
            ],
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "iterate_support"
                },
                {
                    "goal": "(support op f v) = (support op f u)",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "3.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "3.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.1.0"
                    ],
                    "goal_id": "3.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.1.0"
                    ],
                    "goal_id": "3.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "3.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "3.1.2"
                    ],
                    "goal_id": "3.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "contrapositive"
                },
                {
                    "goal_id": "3.1.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "double_neg"
                },
                {
                    "goal_id": "3.1.3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3.1.3.1",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.2.0"
                    ],
                    "goal_id": "3.2.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.2.0"
                    ],
                    "goal_id": "3.2.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "3.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "3.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetE"
                },
                {
                    "fact_ids": [
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "u": "'b set",
                "v": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_univ",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "support op f univ ⊆ s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "support op f univ ⊆ s ⊢ support op f univ ⊆ s"
                },
                {
                    "args": "support_def",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "support op f univ ⊆ s ⊢ {x. x ∈ univ ∧ ¬(f x = neutral op)} ⊆ s"
                },
                {
                    "args": "subset_univ, {A: s}",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ s ⊆ univ"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, support op f univ ⊆ s ⊢ ∀x. x ∈ univ ⟶ ¬(x ∈ s) ⟶ f x = neutral op"
                },
                {
                    "args": "x, 'b",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ univ",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ univ ⊢ x ∈ univ"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "subsetE, {x: x}",
                    "id": "4.3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "support op f univ ⊆ s ⊢ x ∈ {x1. x1 ∈ univ ∧ ¬(f x1 = neutral op)} ⟶ x ∈ s"
                },
                {
                    "args": "member_collect",
                    "id": "4.4",
                    "prevs": [
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "support op f univ ⊆ s ⊢ x ∈ univ ∧ ¬(f x = neutral op) ⟶ x ∈ s"
                },
                {
                    "args": "",
                    "id": "4.5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, x ∈ univ, ¬(x ∈ s), support op f univ ⊆ s ⊢ ¬(f x = neutral op) ⟶ x ∈ s"
                },
                {
                    "args": "¬(f x = neutral op)",
                    "id": "4.5.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(f x = neutral op) ⊢ ¬(f x = neutral op)"
                },
                {
                    "args": "conjI",
                    "id": "4.5.1",
                    "prevs": [
                        "4.1",
                        "4.5.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ univ, ¬(x ∈ s), ¬(f x = neutral op), support op f univ ⊆ s ⊢ x ∈ univ ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "",
                    "id": "4.5.2",
                    "prevs": [
                        "4.4",
                        "4.5.1"
                    ],
                    "rule": "apply_fact",
                    "th": "monoidal op, x ∈ univ, ¬(x ∈ s), ¬(f x = neutral op), support op f univ ⊆ s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "4.5.3",
                    "prevs": [
                        "4.5.0",
                        "4.5.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, x ∈ univ, ¬(x ∈ s), support op f univ ⊆ s ⊢ ¬(f x = neutral op) ⟶ x ∈ s"
                },
                {
                    "args": "double_neg, ¬(f x = neutral op) ⟶ ¬¬(x ∈ s)",
                    "id": "4.6",
                    "prevs": [
                        "4.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, x ∈ univ, ¬(x ∈ s), support op f univ ⊆ s ⊢ ¬(f x = neutral op) ⟶ ¬¬(x ∈ s)"
                },
                {
                    "args": "contrapositive",
                    "id": "4.7",
                    "prevs": [
                        "4.2",
                        "4.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, x ∈ univ, ¬(x ∈ s), support op f univ ⊆ s ⊢ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "4.8",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.7"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, support op f univ ⊆ s ⊢ ∀x. x ∈ univ ⟶ ¬(x ∈ s) ⟶ f x = neutral op"
                },
                {
                    "args": "iterate_superset",
                    "id": "5",
                    "prevs": [
                        "0",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, support op f univ ⊆ s ⊢ iterate op univ f = iterate op s f"
                },
                {
                    "args": "eq_sym_eq, iterate op s f = iterate op univ f",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, support op f univ ⊆ s ⊢ iterate op s f = iterate op univ f"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ support op f univ ⊆ s ⟶ iterate op s f = iterate op univ f"
                }
            ],
            "prop": "monoidal op ⟶ support op f univ ⊆ s ⟶ iterate op s f = iterate op univ f",
            "steps": [
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_superset"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "subset_univ"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "4.3",
                    "method_name": "apply_forward_step",
                    "param_x": "x",
                    "theorem": "subsetE"
                },
                {
                    "fact_ids": [
                        "4.3"
                    ],
                    "goal_id": "4.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.5",
                    "method_name": "apply_backward_step",
                    "theorem": "contrapositive"
                },
                {
                    "goal_id": "4.5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "double_neg"
                },
                {
                    "goal_id": "4.5",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "4.4"
                    ],
                    "goal_id": "4.5.1",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "4.5.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_swap",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "iterate_empty, {f: λj. iterate op s (λi. f i j)}",
                    "id": "3",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ (λj. iterate op s (λi. f i j)) = neutral op"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op ⊢ ∀x. x ∈ s ⟶ iterate op ∅ (f x) = neutral op"
                },
                {
                    "args": "x, 'b",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "iterate_empty, {f: f x, op: op}",
                    "id": "4.2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ (f x) = neutral op"
                },
                {
                    "args": "",
                    "id": "4.3",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op ⊢ ∀x. x ∈ s ⟶ iterate op ∅ (f x) = neutral op"
                },
                {
                    "args": "iterate_eq_neutral",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op ⊢ iterate op s (λx. iterate op ∅ (f x)) = neutral op"
                },
                {
                    "args": "iterate op s (λi. iterate op ∅ (f i)) = iterate op ∅ (λj. iterate op s (λi. f i j))",
                    "id": "6",
                    "prevs": [
                        "3",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op ⊢ iterate op s (λi. iterate op ∅ (f i)) = iterate op ∅ (λj. iterate op s (λi. f i j))"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op ⊢ ∀x. ∀s1. iterate op s (λi. iterate op s1 (f i)) = iterate op s1 (λj. iterate op s (λi. f i j)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ iterate op s (λi. iterate op (insert x s1) (f i)) = iterate op (insert x s1) (λj. iterate op s (λi. f i j))"
                },
                {
                    "args": "a, 'c",
                    "id": "7.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "t1, 'c set",
                    "id": "7.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR t1"
                },
                {
                    "args": "iterate op s (λi. iterate op t1 (f i)) = iterate op t1 (λj. iterate op s (λi. f i j))",
                    "id": "7.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "iterate op s (λi. iterate op t1 (f i)) = iterate op t1 (λj. iterate op s (λi. f i j)) ⊢ iterate op s (λi. iterate op t1 (f i)) = iterate op t1 (λj. iterate op s (λi. f i j))"
                },
                {
                    "args": "¬(a ∈ t1)",
                    "id": "7.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ t1) ⊢ ¬(a ∈ t1)"
                },
                {
                    "args": "finite t1",
                    "id": "7.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t1 ⊢ finite t1"
                },
                {
                    "args": "iterate_insert, {f: λj. iterate op s (λi. f i j), x: a}",
                    "id": "7.5",
                    "prevs": [
                        "0",
                        "7.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t1, monoidal op ⊢ iterate op (insert a t1) (λj. iterate op s (λi. f i j)) = (if a ∈ t1 then iterate op t1 (λj. iterate op s (λi. f i j)) else op (iterate op s (λi. f i a)) (iterate op t1 (λj. iterate op s (λi. f i j))))"
                },
                {
                    "args": "if_not_P",
                    "id": "7.6",
                    "prevs": [
                        "7.5",
                        "7.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite t1, monoidal op, ¬(a ∈ t1) ⊢ iterate op (insert a t1) (λj. iterate op s (λi. f i j)) = op (iterate op s (λi. f i a)) (iterate op t1 (λj. iterate op s (λi. f i j)))"
                },
                {
                    "args": "iterate_insert, {f: f i, x: a}",
                    "id": "7.7",
                    "prevs": [
                        "0",
                        "7.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t1, monoidal op ⊢ iterate op (insert a t1) (f i) = (if a ∈ t1 then iterate op t1 (f i) else op (f i a) (iterate op t1 (f i)))"
                },
                {
                    "args": "if_not_P",
                    "id": "7.8",
                    "prevs": [
                        "7.7",
                        "7.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite t1, monoidal op, ¬(a ∈ t1) ⊢ iterate op (insert a t1) (f i) = op (f i a) (iterate op t1 (f i))"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "7.9",
                    "prevs": [
                        "7.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "iterate op s (λi. iterate op t1 (f i)) = iterate op t1 (λj. iterate op s (λi. f i j)) ⊢ iterate op t1 (λj. iterate op s (λi. f i j)) = iterate op s (λi. iterate op t1 (f i))"
                },
                {
                    "args": "iterate_op, {f: λx. f x a, g: λx. iterate op t1 (f x), op: op, s: s}",
                    "id": "7.10",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(a ∈ t1), iterate op s (λi. iterate op t1 (f i)) = iterate op t1 (λj. iterate op s (λi. f i j)) ⊢ iterate op s (λx. op (f x a) (iterate op t1 (f x))) = op (iterate op s (λx. f x a)) (iterate op s (λx. iterate op t1 (f x)))"
                },
                {
                    "args": "iterate op s (λi. op (f i a) (iterate op t1 (f i))) = op (iterate op s (λi. f i a)) (iterate op t1 (λj. iterate op s (λi. f i j)))",
                    "id": "7.11",
                    "prevs": [
                        "7.9",
                        "7.10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(a ∈ t1), iterate op s (λi. iterate op t1 (f i)) = iterate op t1 (λj. iterate op s (λi. f i j)) ⊢ iterate op s (λi. op (f i a) (iterate op t1 (f i))) = op (iterate op s (λi. f i a)) (iterate op t1 (λj. iterate op s (λi. f i j)))"
                },
                {
                    "args": "iterate op s (λi. op (f i a) (iterate op t1 (f i))) = iterate op (insert a t1) (λj. iterate op s (λi. f i j))",
                    "id": "7.12",
                    "prevs": [
                        "7.6",
                        "7.11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(a ∈ t1), iterate op s (λi. iterate op t1 (f i)) = iterate op t1 (λj. iterate op s (λi. f i j)) ⊢ iterate op s (λi. op (f i a) (iterate op t1 (f i))) = iterate op (insert a t1) (λj. iterate op s (λi. f i j))"
                },
                {
                    "args": "iterate op s (λi. iterate op (insert a t1) (f i)) = iterate op (insert a t1) (λj. iterate op s (λi. f i j))",
                    "id": "7.13",
                    "prevs": [
                        "7.8",
                        "7.12"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, finite t1, monoidal op, ¬(a ∈ t1), iterate op s (λi. iterate op t1 (f i)) = iterate op t1 (λj. iterate op s (λi. f i j)) ⊢ iterate op s (λi. iterate op (insert a t1) (f i)) = iterate op (insert a t1) (λj. iterate op s (λi. f i j))"
                },
                {
                    "args": "",
                    "id": "7.14",
                    "prevs": [
                        "7.0",
                        "7.1",
                        "7.2",
                        "7.3",
                        "7.4",
                        "7.13"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op ⊢ ∀a. ∀t1. iterate op s (λi. iterate op t1 (f i)) = iterate op t1 (λj. iterate op s (λi. f i j)) ⟶ ¬(a ∈ t1) ⟶ finite t1 ⟶ iterate op s (λi. iterate op (insert a t1) (f i)) = iterate op (insert a t1) (λj. iterate op s (λi. f i j))"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "8",
                    "prevs": [
                        "2",
                        "6",
                        "7"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op ⊢ iterate op s (λi. iterate op t (f i)) = iterate op t (λj. iterate op s (λi. f i j))"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "8"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ finite t ⟶ iterate op s (λi. iterate op t (f i)) = iterate op t (λj. iterate op s (λi. f i j))"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ",
                "   ⟶ finite t ",
                "      ⟶ iterate op s (λi. iterate op t (f i)) = ",
                "         iterate op t (λj. iterate op s (λi. f i j))"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_forward_step",
                    "param_f": "(λj. iterate op s (λi. f i j))",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_eq_neutral"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                },
                {
                    "goal_id": "7",
                    "method_name": "introduction",
                    "names": "a,t1"
                },
                {
                    "fact_ids": [
                        "0",
                        "7.4"
                    ],
                    "goal_id": "7.5",
                    "method_name": "apply_forward_step",
                    "param_f": "(λj. iterate op s (λi. f i j))",
                    "param_x": "a",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "7.5",
                        "7.3"
                    ],
                    "goal_id": "7.6",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0",
                        "7.4"
                    ],
                    "goal_id": "7.7",
                    "method_name": "apply_forward_step",
                    "param_f": "f i",
                    "param_x": "a",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "7.7",
                        "7.3"
                    ],
                    "goal_id": "7.8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "7.8"
                    ],
                    "goal_id": "7.9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "7.6"
                    ],
                    "goal_id": "7.9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "7.2"
                    ],
                    "goal_id": "7.9",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "7.9"
                    ],
                    "goal_id": "7.10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "7.10",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_op"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'c ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set",
                "t": "'c set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_image_nonzero",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op ⊢ (∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f ∅) g = iterate op ∅ (g ∘ f)"
                },
                {
                    "args": "∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op ⊢ ∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op"
                },
                {
                    "args": "iterate_empty, {f: g ∘ f}",
                    "id": "2.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ (g ∘ f) = neutral op"
                },
                {
                    "args": "iterate_empty, {f: g, op: op}",
                    "id": "2.2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ g = neutral op"
                },
                {
                    "args": "iterate op ∅ g = iterate op ∅ (g ∘ f)",
                    "id": "2.3",
                    "prevs": [
                        "2.1",
                        "2.2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op, ∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op ⊢ iterate op ∅ g = iterate op ∅ (g ∘ f)"
                },
                {
                    "args": "image_empty, iterate op (image f ∅) g = iterate op ∅ (g ∘ f)",
                    "id": "2.4",
                    "prevs": [
                        "2.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, ∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op ⊢ iterate op (image f ∅) g = iterate op ∅ (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "2.5",
                    "prevs": [
                        "2.0",
                        "2.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op ⊢ (∀x. ∀y. x ∈ ∅ ⟶ y ∈ ∅ ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f ∅) g = iterate op ∅ (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op ⊢ ∀x. ∀s1. ((∀x1. ∀y. x1 ∈ s1 ⟶ y ∈ s1 ⟶ ¬(x1 = y) ⟶ f x1 = f y ⟶ g (f x1) = neutral op) ⟶ iterate op (image f s1) g = iterate op s1 (g ∘ f)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. ∀y. x1 ∈ insert x s1 ⟶ y ∈ insert x s1 ⟶ ¬(x1 = y) ⟶ f x1 = f y ⟶ g (f x1) = neutral op) ⟶ iterate op (image f (insert x s1)) g = iterate op (insert x s1) (g ∘ f)"
                },
                {
                    "args": "a, 'b",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "t, 'b set",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR t"
                },
                {
                    "args": "(∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f)",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f)"
                },
                {
                    "args": "¬(a ∈ t)",
                    "id": "3.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ t) ⊢ ¬(a ∈ t)"
                },
                {
                    "args": "finite t",
                    "id": "3.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op",
                    "id": "3.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op ⊢ ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op"
                },
                {
                    "args": "iterate_insert, {f: g ∘ f, x: a}",
                    "id": "3.6",
                    "prevs": [
                        "0",
                        "3.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t, monoidal op ⊢ iterate op (insert a t) (g ∘ f) = (if a ∈ t then iterate op t (g ∘ f) else op ((g ∘ f) a) (iterate op t (g ∘ f)))"
                },
                {
                    "args": "if_not_P",
                    "id": "3.7",
                    "prevs": [
                        "3.6",
                        "3.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite t, monoidal op, ¬(a ∈ t) ⊢ iterate op (insert a t) (g ∘ f) = op ((g ∘ f) a) (iterate op t (g ∘ f))"
                },
                {
                    "args": "finite_image, {f: f}",
                    "id": "3.8",
                    "prevs": [
                        "3.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t ⊢ finite (image f t)"
                },
                {
                    "args": "iterate_insert, {f: g, x: f a}",
                    "id": "3.9",
                    "prevs": [
                        "0",
                        "3.8"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t, monoidal op ⊢ iterate op (insert (f a) (image f t)) g = (if f a ∈ image f t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g))"
                },
                {
                    "args": "",
                    "id": "3.10",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ ∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op"
                },
                {
                    "args": "x, 'b",
                    "id": "3.10.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "y, 'b",
                    "id": "3.10.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "x ∈ t",
                    "id": "3.10.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ⊢ x ∈ t"
                },
                {
                    "args": "y ∈ t",
                    "id": "3.10.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y ∈ t ⊢ y ∈ t"
                },
                {
                    "args": "¬(x = y)",
                    "id": "3.10.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x = y) ⊢ ¬(x = y)"
                },
                {
                    "args": "f x = f y",
                    "id": "3.10.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "f x = f y ⊢ f x = f y"
                },
                {
                    "args": "disjI2, {A: x = a, B: x ∈ t}",
                    "id": "3.10.6",
                    "prevs": [
                        "3.10.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, x ∈ t, y ∈ t, ¬(x = y), ¬(a ∈ t), f x = f y, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ x = a ∨ x ∈ t"
                },
                {
                    "args": "member_insert, x ∈ insert a t",
                    "id": "3.10.7",
                    "prevs": [
                        "3.10.6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, x ∈ t, y ∈ t, ¬(x = y), ¬(a ∈ t), f x = f y, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ x ∈ insert a t"
                },
                {
                    "args": "disjI2, {A: y = a, B: y ∈ t}",
                    "id": "3.10.8",
                    "prevs": [
                        "3.10.3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, x ∈ t, y ∈ t, ¬(x = y), ¬(a ∈ t), f x = f y, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ y = a ∨ y ∈ t"
                },
                {
                    "args": "member_insert, y ∈ insert a t",
                    "id": "3.10.9",
                    "prevs": [
                        "3.10.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, x ∈ t, y ∈ t, ¬(x = y), ¬(a ∈ t), f x = f y, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ y ∈ insert a t"
                },
                {
                    "args": "x, y",
                    "id": "3.10.10",
                    "prevs": [
                        "3.5",
                        "3.10.7",
                        "3.10.9",
                        "3.10.4",
                        "3.10.5"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, monoidal op, x ∈ t, y ∈ t, ¬(x = y), ¬(a ∈ t), f x = f y, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ g (f x) = neutral op"
                },
                {
                    "args": "",
                    "id": "3.10.11",
                    "prevs": [
                        "3.10.0",
                        "3.10.1",
                        "3.10.2",
                        "3.10.3",
                        "3.10.4",
                        "3.10.5",
                        "3.10.10"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ ∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op"
                },
                {
                    "args": "",
                    "id": "3.11",
                    "prevs": [
                        "3.2",
                        "3.10"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ iterate op (image f t) g = iterate op t (g ∘ f)"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "3.12",
                    "prevs": [
                        "3.11"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ iterate op t (g ∘ f) = iterate op (image f t) g"
                },
                {
                    "args": "",
                    "id": "3.13",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ (∃x. f a = f x ∧ x ∈ t) ⟶ (if ∃x. f a = f x ∧ x ∈ t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op (image f t) g)"
                },
                {
                    "args": "∃x. f a = f x ∧ x ∈ t",
                    "id": "3.13.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x. f a = f x ∧ x ∈ t ⊢ ∃x. f a = f x ∧ x ∈ t"
                },
                {
                    "args": "b, 'b",
                    "id": "3.13.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR b"
                },
                {
                    "args": "f a = f b ∧ b ∈ t",
                    "id": "3.13.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "f a = f b ∧ b ∈ t ⊢ f a = f b ∧ b ∈ t"
                },
                {
                    "args": "conjD1",
                    "id": "3.13.3",
                    "prevs": [
                        "3.13.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "f a = f b ∧ b ∈ t ⊢ f a = f b"
                },
                {
                    "args": "conjD2",
                    "id": "3.13.4",
                    "prevs": [
                        "3.13.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "f a = f b ∧ b ∈ t ⊢ b ∈ t"
                },
                {
                    "args": "eq_refl, {x: a}",
                    "id": "3.13.5",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ a = a"
                },
                {
                    "args": "disjI1, {A: a = a, B: a ∈ t}",
                    "id": "3.13.6",
                    "prevs": [
                        "3.13.5"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ a = a ∨ a ∈ t"
                },
                {
                    "args": "member_insert, a ∈ insert a t",
                    "id": "3.13.7",
                    "prevs": [
                        "3.13.6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ a ∈ insert a t"
                },
                {
                    "args": "disjI2, {A: b = a, B: b ∈ t}",
                    "id": "3.13.8",
                    "prevs": [
                        "3.13.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ b = a ∨ b ∈ t"
                },
                {
                    "args": "member_insert, b ∈ insert a t",
                    "id": "3.13.9",
                    "prevs": [
                        "3.13.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ b ∈ insert a t"
                },
                {
                    "args": "",
                    "id": "3.13.10",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ a = b ⟶ a ∈ t"
                },
                {
                    "args": "a = b",
                    "id": "3.13.10.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a = b ⊢ a = b"
                },
                {
                    "args": "a ∈ t",
                    "id": "3.13.10.1",
                    "prevs": [
                        "3.13.10.0",
                        "3.13.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, a = b, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ a ∈ t"
                },
                {
                    "args": "",
                    "id": "3.13.10.2",
                    "prevs": [
                        "3.13.10.0",
                        "3.13.10.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ a = b ⟶ a ∈ t"
                },
                {
                    "args": "double_neg, ¬¬(a = b) ⟶ ¬¬(a ∈ t)",
                    "id": "3.13.11",
                    "prevs": [
                        "3.13.10"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ ¬¬(a = b) ⟶ ¬¬(a ∈ t)"
                },
                {
                    "args": "contrapositive",
                    "id": "3.13.12",
                    "prevs": [
                        "3.3",
                        "3.13.11"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ ¬(a = b)"
                },
                {
                    "args": "a, b",
                    "id": "3.13.13",
                    "prevs": [
                        "3.5",
                        "3.13.7",
                        "3.13.9",
                        "3.13.12",
                        "3.13.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ g (f a) = neutral op"
                },
                {
                    "args": "monoidal_ac",
                    "id": "3.13.14",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op (neutral op) a = a) ∧ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD1",
                    "id": "3.13.15",
                    "prevs": [
                        "3.13.14"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. op (neutral op) a = a"
                },
                {
                    "args": "iterate op (image f t) g = op (neutral op) (iterate op (image f t) g)",
                    "id": "3.13.16",
                    "prevs": [
                        "3.13.15"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op ⊢ iterate op (image f t) g = op (neutral op) (iterate op (image f t) g)"
                },
                {
                    "args": "iterate op (image f t) g = op (g (f a)) (iterate op (image f t) g)",
                    "id": "3.13.17",
                    "prevs": [
                        "3.13.13",
                        "3.13.16"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ iterate op (image f t) g = op (g (f a)) (iterate op (image f t) g)"
                },
                {
                    "args": "comp_fun_eval, iterate op (image f t) g = op ((g ∘ f) a) (iterate op (image f t) g)",
                    "id": "3.13.18",
                    "prevs": [
                        "3.13.17"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ iterate op (image f t) g = op ((g ∘ f) a) (iterate op (image f t) g)"
                },
                {
                    "args": "if_P, (if ∃x. f a = f x ∧ x ∈ t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op (image f t) g)",
                    "id": "3.13.19",
                    "prevs": [
                        "3.13.18",
                        "3.13.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), f a = f b ∧ b ∈ t, ∃x. f a = f x ∧ x ∈ t, ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ (if ∃x. f a = f x ∧ x ∈ t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op (image f t) g)"
                },
                {
                    "args": "∃x. f a = f x ∧ x ∈ t",
                    "id": "3.13.20",
                    "prevs": [
                        "3.13.0",
                        "3.13.0",
                        "3.13.1",
                        "3.13.2",
                        "3.13.19"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ (∃x. f a = f x ∧ x ∈ t) ⟶ (if ∃x. f a = f x ∧ x ∈ t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op (image f t) g)"
                },
                {
                    "args": "",
                    "id": "3.14",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ ¬(∃x. f a = f x ∧ x ∈ t) ⟶ (if ∃x. f a = f x ∧ x ∈ t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op (image f t) g)"
                },
                {
                    "args": "¬(∃x. f a = f x ∧ x ∈ t)",
                    "id": "3.14.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(∃x. f a = f x ∧ x ∈ t) ⊢ ¬(∃x. f a = f x ∧ x ∈ t)"
                },
                {
                    "args": "comp_fun_eval, op (g (f a)) (iterate op (image f t) g) = op ((g ∘ f) a) (iterate op (image f t) g)",
                    "id": "3.14.1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ op (g (f a)) (iterate op (image f t) g) = op ((g ∘ f) a) (iterate op (image f t) g)"
                },
                {
                    "args": "if_not_P, (if ∃x. f a = f x ∧ x ∈ t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op (image f t) g)",
                    "id": "3.14.2",
                    "prevs": [
                        "3.14.1",
                        "3.14.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ¬(∃x. f a = f x ∧ x ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ (if ∃x. f a = f x ∧ x ∈ t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op (image f t) g)"
                },
                {
                    "args": "",
                    "id": "3.14.3",
                    "prevs": [
                        "3.14.0",
                        "3.14.2"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ ¬(∃x. f a = f x ∧ x ∈ t) ⟶ (if ∃x. f a = f x ∧ x ∈ t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op (image f t) g)"
                },
                {
                    "args": "classical_cases",
                    "id": "3.15",
                    "prevs": [
                        "3.13",
                        "3.14"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ (if ∃x. f a = f x ∧ x ∈ t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op (image f t) g)"
                },
                {
                    "args": "in_image, (if f a ∈ image f t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op (image f t) g)",
                    "id": "3.16",
                    "prevs": [
                        "3.15"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ (if f a ∈ image f t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op (image f t) g)"
                },
                {
                    "args": "(if f a ∈ image f t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op t (g ∘ f))",
                    "id": "3.17",
                    "prevs": [
                        "3.12",
                        "3.16"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ (if f a ∈ image f t then iterate op (image f t) g else op (g (f a)) (iterate op (image f t) g)) = op ((g ∘ f) a) (iterate op t (g ∘ f))"
                },
                {
                    "args": "iterate op (insert (f a) (image f t)) g = op ((g ∘ f) a) (iterate op t (g ∘ f))",
                    "id": "3.18",
                    "prevs": [
                        "3.9",
                        "3.17"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ iterate op (insert (f a) (image f t)) g = op ((g ∘ f) a) (iterate op t (g ∘ f))"
                },
                {
                    "args": "iterate op (insert (f a) (image f t)) g = iterate op (insert a t) (g ∘ f)",
                    "id": "3.19",
                    "prevs": [
                        "3.7",
                        "3.18"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ iterate op (insert (f a) (image f t)) g = iterate op (insert a t) (g ∘ f)"
                },
                {
                    "args": "image_insert, iterate op (image f (insert a t)) g = iterate op (insert a t) (g ∘ f)",
                    "id": "3.20",
                    "prevs": [
                        "3.19"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, monoidal op, ¬(a ∈ t), ∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op, (∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f) ⊢ iterate op (image f (insert a t)) g = iterate op (insert a t) (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "3.21",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.2",
                        "3.3",
                        "3.4",
                        "3.5",
                        "3.20"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op ⊢ ∀a. ∀t. ((∀x. ∀y. x ∈ t ⟶ y ∈ t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f t) g = iterate op t (g ∘ f)) ⟶ ¬(a ∈ t) ⟶ finite t ⟶ (∀x. ∀y. x ∈ insert a t ⟶ y ∈ insert a t ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f (insert a t)) g = iterate op (insert a t) (g ∘ f)"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "4",
                    "prevs": [
                        "1",
                        "2",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op ⊢ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f s) g = iterate op s (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ⟶ iterate op (image f s) g = iterate op s (g ∘ f)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ",
                "   ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ f x = f y ⟶ g (f x) = neutral op) ",
                "      ⟶ iterate op (image f s) g = iterate op s (g ∘ f)"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "image_empty"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "apply_forward_step",
                    "param_f": "g ∘ f",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "a,t"
                },
                {
                    "goal_id": "3.6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "image_insert"
                },
                {
                    "fact_ids": [
                        "0",
                        "3.4"
                    ],
                    "goal_id": "3.6",
                    "method_name": "apply_forward_step",
                    "param_f": "g ∘ f",
                    "param_x": "a",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "3.6",
                        "3.3"
                    ],
                    "goal_id": "3.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "3.7"
                    ],
                    "goal_id": "3.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3.4"
                    ],
                    "goal_id": "3.8",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "theorem": "finite_image"
                },
                {
                    "fact_ids": [
                        "0",
                        "3.8"
                    ],
                    "goal_id": "3.9",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "param_x": "f a",
                    "theorem": "iterate_insert"
                },
                {
                    "fact_ids": [
                        "3.9"
                    ],
                    "goal_id": "3.10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "iterate op (image f t) g = iterate op t (g ∘ f)",
                    "goal_id": "3.10",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "3.2"
                    ],
                    "goal_id": "3.10",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "3.10",
                    "method_name": "introduction",
                    "names": "x,y"
                },
                {
                    "fact_ids": [
                        "3.5"
                    ],
                    "goal_id": "3.10.6",
                    "method_name": "apply_prev",
                    "param_y": "y"
                },
                {
                    "goal_id": "3.10.6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "3.10.6",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "3.10.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "3.10.8",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "fact_ids": [
                        "3.11"
                    ],
                    "goal_id": "3.12",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "3.12"
                    ],
                    "goal_id": "3.13",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3.13",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "case": "∃x. f a = f x ∧ x ∈ t",
                    "goal_id": "3.13",
                    "method_name": "cases"
                },
                {
                    "goal_id": "3.13",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.13.0"
                    ],
                    "goal_id": "3.13.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "3.13.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "comp_fun_eval"
                },
                {
                    "goal": "g (f a) = neutral op",
                    "goal_id": "3.13.1",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "3.13.0"
                    ],
                    "goal_id": "3.13.1",
                    "method_name": "exists_elim",
                    "names": "b"
                },
                {
                    "fact_ids": [
                        "3.13.2"
                    ],
                    "goal_id": "3.13.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.13.2"
                    ],
                    "goal_id": "3.13.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "3.5"
                    ],
                    "goal_id": "3.13.5",
                    "method_name": "apply_prev",
                    "param_y": "b"
                },
                {
                    "goal_id": "3.13.5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "3.13.5",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "3.13.5",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "goal_id": "3.13.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "3.13.8",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "fact_ids": [
                        "3.3"
                    ],
                    "goal_id": "3.13.10",
                    "method_name": "apply_backward_step",
                    "theorem": "contrapositive"
                },
                {
                    "goal_id": "3.13.10",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "double_neg"
                },
                {
                    "goal_id": "3.13.10",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.13.10.0"
                    ],
                    "goal_id": "3.13.10.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3.13.13"
                    ],
                    "goal_id": "3.13.14",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "3.13.14",
                    "method_name": "apply_forward_step",
                    "theorem": "monoidal_ac"
                },
                {
                    "fact_ids": [
                        "3.13.14"
                    ],
                    "goal_id": "3.13.15",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.13.15"
                    ],
                    "goal_id": "3.13.16",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3.14",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.14.0"
                    ],
                    "goal_id": "3.14.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "3.14.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "comp_fun_eval"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'c",
                "g": "'c ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_image_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op ⊢ ∀x. x ∈ s ⟶ g x = iterate op ({y. y ∈ image f s ∧ f x = y}) (λy. g x)"
                },
                {
                    "args": "x, 'a",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, x ∈ s ⊢ ∀x1. x1 ∈ {y. (∃x2. y = f x2 ∧ x2 ∈ s) ∧ f x = y} ⟷ x1 ∈ {f x}"
                },
                {
                    "args": "x1, 'b",
                    "id": "2.2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "",
                    "id": "2.2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, x ∈ s ⊢ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1 ⟶ x1 = f x ∨ x1 ∈ ∅"
                },
                {
                    "args": "(∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1",
                    "id": "2.2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1 ⊢ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1"
                },
                {
                    "args": "conjD2",
                    "id": "2.2.1.1",
                    "prevs": [
                        "2.2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1 ⊢ f x = x1"
                },
                {
                    "args": "x1 = f x",
                    "id": "2.2.1.2",
                    "prevs": [
                        "2.2.1.1"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "(∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1 ⊢ x1 = f x"
                },
                {
                    "args": "disjI1, {A: x1 = f x, B: x1 ∈ ∅}",
                    "id": "2.2.1.3",
                    "prevs": [
                        "2.2.1.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op, x ∈ s, (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1 ⊢ x1 = f x ∨ x1 ∈ ∅"
                },
                {
                    "args": "",
                    "id": "2.2.1.4",
                    "prevs": [
                        "2.2.1.0",
                        "2.2.1.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, x ∈ s ⊢ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1 ⟶ x1 = f x ∨ x1 ∈ ∅"
                },
                {
                    "args": "",
                    "id": "2.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, x ∈ s ⊢ x1 = f x ∨ x1 ∈ ∅ ⟶ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1"
                },
                {
                    "args": "x1 = f x ∨ x1 ∈ ∅",
                    "id": "2.2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 = f x ∨ x1 ∈ ∅ ⊢ x1 = f x ∨ x1 ∈ ∅"
                },
                {
                    "args": "",
                    "id": "2.2.2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, x ∈ s, x1 = f x ∨ x1 ∈ ∅ ⊢ x1 = f x ⟶ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1"
                },
                {
                    "args": "x1 = f x",
                    "id": "2.2.2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 = f x ⊢ x1 = f x"
                },
                {
                    "args": "conjI",
                    "id": "2.2.2.1.1",
                    "prevs": [
                        "2.2.2.1.0",
                        "2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, x ∈ s, x1 = f x, x1 = f x ∨ x1 ∈ ∅ ⊢ x1 = f x ∧ x ∈ s"
                },
                {
                    "args": "exI, {P: λx. x1 = f x ∧ x ∈ s, a: x}",
                    "id": "2.2.2.1.2",
                    "prevs": [
                        "2.2.2.1.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op, x ∈ s, x1 = f x, x1 = f x ∨ x1 ∈ ∅ ⊢ ∃a1. x1 = f a1 ∧ a1 ∈ s"
                },
                {
                    "args": "f x = x1",
                    "id": "2.2.2.1.3",
                    "prevs": [
                        "2.2.2.1.0"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "x1 = f x ⊢ f x = x1"
                },
                {
                    "args": "conjI",
                    "id": "2.2.2.1.4",
                    "prevs": [
                        "2.2.2.1.2",
                        "2.2.2.1.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, x ∈ s, x1 = f x, x1 = f x ∨ x1 ∈ ∅ ⊢ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1"
                },
                {
                    "args": "",
                    "id": "2.2.2.1.5",
                    "prevs": [
                        "2.2.2.1.0",
                        "2.2.2.1.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, x ∈ s, x1 = f x ∨ x1 ∈ ∅ ⊢ x1 = f x ⟶ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1"
                },
                {
                    "args": "",
                    "id": "2.2.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op, x ∈ s, x1 = f x ∨ x1 ∈ ∅ ⊢ x1 ∈ ∅ ⟶ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1"
                },
                {
                    "args": "x1 ∈ ∅",
                    "id": "2.2.2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ ∅ ⊢ x1 ∈ ∅"
                },
                {
                    "args": "member_empty, (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1",
                    "id": "2.2.2.2.1",
                    "prevs": [
                        "2.2.2.2.0"
                    ],
                    "rule": "resolve_theorem",
                    "th": "x1 ∈ ∅ ⊢ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1"
                },
                {
                    "args": "",
                    "id": "2.2.2.2.2",
                    "prevs": [
                        "2.2.2.2.0",
                        "2.2.2.2.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, x ∈ s, x1 = f x ∨ x1 ∈ ∅ ⊢ x1 ∈ ∅ ⟶ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1"
                },
                {
                    "args": "disjE",
                    "id": "2.2.2.3",
                    "prevs": [
                        "2.2.2.0",
                        "2.2.2.1",
                        "2.2.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, x ∈ s, x1 = f x ∨ x1 ∈ ∅ ⊢ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1"
                },
                {
                    "args": "",
                    "id": "2.2.2.4",
                    "prevs": [
                        "2.2.2.0",
                        "2.2.2.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, x ∈ s ⊢ x1 = f x ∨ x1 ∈ ∅ ⟶ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1"
                },
                {
                    "args": "iffI",
                    "id": "2.2.3",
                    "prevs": [
                        "2.2.1",
                        "2.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, x ∈ s ⊢ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1 ⟷ x1 = f x ∨ x1 ∈ ∅"
                },
                {
                    "args": "member_insert, (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1 ⟷ x1 ∈ {f x}",
                    "id": "2.2.4",
                    "prevs": [
                        "2.2.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, x ∈ s ⊢ (∃x2. x1 = f x2 ∧ x2 ∈ s) ∧ f x = x1 ⟷ x1 ∈ {f x}"
                },
                {
                    "args": "member_collect, x1 ∈ {y. (∃x2. y = f x2 ∧ x2 ∈ s) ∧ f x = y} ⟷ x1 ∈ {f x}",
                    "id": "2.2.5",
                    "prevs": [
                        "2.2.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, x ∈ s ⊢ x1 ∈ {y. (∃x2. y = f x2 ∧ x2 ∈ s) ∧ f x = y} ⟷ x1 ∈ {f x}"
                },
                {
                    "args": "",
                    "id": "2.2.6",
                    "prevs": [
                        "2.2.0",
                        "2.2.5"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op, x ∈ s ⊢ ∀x1. x1 ∈ {y. (∃x2. y = f x2 ∧ x2 ∈ s) ∧ f x = y} ⟷ x1 ∈ {f x}"
                },
                {
                    "args": "member_ext",
                    "id": "2.3",
                    "prevs": [
                        "2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op, x ∈ s ⊢ {y. (∃x1. y = f x1 ∧ x1 ∈ s) ∧ f x = y} = {f x}"
                },
                {
                    "args": "in_image, {y. y ∈ image f s ∧ f x = y} = {f x}",
                    "id": "2.4",
                    "prevs": [
                        "2.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, x ∈ s ⊢ {y. y ∈ image f s ∧ f x = y} = {f x}"
                },
                {
                    "args": "iterate_sing, {f: λy::'b. g x, op: op, x: f x}",
                    "id": "2.5",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op, x ∈ s ⊢ iterate op ({f x}) (λy. g x) = g x"
                },
                {
                    "args": "eq_sym_eq, g x = iterate op ({f x}) (λy. g x)",
                    "id": "2.6",
                    "prevs": [
                        "2.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op, x ∈ s ⊢ g x = iterate op ({f x}) (λy. g x)"
                },
                {
                    "args": "g x = iterate op ({y. y ∈ image f s ∧ f x = y}) (λy. g x)",
                    "id": "2.7",
                    "prevs": [
                        "2.4",
                        "2.6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op, x ∈ s ⊢ g x = iterate op ({y. y ∈ image f s ∧ f x = y}) (λy. g x)"
                },
                {
                    "args": "",
                    "id": "2.8",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.7"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op ⊢ ∀x. x ∈ s ⟶ g x = iterate op ({y. y ∈ image f s ∧ f x = y}) (λy. g x)"
                },
                {
                    "args": "iterate_eq",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op ⊢ iterate op s g = iterate op s (λx. iterate op ({y. y ∈ image f s ∧ f x = y}) (λy. g x))"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op ⊢ ∀x. iterate op ({y. y ∈ image f s ∧ f x = y}) (λy. g x) = iterate op (image f s) (λy. if f x = y then g x else neutral op)"
                },
                {
                    "args": "x, 'a",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "iterate_restrict_set, {P: λx1. f x = x1, f: λy::'b. g x, op: op, s: image f s}",
                    "id": "4.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op ⊢ iterate op ({x1. x1 ∈ image f s ∧ f x = x1}) (λy. g x) = iterate op (image f s) (λx1. if f x = x1 then g x else neutral op)"
                },
                {
                    "args": "",
                    "id": "4.2",
                    "prevs": [
                        "4.0",
                        "4.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op ⊢ ∀x. iterate op ({y. y ∈ image f s ∧ f x = y}) (λy. g x) = iterate op (image f s) (λy. if f x = y then g x else neutral op)"
                },
                {
                    "args": "finite_image, {f: f, s: s}",
                    "id": "5",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op ⊢ finite (image f s)"
                },
                {
                    "args": "iterate_swap, {f: λx. λy. if f x = y then g x else neutral op}",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op ⊢ iterate op s (λi. iterate op (image f s) (λy. if f i = y then g i else neutral op)) = iterate op (image f s) (λj. iterate op s (λi. if f i = j then g i else neutral op))"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, monoidal op ⊢ ∀y. iterate op ({x. x ∈ s ∧ f x = y}) g = iterate op s (λx. if f x = y then g x else neutral op)"
                },
                {
                    "args": "y, 'b",
                    "id": "7.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "iterate_restrict_set, {P: λx. f x = y, f: g, op: op, s: s}",
                    "id": "7.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op ⊢ iterate op ({x. x ∈ s ∧ f x = y}) g = iterate op s (λx. if f x = y then g x else neutral op)"
                },
                {
                    "args": "",
                    "id": "7.2",
                    "prevs": [
                        "7.0",
                        "7.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, monoidal op ⊢ ∀y. iterate op ({x. x ∈ s ∧ f x = y}) g = iterate op s (λx. if f x = y then g x else neutral op)"
                },
                {
                    "args": "iterate op (image f s) (λj. iterate op s (λi. if f i = j then g i else neutral op)) = iterate op (image f s) (λy. iterate op ({x. x ∈ s ∧ f x = y}) g)",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op ⊢ iterate op (image f s) (λj. iterate op s (λi. if f i = j then g i else neutral op)) = iterate op (image f s) (λy. iterate op ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "iterate op s (λx. iterate op (image f s) (λy. if f x = y then g x else neutral op)) = iterate op (image f s) (λy. iterate op ({x. x ∈ s ∧ f x = y}) g)",
                    "id": "9",
                    "prevs": [
                        "6",
                        "8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op ⊢ iterate op s (λi. iterate op (image f s) (λy. if f i = y then g i else neutral op)) = iterate op (image f s) (λy. iterate op ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "iterate op s (λx. iterate op ({y. y ∈ image f s ∧ f x = y}) (λy. g x)) = iterate op (image f s) (λy. iterate op ({x. x ∈ s ∧ f x = y}) g)",
                    "id": "10",
                    "prevs": [
                        "4",
                        "9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op ⊢ iterate op s (λx. iterate op ({y. y ∈ image f s ∧ f x = y}) (λy. g x)) = iterate op (image f s) (λy. iterate op ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "iterate op s g = iterate op (image f s) (λy. iterate op ({x. x ∈ s ∧ f x = y}) g)",
                    "id": "11",
                    "prevs": [
                        "3",
                        "10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op ⊢ iterate op s g = iterate op (image f s) (λy. iterate op ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "",
                    "id": "12",
                    "prevs": [
                        "0",
                        "1",
                        "11"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ iterate op s g = iterate op (image f s) (λy. iterate op ({x. x ∈ s ∧ f x = y}) g)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ",
                "   ⟶ iterate op s g = ",
                "      iterate op (image f s) (λy. iterate op ({x. x ∈ s ∧ f x = y}) g)"
            ],
            "steps": [
                {
                    "goal": "iterate op s g = iterate op s (λx. iterate op ({y. y ∈ image f s ∧ f x = y}) (%y. g x))",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_eq"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal": "{y. y ∈ image f s ∧ f x = y} = {f x}",
                    "goal_id": "2.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "goal_id": "2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "2.2",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "goal_id": "2.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "2.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "2.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "2.2.1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "2.2.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "fact_ids": [
                        "2.2.1.0"
                    ],
                    "goal_id": "2.2.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "2.2.1.1"
                    ],
                    "goal_id": "2.2.1.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.2.2.0"
                    ],
                    "goal_id": "2.2.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "2.2.2.1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "2.2.2.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "2.2.2.1.1",
                    "method_name": "inst_exists_goal",
                    "s": "x"
                },
                {
                    "goal_id": "2.2.2.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "2.2.2.1.0"
                    ],
                    "goal_id": "2.2.2.1.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.2.2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.2.2.2.0"
                    ],
                    "goal_id": "2.2.2.2.1",
                    "method_name": "apply_resolve_step",
                    "theorem": "member_empty"
                },
                {
                    "fact_ids": [
                        "2.4"
                    ],
                    "goal_id": "2.5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal_id": "2.5",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_sing"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "!x. iterate op ({y. y ∈ image f s ∧ f x = y}) (λy. g x) = iterate op (image f s) (λy. if f x = y then g x else neutral op)",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "4.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_restrict_set"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "finite (image f s)",
                    "goal_id": "5",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_image"
                },
                {
                    "fact_ids": [
                        "0",
                        "1",
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_forward_step",
                    "param_f": "(%x. λy. if f x = y then g x else neutral op)",
                    "theorem": "iterate_swap"
                },
                {
                    "fact_ids": [
                        "6"
                    ],
                    "goal_id": "7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "!y. iterate op ({x. x ∈ s ∧ f x = y}) g = iterate op s (λx. if f x = y then g x else neutral op)",
                    "goal_id": "7",
                    "method_name": "cut"
                },
                {
                    "goal_id": "7",
                    "method_name": "introduction",
                    "names": "y"
                },
                {
                    "goal_id": "7.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_restrict_set"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal_id": "8",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ 'b",
                "g": "'a ⇒ 'c",
                "op": "'c ⇒ 'c ⇒ 'c",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_cases",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "{x. x ∈ s ∧ P x} ∪ {x. x ∈ s ∧ ¬(P x)} = s",
                    "id": "2",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ {x. x ∈ s ∧ P x} ∪ {x. x ∈ s ∧ ¬(P x)} = s"
                },
                {
                    "args": "iterate op s (λx. if P x then f x else g x) = iterate op ({x. x ∈ s ∧ P x} ∪ {x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "⊢ iterate op s (λx. if P x then f x else g x) = iterate op ({x. x ∈ s ∧ P x} ∪ {x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x)"
                },
                {
                    "args": "∀x. x ∈ {x1. x1 ∈ s ∧ P x1} ⟶ x ∈ s",
                    "id": "4",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x. x ∈ {x1. x1 ∈ s ∧ P x1} ⟶ x ∈ s"
                },
                {
                    "args": "subsetI",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op ⊢ {x. x ∈ s ∧ P x} ⊆ s"
                },
                {
                    "args": "finite_subset",
                    "id": "6",
                    "prevs": [
                        "1",
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op ⊢ finite ({x. x ∈ s ∧ P x})"
                },
                {
                    "args": "{x. x ∈ s ∧ ¬(P x)} ⊆ s",
                    "id": "7",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ {x. x ∈ s ∧ ¬(P x)} ⊆ s"
                },
                {
                    "args": "finite_subset",
                    "id": "8",
                    "prevs": [
                        "1",
                        "7"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op ⊢ finite ({x. x ∈ s ∧ ¬(P x)})"
                },
                {
                    "args": "{x. x ∈ s ∧ P x} ∩ {x. x ∈ s ∧ ¬(P x)} = ∅",
                    "id": "9",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ {x. x ∈ s ∧ P x} ∩ {x. x ∈ s ∧ ¬(P x)} = ∅"
                },
                {
                    "args": "disjoint_def, disjoint ({x. x ∈ s ∧ P x}) ({x. x ∈ s ∧ ¬(P x)})",
                    "id": "10",
                    "prevs": [
                        "9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op ⊢ disjoint ({x. x ∈ s ∧ P x}) ({x. x ∈ s ∧ ¬(P x)})"
                },
                {
                    "args": "iterate_union, {f: λx. if P x then f x else g x, op: op, s: {x. x ∈ s ∧ P x}, t: {x. x ∈ s ∧ ¬(P x)}}",
                    "id": "11",
                    "prevs": [
                        "0",
                        "6",
                        "8",
                        "10"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, monoidal op ⊢ iterate op ({x. x ∈ s ∧ P x} ∪ {x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x) = op (iterate op ({x. x ∈ s ∧ P x}) (λx. if P x then f x else g x)) (iterate op ({x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x))"
                },
                {
                    "args": "iterate op s (λx. if P x then f x else g x) = op (iterate op ({x. x ∈ s ∧ P x}) (λx. if P x then f x else g x)) (iterate op ({x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x))",
                    "id": "12",
                    "prevs": [
                        "3",
                        "11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op ⊢ iterate op s (λx. if P x then f x else g x) = op (iterate op ({x. x ∈ s ∧ P x}) (λx. if P x then f x else g x)) (iterate op ({x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x))"
                },
                {
                    "args": "∀x. x ∈ s ∧ P x ⟶ (if P x then f x else g x) = f x",
                    "id": "13",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x. x ∈ s ∧ P x ⟶ (if P x then f x else g x) = f x"
                },
                {
                    "args": "member_collect, ∀x. x ∈ {x1. x1 ∈ s ∧ P x1} ⟶ (if P x then f x else g x) = f x",
                    "id": "14",
                    "prevs": [
                        "13"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op ⊢ ∀x. x ∈ {x1. x1 ∈ s ∧ P x1} ⟶ (if P x then f x else g x) = f x"
                },
                {
                    "args": "iterate_eq",
                    "id": "15",
                    "prevs": [
                        "0",
                        "14"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op ⊢ iterate op ({x. x ∈ s ∧ P x}) (λx. if P x then f x else g x) = iterate op ({x. x ∈ s ∧ P x}) f"
                },
                {
                    "args": "∀x. x ∈ s ∧ ¬(P x) ⟶ (if P x then f x else g x) = g x",
                    "id": "16",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x. x ∈ s ∧ ¬(P x) ⟶ (if P x then f x else g x) = g x"
                },
                {
                    "args": "member_collect, ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(P x1)} ⟶ (if P x then f x else g x) = g x",
                    "id": "17",
                    "prevs": [
                        "16"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, monoidal op ⊢ ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(P x1)} ⟶ (if P x then f x else g x) = g x"
                },
                {
                    "args": "iterate_eq",
                    "id": "18",
                    "prevs": [
                        "0",
                        "17"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, monoidal op ⊢ iterate op ({x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x) = iterate op ({x. x ∈ s ∧ ¬(P x)}) g"
                },
                {
                    "args": "op (iterate op ({x. x ∈ s ∧ P x}) f) (iterate op ({x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x)) = op (iterate op ({x. x ∈ s ∧ P x}) f) (iterate op ({x. x ∈ s ∧ ¬(P x)}) g)",
                    "id": "19",
                    "prevs": [
                        "18"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op ⊢ op (iterate op ({x. x ∈ s ∧ P x}) f) (iterate op ({x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x)) = op (iterate op ({x. x ∈ s ∧ P x}) f) (iterate op ({x. x ∈ s ∧ ¬(P x)}) g)"
                },
                {
                    "args": "op (iterate op ({x. x ∈ s ∧ P x}) (λx. if P x then f x else g x)) (iterate op ({x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x)) = op (iterate op ({x. x ∈ s ∧ P x}) f) (iterate op ({x. x ∈ s ∧ ¬(P x)}) g)",
                    "id": "20",
                    "prevs": [
                        "15",
                        "19"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op ⊢ op (iterate op ({x. x ∈ s ∧ P x}) (λx. if P x then f x else g x)) (iterate op ({x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x)) = op (iterate op ({x. x ∈ s ∧ P x}) f) (iterate op ({x. x ∈ s ∧ ¬(P x)}) g)"
                },
                {
                    "args": "iterate op s (λx. if P x then f x else g x) = op (iterate op ({x. x ∈ s ∧ P x}) f) (iterate op ({x. x ∈ s ∧ ¬(P x)}) g)",
                    "id": "21",
                    "prevs": [
                        "12",
                        "20"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, monoidal op ⊢ iterate op s (λx. if P x then f x else g x) = op (iterate op ({x. x ∈ s ∧ P x}) f) (iterate op ({x. x ∈ s ∧ ¬(P x)}) g)"
                },
                {
                    "args": "",
                    "id": "22",
                    "prevs": [
                        "0",
                        "1",
                        "21"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite s ⟶ iterate op s (λx. if P x then f x else g x) = op (iterate op ({x. x ∈ s ∧ P x}) f) (iterate op ({x. x ∈ s ∧ ¬(P x)}) g)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite s ",
                "   ⟶ iterate op s (λx. if P x then f x else g x) = ",
                "      op (iterate op ({x. x ∈ s ∧ P x}) f) (iterate op ({x. x ∈ s ∧ ¬(P x)}) g)"
            ],
            "steps": [
                {
                    "goal": "iterate op s (λx. if P x then f x else g x) = op (iterate op {x. x ∈ s ∧ P x} (λx. if P x then f x else g x))\n       (iterate op {x. x ∈ s ∧ ¬(P x)} (λx. if P x then f x else g x))",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal": "{x. x ∈ s ∧ P x} ∪ {x. x ∈ s ∧ ¬(P x)} = s",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "z3"
                },
                {
                    "goal": "iterate op s (λx. if P x then f x else g x) = iterate op ({x. x ∈ s ∧ P x} ∪ {x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x)",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_union"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "param_t": "s",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "4",
                    "method_name": "z3"
                },
                {
                    "goal_id": "7",
                    "method_name": "apply_backward_step",
                    "param_t": "s",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "7",
                    "method_name": "z3"
                },
                {
                    "goal_id": "9",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                },
                {
                    "goal_id": "9",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "12"
                    ],
                    "goal_id": "13",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "iterate op ({x. x ∈ s ∧ P x}) (λx. if P x then f x else g x) = iterate op ({x. x ∈ s ∧ P x}) f",
                    "goal_id": "13",
                    "method_name": "cut"
                },
                {
                    "goal_id": "13",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_eq"
                },
                {
                    "goal_id": "13",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "13",
                    "method_name": "z3"
                },
                {
                    "goal": "iterate op ({x. x ∈ s ∧ ¬(P x)}) (λx. if P x then f x else g x) = iterate op ({x. x ∈ s ∧ ¬(P x)}) g",
                    "goal_id": "16",
                    "method_name": "cut"
                },
                {
                    "goal_id": "16",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_eq"
                },
                {
                    "goal_id": "16",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "16",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "15"
                    ],
                    "goal_id": "19",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "18"
                    ],
                    "goal_id": "19",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "'b ⇒ bool",
                "f": "'b ⇒ 'a",
                "g": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "iterate_op_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "finite (support op f s)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite (support op f s) ⊢ finite (support op f s)"
                },
                {
                    "args": "finite (support op g s)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite (support op g s) ⊢ finite (support op g s)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⟶ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ s ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "x, 'b",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s ∧ ¬(op (f x) (g x) = neutral op)",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⊢ x ∈ s ∧ ¬(op (f x) (g x) = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "3.2",
                    "prevs": [
                        "3.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "3.3",
                    "prevs": [
                        "3.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⊢ ¬(op (f x) (g x) = neutral op)"
                },
                {
                    "args": "",
                    "id": "3.4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⊢ (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "(¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op)",
                    "id": "3.4.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "3.4.1",
                    "prevs": [
                        "3.4.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ ¬(x ∈ s) ∨ f x = neutral op"
                },
                {
                    "args": "conjD2",
                    "id": "3.4.2",
                    "prevs": [
                        "3.4.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "(¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ ¬(x ∈ s) ∨ g x = neutral op"
                },
                {
                    "args": "",
                    "id": "3.4.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op), (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ ¬(x ∈ s) ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "3.4.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "negE_gen, {A: x ∈ s, C: op (f x) (g x) = neutral op}",
                    "id": "3.4.3.1",
                    "prevs": [
                        "3.4.3.0",
                        "3.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "¬(x ∈ s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⊢ op (f x) (g x) = neutral op"
                },
                {
                    "args": "",
                    "id": "3.4.3.2",
                    "prevs": [
                        "3.4.3.0",
                        "3.4.3.1"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op), (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ ¬(x ∈ s) ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "",
                    "id": "3.4.4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op), (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ f x = neutral op ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "f x = neutral op",
                    "id": "3.4.4.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "f x = neutral op ⊢ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "3.4.4.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), f x = neutral op, x ∈ s ∧ ¬(op (f x) (g x) = neutral op), (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ g x = neutral op ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "g x = neutral op",
                    "id": "3.4.4.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "g x = neutral op ⊢ g x = neutral op"
                },
                {
                    "args": "monoidal_ac",
                    "id": "3.4.4.1.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op (neutral op) a = a) ∧ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD1",
                    "id": "3.4.4.1.2",
                    "prevs": [
                        "3.4.4.1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. op (neutral op) a = a"
                },
                {
                    "args": "op (neutral op) (g x) = neutral op",
                    "id": "3.4.4.1.3",
                    "prevs": [
                        "3.4.4.1.2",
                        "3.4.4.1.0"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), f x = neutral op, g x = neutral op, x ∈ s ∧ ¬(op (f x) (g x) = neutral op), (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ op (neutral op) (g x) = neutral op"
                },
                {
                    "args": "op (f x) (g x) = neutral op",
                    "id": "3.4.4.1.4",
                    "prevs": [
                        "3.4.4.0",
                        "3.4.4.1.3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), f x = neutral op, g x = neutral op, x ∈ s ∧ ¬(op (f x) (g x) = neutral op), (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ op (f x) (g x) = neutral op"
                },
                {
                    "args": "",
                    "id": "3.4.4.1.5",
                    "prevs": [
                        "3.4.4.1.0",
                        "3.4.4.1.4"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), f x = neutral op, x ∈ s ∧ ¬(op (f x) (g x) = neutral op), (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ g x = neutral op ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "disjE",
                    "id": "3.4.4.2",
                    "prevs": [
                        "3.4.2",
                        "3.4.3",
                        "3.4.4.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), f x = neutral op, x ∈ s ∧ ¬(op (f x) (g x) = neutral op), (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ op (f x) (g x) = neutral op"
                },
                {
                    "args": "",
                    "id": "3.4.4.3",
                    "prevs": [
                        "3.4.4.0",
                        "3.4.4.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op), (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ f x = neutral op ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "disjE",
                    "id": "3.4.5",
                    "prevs": [
                        "3.4.1",
                        "3.4.3",
                        "3.4.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op), (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⊢ op (f x) (g x) = neutral op"
                },
                {
                    "args": "",
                    "id": "3.4.6",
                    "prevs": [
                        "3.4.0",
                        "3.4.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⊢ (¬(x ∈ s) ∨ f x = neutral op) ∧ (¬(x ∈ s) ∨ g x = neutral op) ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "double_neg, (¬(x ∈ s) ∨ ¬¬(f x = neutral op)) ∧ (¬(x ∈ s) ∨ ¬¬(g x = neutral op)) ⟶ ¬¬(op (f x) (g x) = neutral op)",
                    "id": "3.5",
                    "prevs": [
                        "3.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⊢ (¬(x ∈ s) ∨ ¬¬(f x = neutral op)) ∧ (¬(x ∈ s) ∨ ¬¬(g x = neutral op)) ⟶ ¬¬(op (f x) (g x) = neutral op)"
                },
                {
                    "args": "de_morgan_thm1, ¬(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ s ∧ ¬(g x = neutral op)) ⟶ ¬¬(op (f x) (g x) = neutral op)",
                    "id": "3.6",
                    "prevs": [
                        "3.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⊢ ¬(x ∈ s ∧ ¬(f x = neutral op)) ∧ ¬(x ∈ s ∧ ¬(g x = neutral op)) ⟶ ¬¬(op (f x) (g x) = neutral op)"
                },
                {
                    "args": "de_morgan_thm2, ¬(x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ s ∧ ¬(g x = neutral op)) ⟶ ¬¬(op (f x) (g x) = neutral op)",
                    "id": "3.7",
                    "prevs": [
                        "3.6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⊢ ¬(x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ s ∧ ¬(g x = neutral op)) ⟶ ¬¬(op (f x) (g x) = neutral op)"
                },
                {
                    "args": "contrapositive",
                    "id": "3.8",
                    "prevs": [
                        "3.3",
                        "3.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⊢ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ s ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "",
                    "id": "3.9",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.8"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⟶ x ∈ s ∧ ¬(f x = neutral op) ∨ x ∈ s ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "member_collect, ∀x. x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⟶ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∨ x ∈ {x1. x1 ∈ s ∧ ¬(g x1 = neutral op)}",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⟶ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∨ x ∈ {x1. x1 ∈ s ∧ ¬(g x1 = neutral op)}"
                },
                {
                    "args": "member_union_iff, ∀x. x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⟶ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∪ {x1. x1 ∈ s ∧ ¬(g x1 = neutral op)}",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ s ∧ ¬(op (f x) (g x) = neutral op) ⟶ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∪ {x1. x1 ∈ s ∧ ¬(g x1 = neutral op)}"
                },
                {
                    "args": "member_collect, ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(op (f x1) (g x1) = neutral op)} ⟶ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∪ {x1. x1 ∈ s ∧ ¬(g x1 = neutral op)}",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(op (f x1) (g x1) = neutral op)} ⟶ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = neutral op)} ∪ {x1. x1 ∈ s ∧ ¬(g x1 = neutral op)}"
                },
                {
                    "args": "subsetI",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ {x. x ∈ s ∧ ¬(op (f x) (g x) = neutral op)} ⊆ {x. x ∈ s ∧ ¬(f x = neutral op)} ∪ {x. x ∈ s ∧ ¬(g x = neutral op)}"
                },
                {
                    "args": "support_def, support op (λx. op (f x) (g x)) s ⊆ support op f s ∪ support op g s",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ support op (λx. op (f x) (g x)) s ⊆ support op f s ∪ support op g s"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ support op f s ∪ support op g s ⟶ ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "x, 'b",
                    "id": "9.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ support op f s ∪ support op g s",
                    "id": "9.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op f s ∪ support op g s ⊢ x ∈ support op f s ∪ support op g s"
                },
                {
                    "args": "¬(x ∈ support op (λx1. op (f x1) (g x1)) s)",
                    "id": "9.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ ¬(x ∈ support op (λx1. op (f x1) (g x1)) s)"
                },
                {
                    "args": "in_support",
                    "id": "9.3",
                    "prevs": [
                        "9.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ ¬(x ∈ s ∧ ¬(op (f x) (g x) = neutral op))"
                },
                {
                    "args": "de_morgan_thm1",
                    "id": "9.4",
                    "prevs": [
                        "9.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ ¬(x ∈ s) ∨ ¬¬(op (f x) (g x) = neutral op)"
                },
                {
                    "args": "double_neg",
                    "id": "9.5",
                    "prevs": [
                        "9.4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ ¬(x ∈ s) ∨ op (f x) (g x) = neutral op"
                },
                {
                    "args": "",
                    "id": "9.6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ support op f s ∪ support op g s, ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ ¬(x ∈ s) ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "9.6.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "member_union_iff",
                    "id": "9.6.1",
                    "prevs": [
                        "9.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ support op f s ∪ support op g s ⊢ x ∈ support op f s ∨ x ∈ support op g s"
                },
                {
                    "args": "",
                    "id": "9.6.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), x ∈ support op f s ∪ support op g s, ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ x ∈ support op f s ⟶ x ∈ s"
                },
                {
                    "args": "x ∈ support op f s",
                    "id": "9.6.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op f s ⊢ x ∈ support op f s"
                },
                {
                    "args": "support_subset, {f: f, op: op, s: s}",
                    "id": "9.6.2.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ support op f s ⊆ s"
                },
                {
                    "args": "subsetE",
                    "id": "9.6.2.2",
                    "prevs": [
                        "9.6.2.1",
                        "9.6.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), x ∈ support op f s, x ∈ support op f s ∪ support op g s, ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "9.6.2.3",
                    "prevs": [
                        "9.6.2.0",
                        "9.6.2.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), x ∈ support op f s ∪ support op g s, ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ x ∈ support op f s ⟶ x ∈ s"
                },
                {
                    "args": "",
                    "id": "9.6.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), x ∈ support op f s ∪ support op g s, ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ x ∈ support op g s ⟶ x ∈ s"
                },
                {
                    "args": "x ∈ support op g s",
                    "id": "9.6.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op g s ⊢ x ∈ support op g s"
                },
                {
                    "args": "support_subset, {f: g, op: op, s: s}",
                    "id": "9.6.3.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ support op g s ⊆ s"
                },
                {
                    "args": "subsetE",
                    "id": "9.6.3.2",
                    "prevs": [
                        "9.6.3.1",
                        "9.6.3.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), x ∈ support op g s, x ∈ support op f s ∪ support op g s, ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "9.6.3.3",
                    "prevs": [
                        "9.6.3.0",
                        "9.6.3.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), x ∈ support op f s ∪ support op g s, ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ x ∈ support op g s ⟶ x ∈ s"
                },
                {
                    "args": "disjE",
                    "id": "9.6.4",
                    "prevs": [
                        "9.6.1",
                        "9.6.2",
                        "9.6.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), x ∈ support op f s ∪ support op g s, ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ x ∈ s"
                },
                {
                    "args": "negE_gen, {A: x ∈ s, C: op (f x) (g x) = neutral op}",
                    "id": "9.6.5",
                    "prevs": [
                        "9.6.0",
                        "9.6.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), x ∈ support op f s ∪ support op g s, ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ op (f x) (g x) = neutral op"
                },
                {
                    "args": "",
                    "id": "9.6.6",
                    "prevs": [
                        "9.6.0",
                        "9.6.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ support op f s ∪ support op g s, ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ ¬(x ∈ s) ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "op (f x) (g x) = neutral op ⟶ op (f x) (g x) = neutral op",
                    "id": "9.7",
                    "prevs": [],
                    "rule": "trivial",
                    "th": "⊢ op (f x) (g x) = neutral op ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "disjE",
                    "id": "9.8",
                    "prevs": [
                        "9.5",
                        "9.6",
                        "9.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ support op f s ∪ support op g s, ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⊢ op (f x) (g x) = neutral op"
                },
                {
                    "args": "",
                    "id": "9.9",
                    "prevs": [
                        "9.0",
                        "9.1",
                        "9.2",
                        "9.8"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ support op f s ∪ support op g s ⟶ ¬(x ∈ support op (λx1. op (f x1) (g x1)) s) ⟶ op (f x) (g x) = neutral op"
                },
                {
                    "args": "iterate_superset",
                    "id": "10",
                    "prevs": [
                        "0",
                        "8",
                        "9"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ iterate op (support op f s ∪ support op g s) (λx. op (f x) (g x)) = iterate op (support op (λx. op (f x) (g x)) s) (λx. op (f x) (g x))"
                },
                {
                    "args": "eq_sym_eq, iterate op (support op (λx. op (f x) (g x)) s) (λx. op (f x) (g x)) = iterate op (support op f s ∪ support op g s) (λx. op (f x) (g x))",
                    "id": "11",
                    "prevs": [
                        "10"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ iterate op (support op (λx. op (f x) (g x)) s) (λx. op (f x) (g x)) = iterate op (support op f s ∪ support op g s) (λx. op (f x) (g x))"
                },
                {
                    "args": "finite_union_imp",
                    "id": "12",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ finite (support op f s ∪ support op g s)"
                },
                {
                    "args": "iterate_op, {f: f, g: g}",
                    "id": "13",
                    "prevs": [
                        "0",
                        "12"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ iterate op (support op f s ∪ support op g s) (λx. op (f x) (g x)) = op (iterate op (support op f s ∪ support op g s) f) (iterate op (support op f s ∪ support op g s) g)"
                },
                {
                    "args": "subset_union_id, {A: support op f s, B: support op g s}",
                    "id": "14",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ support op f s ⊆ support op f s ∪ support op g s"
                },
                {
                    "args": "",
                    "id": "15",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ support op f s ∪ support op g s ⟶ ¬(x ∈ support op f s) ⟶ f x = neutral op"
                },
                {
                    "args": "x, 'b",
                    "id": "15.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ support op f s ∪ support op g s",
                    "id": "15.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op f s ∪ support op g s ⊢ x ∈ support op f s ∪ support op g s"
                },
                {
                    "args": "¬(x ∈ support op f s)",
                    "id": "15.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ support op f s) ⊢ ¬(x ∈ support op f s)"
                },
                {
                    "args": "in_support",
                    "id": "15.3",
                    "prevs": [
                        "15.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(x ∈ support op f s) ⊢ ¬(x ∈ s ∧ ¬(f x = neutral op))"
                },
                {
                    "args": "de_morgan_thm1",
                    "id": "15.4",
                    "prevs": [
                        "15.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(x ∈ support op f s) ⊢ ¬(x ∈ s) ∨ ¬¬(f x = neutral op)"
                },
                {
                    "args": "double_neg",
                    "id": "15.5",
                    "prevs": [
                        "15.4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(x ∈ support op f s) ⊢ ¬(x ∈ s) ∨ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "15.6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), ¬(x ∈ support op f s), x ∈ support op f s ∪ support op g s ⊢ ¬(x ∈ s) ⟶ f x = neutral op"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "15.6.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "member_union_iff",
                    "id": "15.6.1",
                    "prevs": [
                        "15.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ support op f s ∪ support op g s ⊢ x ∈ support op f s ∨ x ∈ support op g s"
                },
                {
                    "args": "",
                    "id": "15.6.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op f s), x ∈ support op f s ∪ support op g s ⊢ x ∈ support op f s ⟶ x ∈ s"
                },
                {
                    "args": "x ∈ support op f s",
                    "id": "15.6.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op f s ⊢ x ∈ support op f s"
                },
                {
                    "args": "support_subset, {f: f, op: op, s: s}",
                    "id": "15.6.2.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ support op f s ⊆ s"
                },
                {
                    "args": "subsetE",
                    "id": "15.6.2.2",
                    "prevs": [
                        "15.6.2.1",
                        "15.6.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), x ∈ support op f s, ¬(x ∈ support op f s), x ∈ support op f s ∪ support op g s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "15.6.2.3",
                    "prevs": [
                        "15.6.2.0",
                        "15.6.2.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op f s), x ∈ support op f s ∪ support op g s ⊢ x ∈ support op f s ⟶ x ∈ s"
                },
                {
                    "args": "",
                    "id": "15.6.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op f s), x ∈ support op f s ∪ support op g s ⊢ x ∈ support op g s ⟶ x ∈ s"
                },
                {
                    "args": "x ∈ support op g s",
                    "id": "15.6.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op g s ⊢ x ∈ support op g s"
                },
                {
                    "args": "support_subset, {f: g, op: op, s: s}",
                    "id": "15.6.3.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ support op g s ⊆ s"
                },
                {
                    "args": "subsetE",
                    "id": "15.6.3.2",
                    "prevs": [
                        "15.6.3.1",
                        "15.6.3.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), x ∈ support op g s, ¬(x ∈ support op f s), x ∈ support op f s ∪ support op g s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "15.6.3.3",
                    "prevs": [
                        "15.6.3.0",
                        "15.6.3.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op f s), x ∈ support op f s ∪ support op g s ⊢ x ∈ support op g s ⟶ x ∈ s"
                },
                {
                    "args": "disjE",
                    "id": "15.6.4",
                    "prevs": [
                        "15.6.1",
                        "15.6.2",
                        "15.6.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op f s), x ∈ support op f s ∪ support op g s ⊢ x ∈ s"
                },
                {
                    "args": "negE_gen, {A: x ∈ s, C: f x = neutral op}",
                    "id": "15.6.5",
                    "prevs": [
                        "15.6.0",
                        "15.6.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op f s), x ∈ support op f s ∪ support op g s ⊢ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "15.6.6",
                    "prevs": [
                        "15.6.0",
                        "15.6.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), ¬(x ∈ support op f s), x ∈ support op f s ∪ support op g s ⊢ ¬(x ∈ s) ⟶ f x = neutral op"
                },
                {
                    "args": "f x = neutral op ⟶ f x = neutral op",
                    "id": "15.7",
                    "prevs": [],
                    "rule": "trivial",
                    "th": "⊢ f x = neutral op ⟶ f x = neutral op"
                },
                {
                    "args": "disjE",
                    "id": "15.8",
                    "prevs": [
                        "15.5",
                        "15.6",
                        "15.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), ¬(x ∈ support op f s), x ∈ support op f s ∪ support op g s ⊢ f x = neutral op"
                },
                {
                    "args": "",
                    "id": "15.9",
                    "prevs": [
                        "15.0",
                        "15.1",
                        "15.2",
                        "15.8"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ support op f s ∪ support op g s ⟶ ¬(x ∈ support op f s) ⟶ f x = neutral op"
                },
                {
                    "args": "iterate_superset",
                    "id": "16",
                    "prevs": [
                        "0",
                        "14",
                        "15"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ iterate op (support op f s ∪ support op g s) f = iterate op (support op f s) f"
                },
                {
                    "args": "",
                    "id": "17",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ support op g s ⟶ x ∈ support op f s ∨ x ∈ support op g s"
                },
                {
                    "args": "x, 'b",
                    "id": "17.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ support op g s",
                    "id": "17.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op g s ⊢ x ∈ support op g s"
                },
                {
                    "args": "disjI2, {A: x ∈ support op f s, B: x ∈ support op g s}",
                    "id": "17.2",
                    "prevs": [
                        "17.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), x ∈ support op g s ⊢ x ∈ support op f s ∨ x ∈ support op g s"
                },
                {
                    "args": "",
                    "id": "17.3",
                    "prevs": [
                        "17.0",
                        "17.1",
                        "17.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ support op g s ⟶ x ∈ support op f s ∨ x ∈ support op g s"
                },
                {
                    "args": "member_union_iff, ∀x. x ∈ support op g s ⟶ x ∈ support op f s ∪ support op g s",
                    "id": "18",
                    "prevs": [
                        "17"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ support op g s ⟶ x ∈ support op f s ∪ support op g s"
                },
                {
                    "args": "subsetI",
                    "id": "19",
                    "prevs": [
                        "18"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ support op g s ⊆ support op f s ∪ support op g s"
                },
                {
                    "args": "",
                    "id": "20",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ support op f s ∪ support op g s ⟶ ¬(x ∈ support op g s) ⟶ g x = neutral op"
                },
                {
                    "args": "x, 'b",
                    "id": "20.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ support op f s ∪ support op g s",
                    "id": "20.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op f s ∪ support op g s ⊢ x ∈ support op f s ∪ support op g s"
                },
                {
                    "args": "¬(x ∈ support op g s)",
                    "id": "20.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ support op g s) ⊢ ¬(x ∈ support op g s)"
                },
                {
                    "args": "in_support",
                    "id": "20.3",
                    "prevs": [
                        "20.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(x ∈ support op g s) ⊢ ¬(x ∈ s ∧ ¬(g x = neutral op))"
                },
                {
                    "args": "de_morgan_thm1",
                    "id": "20.4",
                    "prevs": [
                        "20.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(x ∈ support op g s) ⊢ ¬(x ∈ s) ∨ ¬¬(g x = neutral op)"
                },
                {
                    "args": "double_neg",
                    "id": "20.5",
                    "prevs": [
                        "20.4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(x ∈ support op g s) ⊢ ¬(x ∈ s) ∨ g x = neutral op"
                },
                {
                    "args": "",
                    "id": "20.6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), ¬(x ∈ support op g s), x ∈ support op f s ∪ support op g s ⊢ ¬(x ∈ s) ⟶ g x = neutral op"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "20.6.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "member_union_iff",
                    "id": "20.6.1",
                    "prevs": [
                        "20.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ support op f s ∪ support op g s ⊢ x ∈ support op f s ∨ x ∈ support op g s"
                },
                {
                    "args": "",
                    "id": "20.6.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op g s), x ∈ support op f s ∪ support op g s ⊢ x ∈ support op f s ⟶ x ∈ s"
                },
                {
                    "args": "x ∈ support op f s",
                    "id": "20.6.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op f s ⊢ x ∈ support op f s"
                },
                {
                    "args": "in_support",
                    "id": "20.6.2.1",
                    "prevs": [
                        "20.6.2.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ support op f s ⊢ x ∈ s ∧ ¬(f x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "20.6.2.2",
                    "prevs": [
                        "20.6.2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ support op f s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "20.6.2.3",
                    "prevs": [
                        "20.6.2.0",
                        "20.6.2.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op g s), x ∈ support op f s ∪ support op g s ⊢ x ∈ support op f s ⟶ x ∈ s"
                },
                {
                    "args": "",
                    "id": "20.6.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op g s), x ∈ support op f s ∪ support op g s ⊢ x ∈ support op g s ⟶ x ∈ s"
                },
                {
                    "args": "x ∈ support op g s",
                    "id": "20.6.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ support op g s ⊢ x ∈ support op g s"
                },
                {
                    "args": "in_support",
                    "id": "20.6.3.1",
                    "prevs": [
                        "20.6.3.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ support op g s ⊢ x ∈ s ∧ ¬(g x = neutral op)"
                },
                {
                    "args": "conjD1",
                    "id": "20.6.3.2",
                    "prevs": [
                        "20.6.3.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ support op g s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "20.6.3.3",
                    "prevs": [
                        "20.6.3.0",
                        "20.6.3.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op g s), x ∈ support op f s ∪ support op g s ⊢ x ∈ support op g s ⟶ x ∈ s"
                },
                {
                    "args": "disjE",
                    "id": "20.6.4",
                    "prevs": [
                        "20.6.1",
                        "20.6.2",
                        "20.6.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op g s), x ∈ support op f s ∪ support op g s ⊢ x ∈ s"
                },
                {
                    "args": "negE_gen, {A: x ∈ s, C: g x = neutral op}",
                    "id": "20.6.5",
                    "prevs": [
                        "20.6.0",
                        "20.6.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, ¬(x ∈ s), finite (support op f s), finite (support op g s), ¬(x ∈ support op g s), x ∈ support op f s ∪ support op g s ⊢ g x = neutral op"
                },
                {
                    "args": "",
                    "id": "20.6.6",
                    "prevs": [
                        "20.6.0",
                        "20.6.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), ¬(x ∈ support op g s), x ∈ support op f s ∪ support op g s ⊢ ¬(x ∈ s) ⟶ g x = neutral op"
                },
                {
                    "args": "g x = neutral op ⟶ g x = neutral op",
                    "id": "20.7",
                    "prevs": [],
                    "rule": "trivial",
                    "th": "⊢ g x = neutral op ⟶ g x = neutral op"
                },
                {
                    "args": "disjE",
                    "id": "20.8",
                    "prevs": [
                        "20.5",
                        "20.6",
                        "20.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s), ¬(x ∈ support op g s), x ∈ support op f s ∪ support op g s ⊢ g x = neutral op"
                },
                {
                    "args": "",
                    "id": "20.9",
                    "prevs": [
                        "20.0",
                        "20.1",
                        "20.2",
                        "20.8"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ ∀x. x ∈ support op f s ∪ support op g s ⟶ ¬(x ∈ support op g s) ⟶ g x = neutral op"
                },
                {
                    "args": "iterate_superset",
                    "id": "21",
                    "prevs": [
                        "0",
                        "19",
                        "20"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ iterate op (support op f s ∪ support op g s) g = iterate op (support op g s) g"
                },
                {
                    "args": "op (iterate op (support op f s ∪ support op g s) f) (iterate op (support op g s) g) = op (iterate op (support op f s) f) (iterate op (support op g s) g)",
                    "id": "22",
                    "prevs": [
                        "16"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ op (iterate op (support op f s ∪ support op g s) f) (iterate op (support op g s) g) = op (iterate op (support op f s) f) (iterate op (support op g s) g)"
                },
                {
                    "args": "op (iterate op (support op f s ∪ support op g s) f) (iterate op (support op f s ∪ support op g s) g) = op (iterate op (support op f s) f) (iterate op (support op g s) g)",
                    "id": "23",
                    "prevs": [
                        "21",
                        "22"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ op (iterate op (support op f s ∪ support op g s) f) (iterate op (support op f s ∪ support op g s) g) = op (iterate op (support op f s) f) (iterate op (support op g s) g)"
                },
                {
                    "args": "iterate op (support op f s ∪ support op g s) (λx. op (f x) (g x)) = op (iterate op (support op f s) f) (iterate op (support op g s) g)",
                    "id": "24",
                    "prevs": [
                        "13",
                        "23"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ iterate op (support op f s ∪ support op g s) (λx. op (f x) (g x)) = op (iterate op (support op f s) f) (iterate op (support op g s) g)"
                },
                {
                    "args": "iterate op (support op (λx. op (f x) (g x)) s) (λx. op (f x) (g x)) = op (iterate op (support op f s) f) (iterate op (support op g s) g)",
                    "id": "25",
                    "prevs": [
                        "11",
                        "24"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ iterate op (support op (λx. op (f x) (g x)) s) (λx. op (f x) (g x)) = op (iterate op (support op f s) f) (iterate op (support op g s) g)"
                },
                {
                    "args": "iterate_support, iterate op s (λx. op (f x) (g x)) = op (iterate op s f) (iterate op s g)",
                    "id": "26",
                    "prevs": [
                        "25"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "monoidal op, finite (support op f s), finite (support op g s) ⊢ iterate op s (λx. op (f x) (g x)) = op (iterate op s f) (iterate op s g)"
                },
                {
                    "args": "",
                    "id": "27",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "26"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ finite (support op f s) ⟶ finite (support op g s) ⟶ iterate op s (λx. op (f x) (g x)) = op (iterate op s f) (iterate op s g)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ finite (support op f s) ",
                "   ⟶ finite (support op g s) ",
                "      ⟶ iterate op s (λx. op (f x) (g x)) = op (iterate op s f) (iterate op s g)"
            ],
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "iterate_support"
                },
                {
                    "goal": "iterate op (support op (λx. op (f x) (g x)) s) (λx. op (f x) (g x)) = iterate op (support op f s ∪ support op g s)\n                         (%x. op (f x) (g x))",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_superset"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_union_iff"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "3.1"
                    ],
                    "goal_id": "3.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.1"
                    ],
                    "goal_id": "3.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "3.3"
                    ],
                    "goal_id": "3.4",
                    "method_name": "apply_backward_step",
                    "theorem": "contrapositive"
                },
                {
                    "goal_id": "3.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "de_morgan_thm2"
                },
                {
                    "goal_id": "3.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "de_morgan_thm1"
                },
                {
                    "goal_id": "3.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "double_neg"
                },
                {
                    "goal_id": "3.4",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.4.0"
                    ],
                    "goal_id": "3.4.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.4.0"
                    ],
                    "goal_id": "3.4.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "3.4.1"
                    ],
                    "goal_id": "3.4.3",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "3.4.3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.4.3.0",
                        "3.2"
                    ],
                    "goal_id": "3.4.3.1",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "3.4.4",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.4.2"
                    ],
                    "goal_id": "3.4.4.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "3.4.4.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "3.4.4.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "monoidal_ac"
                },
                {
                    "fact_ids": [
                        "3.4.4.1.1"
                    ],
                    "goal_id": "3.4.4.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.4.4.0"
                    ],
                    "goal_id": "3.4.4.1.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3.4.4.1.2"
                    ],
                    "goal_id": "3.4.4.1.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "9",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "9.2"
                    ],
                    "goal_id": "9.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "fact_ids": [
                        "9.3"
                    ],
                    "goal_id": "9.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "de_morgan_thm1"
                },
                {
                    "fact_ids": [
                        "9.4"
                    ],
                    "goal_id": "9.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "double_neg"
                },
                {
                    "fact_ids": [
                        "9.5"
                    ],
                    "goal_id": "9.6",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "9.6",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "9.6.0"
                    ],
                    "goal_id": "9.6.1",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "fact_ids": [
                        "9.1"
                    ],
                    "goal_id": "9.6.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_union_iff"
                },
                {
                    "fact_ids": [
                        "9.6.1"
                    ],
                    "goal_id": "9.6.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "9.6.2",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "9.6.2.1",
                    "method_name": "apply_backward_step",
                    "param_A": "support op f s",
                    "theorem": "subsetE"
                },
                {
                    "goal_id": "9.6.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "support_subset"
                },
                {
                    "goal_id": "9.6.3",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "9.6.3.1",
                    "method_name": "apply_backward_step",
                    "param_A": "support op g s",
                    "theorem": "subsetE"
                },
                {
                    "goal_id": "9.6.3.1",
                    "method_name": "apply_backward_step",
                    "theorem": "support_subset"
                },
                {
                    "fact_ids": [
                        "11"
                    ],
                    "goal_id": "12",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "finite (support op f s ∪ support op g s)",
                    "goal_id": "12",
                    "method_name": "cut"
                },
                {
                    "goal_id": "12",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_union_imp"
                },
                {
                    "fact_ids": [
                        "0",
                        "12"
                    ],
                    "goal_id": "13",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_g": "g",
                    "theorem": "iterate_op"
                },
                {
                    "fact_ids": [
                        "13"
                    ],
                    "goal_id": "14",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "iterate op (support op f s ∪ support op g s) f = iterate op (support op f s) f",
                    "goal_id": "14",
                    "method_name": "cut"
                },
                {
                    "goal_id": "14",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_superset"
                },
                {
                    "goal_id": "14",
                    "method_name": "apply_backward_step",
                    "theorem": "subset_union_id"
                },
                {
                    "goal_id": "15",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "15.2"
                    ],
                    "goal_id": "15.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "fact_ids": [
                        "15.3"
                    ],
                    "goal_id": "15.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "de_morgan_thm1"
                },
                {
                    "fact_ids": [
                        "15.4"
                    ],
                    "goal_id": "15.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "double_neg"
                },
                {
                    "fact_ids": [
                        "15.5"
                    ],
                    "goal_id": "15.6",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "15.6",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "15.6.0"
                    ],
                    "goal_id": "15.6.1",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "fact_ids": [
                        "15.1"
                    ],
                    "goal_id": "15.6.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_union_iff"
                },
                {
                    "fact_ids": [
                        "15.6.1"
                    ],
                    "goal_id": "15.6.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "15.6.2",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "15.6.2.1",
                    "method_name": "apply_backward_step",
                    "param_A": "support op f s",
                    "theorem": "subsetE"
                },
                {
                    "goal_id": "15.6.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "support_subset"
                },
                {
                    "goal_id": "15.6.3",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "15.6.3.1",
                    "method_name": "apply_backward_step",
                    "param_A": "support op g s",
                    "theorem": "subsetE"
                },
                {
                    "goal_id": "15.6.3.1",
                    "method_name": "apply_backward_step",
                    "theorem": "support_subset"
                },
                {
                    "goal": "iterate op (support op f s ∪ support op g s) g = iterate op (support op g s) g",
                    "goal_id": "17",
                    "method_name": "cut"
                },
                {
                    "goal_id": "17",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_superset"
                },
                {
                    "goal_id": "17",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "17",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_union_iff"
                },
                {
                    "goal_id": "17",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "17.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "20",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "20.2"
                    ],
                    "goal_id": "20.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "fact_ids": [
                        "20.3"
                    ],
                    "goal_id": "20.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "de_morgan_thm1"
                },
                {
                    "fact_ids": [
                        "20.4"
                    ],
                    "goal_id": "20.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "double_neg"
                },
                {
                    "fact_ids": [
                        "20.5"
                    ],
                    "goal_id": "20.6",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "20.6",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "20.6.0"
                    ],
                    "goal_id": "20.6.1",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "fact_ids": [
                        "20.1"
                    ],
                    "goal_id": "20.6.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_union_iff"
                },
                {
                    "fact_ids": [
                        "20.6.1"
                    ],
                    "goal_id": "20.6.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "20.6.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "20.6.2.0"
                    ],
                    "goal_id": "20.6.2.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "fact_ids": [
                        "20.6.2.1"
                    ],
                    "goal_id": "20.6.2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "goal_id": "20.6.3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "20.6.3.0"
                    ],
                    "goal_id": "20.6.3.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "fact_ids": [
                        "20.6.3.1"
                    ],
                    "goal_id": "20.6.3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "21"
                    ],
                    "goal_id": "22",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "16"
                    ],
                    "goal_id": "22",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "g": "'b ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "iterate_natseg_0",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ m = 0 ⟶ iterate op (if m = 0 then {0} else ∅) f = (if m = 0 then f 0 else neutral op)"
                },
                {
                    "args": "m = 0",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m = 0 ⊢ m = 0"
                },
                {
                    "args": "iterate_sing, {f: f, op: op, x: (0::nat)}",
                    "id": "1.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({0}) f = f 0"
                },
                {
                    "args": "if_P, iterate op (if m = 0 then {0} else ∅) f = (if m = 0 then f 0 else neutral op)",
                    "id": "1.2",
                    "prevs": [
                        "1.1",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m = 0 ⊢ iterate op (if m = 0 then {0} else ∅) f = (if m = 0 then f 0 else neutral op)"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [
                        "1.0",
                        "1.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ m = 0 ⟶ iterate op (if m = 0 then {0} else ∅) f = (if m = 0 then f 0 else neutral op)"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ ¬(m = 0) ⟶ iterate op (if m = 0 then {0} else ∅) f = (if m = 0 then f 0 else neutral op)"
                },
                {
                    "args": "¬(m = 0)",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(m = 0) ⊢ ¬(m = 0)"
                },
                {
                    "args": "iterate_empty, {f: f, op: op}",
                    "id": "2.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, ¬(m = 0) ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "if_not_P, iterate op (if m = 0 then {0} else ∅) f = (if m = 0 then f 0 else neutral op)",
                    "id": "2.2",
                    "prevs": [
                        "2.1",
                        "2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ¬(m = 0) ⊢ iterate op (if m = 0 then {0} else ∅) f = (if m = 0 then f 0 else neutral op)"
                },
                {
                    "args": "",
                    "id": "2.3",
                    "prevs": [
                        "2.0",
                        "2.2"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ ¬(m = 0) ⟶ iterate op (if m = 0 then {0} else ∅) f = (if m = 0 then f 0 else neutral op)"
                },
                {
                    "args": "classical_cases",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ iterate op (if m = 0 then {0} else ∅) f = (if m = 0 then f 0 else neutral op)"
                },
                {
                    "args": "natseg_0, iterate op ({m..0}) f = (if m = 0 then f 0 else neutral op)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op ({m..0}) f = (if m = 0 then f 0 else neutral op)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op ({m..0}) f = (if m = 0 then f 0 else neutral op)"
                }
            ],
            "prop": "monoidal op ⟶ iterate op ({m..0}) f = (if m = 0 then f 0 else neutral op)",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_0"
                },
                {
                    "case": "m = 0",
                    "goal_id": "1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_sing"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ 'a",
                "m": "nat",
                "op": "'a ⇒ 'a ⇒ 'a"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "iterate_natseg_Suc",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ m ≤ Suc n ⟶ iterate op (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)"
                },
                {
                    "args": "m ≤ Suc n",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ Suc n ⊢ m ≤ Suc n"
                },
                {
                    "args": "iterate_insert, {f: f, s: {m..n}, x: Suc n}",
                    "id": "1.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ finite ({m..n}) ⟶ iterate op (insert (Suc n) ({m..n})) f = (if Suc n ∈ {m..n} then iterate op ({m..n}) f else op (f (Suc n)) (iterate op ({m..n}) f))"
                },
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [
                        "1.1",
                        "1.2"
                    ],
                    "rule": "apply_fact",
                    "th": "monoidal op ⊢ iterate op (insert (Suc n) ({m..n})) f = (if Suc n ∈ {m..n} then iterate op ({m..n}) f else op (f (Suc n)) (iterate op ({m..n}) f))"
                },
                {
                    "args": "eq_refl, {x: n}",
                    "id": "1.4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ n = n"
                },
                {
                    "args": "disjI1, {A: n = n, B: n < n}",
                    "id": "1.5",
                    "prevs": [
                        "1.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, m ≤ Suc n ⊢ n = n ∨ n < n"
                },
                {
                    "args": "nat_less_def_2, n < Suc n",
                    "id": "1.6",
                    "prevs": [
                        "1.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m ≤ Suc n ⊢ n < Suc n"
                },
                {
                    "args": "not_le, ¬(Suc n ≤ n)",
                    "id": "1.7",
                    "prevs": [
                        "1.6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m ≤ Suc n ⊢ ¬(Suc n ≤ n)"
                },
                {
                    "args": "disjI2, {A: ¬(m ≤ Suc n), B: ¬(Suc n ≤ n)}",
                    "id": "1.8",
                    "prevs": [
                        "1.7"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, m ≤ Suc n ⊢ ¬(m ≤ Suc n) ∨ ¬(Suc n ≤ n)"
                },
                {
                    "args": "de_morgan_thm1, ¬(m ≤ Suc n ∧ Suc n ≤ n)",
                    "id": "1.9",
                    "prevs": [
                        "1.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m ≤ Suc n ⊢ ¬(m ≤ Suc n ∧ Suc n ≤ n)"
                },
                {
                    "args": "member_natseg, ¬(Suc n ∈ {m..n})",
                    "id": "1.10",
                    "prevs": [
                        "1.9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m ≤ Suc n ⊢ ¬(Suc n ∈ {m..n})"
                },
                {
                    "args": "if_not_P",
                    "id": "1.11",
                    "prevs": [
                        "1.3",
                        "1.10"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op, m ≤ Suc n ⊢ iterate op (insert (Suc n) ({m..n})) f = op (f (Suc n)) (iterate op ({m..n}) f)"
                },
                {
                    "args": "monoidal_def",
                    "id": "1.12",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ (∀x. ∀y. op x y = op y x) ∧ (∀x. ∀y. ∀z. op x (op y z) = op (op x y) z) ∧ (∀x. op (neutral op) x = x)"
                },
                {
                    "args": "conjD1",
                    "id": "1.13",
                    "prevs": [
                        "1.12"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀x. ∀y. op x y = op y x"
                },
                {
                    "args": "f (Suc n), iterate op ({m..n}) f",
                    "id": "1.14",
                    "prevs": [
                        "1.13"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op (f (Suc n)) (iterate op ({m..n}) f) = op (iterate op ({m..n}) f) (f (Suc n))"
                },
                {
                    "args": "iterate op (insert (Suc n) ({m..n})) f = op (iterate op ({m..n}) f) (f (Suc n))",
                    "id": "1.15",
                    "prevs": [
                        "1.11",
                        "1.14"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m ≤ Suc n ⊢ iterate op (insert (Suc n) ({m..n})) f = op (iterate op ({m..n}) f) (f (Suc n))"
                },
                {
                    "args": "if_P, iterate op (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)",
                    "id": "1.16",
                    "prevs": [
                        "1.15",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m ≤ Suc n ⊢ iterate op (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)"
                },
                {
                    "args": "",
                    "id": "1.17",
                    "prevs": [
                        "1.0",
                        "1.16"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ m ≤ Suc n ⟶ iterate op (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ ¬(m ≤ Suc n) ⟶ iterate op (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)"
                },
                {
                    "args": "¬(m ≤ Suc n)",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(m ≤ Suc n) ⊢ ¬(m ≤ Suc n)"
                },
                {
                    "args": "if_not_P, iterate op (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)",
                    "id": "2.1",
                    "prevs": [
                        "2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(m ≤ Suc n) ⊢ iterate op (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)"
                },
                {
                    "args": "",
                    "id": "2.2",
                    "prevs": [
                        "2.0",
                        "2.1"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ ¬(m ≤ Suc n) ⟶ iterate op (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)"
                },
                {
                    "args": "classical_cases",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ iterate op (if m ≤ Suc n then insert (Suc n) ({m..n}) else {m..n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)"
                },
                {
                    "args": "natseg_Suc, iterate op ({m..Suc n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op ({m..Suc n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op ({m..Suc n}) f = (if m ≤ Suc n then op (iterate op ({m..n}) f) (f (Suc n)) else iterate op ({m..n}) f)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ iterate op ({m..Suc n}) f = ",
                "   (if m ≤ Suc n then ",
                "      op (iterate op ({m..n}) f) (f (Suc n))",
                "    else ",
                "      iterate op ({m..n}) f)"
            ],
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_Suc"
                },
                {
                    "case": "m ≤ Suc n",
                    "goal_id": "1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_s": "{m..n}",
                    "param_x": "Suc n",
                    "theorem": "iterate_insert"
                },
                {
                    "goal": "finite ({m..n})",
                    "goal_id": "1.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "fact_ids": [
                        "1.1",
                        "1.2"
                    ],
                    "goal_id": "1.3",
                    "method_name": "apply_fact"
                },
                {
                    "goal": "~(Suc n ∈ {m..n})",
                    "goal_id": "1.4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "de_morgan_thm1"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "not_le"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_less_def_2"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "1.3",
                        "1.10"
                    ],
                    "goal_id": "1.11",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "1.11"
                    ],
                    "goal_id": "1.12",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.12",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "monoidal_def"
                },
                {
                    "fact_ids": [
                        "1.12"
                    ],
                    "goal_id": "1.13",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1.13"
                    ],
                    "goal_id": "1.14",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ 'a",
                "m": "nat",
                "n": "nat",
                "op": "'a ⇒ 'a ⇒ 'a"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "iterate_natseg_0_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "iterate_empty, {f: f, op: op}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "natseg_clauses_lt_1, iterate op ({i. i < 0}) f = neutral op",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op ({i. i < 0}) f = neutral op"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op ({i. i < 0}) f = neutral op"
                }
            ],
            "prop": "monoidal op ⟶ iterate op ({i. i < 0}) f = neutral op",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_clauses_lt_1"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "iterate_natseg_Suc_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "iterate_insert, {f: f, s: {i. i < k}, x: k}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ finite ({i. i < k}) ⟶ iterate op (insert k ({i. i < k})) f = (if k ∈ {i. i < k} then iterate op ({i. i < k}) f else op (f k) (iterate op ({i. i < k}) f))"
                },
                {
                    "args": "finite_natseg_lt, {n: k}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m. m < k})"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_fact",
                    "th": "monoidal op ⊢ iterate op (insert k ({i. i < k})) f = (if k ∈ {i. i < k} then iterate op ({i. i < k}) f else op (f k) (iterate op ({i. i < k}) f))"
                },
                {
                    "args": "less_eq_refl, {n: k}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ k ≤ k"
                },
                {
                    "args": "not_lt, ¬(k < k)",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ ¬(k < k)"
                },
                {
                    "args": "member_collect, ¬(k ∈ {i. i < k})",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ ¬(k ∈ {i. i < k})"
                },
                {
                    "args": "if_not_P",
                    "id": "7",
                    "prevs": [
                        "3",
                        "6"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ iterate op (insert k ({i. i < k})) f = op (f k) (iterate op ({i. i < k}) f)"
                },
                {
                    "args": "monoidal_def",
                    "id": "8",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ (∀x. ∀y. op x y = op y x) ∧ (∀x. ∀y. ∀z. op x (op y z) = op (op x y) z) ∧ (∀x. op (neutral op) x = x)"
                },
                {
                    "args": "conjD1",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀x. ∀y. op x y = op y x"
                },
                {
                    "args": "f k, iterate op ({i. i < k}) f",
                    "id": "10",
                    "prevs": [
                        "9"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op (f k) (iterate op ({i. i < k}) f) = op (iterate op ({i. i < k}) f) (f k)"
                },
                {
                    "args": "iterate op (insert k ({i. i < k})) f = op (iterate op ({i. i < k}) f) (f k)",
                    "id": "11",
                    "prevs": [
                        "7",
                        "10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op ⊢ iterate op (insert k ({i. i < k})) f = op (iterate op ({i. i < k}) f) (f k)"
                },
                {
                    "args": "natseg_clauses_lt_2, iterate op ({i. i < Suc k}) f = op (iterate op ({i. i < k}) f) (f k)",
                    "id": "12",
                    "prevs": [
                        "11"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op ({i. i < Suc k}) f = op (iterate op ({i. i < k}) f) (f k)"
                },
                {
                    "args": "",
                    "id": "13",
                    "prevs": [
                        "0",
                        "12"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op ({i. i < Suc k}) f = op (iterate op ({i. i < k}) f) (f k)"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ iterate op ({i. i < Suc k}) f = op (iterate op ({i. i < k}) f) (f k)"
            ],
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_clauses_lt_2"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_s": "{i. i < k}",
                    "param_x": "k",
                    "theorem": "iterate_insert"
                },
                {
                    "goal": "finite ({i. i < k})",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg_lt"
                },
                {
                    "fact_ids": [
                        "1",
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_fact"
                },
                {
                    "goal": "~(k ∈ {i. i < k})",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "not_lt"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "less_eq_refl"
                },
                {
                    "fact_ids": [
                        "3",
                        "6"
                    ],
                    "goal_id": "7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "monoidal_def"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal_id": "10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "9"
                    ],
                    "goal_id": "10",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ 'a",
                "k": "nat",
                "op": "'a ⇒ 'a ⇒ 'a"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "iterate_natseg_0_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "iterate_sing, {f: f, op: op, x: (0::nat)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({0}) f = f 0"
                },
                {
                    "args": "natseg_clauses_le_1, iterate op ({i. i ≤ 0}) f = f 0",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op ({i. i ≤ 0}) f = f 0"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op ({i. i ≤ 0}) f = f 0"
                }
            ],
            "prop": "monoidal op ⟶ iterate op ({i. i ≤ 0}) f = f 0",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_clauses_le_1"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_sing"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ 'a",
                "op": "'a ⇒ 'a ⇒ 'a"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "iterate_natseg_Suc_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "iterate_insert, {f: f, s: {i. i ≤ k}, x: Suc k}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ finite ({i. i ≤ k}) ⟶ iterate op (insert (Suc k) ({i. i ≤ k})) f = (if Suc k ∈ {i. i ≤ k} then iterate op ({i. i ≤ k}) f else op (f (Suc k)) (iterate op ({i. i ≤ k}) f))"
                },
                {
                    "args": "finite_natseg_le, {n: k}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m. m ≤ k})"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_fact",
                    "th": "monoidal op ⊢ iterate op (insert (Suc k) ({i. i ≤ k})) f = (if Suc k ∈ {i. i ≤ k} then iterate op ({i. i ≤ k}) f else op (f (Suc k)) (iterate op ({i. i ≤ k}) f))"
                },
                {
                    "args": "eq_refl, {x: k}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ k = k"
                },
                {
                    "args": "disjI1, {A: k = k, B: k < k}",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ k = k ∨ k < k"
                },
                {
                    "args": "nat_less_def_2, k < Suc k",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ k < Suc k"
                },
                {
                    "args": "not_le, ¬(Suc k ≤ k)",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ ¬(Suc k ≤ k)"
                },
                {
                    "args": "member_collect, ¬(Suc k ∈ {i. i ≤ k})",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ ¬(Suc k ∈ {i. i ≤ k})"
                },
                {
                    "args": "if_not_P",
                    "id": "9",
                    "prevs": [
                        "3",
                        "8"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ iterate op (insert (Suc k) ({i. i ≤ k})) f = op (f (Suc k)) (iterate op ({i. i ≤ k}) f)"
                },
                {
                    "args": "monoidal_def",
                    "id": "10",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ (∀x. ∀y. op x y = op y x) ∧ (∀x. ∀y. ∀z. op x (op y z) = op (op x y) z) ∧ (∀x. op (neutral op) x = x)"
                },
                {
                    "args": "conjD1",
                    "id": "11",
                    "prevs": [
                        "10"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀x. ∀y. op x y = op y x"
                },
                {
                    "args": "f (Suc k), iterate op ({i. i ≤ k}) f",
                    "id": "12",
                    "prevs": [
                        "11"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op (f (Suc k)) (iterate op ({i. i ≤ k}) f) = op (iterate op ({i. i ≤ k}) f) (f (Suc k))"
                },
                {
                    "args": "iterate op (insert (Suc k) ({i. i ≤ k})) f = op (iterate op ({i. i ≤ k}) f) (f (Suc k))",
                    "id": "13",
                    "prevs": [
                        "9",
                        "12"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op ⊢ iterate op (insert (Suc k) ({i. i ≤ k})) f = op (iterate op ({i. i ≤ k}) f) (f (Suc k))"
                },
                {
                    "args": "natseg_clauses_le_2, iterate op ({i. i ≤ Suc k}) f = op (iterate op ({i. i ≤ k}) f) (f (Suc k))",
                    "id": "14",
                    "prevs": [
                        "13"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op ({i. i ≤ Suc k}) f = op (iterate op ({i. i ≤ k}) f) (f (Suc k))"
                },
                {
                    "args": "",
                    "id": "15",
                    "prevs": [
                        "0",
                        "14"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op ({i. i ≤ Suc k}) f = op (iterate op ({i. i ≤ k}) f) (f (Suc k))"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ iterate op ({i. i ≤ Suc k}) f = op (iterate op ({i. i ≤ k}) f) (f (Suc k))"
            ],
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_clauses_le_2"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_s": "{i. i ≤ k}",
                    "param_x": "Suc k",
                    "theorem": "iterate_insert"
                },
                {
                    "goal": "finite ({i. i ≤ k})",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg_le"
                },
                {
                    "fact_ids": [
                        "1",
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_fact"
                },
                {
                    "goal": "~(Suc k ∈ {i. i ≤ k})",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "not_le"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_less_def_2"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "3",
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "9"
                    ],
                    "goal_id": "10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "10",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "monoidal_def"
                },
                {
                    "fact_ids": [
                        "10"
                    ],
                    "goal_id": "11",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "11"
                    ],
                    "goal_id": "12",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ 'a",
                "k": "nat",
                "op": "'a ⇒ 'a ⇒ 'a"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "iterate_pair",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ m = 0 ⟶ iterate op ({2 * m..2 * 0 + 1}) f = iterate op (if m = 0 then {0} else ∅) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "m = 0",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m = 0 ⊢ m = 0"
                },
                {
                    "args": "iterate_sing, {f: λi. op (f (2 * i)) (f (2 * i + 1)), x: (0::nat)}",
                    "id": "1.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({0}) (λi. op (f (2 * i)) (f (2 * i + 1))) = op (f (2 * 0)) (f (2 * 0 + 1))"
                },
                {
                    "args": "le_0, {n: Suc 0}",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ 0 ≤ Suc 0"
                },
                {
                    "args": "iterate_insert, {f: f, s: {(0::nat)}, x: Suc 0}",
                    "id": "1.3",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ finite ({(0::nat)}) ⟶ iterate op ({Suc 0, 0}) f = (if Suc 0 ∈ {0} then iterate op ({0}) f else op (f (Suc 0)) (iterate op ({0}) f))"
                },
                {
                    "args": "finite_empty, {}",
                    "id": "1.4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite (∅::nat set)"
                },
                {
                    "args": "finite_insert, {A: (∅::nat set), x: (0::nat)}",
                    "id": "1.5",
                    "prevs": [
                        "1.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, m = 0 ⊢ finite ({(0::nat)})"
                },
                {
                    "args": "",
                    "id": "1.6",
                    "prevs": [
                        "1.3",
                        "1.5"
                    ],
                    "rule": "apply_fact",
                    "th": "monoidal op, m = 0 ⊢ iterate op ({Suc 0, 0}) f = (if Suc 0 ∈ {0} then iterate op ({0}) f else op (f (Suc 0)) (iterate op ({0}) f))"
                },
                {
                    "args": "nat_zero_Suc_neq, {n: (0::nat)}",
                    "id": "1.7",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ ¬(0 = Suc 0)"
                },
                {
                    "args": "eq_sym_eq, ¬(Suc 0 = 0)",
                    "id": "1.8",
                    "prevs": [
                        "1.7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m = 0 ⊢ ¬(Suc 0 = 0)"
                },
                {
                    "args": "member_empty, {x: Suc 0}",
                    "id": "1.9",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ ¬(Suc 0 ∈ ∅)"
                },
                {
                    "args": "conjI",
                    "id": "1.10",
                    "prevs": [
                        "1.8",
                        "1.9"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, m = 0 ⊢ ¬(Suc 0 = 0) ∧ ¬(Suc 0 ∈ ∅)"
                },
                {
                    "args": "de_morgan_thm2, ¬(Suc 0 = 0 ∨ Suc 0 ∈ ∅)",
                    "id": "1.11",
                    "prevs": [
                        "1.10"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m = 0 ⊢ ¬(Suc 0 = 0 ∨ Suc 0 ∈ ∅)"
                },
                {
                    "args": "member_insert, ¬(Suc 0 ∈ {0})",
                    "id": "1.12",
                    "prevs": [
                        "1.11"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m = 0 ⊢ ¬(Suc 0 ∈ {0})"
                },
                {
                    "args": "if_not_P",
                    "id": "1.13",
                    "prevs": [
                        "1.6",
                        "1.12"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op, m = 0 ⊢ iterate op ({Suc 0, 0}) f = op (f (Suc 0)) (iterate op ({0}) f)"
                },
                {
                    "args": "iterate_sing, {f: f, x: (0::nat)}",
                    "id": "1.14",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({0}) f = f 0"
                },
                {
                    "args": "monoidal_def",
                    "id": "1.15",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ (∀x. ∀y. op x y = op y x) ∧ (∀x. ∀y. ∀z. op x (op y z) = op (op x y) z) ∧ (∀x. op (neutral op) x = x)"
                },
                {
                    "args": "conjD1",
                    "id": "1.16",
                    "prevs": [
                        "1.15"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀x. ∀y. op x y = op y x"
                },
                {
                    "args": "f (Suc 0), f 0",
                    "id": "1.17",
                    "prevs": [
                        "1.16"
                    ],
                    "rule": "apply_fact_for",
                    "th": "monoidal op ⊢ op (f (Suc 0)) (f 0) = op (f 0) (f (Suc 0))"
                },
                {
                    "args": "op (f (Suc 0)) (iterate op ({0}) f) = op (f 0) (f (Suc 0))",
                    "id": "1.18",
                    "prevs": [
                        "1.14",
                        "1.17"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m = 0 ⊢ op (f (Suc 0)) (iterate op ({0}) f) = op (f 0) (f (Suc 0))"
                },
                {
                    "args": "iterate op ({Suc 0, 0}) f = op (f 0) (f (Suc 0))",
                    "id": "1.19",
                    "prevs": [
                        "1.13",
                        "1.18"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m = 0 ⊢ iterate op ({Suc 0, 0}) f = op (f 0) (f (Suc 0))"
                },
                {
                    "args": "natseg_sing, iterate op (insert (Suc 0) ({0..0})) f = op (f 0) (f (Suc 0))",
                    "id": "1.20",
                    "prevs": [
                        "1.19"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m = 0 ⊢ iterate op (insert (Suc 0) ({0..0})) f = op (f 0) (f (Suc 0))"
                },
                {
                    "args": "if_P, iterate op (if 0 ≤ Suc 0 then insert (Suc 0) ({0..0}) else {0..0}) f = op (f 0) (f (Suc 0))",
                    "id": "1.21",
                    "prevs": [
                        "1.20",
                        "1.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m = 0 ⊢ iterate op (if 0 ≤ Suc 0 then insert (Suc 0) ({0..0}) else {0..0}) f = op (f 0) (f (Suc 0))"
                },
                {
                    "args": "natseg_Suc, iterate op ({0..Suc 0}) f = op (f 0) (f (Suc 0))",
                    "id": "1.22",
                    "prevs": [
                        "1.21"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m = 0 ⊢ iterate op ({0..Suc 0}) f = op (f 0) (f (Suc 0))"
                },
                {
                    "args": "nat_plus_def_1, iterate op ({0..0 + Suc 0}) f = op (f 0) (f (0 + Suc 0))",
                    "id": "1.23",
                    "prevs": [
                        "1.22"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m = 0 ⊢ iterate op ({0..0 + Suc 0}) f = op (f 0) (f (0 + Suc 0))"
                },
                {
                    "args": "nat_one_def, iterate op ({0..0 + 1}) f = op (f 0) (f (0 + 1))",
                    "id": "1.24",
                    "prevs": [
                        "1.23"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m = 0 ⊢ iterate op ({0..0 + 1}) f = op (f 0) (f (0 + 1))"
                },
                {
                    "args": "mult_0_right, iterate op ({2 * 0..2 * 0 + 1}) f = op (f (2 * 0)) (f (2 * 0 + 1))",
                    "id": "1.25",
                    "prevs": [
                        "1.24"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m = 0 ⊢ iterate op ({2 * 0..2 * 0 + 1}) f = op (f (2 * 0)) (f (2 * 0 + 1))"
                },
                {
                    "args": "iterate op ({2 * 0..2 * 0 + 1}) f = iterate op ({0}) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "1.26",
                    "prevs": [
                        "1.1",
                        "1.25"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m = 0 ⊢ iterate op ({2 * 0..2 * 0 + 1}) f = iterate op ({0}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "iterate op ({2 * m..2 * 0 + 1}) f = iterate op ({0}) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "1.27",
                    "prevs": [
                        "1.0",
                        "1.26"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m = 0 ⊢ iterate op ({2 * m..2 * 0 + 1}) f = iterate op ({0}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "if_P, iterate op ({2 * m..2 * 0 + 1}) f = iterate op (if m = 0 then {0} else ∅) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "1.28",
                    "prevs": [
                        "1.27",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m = 0 ⊢ iterate op ({2 * m..2 * 0 + 1}) f = iterate op (if m = 0 then {0} else ∅) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "",
                    "id": "1.29",
                    "prevs": [
                        "1.0",
                        "1.28"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ m = 0 ⟶ iterate op ({2 * m..2 * 0 + 1}) f = iterate op (if m = 0 then {0} else ∅) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ ¬(m = 0) ⟶ iterate op ({2 * m..2 * 0 + 1}) f = iterate op (if m = 0 then {0} else ∅) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "¬(m = 0)",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(m = 0) ⊢ ¬(m = 0)"
                },
                {
                    "args": "2 * 0 + 1 < 2 * m",
                    "id": "2.1",
                    "prevs": [
                        "2.0"
                    ],
                    "rule": "z3",
                    "th": "¬(m = 0) ⊢ 2 * 0 + 1 < 2 * m"
                },
                {
                    "args": "natseg_empty, {2 * m..2 * 0 + 1} = ∅",
                    "id": "2.2",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ¬(m = 0) ⊢ {2 * m..2 * 0 + 1} = ∅"
                },
                {
                    "args": "iterate_empty, {f: λi. op (f (2 * i)) (f (2 * i + 1))}",
                    "id": "2.3",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ (λi. op (f (2 * i)) (f (2 * i + 1))) = neutral op"
                },
                {
                    "args": "iterate_empty, {f: f, op: op}",
                    "id": "2.4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "iterate op ∅ f = iterate op ∅ (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "2.5",
                    "prevs": [
                        "2.3",
                        "2.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, ¬(m = 0) ⊢ iterate op ∅ f = iterate op ∅ (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "iterate op ({2 * m..2 * 0 + 1}) f = iterate op ∅ (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "2.6",
                    "prevs": [
                        "2.2",
                        "2.5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, ¬(m = 0) ⊢ iterate op ({2 * m..2 * 0 + 1}) f = iterate op ∅ (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "if_not_P, iterate op ({2 * m..2 * 0 + 1}) f = iterate op (if m = 0 then {0} else ∅) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "2.7",
                    "prevs": [
                        "2.6",
                        "2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ¬(m = 0) ⊢ iterate op ({2 * m..2 * 0 + 1}) f = iterate op (if m = 0 then {0} else ∅) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "",
                    "id": "2.8",
                    "prevs": [
                        "2.0",
                        "2.7"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ ¬(m = 0) ⟶ iterate op ({2 * m..2 * 0 + 1}) f = iterate op (if m = 0 then {0} else ∅) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "classical_cases",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ iterate op ({2 * m..2 * 0 + 1}) f = iterate op (if m = 0 then {0} else ∅) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "natseg_0, iterate op ({2 * m..2 * 0 + 1}) f = iterate op ({m..0}) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op ⊢ iterate op ({2 * m..2 * 0 + 1}) f = iterate op ({m..0}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ ∀n. iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⟶ iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "n, nat",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR n"
                },
                {
                    "args": "iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "5.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "",
                    "id": "5.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ m ≤ Suc n ⟶ iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "m ≤ Suc n",
                    "id": "5.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ Suc n ⊢ m ≤ Suc n"
                },
                {
                    "args": "add_1_right, 2 * Suc n + 1 = Suc (2 * Suc n)",
                    "id": "5.2.1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ 2 * Suc n + 1 = Suc (2 * Suc n)"
                },
                {
                    "args": "iterate_natseg_Suc, {f: f, m: 2 * m, n: 2 * Suc n}",
                    "id": "5.2.2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({2 * m..Suc (2 * Suc n)}) f = (if 2 * m ≤ Suc (2 * Suc n) then op (iterate op ({2 * m..2 * Suc n}) f) (f (Suc (2 * Suc n))) else iterate op ({2 * m..2 * Suc n}) f)"
                },
                {
                    "args": "less_eq_refl, {n: (2::nat)}",
                    "id": "5.2.3",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (2::nat) ≤ 2"
                },
                {
                    "args": "le_mult2",
                    "id": "5.2.4",
                    "prevs": [
                        "5.2.3",
                        "5.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ 2 * m ≤ 2 * Suc n"
                },
                {
                    "args": "disjI2, {A: 2 * m = Suc (2 * Suc n), B: 2 * m ≤ 2 * Suc n}",
                    "id": "5.2.5",
                    "prevs": [
                        "5.2.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ 2 * m = Suc (2 * Suc n) ∨ 2 * m ≤ 2 * Suc n"
                },
                {
                    "args": "nat_less_eq_def_2, 2 * m ≤ Suc (2 * Suc n)",
                    "id": "5.2.6",
                    "prevs": [
                        "5.2.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ 2 * m ≤ Suc (2 * Suc n)"
                },
                {
                    "args": "if_P",
                    "id": "5.2.7",
                    "prevs": [
                        "5.2.2",
                        "5.2.6"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ iterate op ({2 * m..Suc (2 * Suc n)}) f = op (iterate op ({2 * m..2 * Suc n}) f) (f (Suc (2 * Suc n)))"
                },
                {
                    "args": "2 * (n + 1) = 2 * n + 1 + 1",
                    "id": "5.2.8",
                    "prevs": [],
                    "rule": "nat_norm",
                    "th": "⊢ 2 * (n + 1) = 2 * n + 1 + 1"
                },
                {
                    "args": "add_1_right, 2 * Suc n = Suc (2 * n + 1)",
                    "id": "5.2.9",
                    "prevs": [
                        "5.2.8"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ 2 * Suc n = Suc (2 * n + 1)"
                },
                {
                    "args": "iterate op ({2 * m..2 * Suc n}) f = iterate op ({2 * m..Suc (2 * n + 1)}) f",
                    "id": "5.2.10",
                    "prevs": [
                        "5.2.9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ iterate op ({2 * m..2 * Suc n}) f = iterate op ({2 * m..Suc (2 * n + 1)}) f"
                },
                {
                    "args": "iterate_natseg_Suc, {f: f, m: 2 * m, n: 2 * n + 1}",
                    "id": "5.2.11",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({2 * m..Suc (2 * n + 1)}) f = (if 2 * m ≤ Suc (2 * n + 1) then op (iterate op ({2 * m..2 * n + 1}) f) (f (Suc (2 * n + 1))) else iterate op ({2 * m..2 * n + 1}) f)"
                },
                {
                    "args": "add_1_right",
                    "id": "5.2.12",
                    "prevs": [
                        "5.2.0"
                    ],
                    "rule": "rewrite_fact_sym",
                    "th": "m ≤ Suc n ⊢ m ≤ n + 1"
                },
                {
                    "args": "2 * m ≤ 2 * n + 1 + 1",
                    "id": "5.2.13",
                    "prevs": [
                        "5.2.12"
                    ],
                    "rule": "z3",
                    "th": "m ≤ Suc n ⊢ 2 * m ≤ 2 * n + 1 + 1"
                },
                {
                    "args": "add_1_right, 2 * m ≤ Suc (2 * n + 1)",
                    "id": "5.2.14",
                    "prevs": [
                        "5.2.13"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ 2 * m ≤ Suc (2 * n + 1)"
                },
                {
                    "args": "if_P",
                    "id": "5.2.15",
                    "prevs": [
                        "5.2.11",
                        "5.2.14"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ iterate op ({2 * m..Suc (2 * n + 1)}) f = op (iterate op ({2 * m..2 * n + 1}) f) (f (Suc (2 * n + 1)))"
                },
                {
                    "args": "iterate_natseg_Suc, {f: λi. op (f (2 * i)) (f (2 * i + 1)), m: m, n: n}",
                    "id": "5.2.16",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1))) = (if m ≤ Suc n then op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (2 * Suc n)) (f (2 * Suc n + 1))) else iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))))"
                },
                {
                    "args": "if_P",
                    "id": "5.2.17",
                    "prevs": [
                        "5.2.16",
                        "5.2.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op, m ≤ Suc n ⊢ iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1))) = op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (2 * Suc n)) (f (2 * Suc n + 1)))"
                },
                {
                    "args": "monoidal_ac",
                    "id": "5.2.18",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op (neutral op) a = a) ∧ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "5.2.19",
                    "prevs": [
                        "5.2.18"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. op a (neutral op) = a) ∧ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "5.2.20",
                    "prevs": [
                        "5.2.19"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. op a b = op b a) ∧ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD2",
                    "id": "5.2.21",
                    "prevs": [
                        "5.2.20"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ (∀a. ∀b. ∀c. op (op a b) c = op a (op b c)) ∧ (∀a. ∀b. ∀c. op a (op b c) = op b (op a c))"
                },
                {
                    "args": "conjD1",
                    "id": "5.2.22",
                    "prevs": [
                        "5.2.21"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ ∀a. ∀b. ∀c. op (op a b) c = op a (op b c)"
                },
                {
                    "args": "op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (Suc (2 * n + 1))) (f (Suc (2 * Suc n)))) = op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (2 * Suc n)) (f (Suc (2 * Suc n))))",
                    "id": "5.2.23",
                    "prevs": [
                        "5.2.9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (Suc (2 * n + 1))) (f (Suc (2 * Suc n)))) = op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (2 * Suc n)) (f (Suc (2 * Suc n))))"
                },
                {
                    "args": "op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (Suc (2 * n + 1))) (f (Suc (2 * Suc n)))) = op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (2 * Suc n)) (f (2 * Suc n + 1)))",
                    "id": "5.2.24",
                    "prevs": [
                        "5.2.1",
                        "5.2.23"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (Suc (2 * n + 1))) (f (Suc (2 * Suc n)))) = op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (2 * Suc n)) (f (2 * Suc n + 1)))"
                },
                {
                    "args": "op (op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (f (Suc (2 * n + 1)))) (f (Suc (2 * Suc n))) = op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (2 * Suc n)) (f (2 * Suc n + 1)))",
                    "id": "5.2.25",
                    "prevs": [
                        "5.2.22",
                        "5.2.24"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ op (op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (f (Suc (2 * n + 1)))) (f (Suc (2 * Suc n))) = op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (2 * Suc n)) (f (2 * Suc n + 1)))"
                },
                {
                    "args": "op (op (iterate op ({2 * m..2 * n + 1}) f) (f (Suc (2 * n + 1)))) (f (Suc (2 * Suc n))) = op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (2 * Suc n)) (f (2 * Suc n + 1)))",
                    "id": "5.2.26",
                    "prevs": [
                        "5.1",
                        "5.2.25"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ op (op (iterate op ({2 * m..2 * n + 1}) f) (f (Suc (2 * n + 1)))) (f (Suc (2 * Suc n))) = op (iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))) (op (f (2 * Suc n)) (f (2 * Suc n + 1)))"
                },
                {
                    "args": "op (op (iterate op ({2 * m..2 * n + 1}) f) (f (Suc (2 * n + 1)))) (f (Suc (2 * Suc n))) = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "5.2.27",
                    "prevs": [
                        "5.2.17",
                        "5.2.26"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ op (op (iterate op ({2 * m..2 * n + 1}) f) (f (Suc (2 * n + 1)))) (f (Suc (2 * Suc n))) = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "op (iterate op ({2 * m..Suc (2 * n + 1)}) f) (f (Suc (2 * Suc n))) = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "5.2.28",
                    "prevs": [
                        "5.2.15",
                        "5.2.27"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ op (iterate op ({2 * m..Suc (2 * n + 1)}) f) (f (Suc (2 * Suc n))) = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "op (iterate op ({2 * m..2 * Suc n}) f) (f (Suc (2 * Suc n))) = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "5.2.29",
                    "prevs": [
                        "5.2.10",
                        "5.2.28"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ op (iterate op ({2 * m..2 * Suc n}) f) (f (Suc (2 * Suc n))) = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "iterate op ({2 * m..Suc (2 * Suc n)}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "5.2.30",
                    "prevs": [
                        "5.2.7",
                        "5.2.29"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ iterate op ({2 * m..Suc (2 * Suc n)}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "5.2.31",
                    "prevs": [
                        "5.2.1",
                        "5.2.30"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, m ≤ Suc n, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "",
                    "id": "5.2.32",
                    "prevs": [
                        "5.2.0",
                        "5.2.31"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ m ≤ Suc n ⟶ iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "",
                    "id": "5.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ ¬(m ≤ Suc n) ⟶ iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "¬(m ≤ Suc n)",
                    "id": "5.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(m ≤ Suc n) ⊢ ¬(m ≤ Suc n)"
                },
                {
                    "args": "not_le",
                    "id": "5.3.1",
                    "prevs": [
                        "5.3.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(m ≤ Suc n) ⊢ Suc n < m"
                },
                {
                    "args": "natseg_emptyI",
                    "id": "5.3.2",
                    "prevs": [
                        "5.3.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(m ≤ Suc n) ⊢ {m..Suc n} = ∅"
                },
                {
                    "args": "iterate_empty, {f: λi. op (f (2 * i)) (f (2 * i + 1))}",
                    "id": "5.3.3",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ∅ (λi. op (f (2 * i)) (f (2 * i + 1))) = neutral op"
                },
                {
                    "args": "add_1_right",
                    "id": "5.3.4",
                    "prevs": [
                        "5.3.1"
                    ],
                    "rule": "rewrite_fact_sym",
                    "th": "¬(m ≤ Suc n) ⊢ n + 1 < m"
                },
                {
                    "args": "2 * (n + 1) + 1 < 2 * m",
                    "id": "5.3.5",
                    "prevs": [
                        "5.3.4"
                    ],
                    "rule": "z3",
                    "th": "¬(m ≤ Suc n) ⊢ 2 * (n + 1) + 1 < 2 * m"
                },
                {
                    "args": "add_1_right, 2 * Suc n + 1 < 2 * m",
                    "id": "5.3.6",
                    "prevs": [
                        "5.3.5"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "monoidal op, ¬(m ≤ Suc n), iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ 2 * Suc n + 1 < 2 * m"
                },
                {
                    "args": "natseg_empty, {2 * m..2 * Suc n + 1} = ∅",
                    "id": "5.3.7",
                    "prevs": [
                        "5.3.6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ¬(m ≤ Suc n), iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ {2 * m..2 * Suc n + 1} = ∅"
                },
                {
                    "args": "iterate_empty, {f: f, op: op}",
                    "id": "5.3.8",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, ¬(m ≤ Suc n), iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ iterate op ∅ f = neutral op"
                },
                {
                    "args": "iterate op ({2 * m..2 * Suc n + 1}) f = neutral op",
                    "id": "5.3.9",
                    "prevs": [
                        "5.3.7",
                        "5.3.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, ¬(m ≤ Suc n), iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ iterate op ({2 * m..2 * Suc n + 1}) f = neutral op"
                },
                {
                    "args": "iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ∅ (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "5.3.10",
                    "prevs": [
                        "5.3.3",
                        "5.3.9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, ¬(m ≤ Suc n), iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ∅ (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "id": "5.3.11",
                    "prevs": [
                        "5.3.2",
                        "5.3.10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, ¬(m ≤ Suc n), iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "",
                    "id": "5.3.12",
                    "prevs": [
                        "5.3.0",
                        "5.3.11"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ ¬(m ≤ Suc n) ⟶ iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "classical_cases",
                    "id": "5.4",
                    "prevs": [
                        "5.2",
                        "5.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⊢ iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "",
                    "id": "5.5",
                    "prevs": [
                        "5.0",
                        "5.1",
                        "5.4"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ ∀n. iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))) ⟶ iterate op ({2 * m..2 * Suc n + 1}) f = iterate op ({m..Suc n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "nat_induct, {P: λn. iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1))), x: n}",
                    "id": "6",
                    "prevs": [
                        "4",
                        "5"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op ({2 * m..2 * n + 1}) f = iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ iterate op ({2 * m..2 * n + 1}) f = ",
                "   iterate op ({m..n}) (λi. op (f (2 * i)) (f (2 * i + 1)))"
            ],
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "induction",
                    "theorem": "nat_induct",
                    "var": "n"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_0"
                },
                {
                    "case": "m = 0",
                    "goal_id": "1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "apply_forward_step",
                    "param_f": "(λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "param_x": "(0::nat)",
                    "theorem": "iterate_sing"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "mult_0_right"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_one_def"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_plus_def_1"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_Suc"
                },
                {
                    "goal": "0 ≤ Suc 0",
                    "goal_id": "1.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "apply_backward_step",
                    "theorem": "le_0"
                },
                {
                    "fact_ids": [
                        "1.2"
                    ],
                    "goal_id": "1.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "1.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_sing"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.3",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_s": "{(0::nat)}",
                    "param_x": "Suc 0",
                    "theorem": "iterate_insert"
                },
                {
                    "goal": "finite ({(0::nat)})",
                    "goal_id": "1.4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_insert"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_empty"
                },
                {
                    "fact_ids": [
                        "1.3",
                        "1.5"
                    ],
                    "goal_id": "1.6",
                    "method_name": "apply_fact"
                },
                {
                    "goal": "~(Suc 0 ∈ {0})",
                    "goal_id": "1.7",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "1.7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "de_morgan_thm2"
                },
                {
                    "goal_id": "1.7",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "1.7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal_id": "1.7",
                    "method_name": "apply_backward_step",
                    "theorem": "nat_zero_Suc_neq"
                },
                {
                    "goal_id": "1.9",
                    "method_name": "apply_backward_step",
                    "theorem": "member_empty"
                },
                {
                    "fact_ids": [
                        "1.6",
                        "1.12"
                    ],
                    "goal_id": "1.13",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "1.13"
                    ],
                    "goal_id": "1.14",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.14",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "(0::nat)",
                    "theorem": "iterate_sing"
                },
                {
                    "fact_ids": [
                        "1.14"
                    ],
                    "goal_id": "1.15",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.15",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "monoidal_def"
                },
                {
                    "fact_ids": [
                        "1.15"
                    ],
                    "goal_id": "1.16",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1.16"
                    ],
                    "goal_id": "1.17",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal": "{2 * m..2 * 0 + 1} = {}",
                    "goal_id": "2.1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_empty"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "2.2"
                    ],
                    "goal_id": "2.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.3",
                    "method_name": "apply_forward_step",
                    "param_f": "(λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "2.3"
                    ],
                    "goal_id": "2.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.4",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction",
                    "names": "n"
                },
                {
                    "case": "m <= Suc n",
                    "goal_id": "5.2",
                    "method_name": "cases"
                },
                {
                    "goal_id": "5.2",
                    "method_name": "introduction"
                },
                {
                    "goal": "2 * Suc n + 1 = Suc (2 * Suc n)",
                    "goal_id": "5.2.1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "add_1_right"
                },
                {
                    "fact_ids": [
                        "5.2.1"
                    ],
                    "goal_id": "5.2.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "5.2.2",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_m": "2 * m",
                    "param_n": "2 * Suc n",
                    "theorem": "iterate_natseg_Suc"
                },
                {
                    "goal": "2 * m ≤ Suc (2 * Suc n)",
                    "goal_id": "5.2.3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5.2.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_less_eq_def_2"
                },
                {
                    "goal_id": "5.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "5.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "le_mult2"
                },
                {
                    "goal_id": "5.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "less_eq_refl"
                },
                {
                    "fact_ids": [
                        "5.2.2",
                        "5.2.6"
                    ],
                    "goal_id": "5.2.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "5.2.7"
                    ],
                    "goal_id": "5.2.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "2 * Suc n = Suc(2 * n + 1)",
                    "goal_id": "5.2.8",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5.2.8",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "add_1_right"
                },
                {
                    "goal_id": "5.2.8",
                    "method_name": "nat_norm"
                },
                {
                    "goal": "iterate op ({2 * m..2 * Suc n}) f = iterate op ({2 * m..Suc (2 * n + 1)}) f",
                    "goal_id": "5.2.10",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "5.2.9"
                    ],
                    "goal_id": "5.2.10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "5.2.10"
                    ],
                    "goal_id": "5.2.11",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "5.2.11",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_m": "2 * m",
                    "param_n": "2 * n + 1",
                    "theorem": "iterate_natseg_Suc"
                },
                {
                    "goal": "2 * m ≤ Suc (2 * n + 1)",
                    "goal_id": "5.2.12",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5.2.12",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "add_1_right"
                },
                {
                    "fact_ids": [
                        "5.2.0"
                    ],
                    "goal_id": "5.2.12",
                    "method_name": "rewrite_fact",
                    "sym": "true",
                    "theorem": "add_1_right"
                },
                {
                    "fact_ids": [
                        "5.2.12"
                    ],
                    "goal_id": "5.2.13",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "5.2.11",
                        "5.2.14"
                    ],
                    "goal_id": "5.2.15",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "5.2.15"
                    ],
                    "goal_id": "5.2.16",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "5.2.16",
                    "method_name": "apply_forward_step",
                    "param_f": "(λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "param_m": "m",
                    "param_n": "n",
                    "theorem": "iterate_natseg_Suc"
                },
                {
                    "fact_ids": [
                        "5.2.16",
                        "5.2.0"
                    ],
                    "goal_id": "5.2.17",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "5.2.17"
                    ],
                    "goal_id": "5.2.18",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "5.1"
                    ],
                    "goal_id": "5.2.18",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "5.2.18",
                    "method_name": "apply_forward_step",
                    "theorem": "monoidal_ac"
                },
                {
                    "fact_ids": [
                        "5.2.18"
                    ],
                    "goal_id": "5.2.19",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "5.2.19"
                    ],
                    "goal_id": "5.2.20",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "5.2.20"
                    ],
                    "goal_id": "5.2.21",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "5.2.21"
                    ],
                    "goal_id": "5.2.22",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "5.2.22"
                    ],
                    "goal_id": "5.2.23",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "5.2.1"
                    ],
                    "goal_id": "5.2.23",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "5.2.9"
                    ],
                    "goal_id": "5.2.23",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "5.3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "5.3.0"
                    ],
                    "goal_id": "5.3.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "not_le"
                },
                {
                    "goal": "{m..Suc n} = {}",
                    "goal_id": "5.3.2",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "5.3.1"
                    ],
                    "goal_id": "5.3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "natseg_emptyI"
                },
                {
                    "fact_ids": [
                        "5.3.2"
                    ],
                    "goal_id": "5.3.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "5.3.3",
                    "method_name": "apply_forward_step",
                    "param_f": "(λi. op (f (2 * i)) (f (2 * i + 1)))",
                    "theorem": "iterate_empty"
                },
                {
                    "fact_ids": [
                        "5.3.3"
                    ],
                    "goal_id": "5.3.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "{2 * m..2 * Suc n + 1} = {}",
                    "goal_id": "5.3.4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5.3.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_empty"
                },
                {
                    "goal_id": "5.3.4",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "add_1_right"
                },
                {
                    "fact_ids": [
                        "5.3.1"
                    ],
                    "goal_id": "5.3.4",
                    "method_name": "rewrite_fact",
                    "sym": "true",
                    "theorem": "add_1_right"
                },
                {
                    "fact_ids": [
                        "5.3.4"
                    ],
                    "goal_id": "5.3.5",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "5.3.7"
                    ],
                    "goal_id": "5.3.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "5.3.8",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ 'a",
                "m": "nat",
                "n": "nat",
                "op": "'a ⇒ 'a ⇒ 'a"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "iterate_reflect",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal op",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "monoidal op ⊢ monoidal op"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ {m..n} = ∅ ⟶ iterate op ({m..n}) x = (if {m..n} = ∅ then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "{m..n} = ∅",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "{m..n} = ∅ ⊢ {m..n} = ∅"
                },
                {
                    "args": "iterate_empty, {f: x, op: op}",
                    "id": "1.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op, {m..n} = ∅ ⊢ iterate op ∅ x = neutral op"
                },
                {
                    "args": "iterate op ({m..n}) x = neutral op",
                    "id": "1.2",
                    "prevs": [
                        "1.0",
                        "1.1"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "monoidal op, {m..n} = ∅ ⊢ iterate op ({m..n}) x = neutral op"
                },
                {
                    "args": "if_P, iterate op ({m..n}) x = (if {m..n} = ∅ then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))",
                    "id": "1.3",
                    "prevs": [
                        "1.2",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, {m..n} = ∅ ⊢ iterate op ({m..n}) x = (if {m..n} = ∅ then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "",
                    "id": "1.4",
                    "prevs": [
                        "1.0",
                        "1.3"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ {m..n} = ∅ ⟶ iterate op ({m..n}) x = (if {m..n} = ∅ then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op ⊢ ¬({m..n} = ∅) ⟶ iterate op ({m..n}) x = (if {m..n} = ∅ then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "¬({m..n} = ∅)",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬({m..n} = ∅) ⊢ ¬({m..n} = ∅)"
                },
                {
                    "args": "natseg_empty",
                    "id": "2.1",
                    "prevs": [
                        "2.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬({m..n} = ∅) ⊢ ¬(n < m)"
                },
                {
                    "args": "not_lt",
                    "id": "2.2",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬({m..n} = ∅) ⊢ m ≤ n"
                },
                {
                    "args": "iterate_image, {f: λi. n - i, g: x, s: {0..n - m}}",
                    "id": "2.3",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "monoidal op ⊢ (∀x1. ∀y. x1 ∈ {0..n - m} ⟶ y ∈ {0..n - m} ⟶ n - x1 = n - y ⟶ x1 = y) ⟶ iterate op (image (λi. n - i) ({0..n - m})) x = iterate op ({0..n - m}) (x ∘ (λi. n - i))"
                },
                {
                    "args": "comp_fun_def",
                    "id": "2.4",
                    "prevs": [
                        "2.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ (∀x1. ∀y. x1 ∈ {0..n - m} ⟶ y ∈ {0..n - m} ⟶ n - x1 = n - y ⟶ x1 = y) ⟶ iterate op (image (λi. n - i) ({0..n - m})) x = iterate op ({0..n - m}) (λx1. x (n - x1))"
                },
                {
                    "args": "member_natseg",
                    "id": "2.5",
                    "prevs": [
                        "2.4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "monoidal op ⊢ (∀x1. ∀y. 0 ≤ x1 ∧ x1 ≤ n - m ⟶ 0 ≤ y ∧ y ≤ n - m ⟶ n - x1 = n - y ⟶ x1 = y) ⟶ iterate op (image (λi. n - i) ({0..n - m})) x = iterate op ({0..n - m}) (λx1. x (n - x1))"
                },
                {
                    "args": "∀x. (∃x1. x = n - x1 ∧ 0 ≤ x1 ∧ x1 ≤ n - m) ⟷ m ≤ x ∧ x ≤ n",
                    "id": "2.6",
                    "prevs": [
                        "2.2"
                    ],
                    "rule": "z3",
                    "th": "¬({m..n} = ∅) ⊢ ∀x. (∃x1. x = n - x1 ∧ 0 ≤ x1 ∧ x1 ≤ n - m) ⟷ m ≤ x ∧ x ≤ n"
                },
                {
                    "args": "member_natseg, ∀x. (∃x1. x = n - x1 ∧ x1 ∈ {0..n - m}) ⟷ x ∈ {m..n}",
                    "id": "2.7",
                    "prevs": [
                        "2.6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ¬({m..n} = ∅) ⊢ ∀x. (∃x1. x = n - x1 ∧ x1 ∈ {0..n - m}) ⟷ x ∈ {m..n}"
                },
                {
                    "args": "in_image, ∀x. x ∈ image (λi. n - i) ({0..n - m}) ⟷ x ∈ {m..n}",
                    "id": "2.8",
                    "prevs": [
                        "2.7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ¬({m..n} = ∅) ⊢ ∀x. x ∈ image (λi. n - i) ({0..n - m}) ⟷ x ∈ {m..n}"
                },
                {
                    "args": "member_ext",
                    "id": "2.9",
                    "prevs": [
                        "2.8"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op, ¬({m..n} = ∅) ⊢ image (λi. n - i) ({0..n - m}) = {m..n}"
                },
                {
                    "args": "",
                    "id": "2.10",
                    "prevs": [
                        "2.9",
                        "2.5"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "monoidal op, ¬({m..n} = ∅) ⊢ (∀x1. ∀y. 0 ≤ x1 ∧ x1 ≤ n - m ⟶ 0 ≤ y ∧ y ≤ n - m ⟶ n - x1 = n - y ⟶ x1 = y) ⟶ iterate op ({m..n}) x = iterate op ({0..n - m}) (λx1. x (n - x1))"
                },
                {
                    "args": "",
                    "id": "2.11",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "monoidal op, ¬({m..n} = ∅) ⊢ ∀x. ∀y. 0 ≤ x ∧ x ≤ n - m ⟶ 0 ≤ y ∧ y ≤ n - m ⟶ n - x = n - y ⟶ x = y"
                },
                {
                    "args": "x, nat",
                    "id": "2.11.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "y, nat",
                    "id": "2.11.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "0 ≤ x ∧ x ≤ n - m",
                    "id": "2.11.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "0 ≤ x ∧ x ≤ n - m ⊢ 0 ≤ x ∧ x ≤ n - m"
                },
                {
                    "args": "0 ≤ y ∧ y ≤ n - m",
                    "id": "2.11.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "0 ≤ y ∧ y ≤ n - m ⊢ 0 ≤ y ∧ y ≤ n - m"
                },
                {
                    "args": "n - x = n - y",
                    "id": "2.11.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "n - x = n - y ⊢ n - x = n - y"
                },
                {
                    "args": "x = y",
                    "id": "2.11.5",
                    "prevs": [
                        "2.11.2",
                        "2.11.3",
                        "2.11.4"
                    ],
                    "rule": "z3",
                    "th": "n - x = n - y, 0 ≤ x ∧ x ≤ n - m, 0 ≤ y ∧ y ≤ n - m ⊢ x = y"
                },
                {
                    "args": "",
                    "id": "2.11.6",
                    "prevs": [
                        "2.11.0",
                        "2.11.1",
                        "2.11.2",
                        "2.11.3",
                        "2.11.4",
                        "2.11.5"
                    ],
                    "rule": "intros",
                    "th": "monoidal op, ¬({m..n} = ∅) ⊢ ∀x. ∀y. 0 ≤ x ∧ x ≤ n - m ⟶ 0 ≤ y ∧ y ≤ n - m ⟶ n - x = n - y ⟶ x = y"
                },
                {
                    "args": "",
                    "id": "2.12",
                    "prevs": [
                        "2.10",
                        "2.11"
                    ],
                    "rule": "apply_fact",
                    "th": "monoidal op, ¬({m..n} = ∅) ⊢ iterate op ({m..n}) x = iterate op ({0..n - m}) (λx1. x (n - x1))"
                },
                {
                    "args": "if_not_P, iterate op ({m..n}) x = (if {m..n} = ∅ then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))",
                    "id": "2.13",
                    "prevs": [
                        "2.12",
                        "2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "monoidal op, ¬({m..n} = ∅) ⊢ iterate op ({m..n}) x = (if {m..n} = ∅ then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "",
                    "id": "2.14",
                    "prevs": [
                        "2.0",
                        "2.13"
                    ],
                    "rule": "intros",
                    "th": "monoidal op ⊢ ¬({m..n} = ∅) ⟶ iterate op ({m..n}) x = (if {m..n} = ∅ then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "classical_cases",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "monoidal op ⊢ iterate op ({m..n}) x = (if {m..n} = ∅ then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "natseg_empty, iterate op ({m..n}) x = (if n < m then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "monoidal op ⊢ iterate op ({m..n}) x = (if n < m then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal op ⟶ iterate op ({m..n}) x = (if n < m then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))"
                }
            ],
            "prop": [
                "monoidal op ",
                "⟶ iterate op ({m..n}) x = ",
                "   (if n < m then neutral op else iterate op ({0..n - m}) (λi. x (n - i)))"
            ],
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "natseg_empty"
                },
                {
                    "case": "{m..n} = ∅",
                    "goal_id": "1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "natseg_empty"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "not_lt"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.3",
                    "method_name": "apply_forward_step",
                    "param_f": "(λi. (n - i))",
                    "param_g": "x",
                    "param_s": "{0..n - m}",
                    "theorem": "iterate_image"
                },
                {
                    "fact_ids": [
                        "2.3"
                    ],
                    "goal_id": "2.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "comp_fun_def"
                },
                {
                    "fact_ids": [
                        "2.4"
                    ],
                    "goal_id": "2.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal": "image (λi. n - i) ({0..n - m}) = {m..n}",
                    "goal_id": "2.6",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2.6",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "2.6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "goal_id": "2.6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "fact_ids": [
                        "2.2"
                    ],
                    "goal_id": "2.6",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "2.9",
                        "2.5"
                    ],
                    "goal_id": "2.10",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "2.10"
                    ],
                    "goal_id": "2.11",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2.11",
                    "method_name": "introduction",
                    "names": "x,y"
                },
                {
                    "fact_ids": [
                        "2.11.2",
                        "2.11.3",
                        "2.11.4"
                    ],
                    "goal_id": "2.11.5",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat",
                "op": "'a ⇒ 'a ⇒ 'a",
                "x": "nat ⇒ 'a"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum",
            "prop": "(nsum::'a set ⇒ ('a ⇒ nat) ⇒ nat) = iterate plus",
            "ty": "def",
            "type": "'a set ⇒ ('a ⇒ nat) ⇒ nat"
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "neutral_nat_add",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "theI, {P: λx::nat. ∀y::nat. x = 0 ∧ x = 0, a: (0::nat)}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (∀y::nat. (0::nat) = 0 ∧ (0::nat) = 0) ⟶ (∀x::nat. (∀y::nat. x = 0 ∧ x = 0) ⟶ x = 0) ⟶ (∀y::nat. (THE x::nat. ∀y1::nat. x = 0 ∧ x = 0) = 0 ∧ (THE x::nat. ∀y1::nat. x = 0 ∧ x = 0) = 0)"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀y::nat. (0::nat) = 0 ∧ (0::nat) = 0"
                },
                {
                    "args": "y, nat",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "eq_refl, {x: (0::nat)}",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (0::nat) = 0"
                },
                {
                    "args": "conjI",
                    "id": "1.2",
                    "prevs": [
                        "1.1",
                        "1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ (0::nat) = 0 ∧ (0::nat) = 0"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [
                        "1.0",
                        "1.2"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀y::nat. (0::nat) = 0 ∧ (0::nat) = 0"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_fact",
                    "th": "⊢ (∀x::nat. (∀y::nat. x = 0 ∧ x = 0) ⟶ x = 0) ⟶ (∀y::nat. (THE x::nat. ∀y1::nat. x = 0 ∧ x = 0) = 0 ∧ (THE x::nat. ∀y1::nat. x = 0 ∧ x = 0) = 0)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x::nat. (∀y::nat. x = 0 ∧ x = 0) ⟶ x = 0"
                },
                {
                    "args": "x, nat",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "∀y::nat. x = 0 ∧ x = 0",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀y::nat. x = 0 ∧ x = 0 ⊢ ∀y::nat. x = 0 ∧ x = 0"
                },
                {
                    "args": "x",
                    "id": "3.2",
                    "prevs": [
                        "3.1"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "∀y::nat. x = 0 ∧ x = 0 ⊢ x = 0 ∧ x = 0"
                },
                {
                    "args": "conjD1",
                    "id": "3.3",
                    "prevs": [
                        "3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀y::nat. x = 0 ∧ x = 0 ⊢ x = 0"
                },
                {
                    "args": "",
                    "id": "3.4",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x::nat. (∀y::nat. x = 0 ∧ x = 0) ⟶ x = 0"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "2",
                        "3"
                    ],
                    "rule": "apply_fact",
                    "th": "⊢ ∀y::nat. (THE x::nat. ∀y1::nat. x = 0 ∧ x = 0) = 0 ∧ (THE x::nat. ∀y1::nat. x = 0 ∧ x = 0) = 0"
                },
                {
                    "args": "THE x::nat. ∀y::nat. x = 0 ∧ x = 0",
                    "id": "5",
                    "prevs": [
                        "3",
                        "4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "⊢ (THE x::nat. ∀y::nat. x = 0 ∧ x = 0) = 0"
                },
                {
                    "args": "eq_add_lcancel_0, (THE x::nat. ∀y. y + x = y ∧ x = 0) = 0",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ (THE x::nat. ∀y. y + x = y ∧ x = 0) = 0"
                },
                {
                    "args": "add_comm, (THE x::nat. ∀y. x + y = y ∧ x = 0) = 0",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ (THE x::nat. ∀y. x + y = y ∧ x = 0) = 0"
                },
                {
                    "args": "eq_add_lcancel_0, (THE x::nat. ∀y. x + y = y ∧ y + x = y) = 0",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ (THE x::nat. ∀y. x + y = y ∧ y + x = y) = 0"
                },
                {
                    "args": "neutral_def, neutral plus = (0::nat)",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ neutral plus = (0::nat)"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "9"
                    ],
                    "rule": "intros",
                    "th": "⊢ neutral plus = (0::nat)"
                }
            ],
            "prop": "neutral plus = (0::nat)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_add_lcancel_0"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "add_comm"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_add_lcancel_0"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_forward_step",
                    "param_P": "(%x::nat. ∀y::nat. x = 0 ∧ x = 0)",
                    "param_a": "(0::nat)",
                    "theorem": "theI"
                },
                {
                    "goal": "(∀y::nat. (0::nat) = 0 ∧ (0::nat) = 0)",
                    "goal_id": "1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "y"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "0",
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_fact"
                },
                {
                    "goal": "(∀x::nat. (∀y::nat. x = 0 ∧ x = 0) ⟶ x = 0)",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "3.1"
                    ],
                    "goal_id": "3.2",
                    "method_name": "forall_elim",
                    "s": "x"
                },
                {
                    "fact_ids": [
                        "3.2"
                    ],
                    "goal_id": "3.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2",
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {}
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "monoidal_nat_add",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x::nat. ∀y. x + y = y + x",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x::nat. ∀y. x + y = y + x"
                },
                {
                    "args": "∀x::nat. ∀y. ∀z. x + (y + z) = x + y + z",
                    "id": "1",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x::nat. ∀y. ∀z. x + (y + z) = x + y + z"
                },
                {
                    "args": "∀x::nat. 0 + x = x",
                    "id": "2",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x::nat. 0 + x = x"
                },
                {
                    "args": "neutral_nat_add, ∀x::nat. neutral plus + x = x",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ ∀x::nat. neutral plus + x = x"
                },
                {
                    "args": "conjI",
                    "id": "4",
                    "prevs": [
                        "1",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ (∀x::nat. ∀y. ∀z. x + (y + z) = x + y + z) ∧ (∀x::nat. neutral plus + x = x)"
                },
                {
                    "args": "conjI",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ (∀x::nat. ∀y. x + y = y + x) ∧ (∀x::nat. ∀y. ∀z. x + (y + z) = x + y + z) ∧ (∀x::nat. neutral plus + x = x)"
                },
                {
                    "args": "monoidal_def, monoidal (plus::nat ⇒ nat ⇒ nat)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                }
            ],
            "prop": "monoidal (plus::nat ⇒ nat ⇒ nat)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "monoidal_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "1",
                    "method_name": "z3"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                },
                {
                    "goal_id": "2",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {}
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_degenerate",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)}))",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ ¬(finite ({x. x ∈ s ∧ ¬(f x = 0)}))"
                },
                {
                    "args": "if_not_P, (if finite ({x. x ∈ s ∧ ¬(f x = 0)}) then itset (λx. λa. f x + a) ({x. x ∈ s ∧ ¬(f x = 0)}) 0 else 0) = 0",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ (if finite ({x. x ∈ s ∧ ¬(f x = 0)}) then itset (λx. λa. f x + a) ({x. x ∈ s ∧ ¬(f x = 0)}) 0 else 0) = 0"
                },
                {
                    "args": "neutral_nat_add, (if finite ({x. x ∈ s ∧ ¬(f x = neutral plus)}) then itset (λx. λa. f x + a) ({x. x ∈ s ∧ ¬(f x = neutral plus)}) (neutral plus) else neutral plus) = 0",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ (if finite ({x. x ∈ s ∧ ¬(f x = neutral plus)}) then itset (λx. λa. f x + a) ({x. x ∈ s ∧ ¬(f x = neutral plus)}) (neutral plus) else neutral plus) = 0"
                },
                {
                    "args": "support_def, (if finite (support plus f s) then itset (λx. λa. f x + a) (support plus f s) (neutral plus) else neutral plus) = 0",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ (if finite (support plus f s) then itset (λx. λa. f x + a) (support plus f s) (neutral plus) else neutral plus) = 0"
                },
                {
                    "args": "iterate_def, iterate plus s f = 0",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ iterate plus s f = 0"
                },
                {
                    "args": "nsum_def, nsum s f = 0",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ nsum s f = 0"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⟶ nsum s f = 0"
                }
            ],
            "prop": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⟶ nsum s f = 0",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_empty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_nat_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_empty, {f: f, op: (plus::nat ⇒ nat ⇒ nat)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ∅ f = neutral plus"
                },
                {
                    "args": "neutral_nat_add, iterate plus ∅ f = 0",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "⊢ iterate plus ∅ f = 0"
                },
                {
                    "args": "nsum_def, nsum ∅ f = 0",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ∅ f = 0"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ∅ f = 0"
                }
            ],
            "prop": "nsum ∅ f = 0",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "neutral_nat_add"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_insert",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_insert, {f: f, op: (plus::nat ⇒ nat ⇒ nat), s: s, x: x}",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ iterate plus (insert x s) f = (if x ∈ s then iterate plus s f else f x + iterate plus s f)"
                },
                {
                    "args": "nsum_def, nsum (insert x s) f = (if x ∈ s then nsum s f else f x + nsum s f)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ nsum (insert x s) f = (if x ∈ s then nsum s f else f x + nsum s f)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ nsum (insert x s) f = (if x ∈ s then nsum s f else f x + nsum s f)"
                }
            ],
            "prop": "finite s ⟶ nsum (insert x s) f = (if x ∈ s then nsum s f else f x + nsum s f)",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_insert"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set",
                "x": "'a"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_union",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "disjoint s t",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "disjoint s t ⊢ disjoint s t"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_union, {f: f, op: (plus::nat ⇒ nat ⇒ nat), s: s, t: t}",
                    "id": "4",
                    "prevs": [
                        "3",
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, disjoint s t ⊢ iterate plus (s ∪ t) f = iterate plus s f + iterate plus t f"
                },
                {
                    "args": "nsum_def, nsum (s ∪ t) f = nsum s f + nsum t f",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, disjoint s t ⊢ nsum (s ∪ t) f = nsum s f + nsum t f"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ disjoint s t ⟶ nsum (s ∪ t) f = nsum s f + nsum t f"
                }
            ],
            "prop": "finite s ⟶ finite t ⟶ disjoint s t ⟶ nsum (s ∪ t) f = nsum s f + nsum t f",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_union"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_diff",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "t ⊆ s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "t ⊆ s ⊢ t ⊆ s"
                },
                {
                    "args": "∀x::nat. ∀y. ∀z. x + z = y ⟶ x = y - z",
                    "id": "2",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x::nat. ∀y. ∀z. x + z = y ⟶ x = y - z"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_diff, {f: f, op: (plus::nat ⇒ nat ⇒ nat), s: s, t: t}",
                    "id": "4",
                    "prevs": [
                        "3",
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, t ⊆ s ⊢ iterate plus (diff s t) f + iterate plus t f = iterate plus s f"
                },
                {
                    "args": "iterate plus (diff s t) f, iterate plus s f, iterate plus t f",
                    "id": "5",
                    "prevs": [
                        "2",
                        "4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, t ⊆ s ⊢ iterate plus (diff s t) f = iterate plus s f - iterate plus t f"
                },
                {
                    "args": "nsum_def, nsum (diff s t) f = nsum s f - nsum t f",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, t ⊆ s ⊢ nsum (diff s t) f = nsum s f - nsum t f"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ t ⊆ s ⟶ nsum (diff s t) f = nsum s f - nsum t f"
                }
            ],
            "prop": "finite s ⟶ t ⊆ s ⟶ nsum (diff s t) f = nsum s f - nsum t f",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal": "!x. !y. !z::nat. (x + z = y) --> (x = y - z)",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_diff"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_incl_excl",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_incl_excl, {f: f, op: (plus::nat ⇒ nat ⇒ nat), s: s, t: t}",
                    "id": "3",
                    "prevs": [
                        "2",
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t ⊢ iterate plus s f + iterate plus t f = iterate plus (s ∪ t) f + iterate plus (s ∩ t) f"
                },
                {
                    "args": "nsum_def, nsum s f + nsum t f = nsum (s ∪ t) f + nsum (s ∩ t) f",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t ⊢ nsum s f + nsum t f = nsum (s ∪ t) f + nsum (s ∩ t) f"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ nsum s f + nsum t f = nsum (s ∪ t) f + nsum (s ∩ t) f"
                }
            ],
            "prop": "finite s ⟶ finite t ⟶ nsum s f + nsum t f = nsum (s ∪ t) f + nsum (s ∩ t) f",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "fact_ids": [
                        "2",
                        "0",
                        "1"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_incl_excl"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_support",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "iterate_support, iterate plus (support plus f s) f = iterate plus s f",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ iterate plus (support plus f s) f = iterate plus s f"
                },
                {
                    "args": "nsum_def, nsum (support plus f s) f = nsum s f",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum (support plus f s) f = nsum s f"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum (support plus f s) f = nsum s f"
                }
            ],
            "prop": "nsum (support plus f s) f = nsum s f",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_support"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_add",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_op, {f: f, g: g, op: (plus::nat ⇒ nat ⇒ nat), s: s}",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ iterate plus s (λx. f x + g x) = iterate plus s f + iterate plus s g"
                },
                {
                    "args": "nsum_def, nsum s (λx. f x + g x) = nsum s f + nsum s g",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ nsum s (λx. f x + g x) = nsum s f + nsum s g"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ nsum s (λx. f x + g x) = nsum s f + nsum s g"
                }
            ],
            "prop": "finite s ⟶ nsum s (λx. f x + g x) = nsum s f + nsum s g",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_op"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "g": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_add_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite ({x. x ∈ s ∧ ¬(f x = 0)})",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⊢ finite ({x. x ∈ s ∧ ¬(f x = 0)})"
                },
                {
                    "args": "finite ({x. x ∈ s ∧ ¬(g x = 0)})",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite ({x. x ∈ s ∧ ¬(g x = 0)})"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "neutral_nat_add, finite ({x. x ∈ s ∧ ¬(f x = neutral plus)})",
                    "id": "3",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite ({x. x ∈ s ∧ ¬(f x = neutral plus)})"
                },
                {
                    "args": "support_def, finite (support plus f s)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite (support plus f s)"
                },
                {
                    "args": "neutral_nat_add, finite ({x. x ∈ s ∧ ¬(g x = neutral plus)})",
                    "id": "5",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite ({x. x ∈ s ∧ ¬(g x = neutral plus)})"
                },
                {
                    "args": "support_def, finite (support plus g s)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite (support plus g s)"
                },
                {
                    "args": "iterate_op_gen",
                    "id": "7",
                    "prevs": [
                        "2",
                        "4",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ iterate plus s (λx. f x + g x) = iterate plus s f + iterate plus s g"
                },
                {
                    "args": "nsum_def, nsum s (λx. f x + g x) = nsum s f + nsum s g",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ nsum s (λx. f x + g x) = nsum s f + nsum s g"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [
                        "0",
                        "1",
                        "8"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⟶ finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⟶ nsum s (λx. f x + g x) = nsum s f + nsum s g"
                }
            ],
            "prop": [
                "finite ({x. x ∈ s ∧ ¬(f x = 0)}) ",
                "⟶ finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⟶ nsum s (λx. f x + g x) = nsum s f + nsum s g"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_op_gen"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "g": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_eq_0",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. x ∈ s ⟶ f x = 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x = 0 ⊢ ∀x. x ∈ s ⟶ f x = 0"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "neutral_nat_add, ∀x. x ∈ s ⟶ f x = neutral plus",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x = 0 ⊢ ∀x. x ∈ s ⟶ f x = neutral plus"
                },
                {
                    "args": "iterate_eq_neutral",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x = 0 ⊢ iterate plus s f = neutral plus"
                },
                {
                    "args": "neutral_nat_add, iterate plus s f = 0",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "∀x. x ∈ s ⟶ f x = 0 ⊢ iterate plus s f = 0"
                },
                {
                    "args": "nsum_def, nsum s f = 0",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x = 0 ⊢ nsum s f = 0"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. x ∈ s ⟶ f x = 0) ⟶ nsum s f = 0"
                }
            ],
            "prop": "(∀x. x ∈ s ⟶ f x = 0) ⟶ nsum s f = 0",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "neutral_nat_add"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_eq_neutral"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_0",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x. x ∈ s ⟶ (0::nat) = 0"
                },
                {
                    "args": "x, 'a",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "eq_refl, {x: (0::nat)}",
                    "id": "0.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (0::nat) = 0"
                },
                {
                    "args": "",
                    "id": "0.3",
                    "prevs": [
                        "0.0",
                        "0.1",
                        "0.2"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. x ∈ s ⟶ (0::nat) = 0"
                },
                {
                    "args": "nsum_eq_0",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ nsum s (λx. 0) = 0"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum s (λn. 0) = 0"
                }
            ],
            "prop": "nsum s (λn. 0) = 0",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_eq_0"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "0.2",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                }
            ],
            "ty": "thm",
            "vars": {
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_lmul",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ c = 0 ⟶ nsum s (λx. c * f x) = c * nsum s f"
                },
                {
                    "args": "c = 0",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "c = 0 ⊢ c = 0"
                },
                {
                    "args": "nsum_0, nsum s (λx. 0) = 0",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum s (λx. 0) = 0"
                },
                {
                    "args": "nat_times_def_1, nsum s (λx. 0 * f x) = 0 * nsum s f",
                    "id": "0.2",
                    "prevs": [
                        "0.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "c = 0 ⊢ nsum s (λx. 0 * f x) = 0 * nsum s f"
                },
                {
                    "args": "nsum s (λx. c * f x) = c * nsum s f",
                    "id": "0.3",
                    "prevs": [
                        "0.0",
                        "0.2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "c = 0 ⊢ nsum s (λx. c * f x) = c * nsum s f"
                },
                {
                    "args": "",
                    "id": "0.4",
                    "prevs": [
                        "0.0",
                        "0.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ c = 0 ⟶ nsum s (λx. c * f x) = c * nsum s f"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ¬(c = 0) ⟶ nsum s (λx. c * f x) = c * nsum s f"
                },
                {
                    "args": "¬(c = 0)",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(c = 0) ⊢ ¬(c = 0)"
                },
                {
                    "args": "{x. x ∈ s ∧ ¬(c * f x = 0)} = {x. x ∈ s ∧ ¬(f x = 0)}",
                    "id": "1.1",
                    "prevs": [
                        "1.0"
                    ],
                    "rule": "z3",
                    "th": "¬(c = 0) ⊢ {x. x ∈ s ∧ ¬(c * f x = 0)} = {x. x ∈ s ∧ ¬(f x = 0)}"
                },
                {
                    "args": "neutral_nat_add, {x. x ∈ s ∧ ¬(c * f x = neutral plus)} = {x. x ∈ s ∧ ¬(f x = neutral plus)}",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0) ⊢ {x. x ∈ s ∧ ¬(c * f x = neutral plus)} = {x. x ∈ s ∧ ¬(f x = neutral plus)}"
                },
                {
                    "args": "support_def, support plus (λx. c * f x) s = support plus f s",
                    "id": "1.3",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0) ⊢ support plus (λx. c * f x) s = support plus f s"
                },
                {
                    "args": "",
                    "id": "1.4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(c = 0) ⊢ finite (support plus f s) ⟶ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "finite (support plus f s)",
                    "id": "1.4.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite (support plus f s) ⊢ finite (support plus f s)"
                },
                {
                    "args": "finite_induct_strong, {P: λs. nsum s (λx. c * f x) = c * nsum s f}",
                    "id": "1.4.1",
                    "prevs": [
                        "1.4.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite (support plus f s) ⊢ nsum ∅ (λx. c * f x) = c * nsum ∅ f ⟶ (∀x. ∀s1. nsum s1 (λx1. c * f x1) = c * nsum s1 f ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ nsum (insert x s1) (λx1. c * f x1) = c * nsum (insert x s1) f) ⟶ nsum (support plus f s) (λx. c * f x) = c * nsum (support plus f s) f"
                },
                {
                    "args": "mult_0_right, 0 = c * 0",
                    "id": "1.4.2",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ 0 = c * 0"
                },
                {
                    "args": "nsum_empty, nsum ∅ (λx. c * f x) = c * nsum ∅ f",
                    "id": "1.4.3",
                    "prevs": [
                        "1.4.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ nsum ∅ (λx. c * f x) = c * nsum ∅ f"
                },
                {
                    "args": "",
                    "id": "1.4.4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ ∀x. ∀s1. nsum s1 (λx1. c * f x1) = c * nsum s1 f ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ nsum (insert x s1) (λx1. c * f x1) = c * nsum (insert x s1) f"
                },
                {
                    "args": "a, 'a",
                    "id": "1.4.4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "s1, 'a set",
                    "id": "1.4.4.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s1"
                },
                {
                    "args": "nsum s1 (λx. c * f x) = c * nsum s1 f",
                    "id": "1.4.4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "nsum s1 (λx. c * f x) = c * nsum s1 f ⊢ nsum s1 (λx. c * f x) = c * nsum s1 f"
                },
                {
                    "args": "¬(a ∈ s1)",
                    "id": "1.4.4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s1) ⊢ ¬(a ∈ s1)"
                },
                {
                    "args": "finite s1",
                    "id": "1.4.4.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s1 ⊢ finite s1"
                },
                {
                    "args": "nsum_insert, {f: f, x: a}",
                    "id": "1.4.4.5",
                    "prevs": [
                        "1.4.4.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1 ⊢ nsum (insert a s1) f = (if a ∈ s1 then nsum s1 f else f a + nsum s1 f)"
                },
                {
                    "args": "if_not_P",
                    "id": "1.4.4.6",
                    "prevs": [
                        "1.4.4.5",
                        "1.4.4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, ¬(a ∈ s1) ⊢ nsum (insert a s1) f = f a + nsum s1 f"
                },
                {
                    "args": "nsum_insert, {f: λx. c * f x, x: a}",
                    "id": "1.4.4.7",
                    "prevs": [
                        "1.4.4.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1 ⊢ nsum (insert a s1) (λx. c * f x) = (if a ∈ s1 then nsum s1 (λx. c * f x) else c * f a + nsum s1 (λx. c * f x))"
                },
                {
                    "args": "if_not_P",
                    "id": "1.4.4.8",
                    "prevs": [
                        "1.4.4.7",
                        "1.4.4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, ¬(a ∈ s1) ⊢ nsum (insert a s1) (λx. c * f x) = c * f a + nsum s1 (λx. c * f x)"
                },
                {
                    "args": "distrib_l, c * f a + c * nsum s1 f = c * (f a + nsum s1 f)",
                    "id": "1.4.4.9",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ c * f a + c * nsum s1 f = c * (f a + nsum s1 f)"
                },
                {
                    "args": "c * f a + nsum s1 (λx. c * f x) = c * (f a + nsum s1 f)",
                    "id": "1.4.4.10",
                    "prevs": [
                        "1.4.4.2",
                        "1.4.4.9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s1, ¬(c = 0), ¬(a ∈ s1), finite (support plus f s), nsum s1 (λx. c * f x) = c * nsum s1 f ⊢ c * f a + nsum s1 (λx. c * f x) = c * (f a + nsum s1 f)"
                },
                {
                    "args": "nsum (insert a s1) (λx. c * f x) = c * (f a + nsum s1 f)",
                    "id": "1.4.4.11",
                    "prevs": [
                        "1.4.4.8",
                        "1.4.4.10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s1, ¬(c = 0), ¬(a ∈ s1), finite (support plus f s), nsum s1 (λx. c * f x) = c * nsum s1 f ⊢ nsum (insert a s1) (λx. c * f x) = c * (f a + nsum s1 f)"
                },
                {
                    "args": "nsum (insert a s1) (λx. c * f x) = c * nsum (insert a s1) f",
                    "id": "1.4.4.12",
                    "prevs": [
                        "1.4.4.6",
                        "1.4.4.11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s1, ¬(c = 0), ¬(a ∈ s1), finite (support plus f s), nsum s1 (λx. c * f x) = c * nsum s1 f ⊢ nsum (insert a s1) (λx. c * f x) = c * nsum (insert a s1) f"
                },
                {
                    "args": "",
                    "id": "1.4.4.13",
                    "prevs": [
                        "1.4.4.0",
                        "1.4.4.1",
                        "1.4.4.2",
                        "1.4.4.3",
                        "1.4.4.4",
                        "1.4.4.12"
                    ],
                    "rule": "intros",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ ∀a. ∀s1. nsum s1 (λx. c * f x) = c * nsum s1 f ⟶ ¬(a ∈ s1) ⟶ finite s1 ⟶ nsum (insert a s1) (λx. c * f x) = c * nsum (insert a s1) f"
                },
                {
                    "args": "",
                    "id": "1.4.5",
                    "prevs": [
                        "1.4.1",
                        "1.4.3",
                        "1.4.4"
                    ],
                    "rule": "apply_fact",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ nsum (support plus f s) (λx. c * f x) = c * nsum (support plus f s) f"
                },
                {
                    "args": "nsum_def, iterate plus (support plus f s) (λx. c * f x) = c * iterate plus (support plus f s) f",
                    "id": "1.4.6",
                    "prevs": [
                        "1.4.5"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ iterate plus (support plus f s) (λx. c * f x) = c * iterate plus (support plus f s) f"
                },
                {
                    "args": "if_P, (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)",
                    "id": "1.4.7",
                    "prevs": [
                        "1.4.6",
                        "1.4.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "",
                    "id": "1.4.8",
                    "prevs": [
                        "1.4.0",
                        "1.4.7"
                    ],
                    "rule": "intros",
                    "th": "¬(c = 0) ⊢ finite (support plus f s) ⟶ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "",
                    "id": "1.5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(c = 0) ⊢ ¬(finite (support plus f s)) ⟶ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "¬(finite (support plus f s))",
                    "id": "1.5.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(finite (support plus f s)) ⊢ ¬(finite (support plus f s))"
                },
                {
                    "args": "mult_0_right, 0 = c * 0",
                    "id": "1.5.1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ 0 = c * 0"
                },
                {
                    "args": "neutral_nat_add, neutral plus = c * neutral plus",
                    "id": "1.5.2",
                    "prevs": [
                        "1.5.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0), ¬(finite (support plus f s)) ⊢ neutral plus = c * neutral plus"
                },
                {
                    "args": "if_not_P, (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)",
                    "id": "1.5.3",
                    "prevs": [
                        "1.5.2",
                        "1.5.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0), ¬(finite (support plus f s)) ⊢ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "",
                    "id": "1.5.4",
                    "prevs": [
                        "1.5.0",
                        "1.5.3"
                    ],
                    "rule": "intros",
                    "th": "¬(c = 0) ⊢ ¬(finite (support plus f s)) ⟶ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "classical_cases",
                    "id": "1.6",
                    "prevs": [
                        "1.4",
                        "1.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(c = 0) ⊢ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "(if finite (support plus (λx. c * f x) s) then iterate plus (support plus (λx. c * f x) s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)",
                    "id": "1.7",
                    "prevs": [
                        "1.3",
                        "1.6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "¬(c = 0) ⊢ (if finite (support plus (λx. c * f x) s) then iterate plus (support plus (λx. c * f x) s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "iterate_expand_cases, iterate plus s (λx. c * f x) = c * iterate plus s f",
                    "id": "1.8",
                    "prevs": [
                        "1.7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0) ⊢ iterate plus s (λx. c * f x) = c * iterate plus s f"
                },
                {
                    "args": "nsum_def, nsum s (λx. c * f x) = c * nsum s f",
                    "id": "1.9",
                    "prevs": [
                        "1.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0) ⊢ nsum s (λx. c * f x) = c * nsum s f"
                },
                {
                    "args": "",
                    "id": "1.10",
                    "prevs": [
                        "1.0",
                        "1.9"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(c = 0) ⟶ nsum s (λx. c * f x) = c * nsum s f"
                },
                {
                    "args": "classical_cases",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ nsum s (λx. c * f x) = c * nsum s f"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum s (λx. c * f x) = c * nsum s f"
                }
            ],
            "prop": "nsum s (λx. c * f x) = c * nsum s f",
            "steps": [
                {
                    "case": "c=0",
                    "goal_id": "0",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_times_def_1"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_0"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_expand_cases"
                },
                {
                    "goal": "support plus (λx. c * f x) s = support plus f s",
                    "goal_id": "1.1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "1.3"
                    ],
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "case": "finite (support plus f s)",
                    "goal_id": "1.4",
                    "method_name": "cases"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.4.0"
                    ],
                    "goal_id": "1.4.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "1.4.1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "nsum_def"
                },
                {
                    "fact_ids": [
                        "1.4.0"
                    ],
                    "goal_id": "1.4.1",
                    "method_name": "apply_forward_step",
                    "param_P": "(%s. nsum s (λx. c * f x) = c * nsum s f)",
                    "theorem": "finite_induct_strong"
                },
                {
                    "fact_ids": [
                        "1.4.1"
                    ],
                    "goal_id": "1.4.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "1.4.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_empty"
                },
                {
                    "goal_id": "1.4.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "mult_0_right"
                },
                {
                    "goal_id": "1.4.4",
                    "method_name": "introduction",
                    "names": "a,s1"
                },
                {
                    "fact_ids": [
                        "1.4.4.4"
                    ],
                    "goal_id": "1.4.4.5",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "a",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "1.4.4.5",
                        "1.4.4.3"
                    ],
                    "goal_id": "1.4.4.6",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "1.4.4.6"
                    ],
                    "goal_id": "1.4.4.7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "1.4.4.4"
                    ],
                    "goal_id": "1.4.4.7",
                    "method_name": "apply_forward_step",
                    "param_f": "(λx. c * f x)",
                    "param_x": "a",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "1.4.4.7",
                        "1.4.4.3"
                    ],
                    "goal_id": "1.4.4.8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "1.4.4.8"
                    ],
                    "goal_id": "1.4.4.9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "1.4.4.2"
                    ],
                    "goal_id": "1.4.4.9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1.4.4.9",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "distrib_l"
                },
                {
                    "goal_id": "1.5",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.5.0"
                    ],
                    "goal_id": "1.5.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "1.5.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                },
                {
                    "goal_id": "1.5.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "mult_0_right"
                }
            ],
            "ty": "thm",
            "vars": {
                "c": "nat",
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_rmul",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "nsum_lmul, nsum s (λx. c * f x) = c * nsum s f",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum s (λx. c * f x) = c * nsum s f"
                },
                {
                    "args": "mult_comm, nsum s (λx. f x * c) = nsum s f * c",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum s (λx. f x * c) = nsum s f * c"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum s (λx. f x * c) = nsum s f * c"
                }
            ],
            "prop": "nsum s (λx. f x * c) = nsum s f * c",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "mult_comm"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_lmul"
                }
            ],
            "ty": "thm",
            "vars": {
                "c": "nat",
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ (∀x. x ∈ ∅ ⟶ f x ≤ g x) ⟶ (0::nat) ≤ 0"
                },
                {
                    "args": "∀x. x ∈ ∅ ⟶ f x ≤ g x",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ ∅ ⟶ f x ≤ g x ⊢ ∀x. x ∈ ∅ ⟶ f x ≤ g x"
                },
                {
                    "args": "less_eq_refl, {n: (0::nat)}",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (0::nat) ≤ 0"
                },
                {
                    "args": "",
                    "id": "1.2",
                    "prevs": [
                        "1.0",
                        "1.1"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ (∀x. x ∈ ∅ ⟶ f x ≤ g x) ⟶ (0::nat) ≤ 0"
                },
                {
                    "args": "nsum_empty, (∀x. x ∈ ∅ ⟶ f x ≤ g x) ⟶ nsum ∅ f ≤ nsum ∅ g",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ (∀x. x ∈ ∅ ⟶ f x ≤ g x) ⟶ nsum ∅ f ≤ nsum ∅ g"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x. ∀s1. ((∀x1. x1 ∈ s1 ⟶ f x1 ≤ g x1) ⟶ nsum s1 f ≤ nsum s1 g) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. x1 ∈ insert x s1 ⟶ f x1 ≤ g x1) ⟶ nsum (insert x s1) f ≤ nsum (insert x s1) g"
                },
                {
                    "args": "x, 'a",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "s, 'a set",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "(∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "3.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1",
                    "id": "3.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1 ⊢ ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1"
                },
                {
                    "args": "nsum_insert, {f: f, x: x}",
                    "id": "3.5",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum (insert x s) f = (if x ∈ s then nsum s f else f x + nsum s f)"
                },
                {
                    "args": "if_not_P",
                    "id": "3.6",
                    "prevs": [
                        "3.5",
                        "3.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ nsum (insert x s) f = f x + nsum s f"
                },
                {
                    "args": "nsum_insert, {f: g, x: x}",
                    "id": "3.7",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum (insert x s) g = (if x ∈ s then nsum s g else g x + nsum s g)"
                },
                {
                    "args": "if_not_P",
                    "id": "3.8",
                    "prevs": [
                        "3.7",
                        "3.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ nsum (insert x s) g = g x + nsum s g"
                },
                {
                    "args": "eq_refl, {x: x}",
                    "id": "3.9",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ x = x"
                },
                {
                    "args": "disjI1, {A: x = x, B: x ∈ s}",
                    "id": "3.10",
                    "prevs": [
                        "3.9"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ x = x ∨ x ∈ s"
                },
                {
                    "args": "member_insert, x ∈ insert x s",
                    "id": "3.11",
                    "prevs": [
                        "3.10"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ x ∈ insert x s"
                },
                {
                    "args": "",
                    "id": "3.12",
                    "prevs": [
                        "3.4",
                        "3.11"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ f x ≤ g x"
                },
                {
                    "args": "",
                    "id": "3.13",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ ∀x. x ∈ s ⟶ f x ≤ g x"
                },
                {
                    "args": "x1, 'a",
                    "id": "3.13.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ s",
                    "id": "3.13.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "disjI2, {A: x1 = x, B: x1 ∈ s}",
                    "id": "3.13.2",
                    "prevs": [
                        "3.13.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, x1 ∈ s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "member_insert, x1 ∈ insert x s",
                    "id": "3.13.3",
                    "prevs": [
                        "3.13.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x1 ∈ s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ x1 ∈ insert x s"
                },
                {
                    "args": "",
                    "id": "3.13.4",
                    "prevs": [
                        "3.4",
                        "3.13.3"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, x1 ∈ s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ f x1 ≤ g x1"
                },
                {
                    "args": "",
                    "id": "3.13.5",
                    "prevs": [
                        "3.13.0",
                        "3.13.1",
                        "3.13.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ ∀x1. x1 ∈ s ⟶ f x1 ≤ g x1"
                },
                {
                    "args": "",
                    "id": "3.14",
                    "prevs": [
                        "3.2",
                        "3.13"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ nsum s f ≤ nsum s g"
                },
                {
                    "args": "le_add2",
                    "id": "3.15",
                    "prevs": [
                        "3.12",
                        "3.14"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ f x + nsum s f ≤ g x + nsum s g"
                },
                {
                    "args": "nsum (insert x s) f ≤ g x + nsum s g",
                    "id": "3.16",
                    "prevs": [
                        "3.6",
                        "3.15"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ nsum (insert x s) f ≤ g x + nsum s g"
                },
                {
                    "args": "nsum (insert x s) f ≤ nsum (insert x s) g",
                    "id": "3.17",
                    "prevs": [
                        "3.8",
                        "3.16"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g ⊢ nsum (insert x s) f ≤ nsum (insert x s) g"
                },
                {
                    "args": "",
                    "id": "3.18",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.2",
                        "3.3",
                        "0",
                        "3.4",
                        "3.17"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. ∀s. ((∀x1. x1 ∈ s ⟶ f x1 ≤ g x1) ⟶ nsum s f ≤ nsum s g) ⟶ ¬(x ∈ s) ⟶ finite s ⟶ (∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1) ⟶ nsum (insert x s) f ≤ nsum (insert x s) g"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "4",
                    "prevs": [
                        "0",
                        "2",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ nsum s f ≤ nsum s g",
            "steps": [
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_empty"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "less_eq_refl"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x,s"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "3.5",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "3.5",
                        "3.3"
                    ],
                    "goal_id": "3.6",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "3.7",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "param_x": "x",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "3.7",
                        "3.3"
                    ],
                    "goal_id": "3.8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "3.8"
                    ],
                    "goal_id": "3.9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3.6"
                    ],
                    "goal_id": "3.9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3.9",
                    "method_name": "apply_backward_step",
                    "theorem": "le_add2"
                },
                {
                    "fact_ids": [
                        "3.4"
                    ],
                    "goal_id": "3.9",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "3.9",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "3.9",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "3.9",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "3.2"
                    ],
                    "goal_id": "3.13",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "3.13",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "3.4"
                    ],
                    "goal_id": "3.13.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "3.13.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "3.13.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "g": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x ≤ g x",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x ⊢ ∀x. x ∈ s ⟶ f x ≤ g x"
                },
                {
                    "args": "∃x. x ∈ s ∧ f x < g x",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x. x ∈ s ∧ f x < g x ⊢ ∃x. x ∈ s ∧ f x < g x"
                },
                {
                    "args": "a, 'a",
                    "id": "3",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "a ∈ s ∧ f a < g a",
                    "id": "4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ∧ f a < g a ⊢ a ∈ s ∧ f a < g a"
                },
                {
                    "args": "conjD1",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "a ∈ s ∧ f a < g a ⊢ a ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "6",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "a ∈ s ∧ f a < g a ⊢ f a < g a"
                },
                {
                    "args": "insert_delete",
                    "id": "7",
                    "prevs": [
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "a ∈ s ∧ f a < g a ⊢ insert a (delete s a) = s"
                },
                {
                    "args": "eq_sym_eq, s = insert a (delete s a)",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ s = insert a (delete s a)"
                },
                {
                    "args": "{y. ¬(y = a) ∧ y ∈ s} ⊆ s",
                    "id": "9",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ {y. ¬(y = a) ∧ y ∈ s} ⊆ s"
                },
                {
                    "args": "delete_def, delete s a ⊆ s",
                    "id": "10",
                    "prevs": [
                        "9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ delete s a ⊆ s"
                },
                {
                    "args": "finite_subset",
                    "id": "11",
                    "prevs": [
                        "0",
                        "10"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ finite (delete s a)"
                },
                {
                    "args": "nsum_insert, {f: f, x: a}",
                    "id": "12",
                    "prevs": [
                        "11"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ nsum (insert a (delete s a)) f = (if a ∈ delete s a then nsum (delete s a) f else f a + nsum (delete s a) f)"
                },
                {
                    "args": "¬(¬(a = a) ∧ a ∈ s)",
                    "id": "13",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ¬(¬(a = a) ∧ a ∈ s)"
                },
                {
                    "args": "member_delete, ¬(a ∈ delete s a)",
                    "id": "14",
                    "prevs": [
                        "13"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ ¬(a ∈ delete s a)"
                },
                {
                    "args": "if_not_P",
                    "id": "15",
                    "prevs": [
                        "12",
                        "14"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ nsum (insert a (delete s a)) f = f a + nsum (delete s a) f"
                },
                {
                    "args": "nsum_insert, {f: g, x: a}",
                    "id": "16",
                    "prevs": [
                        "11"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ nsum (insert a (delete s a)) g = (if a ∈ delete s a then nsum (delete s a) g else g a + nsum (delete s a) g)"
                },
                {
                    "args": "if_not_P",
                    "id": "17",
                    "prevs": [
                        "16",
                        "14"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ nsum (insert a (delete s a)) g = g a + nsum (delete s a) g"
                },
                {
                    "args": "",
                    "id": "18",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ ∀x. x ∈ delete s a ⟶ f x ≤ g x"
                },
                {
                    "args": "x, 'a",
                    "id": "18.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ delete s a",
                    "id": "18.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ delete s a ⊢ x ∈ delete s a"
                },
                {
                    "args": "member_delete",
                    "id": "18.2",
                    "prevs": [
                        "18.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ delete s a ⊢ ¬(x = a) ∧ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "18.3",
                    "prevs": [
                        "18.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ delete s a ⊢ x ∈ s"
                },
                {
                    "args": "x",
                    "id": "18.4",
                    "prevs": [
                        "1",
                        "18.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, x ∈ delete s a, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ f x ≤ g x"
                },
                {
                    "args": "",
                    "id": "18.5",
                    "prevs": [
                        "18.0",
                        "18.1",
                        "18.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ ∀x. x ∈ delete s a ⟶ f x ≤ g x"
                },
                {
                    "args": "nsum_le",
                    "id": "19",
                    "prevs": [
                        "11",
                        "18"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ nsum (delete s a) f ≤ nsum (delete s a) g"
                },
                {
                    "args": "let_add2",
                    "id": "20",
                    "prevs": [
                        "19",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ nsum (delete s a) f + f a < nsum (delete s a) g + g a"
                },
                {
                    "args": "add_comm, f a + nsum (delete s a) f < g a + nsum (delete s a) g",
                    "id": "21",
                    "prevs": [
                        "20"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ f a + nsum (delete s a) f < g a + nsum (delete s a) g"
                },
                {
                    "args": "nsum (insert a (delete s a)) f < g a + nsum (delete s a) g",
                    "id": "22",
                    "prevs": [
                        "15",
                        "21"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ nsum (insert a (delete s a)) f < g a + nsum (delete s a) g"
                },
                {
                    "args": "nsum (insert a (delete s a)) f < nsum (insert a (delete s a)) g",
                    "id": "23",
                    "prevs": [
                        "17",
                        "22"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ nsum (insert a (delete s a)) f < nsum (insert a (delete s a)) g"
                },
                {
                    "args": "nsum s f < nsum s g",
                    "id": "24",
                    "prevs": [
                        "8",
                        "23"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ nsum s f < nsum s g"
                },
                {
                    "args": "∃x. x ∈ s ∧ f x < g x",
                    "id": "25",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "2",
                        "3",
                        "4",
                        "24"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ (∃x. x ∈ s ∧ f x < g x) ⟶ nsum s f < nsum s g"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ (∃x. x ∈ s ∧ f x < g x) ⟶ nsum s f < nsum s g"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "exists_elim",
                    "names": "a"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal": "s = insert a (delete s a)",
                    "goal_id": "7",
                    "method_name": "cut"
                },
                {
                    "goal_id": "7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "5"
                    ],
                    "goal_id": "7",
                    "method_name": "apply_backward_step",
                    "theorem": "insert_delete"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal": "finite (delete s a)",
                    "goal_id": "9",
                    "method_name": "cut"
                },
                {
                    "goal_id": "9",
                    "method_name": "apply_backward_step",
                    "param_t": "s",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "9",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "delete_def"
                },
                {
                    "goal_id": "9",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "11"
                    ],
                    "goal_id": "12",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "a",
                    "theorem": "nsum_insert"
                },
                {
                    "goal": "~(a ∈ delete s a) ",
                    "goal_id": "13",
                    "method_name": "cut"
                },
                {
                    "goal_id": "13",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_delete"
                },
                {
                    "goal_id": "13",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "12",
                        "14"
                    ],
                    "goal_id": "15",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "11"
                    ],
                    "goal_id": "16",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "param_x": "a",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "16",
                        "14"
                    ],
                    "goal_id": "17",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "17"
                    ],
                    "goal_id": "18",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "15"
                    ],
                    "goal_id": "18",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "18",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "add_comm"
                },
                {
                    "goal_id": "18",
                    "method_name": "apply_backward_step",
                    "theorem": "let_add2"
                },
                {
                    "goal_id": "18",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_le"
                },
                {
                    "goal_id": "18",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "18.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "18.1"
                    ],
                    "goal_id": "18.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_delete"
                },
                {
                    "fact_ids": [
                        "18.2"
                    ],
                    "goal_id": "18.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "g": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_lt_all",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x < g x",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x < g x ⊢ ∀x. x ∈ s ⟶ f x < g x"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < g x ⊢ ∀x. x ∈ s ⟶ f x ≤ g x"
                },
                {
                    "args": "x, 'a",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "x",
                    "id": "3.2",
                    "prevs": [
                        "2",
                        "3.1"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, x ∈ s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < g x ⊢ f x < g x"
                },
                {
                    "args": "lt_imp_le",
                    "id": "3.3",
                    "prevs": [
                        "3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < g x ⊢ f x ≤ g x"
                },
                {
                    "args": "",
                    "id": "3.4",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < g x ⊢ ∀x. x ∈ s ⟶ f x ≤ g x"
                },
                {
                    "args": "set_equal_iff",
                    "id": "4",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(s = ∅) ⊢ ¬(∀x. x ∈ s ⟷ x ∈ ∅)"
                },
                {
                    "args": "not_all",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(s = ∅) ⊢ ∃x. ¬(x ∈ s ⟷ x ∈ ∅)"
                },
                {
                    "args": "a, 'a",
                    "id": "6",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "¬(a ∈ s ⟷ a ∈ ∅)",
                    "id": "7",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s ⟷ a ∈ ∅) ⊢ ¬(a ∈ s ⟷ a ∈ ∅)"
                },
                {
                    "args": "a ∈ s",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "z3",
                    "th": "¬(a ∈ s ⟷ a ∈ ∅) ⊢ a ∈ s"
                },
                {
                    "args": "a",
                    "id": "9",
                    "prevs": [
                        "2",
                        "8"
                    ],
                    "rule": "apply_fact_for",
                    "th": "¬(a ∈ s ⟷ a ∈ ∅), ∀x. x ∈ s ⟶ f x < g x ⊢ f a < g a"
                },
                {
                    "args": "conjI",
                    "id": "10",
                    "prevs": [
                        "8",
                        "9"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ¬(a ∈ s ⟷ a ∈ ∅), ∀x. x ∈ s ⟶ f x < g x ⊢ a ∈ s ∧ f a < g a"
                },
                {
                    "args": "exI, {P: λx. x ∈ s ∧ f x < g x, a: a}",
                    "id": "11",
                    "prevs": [
                        "10"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(s = ∅), ¬(a ∈ s ⟷ a ∈ ∅), ∀x. x ∈ s ⟶ f x < g x ⊢ ∃a1. a1 ∈ s ∧ f a1 < g a1"
                },
                {
                    "args": "nsum_lt",
                    "id": "12",
                    "prevs": [
                        "0",
                        "3",
                        "11"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ¬(a ∈ s ⟷ a ∈ ∅), ∀x. x ∈ s ⟶ f x < g x ⊢ nsum s f < nsum s g"
                },
                {
                    "args": "∃x. ¬(x ∈ s ⟷ x ∈ ∅)",
                    "id": "13",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "5",
                        "6",
                        "7",
                        "12"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x < g x) ⟶ nsum s f < nsum s g"
                }
            ],
            "prop": "finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x < g x) ⟶ nsum s f < nsum s g",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_lt"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "lt_imp_le"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "set_equal_iff"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "not_all"
                },
                {
                    "fact_ids": [
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "exists_elim",
                    "names": "a"
                },
                {
                    "goal_id": "8",
                    "method_name": "inst_exists_goal",
                    "s": "a"
                },
                {
                    "goal_id": "8",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal_id": "8",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "2",
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "g": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_eq",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. x ∈ s ⟶ f x = g x",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x = g x ⊢ ∀x. x ∈ s ⟶ f x = g x"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_eq",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x = g x ⊢ iterate plus s f = iterate plus s g"
                },
                {
                    "args": "nsum_def, nsum s f = nsum s g",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x = g x ⊢ nsum s f = nsum s g"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. x ∈ s ⟶ f x = g x) ⟶ nsum s f = nsum s g"
                }
            ],
            "prop": "(∀x. x ∈ s ⟶ f x = g x) ⟶ nsum s f = nsum s g",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_eq"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "g": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_const",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "nat_times_def_1, 0 = 0 * c",
                    "id": "1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ 0 = 0 * c"
                },
                {
                    "args": "card_empty, 0 = card (∅::'a set) * c",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ 0 = card (∅::'a set) * c"
                },
                {
                    "args": "nsum_empty, nsum ∅ (λn::'a. c) = card (∅::'a set) * c",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ nsum ∅ (λn::'a. c) = card (∅::'a set) * c"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x::'a. ∀s1. nsum s1 (λn. c) = card s1 * c ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ nsum (insert x s1) (λn. c) = card (insert x s1) * c"
                },
                {
                    "args": "a, 'a",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "s, 'a set",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "nsum s (λn. c) = card s * c",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "nsum s (λn. c) = card s * c ⊢ nsum s (λn. c) = card s * c"
                },
                {
                    "args": "¬(a ∈ s)",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s) ⊢ ¬(a ∈ s)"
                },
                {
                    "args": "card_insert, {x: a}",
                    "id": "4.4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ card (insert a s) = (if a ∈ s then card s else Suc (card s))"
                },
                {
                    "args": "if_not_P",
                    "id": "4.5",
                    "prevs": [
                        "4.4",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(a ∈ s) ⊢ card (insert a s) = Suc (card s)"
                },
                {
                    "args": "nsum_insert, {f: λn::'a. c, x: a}",
                    "id": "4.6",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum (insert a s) (λn. c) = (if a ∈ s then nsum s (λn. c) else c + nsum s (λn. c))"
                },
                {
                    "args": "if_not_P",
                    "id": "4.7",
                    "prevs": [
                        "4.6",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(a ∈ s) ⊢ nsum (insert a s) (λn. c) = c + nsum s (λn. c)"
                },
                {
                    "args": "nat_times_def_2, c + card s * c = Suc (card s) * c",
                    "id": "4.8",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ c + card s * c = Suc (card s) * c"
                },
                {
                    "args": "c + nsum s (λn. c) = Suc (card s) * c",
                    "id": "4.9",
                    "prevs": [
                        "4.2",
                        "4.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(a ∈ s), nsum s (λn. c) = card s * c ⊢ c + nsum s (λn. c) = Suc (card s) * c"
                },
                {
                    "args": "nsum (insert a s) (λn. c) = Suc (card s) * c",
                    "id": "4.10",
                    "prevs": [
                        "4.7",
                        "4.9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(a ∈ s), nsum s (λn. c) = card s * c ⊢ nsum (insert a s) (λn. c) = Suc (card s) * c"
                },
                {
                    "args": "nsum (insert a s) (λn. c) = card (insert a s) * c",
                    "id": "4.11",
                    "prevs": [
                        "4.5",
                        "4.10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(a ∈ s), nsum s (λn. c) = card s * c ⊢ nsum (insert a s) (λn. c) = card (insert a s) * c"
                },
                {
                    "args": "",
                    "id": "4.12",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.3",
                        "0",
                        "4.11"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀a::'a. ∀s. nsum s (λn. c) = card s * c ⟶ ¬(a ∈ s) ⟶ finite s ⟶ nsum (insert a s) (λn. c) = card (insert a s) * c"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "5",
                    "prevs": [
                        "0",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ nsum s (λn. c) = card s * c"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ nsum s (λn. c) = card s * c"
                }
            ],
            "prop": "finite s ⟶ nsum s (λn. c) = card s * c",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_empty"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "card_empty"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_times_def_1"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "a,s"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.4",
                    "method_name": "apply_forward_step",
                    "param_x": "a",
                    "theorem": "card_insert"
                },
                {
                    "fact_ids": [
                        "4.4",
                        "4.3"
                    ],
                    "goal_id": "4.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "4.5"
                    ],
                    "goal_id": "4.6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.6",
                    "method_name": "apply_forward_step",
                    "param_f": "(λn::'a. c)",
                    "param_x": "a",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "4.6",
                        "4.3"
                    ],
                    "goal_id": "4.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "4.7"
                    ],
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_times_def_2"
                }
            ],
            "ty": "thm",
            "vars": {
                "c": "nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_pos_bound",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ nsum ∅ f ≤ b ⟶ x ∈ ∅ ⟶ f x ≤ b"
                },
                {
                    "args": "nsum ∅ f ≤ b",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "nsum ∅ f ≤ b ⊢ nsum ∅ f ≤ b"
                },
                {
                    "args": "x ∈ ∅",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ ∅ ⊢ x ∈ ∅"
                },
                {
                    "args": "member_empty, f x ≤ b",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "resolve_theorem",
                    "th": "x ∈ ∅ ⊢ f x ≤ b"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.2"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ nsum ∅ f ≤ b ⟶ x ∈ ∅ ⟶ f x ≤ b"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x1. ∀s1. (nsum s1 f ≤ b ⟶ x ∈ s1 ⟶ f x ≤ b) ⟶ ¬(x1 ∈ s1) ⟶ finite s1 ⟶ nsum (insert x1 s1) f ≤ b ⟶ x ∈ insert x1 s1 ⟶ f x ≤ b"
                },
                {
                    "args": "a, 'a",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "s, 'a set",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b",
                    "id": "2.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b ⊢ nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b"
                },
                {
                    "args": "¬(a ∈ s)",
                    "id": "2.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s) ⊢ ¬(a ∈ s)"
                },
                {
                    "args": "nsum (insert a s) f ≤ b",
                    "id": "2.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "nsum (insert a s) f ≤ b ⊢ nsum (insert a s) f ≤ b"
                },
                {
                    "args": "x ∈ insert a s",
                    "id": "2.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ insert a s ⊢ x ∈ insert a s"
                },
                {
                    "args": "member_insert",
                    "id": "2.6",
                    "prevs": [
                        "2.5"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ insert a s ⊢ x = a ∨ x ∈ s"
                },
                {
                    "args": "nsum_insert, {f: f, x: a}",
                    "id": "2.7",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum (insert a s) f = (if a ∈ s then nsum s f else f a + nsum s f)"
                },
                {
                    "args": "if_not_P",
                    "id": "2.8",
                    "prevs": [
                        "2.7",
                        "2.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(a ∈ s) ⊢ nsum (insert a s) f = f a + nsum s f"
                },
                {
                    "args": "",
                    "id": "2.9",
                    "prevs": [
                        "2.8",
                        "2.4"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite s, ¬(a ∈ s), nsum (insert a s) f ≤ b ⊢ f a + nsum s f ≤ b"
                },
                {
                    "args": "",
                    "id": "2.10",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(a ∈ s), x ∈ insert a s, nsum (insert a s) f ≤ b, nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b ⊢ x = a ⟶ f x ≤ b"
                },
                {
                    "args": "x = a",
                    "id": "2.10.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = a ⊢ x = a"
                },
                {
                    "args": "le_add, {m: f a, n: nsum s f}",
                    "id": "2.10.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ f a ≤ f a + nsum s f"
                },
                {
                    "args": "less_eq_trans",
                    "id": "2.10.2",
                    "prevs": [
                        "2.10.1",
                        "2.9"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x = a, ¬(a ∈ s), x ∈ insert a s, nsum (insert a s) f ≤ b, nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b ⊢ f a ≤ b"
                },
                {
                    "args": "f x ≤ b",
                    "id": "2.10.3",
                    "prevs": [
                        "2.10.0",
                        "2.10.2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x = a, ¬(a ∈ s), x ∈ insert a s, nsum (insert a s) f ≤ b, nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b ⊢ f x ≤ b"
                },
                {
                    "args": "",
                    "id": "2.10.4",
                    "prevs": [
                        "2.10.0",
                        "2.10.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(a ∈ s), x ∈ insert a s, nsum (insert a s) f ≤ b, nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b ⊢ x = a ⟶ f x ≤ b"
                },
                {
                    "args": "",
                    "id": "2.11",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(a ∈ s), x ∈ insert a s, nsum (insert a s) f ≤ b, nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b ⊢ x ∈ s ⟶ f x ≤ b"
                },
                {
                    "args": "x ∈ s",
                    "id": "2.11.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "le_add, {m: nsum s f, n: f a}",
                    "id": "2.11.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ nsum s f ≤ nsum s f + f a"
                },
                {
                    "args": "add_comm, nsum s f ≤ f a + nsum s f",
                    "id": "2.11.2",
                    "prevs": [
                        "2.11.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x ∈ s, ¬(a ∈ s), x ∈ insert a s, nsum (insert a s) f ≤ b, nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b ⊢ nsum s f ≤ f a + nsum s f"
                },
                {
                    "args": "less_eq_trans",
                    "id": "2.11.3",
                    "prevs": [
                        "2.11.2",
                        "2.9"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ s, ¬(a ∈ s), x ∈ insert a s, nsum (insert a s) f ≤ b, nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b ⊢ nsum s f ≤ b"
                },
                {
                    "args": "",
                    "id": "2.11.4",
                    "prevs": [
                        "2.2",
                        "2.11.3",
                        "2.11.0"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, x ∈ s, ¬(a ∈ s), x ∈ insert a s, nsum (insert a s) f ≤ b, nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b ⊢ f x ≤ b"
                },
                {
                    "args": "",
                    "id": "2.11.5",
                    "prevs": [
                        "2.11.0",
                        "2.11.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(a ∈ s), x ∈ insert a s, nsum (insert a s) f ≤ b, nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b ⊢ x ∈ s ⟶ f x ≤ b"
                },
                {
                    "args": "disjE",
                    "id": "2.12",
                    "prevs": [
                        "2.6",
                        "2.10",
                        "2.11"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(a ∈ s), x ∈ insert a s, nsum (insert a s) f ≤ b, nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b ⊢ f x ≤ b"
                },
                {
                    "args": "",
                    "id": "2.13",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.2",
                        "2.3",
                        "0",
                        "2.4",
                        "2.5",
                        "2.12"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀a. ∀s. (nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b) ⟶ ¬(a ∈ s) ⟶ finite s ⟶ nsum (insert a s) f ≤ b ⟶ x ∈ insert a s ⟶ f x ≤ b"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "3",
                    "prevs": [
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b"
                }
            ],
            "prop": "finite s ⟶ nsum s f ≤ b ⟶ x ∈ s ⟶ f x ≤ b",
            "steps": [
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "apply_resolve_step",
                    "theorem": "member_empty"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "a,s"
                },
                {
                    "fact_ids": [
                        "2.5"
                    ],
                    "goal_id": "2.6",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.7",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "a",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "2.7",
                        "2.3"
                    ],
                    "goal_id": "2.8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "2.8",
                        "2.4"
                    ],
                    "goal_id": "2.9",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "2.6"
                    ],
                    "goal_id": "2.10",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "2.10",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.10.0"
                    ],
                    "goal_id": "2.10.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.10.1",
                    "method_name": "apply_backward_step",
                    "param_m": "f a + nsum s f",
                    "theorem": "less_eq_trans"
                },
                {
                    "goal_id": "2.10.1",
                    "method_name": "apply_backward_step",
                    "theorem": "le_add"
                },
                {
                    "goal_id": "2.11",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.2"
                    ],
                    "goal_id": "2.11.1",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2.11.1",
                    "method_name": "apply_backward_step",
                    "param_m": "f a + nsum s f",
                    "theorem": "less_eq_trans"
                },
                {
                    "goal_id": "2.11.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "add_comm"
                },
                {
                    "goal_id": "2.11.1",
                    "method_name": "apply_backward_step",
                    "theorem": "le_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "b": "nat",
                "f": "'a ⇒ nat",
                "s": "'a set",
                "x": "'a"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_eq_0_iff",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ nsum s f = 0 ⟶ (∀x. x ∈ s ⟶ f x = 0)"
                },
                {
                    "args": "nsum s f = 0",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "nsum s f = 0 ⊢ nsum s f = 0"
                },
                {
                    "args": "",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, nsum s f = 0 ⊢ ∀x. x ∈ s ⟶ f x = 0"
                },
                {
                    "args": "x, 'a",
                    "id": "1.1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "1.1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "∀n::nat. n = 0 ⟷ n ≤ 0",
                    "id": "1.1.2",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀n::nat. n = 0 ⟷ n ≤ 0"
                },
                {
                    "args": "",
                    "id": "1.1.3",
                    "prevs": [
                        "1.1.2",
                        "1.0"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "nsum s f = 0 ⊢ nsum s f ≤ 0"
                },
                {
                    "args": "nsum_pos_bound",
                    "id": "1.1.4",
                    "prevs": [
                        "0",
                        "1.1.3",
                        "1.1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ s, nsum s f = 0 ⊢ f x ≤ 0"
                },
                {
                    "args": "f x = 0",
                    "id": "1.1.5",
                    "prevs": [
                        "1.1.2",
                        "1.1.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x ∈ s, nsum s f = 0 ⊢ f x = 0"
                },
                {
                    "args": "",
                    "id": "1.1.6",
                    "prevs": [
                        "1.1.0",
                        "1.1.1",
                        "1.1.5"
                    ],
                    "rule": "intros",
                    "th": "finite s, nsum s f = 0 ⊢ ∀x. x ∈ s ⟶ f x = 0"
                },
                {
                    "args": "",
                    "id": "1.2",
                    "prevs": [
                        "1.0",
                        "1.1"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ nsum s f = 0 ⟶ (∀x. x ∈ s ⟶ f x = 0)"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ (∀x. x ∈ s ⟶ f x = 0) ⟶ nsum s f = 0"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x = 0",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x = 0 ⊢ ∀x. x ∈ s ⟶ f x = 0"
                },
                {
                    "args": "nsum_eq_0",
                    "id": "2.1",
                    "prevs": [
                        "2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x = 0 ⊢ nsum s f = 0"
                },
                {
                    "args": "",
                    "id": "2.2",
                    "prevs": [
                        "2.0",
                        "2.1"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ (∀x. x ∈ s ⟶ f x = 0) ⟶ nsum s f = 0"
                },
                {
                    "args": "iffI",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ nsum s f = 0 ⟷ (∀x. x ∈ s ⟶ f x = 0)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ nsum s f = 0 ⟷ (∀x. x ∈ s ⟶ f x = 0)"
                }
            ],
            "prop": "finite s ⟶ nsum s f = 0 ⟷ (∀x. x ∈ s ⟶ f x = 0)",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal": "!n::nat. n = 0 <--> n <= 0",
                    "goal_id": "1.1.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.1.2",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "1.1.2"
                    ],
                    "goal_id": "1.1.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "1.1.2",
                        "1.0"
                    ],
                    "goal_id": "1.1.3",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "goal_id": "1.1.4",
                    "method_name": "apply_backward_step",
                    "param_s": "s",
                    "theorem": "nsum_pos_bound"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_eq_0"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_pos_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∃x. x ∈ s ∧ 0 < f x",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x. x ∈ s ∧ 0 < f x ⊢ ∃x. x ∈ s ∧ 0 < f x"
                },
                {
                    "args": "nsum_eq_0_iff, {f: f}",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum s f = 0 ⟷ (∀x. x ∈ s ⟶ f x = 0)"
                },
                {
                    "args": "∃x. x ∈ s ∧ ¬(f x = 0)",
                    "id": "3",
                    "prevs": [
                        "1"
                    ],
                    "rule": "z3",
                    "th": "∃x. x ∈ s ∧ 0 < f x ⊢ ∃x. x ∈ s ∧ ¬(f x = 0)"
                },
                {
                    "args": "not_imp, ∃x. ¬(x ∈ s ⟶ f x = 0)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∃x. x ∈ s ∧ 0 < f x ⊢ ∃x. ¬(x ∈ s ⟶ f x = 0)"
                },
                {
                    "args": "not_all, ¬(∀x. x ∈ s ⟶ f x = 0)",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∃x. x ∈ s ∧ 0 < f x ⊢ ¬(∀x. x ∈ s ⟶ f x = 0)"
                },
                {
                    "args": "¬(nsum s f = 0)",
                    "id": "6",
                    "prevs": [
                        "2",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ∃x. x ∈ s ∧ 0 < f x ⊢ ¬(nsum s f = 0)"
                },
                {
                    "args": "le_1_1",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∃x. x ∈ s ∧ 0 < f x ⊢ 0 < nsum s f"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "0",
                        "1",
                        "7"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∃x. x ∈ s ∧ 0 < f x) ⟶ 0 < nsum s f"
                }
            ],
            "prop": "finite s ⟶ (∃x. x ∈ s ∧ 0 < f x) ⟶ 0 < nsum s f",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "le_1_1"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "theorem": "nsum_eq_0_iff"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "not_all"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "not_imp"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "3",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_pos_lt_all",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀i. i ∈ s ⟶ 0 < f i",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀i. i ∈ s ⟶ 0 < f i ⊢ ∀i. i ∈ s ⟶ 0 < f i"
                },
                {
                    "args": "set_equal_iff",
                    "id": "3",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(s = ∅) ⊢ ¬(∀x. x ∈ s ⟷ x ∈ ∅)"
                },
                {
                    "args": "not_all",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(s = ∅) ⊢ ∃x. ¬(x ∈ s ⟷ x ∈ ∅)"
                },
                {
                    "args": "a, 'a",
                    "id": "5",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "¬(a ∈ s ⟷ a ∈ ∅)",
                    "id": "6",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s ⟷ a ∈ ∅) ⊢ ¬(a ∈ s ⟷ a ∈ ∅)"
                },
                {
                    "args": "a ∈ s",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "z3",
                    "th": "¬(a ∈ s ⟷ a ∈ ∅) ⊢ a ∈ s"
                },
                {
                    "args": "a",
                    "id": "8",
                    "prevs": [
                        "2",
                        "7"
                    ],
                    "rule": "apply_fact_for",
                    "th": "¬(a ∈ s ⟷ a ∈ ∅), ∀i. i ∈ s ⟶ 0 < f i ⊢ 0 < f a"
                },
                {
                    "args": "conjI",
                    "id": "9",
                    "prevs": [
                        "7",
                        "8"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ¬(a ∈ s ⟷ a ∈ ∅), ∀i. i ∈ s ⟶ 0 < f i ⊢ a ∈ s ∧ 0 < f a"
                },
                {
                    "args": "exI, {P: λx. x ∈ s ∧ 0 < f x, a: a}",
                    "id": "10",
                    "prevs": [
                        "9"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(s = ∅), ¬(a ∈ s ⟷ a ∈ ∅), ∀i. i ∈ s ⟶ 0 < f i ⊢ ∃a1. a1 ∈ s ∧ 0 < f a1"
                },
                {
                    "args": "nsum_pos_lt",
                    "id": "11",
                    "prevs": [
                        "0",
                        "10"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ¬(a ∈ s ⟷ a ∈ ∅), ∀i. i ∈ s ⟶ 0 < f i ⊢ 0 < nsum s f"
                },
                {
                    "args": "∃x. ¬(x ∈ s ⟷ x ∈ ∅)",
                    "id": "12",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "4",
                        "5",
                        "6",
                        "11"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ ¬(s = ∅) ⟶ (∀i. i ∈ s ⟶ 0 < f i) ⟶ 0 < nsum s f"
                }
            ],
            "prop": "finite s ⟶ ¬(s = ∅) ⟶ (∀i. i ∈ s ⟶ 0 < f i) ⟶ 0 < nsum s f",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_pos_lt"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "set_equal_iff"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "not_all"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "exists_elim",
                    "names": "a"
                },
                {
                    "goal_id": "7",
                    "method_name": "inst_exists_goal",
                    "s": "a"
                },
                {
                    "goal_id": "7",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "6"
                    ],
                    "goal_id": "7",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "2",
                        "7"
                    ],
                    "goal_id": "8",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_delete",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "a ∈ s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ⊢ a ∈ s"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_delete, {a: a, f: f, op: (plus::nat ⇒ nat ⇒ nat), s: s}",
                    "id": "3",
                    "prevs": [
                        "2",
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, a ∈ s ⊢ f a + iterate plus (delete s a) f = iterate plus s f"
                },
                {
                    "args": "nsum_def, f a + nsum (delete s a) f = nsum s f",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ∈ s ⊢ f a + nsum (delete s a) f = nsum s f"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ a ∈ s ⟶ f a + nsum (delete s a) f = nsum s f"
                }
            ],
            "prop": "finite s ⟶ a ∈ s ⟶ f a + nsum (delete s a) f = nsum s f",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "fact_ids": [
                        "2",
                        "0",
                        "1"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_delete"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'a",
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_sing",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_empty, {}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite (∅::'a set)"
                },
                {
                    "args": "nsum_insert, {f: f, x: x}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ nsum ({x}) f = (if x ∈ ∅ then nsum ∅ f else f x + nsum ∅ f)"
                },
                {
                    "args": "member_empty, {x: x}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ ¬(x ∈ ∅)"
                },
                {
                    "args": "if_not_P",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ nsum ({x}) f = f x + nsum ∅ f"
                },
                {
                    "args": "nsum_empty",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ nsum ({x}) f = f x + 0"
                },
                {
                    "args": "add_0_right",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ nsum ({x}) f = f x"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({x}) f = f x"
                }
            ],
            "prop": "nsum ({x}) f = f x",
            "steps": [
                {
                    "goal": "finite({}::'a set)",
                    "goal_id": "0",
                    "method_name": "cut"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_empty"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "nsum_insert"
                },
                {
                    "goal": "~(x ∈ ∅)",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "member_empty"
                },
                {
                    "fact_ids": [
                        "1",
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "nsum_empty"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "add_0_right"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "x": "'a"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_delta",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_nat_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_delta, {a: a, f: λx::'a. b, op: (plus::nat ⇒ nat ⇒ nat), s: s}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus s (λx. if x = a then b else neutral plus) = (if a ∈ s then b else neutral plus)"
                },
                {
                    "args": "neutral_nat_add, iterate plus s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "⊢ iterate plus s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)"
                },
                {
                    "args": "nsum_def, nsum s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)"
                }
            ],
            "prop": "nsum s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "neutral_nat_add"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_delta"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'a",
                "b": "nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_swap",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "nsum_0, 0 = nsum t (λj. 0)",
                    "id": "2",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ 0 = nsum t (λj. 0)"
                },
                {
                    "args": "nsum_empty, nsum ∅ (λi. nsum t (f i)) = nsum t (λj. nsum ∅ (λi. f i j))",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t ⊢ nsum ∅ (λi. nsum t (f i)) = nsum t (λj. nsum ∅ (λi. f i j))"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t ⊢ ∀x. ∀s1. nsum s1 (λi. nsum t (f i)) = nsum t (λj. nsum s1 (λi. f i j)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ nsum (insert x s1) (λi. nsum t (f i)) = nsum t (λj. nsum (insert x s1) (λi. f i j))"
                },
                {
                    "args": "a, 'b",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "s, 'b set",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j))",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j)) ⊢ nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j))"
                },
                {
                    "args": "¬(a ∈ s)",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s) ⊢ ¬(a ∈ s)"
                },
                {
                    "args": "nsum_insert, {f: λi. f i j, x: a}",
                    "id": "4.4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum (insert a s) (λi. f i j) = (if a ∈ s then nsum s (λi. f i j) else f a j + nsum s (λi. f i j))"
                },
                {
                    "args": "if_not_P",
                    "id": "4.5",
                    "prevs": [
                        "4.4",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(a ∈ s) ⊢ nsum (insert a s) (λi. f i j) = f a j + nsum s (λi. f i j)"
                },
                {
                    "args": "nsum_insert, {f: λi. nsum t (f i), x: a}",
                    "id": "4.6",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum (insert a s) (λi. nsum t (f i)) = (if a ∈ s then nsum s (λi. nsum t (f i)) else nsum t (f a) + nsum s (λi. nsum t (f i)))"
                },
                {
                    "args": "if_not_P",
                    "id": "4.7",
                    "prevs": [
                        "4.6",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(a ∈ s) ⊢ nsum (insert a s) (λi. nsum t (f i)) = nsum t (f a) + nsum s (λi. nsum t (f i))"
                },
                {
                    "args": "nsum_add, {f: f a, g: λx. nsum s (λi. f i x), s: t}",
                    "id": "4.8",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, ¬(a ∈ s), nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j)) ⊢ nsum t (λx. f a x + nsum s (λi. f i x)) = nsum t (f a) + nsum t (λx. nsum s (λi. f i x))"
                },
                {
                    "args": "eq_sym_eq, nsum t (f a) + nsum t (λj. nsum s (λi. f i j)) = nsum t (λj. f a j + nsum s (λi. f i j))",
                    "id": "4.9",
                    "prevs": [
                        "4.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ¬(a ∈ s), nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j)) ⊢ nsum t (f a) + nsum t (λj. nsum s (λi. f i j)) = nsum t (λj. f a j + nsum s (λi. f i j))"
                },
                {
                    "args": "nsum t (f a) + nsum s (λi. nsum t (f i)) = nsum t (λj. f a j + nsum s (λi. f i j))",
                    "id": "4.10",
                    "prevs": [
                        "4.2",
                        "4.9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ¬(a ∈ s), nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j)) ⊢ nsum t (f a) + nsum s (λi. nsum t (f i)) = nsum t (λj. f a j + nsum s (λi. f i j))"
                },
                {
                    "args": "nsum (insert a s) (λi. nsum t (f i)) = nsum t (λj. f a j + nsum s (λi. f i j))",
                    "id": "4.11",
                    "prevs": [
                        "4.7",
                        "4.10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ¬(a ∈ s), nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j)) ⊢ nsum (insert a s) (λi. nsum t (f i)) = nsum t (λj. f a j + nsum s (λi. f i j))"
                },
                {
                    "args": "nsum (insert a s) (λi. nsum t (f i)) = nsum t (λj. nsum (insert a s) (λi. f i j))",
                    "id": "4.12",
                    "prevs": [
                        "4.5",
                        "4.11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ¬(a ∈ s), nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j)) ⊢ nsum (insert a s) (λi. nsum t (f i)) = nsum t (λj. nsum (insert a s) (λi. f i j))"
                },
                {
                    "args": "",
                    "id": "4.13",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.3",
                        "0",
                        "4.12"
                    ],
                    "rule": "intros",
                    "th": "finite t ⊢ ∀a. ∀s. nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j)) ⟶ ¬(a ∈ s) ⟶ finite s ⟶ nsum (insert a s) (λi. nsum t (f i)) = nsum t (λj. nsum (insert a s) (λi. f i j))"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "5",
                    "prevs": [
                        "0",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t ⊢ nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j))"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j))"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ finite t ⟶ nsum s (λi. nsum t (f i)) = nsum t (λj. nsum s (λi. f i j))"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_empty"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_0"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "a,s"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.4",
                    "method_name": "apply_forward_step",
                    "param_f": "(λi. f i j)",
                    "param_x": "a",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "4.4",
                        "4.3"
                    ],
                    "goal_id": "4.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "4.5"
                    ],
                    "goal_id": "4.6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.6",
                    "method_name": "apply_forward_step",
                    "param_f": "(λi. nsum t (f i))",
                    "param_x": "a",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "4.6",
                        "4.3"
                    ],
                    "goal_id": "4.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "4.7"
                    ],
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'c ⇒ nat",
                "s": "'b set",
                "t": "'c set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_image",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_image, {f: f, g: g, op: (plus::nat ⇒ nat ⇒ nat), s: s}",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ iterate plus (image f s) g = iterate plus s (g ∘ f)"
                },
                {
                    "args": "nsum_def, nsum (image f s) g = nsum s (g ∘ f)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ nsum (image f s) g = nsum s (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y) ⟶ nsum (image f s) g = nsum s (g ∘ f)"
                }
            ],
            "prop": [
                "(∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y) ",
                "⟶ nsum (image f s) g = nsum s (g ∘ f)"
            ],
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_image"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ 'b",
                "g": "'b ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_superset",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "u ⊆ v",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "u ⊆ v ⊢ u ⊆ v"
                },
                {
                    "args": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "neutral_nat_add, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral plus",
                    "id": "3",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral plus"
                },
                {
                    "args": "iterate_superset",
                    "id": "4",
                    "prevs": [
                        "2",
                        "0",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ iterate plus v f = iterate plus u f"
                },
                {
                    "args": "nsum_def, nsum v f = nsum u f",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ nsum v f = nsum u f"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ u ⊆ v ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0) ⟶ nsum v f = nsum u f"
                }
            ],
            "prop": "u ⊆ v ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0) ⟶ nsum v f = nsum u f",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_superset"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ nat",
                "u": "'b set",
                "v": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_univ",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "support plus f univ ⊆ s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "support plus f univ ⊆ s ⊢ support plus f univ ⊆ s"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_univ",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "support plus f univ ⊆ s ⊢ iterate plus s f = iterate plus univ f"
                },
                {
                    "args": "nsum_def, nsum s f = nsum univ f",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "support plus f univ ⊆ s ⊢ nsum s f = nsum univ f"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ support plus f univ ⊆ s ⟶ nsum s f = nsum univ f"
                }
            ],
            "prop": "support plus f univ ⊆ s ⟶ nsum s f = nsum univ f",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_univ"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_union_rzero",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite u",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite u ⊢ finite u"
                },
                {
                    "args": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0"
                },
                {
                    "args": "u ∪ v = u ∪ {x. x ∈ v ∧ ¬(x ∈ u)}",
                    "id": "2",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ u ∪ v = u ∪ {x. x ∈ v ∧ ¬(x ∈ u)}"
                },
                {
                    "args": "diff_def, u ∪ v = u ∪ diff v u",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ u ∪ v = u ∪ diff v u"
                },
                {
                    "args": "subset_union_id, {A: u, B: diff v u}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ u ⊆ u ∪ diff v u"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ ∀x. x ∈ u ∪ diff v u ⟶ ¬(x ∈ u) ⟶ f x = 0"
                },
                {
                    "args": "x, 'b",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ u ∪ diff v u",
                    "id": "5.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ u ∪ diff v u ⊢ x ∈ u ∪ diff v u"
                },
                {
                    "args": "¬(x ∈ u)",
                    "id": "5.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ u) ⊢ ¬(x ∈ u)"
                },
                {
                    "args": "diff_def",
                    "id": "5.3",
                    "prevs": [
                        "5.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ u ∪ diff v u ⊢ x ∈ u ∪ {x1. x1 ∈ v ∧ ¬(x1 ∈ u)}"
                },
                {
                    "args": "member_union_iff",
                    "id": "5.4",
                    "prevs": [
                        "5.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ u ∪ diff v u ⊢ x ∈ u ∨ x ∈ {x1. x1 ∈ v ∧ ¬(x1 ∈ u)}"
                },
                {
                    "args": "member_collect",
                    "id": "5.5",
                    "prevs": [
                        "5.4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ u ∪ diff v u ⊢ x ∈ u ∨ x ∈ v ∧ ¬(x ∈ u)"
                },
                {
                    "args": "",
                    "id": "5.6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite u, ¬(x ∈ u), x ∈ u ∪ diff v u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ x ∈ u ⟶ x ∈ v"
                },
                {
                    "args": "x ∈ u",
                    "id": "5.6.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ u ⊢ x ∈ u"
                },
                {
                    "args": "negE_gen, {A: x ∈ u, C: x ∈ v}",
                    "id": "5.6.1",
                    "prevs": [
                        "5.2",
                        "5.6.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x ∈ u, ¬(x ∈ u) ⊢ x ∈ v"
                },
                {
                    "args": "",
                    "id": "5.6.2",
                    "prevs": [
                        "5.6.0",
                        "5.6.1"
                    ],
                    "rule": "intros",
                    "th": "finite u, ¬(x ∈ u), x ∈ u ∪ diff v u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ x ∈ u ⟶ x ∈ v"
                },
                {
                    "args": "",
                    "id": "5.7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite u, ¬(x ∈ u), x ∈ u ∪ diff v u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ x ∈ v ∧ ¬(x ∈ u) ⟶ x ∈ v"
                },
                {
                    "args": "x ∈ v ∧ ¬(x ∈ u)",
                    "id": "5.7.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ v ∧ ¬(x ∈ u) ⊢ x ∈ v ∧ ¬(x ∈ u)"
                },
                {
                    "args": "conjD1",
                    "id": "5.7.1",
                    "prevs": [
                        "5.7.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ v ∧ ¬(x ∈ u) ⊢ x ∈ v"
                },
                {
                    "args": "",
                    "id": "5.7.2",
                    "prevs": [
                        "5.7.0",
                        "5.7.1"
                    ],
                    "rule": "intros",
                    "th": "finite u, ¬(x ∈ u), x ∈ u ∪ diff v u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ x ∈ v ∧ ¬(x ∈ u) ⟶ x ∈ v"
                },
                {
                    "args": "disjE",
                    "id": "5.8",
                    "prevs": [
                        "5.5",
                        "5.6",
                        "5.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, ¬(x ∈ u), x ∈ u ∪ diff v u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ x ∈ v"
                },
                {
                    "args": "x",
                    "id": "5.9",
                    "prevs": [
                        "1",
                        "5.8",
                        "5.2"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite u, ¬(x ∈ u), x ∈ u ∪ diff v u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ f x = 0"
                },
                {
                    "args": "",
                    "id": "5.10",
                    "prevs": [
                        "5.0",
                        "5.1",
                        "5.2",
                        "5.9"
                    ],
                    "rule": "intros",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ ∀x. x ∈ u ∪ diff v u ⟶ ¬(x ∈ u) ⟶ f x = 0"
                },
                {
                    "args": "nsum_superset",
                    "id": "6",
                    "prevs": [
                        "4",
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ nsum (u ∪ diff v u) f = nsum u f"
                },
                {
                    "args": "nsum (u ∪ v) f = nsum u f",
                    "id": "7",
                    "prevs": [
                        "3",
                        "6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ nsum (u ∪ v) f = nsum u f"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "0",
                        "1",
                        "7"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite u ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0) ⟶ nsum (u ∪ v) f = nsum u f"
                }
            ],
            "prop": "finite u ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0) ⟶ nsum (u ∪ v) f = nsum u f",
            "steps": [
                {
                    "goal": "u ∪ v = u ∪ (diff v u)",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_superset"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "subset_union_id"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "5.3",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "5.1"
                    ],
                    "goal_id": "5.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "fact_ids": [
                        "5.3"
                    ],
                    "goal_id": "5.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_union_iff"
                },
                {
                    "fact_ids": [
                        "5.4"
                    ],
                    "goal_id": "5.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "5.5"
                    ],
                    "goal_id": "5.6",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "5.6",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "5.2",
                        "5.6.0"
                    ],
                    "goal_id": "5.6.1",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "5.7",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "5.7.0"
                    ],
                    "goal_id": "5.7.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ nat",
                "u": "'b set",
                "v": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_union_lzero",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite u",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite u ⊢ finite u"
                },
                {
                    "args": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0"
                },
                {
                    "args": "nsum_union_rzero",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ nsum (u ∪ v) f = nsum u f"
                },
                {
                    "args": "union_comm, nsum (v ∪ u) f = nsum u f",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ nsum (v ∪ u) f = nsum u f"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "1",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite u ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0) ⟶ nsum (v ∪ u) f = nsum u f"
                }
            ],
            "prop": "finite u ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0) ⟶ nsum (v ∪ u) f = nsum u f",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "union_comm"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_union_rzero"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ nat",
                "u": "'b set",
                "v": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_restrict",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x. x ∈ s ⟶ (if x ∈ s then f x else 0) = f x"
                },
                {
                    "args": "x, 'a",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "if_P, (if x ∈ s then f x else 0) = f x",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "x ∈ s ⊢ (if x ∈ s then f x else 0) = f x"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.2"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ ∀x. x ∈ s ⟶ (if x ∈ s then f x else 0) = f x"
                },
                {
                    "args": "nsum_eq",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ nsum s (λx. if x ∈ s then f x else 0) = nsum s f"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ nsum s (λx. if x ∈ s then f x else 0) = nsum s f"
                }
            ],
            "prop": "finite s ⟶ nsum s (λx. if x ∈ s then f x else 0) = nsum s f",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_eq"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_bound",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x ≤ b",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x ≤ b ⊢ ∀x. x ∈ s ⟶ f x ≤ b"
                },
                {
                    "args": "nsum_const, {c: b}",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum s (λn. b) = card s * b"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s ⊢ card s * b = nsum s (λn. b)"
                },
                {
                    "args": "nsum_le",
                    "id": "4",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b ⊢ nsum s f ≤ nsum s (λx. b)"
                },
                {
                    "args": "nsum s f ≤ card s * b",
                    "id": "5",
                    "prevs": [
                        "3",
                        "4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b ⊢ nsum s f ≤ card s * b"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⟶ nsum s f ≤ card s * b"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⟶ nsum s f ≤ card s * b",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "param_c": "b",
                    "theorem": "nsum_const"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_le"
                }
            ],
            "ty": "thm",
            "vars": {
                "b": "nat",
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_bound_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x ≤ b DIV card s",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ ∀x. x ∈ s ⟶ f x ≤ b DIV card s"
                },
                {
                    "args": "card_eq_0",
                    "id": "3",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ card s = 0 ⟷ s = ∅"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s ⊢ s = ∅ ⟷ card s = 0"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "4",
                        "1"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite s, ¬(s = ∅) ⊢ ¬(card s = 0)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ ∀x. x ∈ s ⟶ card s * f x ≤ b"
                },
                {
                    "args": "x, 'a",
                    "id": "6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "6.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "le_rdiv_eq, {b: b, n: f x}",
                    "id": "6.2",
                    "prevs": [
                        "5"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(s = ∅) ⊢ f x ≤ b DIV card s ⟷ card s * f x ≤ b"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "6.3",
                    "prevs": [
                        "6.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(s = ∅) ⊢ card s * f x ≤ b ⟷ f x ≤ b DIV card s"
                },
                {
                    "args": "x",
                    "id": "6.4",
                    "prevs": [
                        "2",
                        "6.1"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, x ∈ s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ f x ≤ b DIV card s"
                },
                {
                    "args": "card s * f x ≤ b",
                    "id": "6.5",
                    "prevs": [
                        "6.3",
                        "6.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x ∈ s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ card s * f x ≤ b"
                },
                {
                    "args": "",
                    "id": "6.6",
                    "prevs": [
                        "6.0",
                        "6.1",
                        "6.5"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ ∀x. x ∈ s ⟶ card s * f x ≤ b"
                },
                {
                    "args": "nsum_bound",
                    "id": "7",
                    "prevs": [
                        "0",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ nsum s (λx. card s * f x) ≤ card s * b"
                },
                {
                    "args": "nsum_lmul",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ card s * nsum s f ≤ card s * b"
                },
                {
                    "args": "mult_comm",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ nsum s f * card s ≤ b * card s"
                },
                {
                    "args": "le_mult_rcancel",
                    "id": "10",
                    "prevs": [
                        "9"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ nsum s f ≤ b ∨ card s = 0"
                },
                {
                    "args": "nsum s f ≤ b ⟶ nsum s f ≤ b",
                    "id": "11",
                    "prevs": [],
                    "rule": "trivial",
                    "th": "⊢ nsum s f ≤ b ⟶ nsum s f ≤ b"
                },
                {
                    "args": "",
                    "id": "12",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ card s = 0 ⟶ nsum s f ≤ b"
                },
                {
                    "args": "card s = 0",
                    "id": "12.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "card s = 0 ⊢ card s = 0"
                },
                {
                    "args": "negE_gen, {A: card s = 0, C: nsum s f ≤ b}",
                    "id": "12.1",
                    "prevs": [
                        "5",
                        "12.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(s = ∅), card s = 0 ⊢ nsum s f ≤ b"
                },
                {
                    "args": "",
                    "id": "12.2",
                    "prevs": [
                        "12.0",
                        "12.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ card s = 0 ⟶ nsum s f ≤ b"
                },
                {
                    "args": "disjE",
                    "id": "13",
                    "prevs": [
                        "10",
                        "11",
                        "12"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b DIV card s ⊢ nsum s f ≤ b"
                },
                {
                    "args": "",
                    "id": "14",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "13"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x ≤ b DIV card s) ⟶ nsum s f ≤ b"
                }
            ],
            "prop": "finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x ≤ b DIV card s) ⟶ nsum s f ≤ b",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_forward_step",
                    "theorem": "card_eq_0"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "4",
                        "1"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "goal": "nsum s (%x. card s * f x) <= card s * b",
                    "goal_id": "6",
                    "method_name": "cut"
                },
                {
                    "goal_id": "6",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_bound"
                },
                {
                    "goal_id": "6",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "5"
                    ],
                    "goal_id": "6.2",
                    "method_name": "apply_forward_step",
                    "param_b": "b",
                    "param_n": "f x",
                    "theorem": "le_rdiv_eq"
                },
                {
                    "fact_ids": [
                        "6.2"
                    ],
                    "goal_id": "6.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "6.3"
                    ],
                    "goal_id": "6.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "6.4",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal_id": "8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "nsum_lmul"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "mult_comm"
                },
                {
                    "fact_ids": [
                        "9"
                    ],
                    "goal_id": "10",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "le_mult_rcancel"
                },
                {
                    "fact_ids": [
                        "10"
                    ],
                    "goal_id": "11",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "12",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "5",
                        "12.0"
                    ],
                    "goal_id": "12.1",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                }
            ],
            "ty": "thm",
            "vars": {
                "b": "nat",
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_bound_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x ≤ b",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x ≤ b ⊢ ∀x. x ∈ s ⟶ f x ≤ b"
                },
                {
                    "args": "∃x. x ∈ s ∧ f x < b",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x. x ∈ s ∧ f x < b ⊢ ∃x. x ∈ s ∧ f x < b"
                },
                {
                    "args": "nsum_lt",
                    "id": "3",
                    "prevs": [
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b, ∃x. x ∈ s ∧ f x < b ⊢ nsum s f < nsum s (λx. b)"
                },
                {
                    "args": "nsum_const, {c: b}",
                    "id": "4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum s (λn. b) = card s * b"
                },
                {
                    "args": "less_eq_refl, {n: card s * b}",
                    "id": "5",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ card s * b ≤ card s * b"
                },
                {
                    "args": "nsum s (λx. b) ≤ card s * b",
                    "id": "6",
                    "prevs": [
                        "4",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b, ∃x. x ∈ s ∧ f x < b ⊢ nsum s (λn. b) ≤ card s * b"
                },
                {
                    "args": "lte_trans",
                    "id": "7",
                    "prevs": [
                        "3",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b, ∃x. x ∈ s ∧ f x < b ⊢ nsum s f < card s * b"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "7"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⟶ (∃x. x ∈ s ∧ f x < b) ⟶ nsum s f < card s * b"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⟶ (∃x. x ∈ s ∧ f x < b) ⟶ nsum s f < card s * b",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "param_m": "nsum s (%x::'a. b)",
                    "theorem": "lte_trans"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_lt"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_forward_step",
                    "param_c": "b",
                    "theorem": "nsum_const"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "less_eq_refl"
                }
            ],
            "ty": "thm",
            "vars": {
                "b": "nat",
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_union_eq",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite u",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite u ⊢ finite u"
                },
                {
                    "args": "s ∩ t = ∅",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "s ∩ t = ∅ ⊢ s ∩ t = ∅"
                },
                {
                    "args": "s ∪ t = u",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "s ∪ t = u ⊢ s ∪ t = u"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "s ∪ t = u ⊢ u = s ∪ t"
                },
                {
                    "args": "subset_union_id, {A: s, B: t}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ s ⊆ s ∪ t"
                },
                {
                    "args": "s ⊆ u",
                    "id": "5",
                    "prevs": [
                        "3",
                        "4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ s ⊆ u"
                },
                {
                    "args": "finite_subset",
                    "id": "6",
                    "prevs": [
                        "0",
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ finite s"
                },
                {
                    "args": "subset_union_id, {A: t, B: s}",
                    "id": "7",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ t ⊆ t ∪ s"
                },
                {
                    "args": "union_comm, t ⊆ s ∪ t",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ t ⊆ s ∪ t"
                },
                {
                    "args": "t ⊆ u",
                    "id": "9",
                    "prevs": [
                        "3",
                        "8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ t ⊆ u"
                },
                {
                    "args": "finite_subset",
                    "id": "10",
                    "prevs": [
                        "0",
                        "9"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ finite t"
                },
                {
                    "args": "disjoint_def, disjoint s t",
                    "id": "11",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ disjoint s t"
                },
                {
                    "args": "nsum_union, {f: f, s: s, t: t}",
                    "id": "12",
                    "prevs": [
                        "6",
                        "10",
                        "11"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ nsum (s ∪ t) f = nsum s f + nsum t f"
                },
                {
                    "args": "eq_sym_eq, nsum s f + nsum t f = nsum (s ∪ t) f",
                    "id": "13",
                    "prevs": [
                        "12"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ nsum s f + nsum t f = nsum (s ∪ t) f"
                },
                {
                    "args": "nsum s f + nsum t f = nsum u f",
                    "id": "14",
                    "prevs": [
                        "3",
                        "13"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ nsum s f + nsum t f = nsum u f"
                },
                {
                    "args": "",
                    "id": "15",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "14"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite u ⟶ s ∩ t = ∅ ⟶ s ∪ t = u ⟶ nsum s f + nsum t f = nsum u f"
                }
            ],
            "prop": "finite u ⟶ s ∩ t = ∅ ⟶ s ∪ t = u ⟶ nsum s f + nsum t f = nsum u f",
            "steps": [
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_union"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "param_t": "u",
                    "theorem": "finite_subset"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "subset_union_id"
                },
                {
                    "goal_id": "7",
                    "method_name": "apply_backward_step",
                    "param_t": "u",
                    "theorem": "finite_subset"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "union_comm"
                },
                {
                    "goal_id": "7",
                    "method_name": "apply_backward_step",
                    "theorem": "subset_union_id"
                },
                {
                    "goal_id": "11",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ nat",
                "s": "'b set",
                "t": "'b set",
                "u": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_eq_superset",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite t",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "t ⊆ s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "t ⊆ s ⊢ t ⊆ s"
                },
                {
                    "args": "∀x. x ∈ t ⟶ f x = g x",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ t ⟶ f x = g x ⊢ ∀x. x ∈ t ⟶ f x = g x"
                },
                {
                    "args": "∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0 ⊢ ∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0"
                },
                {
                    "args": "nsum_superset",
                    "id": "4",
                    "prevs": [
                        "1",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "t ⊆ s, ∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0 ⊢ nsum s f = nsum t f"
                },
                {
                    "args": "nsum_eq",
                    "id": "5",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite t, t ⊆ s, ∀x. x ∈ t ⟶ f x = g x, ∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0 ⊢ nsum t f = nsum t g"
                },
                {
                    "args": "nsum s f = nsum t g",
                    "id": "6",
                    "prevs": [
                        "4",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite t, t ⊆ s, ∀x. x ∈ t ⟶ f x = g x, ∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0 ⊢ nsum s f = nsum t g"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite t ⟶ t ⊆ s ⟶ (∀x. x ∈ t ⟶ f x = g x) ⟶ (∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0) ⟶ nsum s f = nsum t g"
                }
            ],
            "prop": [
                "finite t ",
                "⟶ t ⊆ s ",
                "   ⟶ (∀x. x ∈ t ⟶ f x = g x) ⟶ (∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0) ⟶ nsum s f = nsum t g"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "1",
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_forward_step",
                    "theorem": "nsum_superset"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_eq"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ nat",
                "g": "'b ⇒ nat",
                "s": "'b set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_restrict_set",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_nat_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_restrict_set, {P: P, f: f, op: (plus::nat ⇒ nat ⇒ nat), s: s}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({x. x ∈ s ∧ P x}) f = iterate plus s (λx. if P x then f x else neutral plus)"
                },
                {
                    "args": "neutral_nat_add, iterate plus ({x. x ∈ s ∧ P x}) f = iterate plus s (λx. if P x then f x else 0)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "⊢ iterate plus ({x. x ∈ s ∧ P x}) f = iterate plus s (λx. if P x then f x else 0)"
                },
                {
                    "args": "nsum_def, nsum ({x. x ∈ s ∧ P x}) f = nsum s (λx. if P x then f x else 0)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({x. x ∈ s ∧ P x}) f = nsum s (λx. if P x then f x else 0)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({x. x ∈ s ∧ P x}) f = nsum s (λx. if P x then f x else 0)"
                }
            ],
            "prop": "nsum ({x. x ∈ s ∧ P x}) f = nsum s (λx. if P x then f x else 0)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "neutral_nat_add"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_restrict_set"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "'b ⇒ bool",
                "f": "'b ⇒ nat",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_nsum_restrict",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "nsum_swap, {f: λi. λx1. if R i x1 then f i x1 else 0, s: s, t: t}",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t ⊢ nsum s (λi. nsum t (λx1. if R i x1 then f i x1 else 0)) = nsum t (λj. nsum s (λi. if R i j then f i j else 0))"
                },
                {
                    "args": "nsum_restrict_set, nsum s (λx. nsum ({y. y ∈ t ∧ R x y}) (λy. f x y)) = nsum t (λy. nsum ({x. x ∈ s ∧ R x y}) (λx. f x y))",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t ⊢ nsum s (λx. nsum ({y. y ∈ t ∧ R x y}) (λy. f x y)) = nsum t (λy. nsum ({x. x ∈ s ∧ R x y}) (λx. f x y))"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "1",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ nsum s (λx. nsum ({y. y ∈ t ∧ R x y}) (λy. f x y)) = nsum t (λy. nsum ({x. x ∈ s ∧ R x y}) (λx. f x y))"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ finite t ",
                "   ⟶ nsum s (λx. nsum ({y. y ∈ t ∧ R x y}) (λy. f x y)) = ",
                "      nsum t (λy. nsum ({x. x ∈ s ∧ R x y}) (λx. f x y))"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_restrict_set"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_swap"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "'a ⇒ 'b ⇒ bool",
                "f": "'a ⇒ 'b ⇒ nat",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "card_eq_nsum",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "nsum_const, {c: (1::nat)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum s (λn. 1) = card s * 1"
                },
                {
                    "args": "mult_1_right, card s = card s * 1",
                    "id": "2",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ card s = card s * 1"
                },
                {
                    "args": "card s = nsum s (λx. 1)",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s ⊢ card s = nsum s (λn. 1)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ card s = nsum s (λx. 1)"
                }
            ],
            "prop": "finite s ⟶ card s = nsum s (λx. 1)",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_c": "(1::nat)",
                    "theorem": "nsum_const"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "mult_1_right"
                }
            ],
            "ty": "thm",
            "vars": {
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_multicount_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x. x ∈ s ⟶ card ({j. j ∈ t ∧ R x j}) = nsum ({j. j ∈ t ∧ R x j}) (λj. 1)"
                },
                {
                    "args": "x, 'a",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, x ∈ s, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x1. x1 ∈ t ∧ R x x1 ⟶ x1 ∈ t"
                },
                {
                    "args": "x1, 'b",
                    "id": "3.2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ t ∧ R x x1",
                    "id": "3.2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ t ∧ R x x1 ⊢ x1 ∈ t ∧ R x x1"
                },
                {
                    "args": "conjD1",
                    "id": "3.2.2",
                    "prevs": [
                        "3.2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ t ∧ R x x1 ⊢ x1 ∈ t"
                },
                {
                    "args": "",
                    "id": "3.2.3",
                    "prevs": [
                        "3.2.0",
                        "3.2.1",
                        "3.2.2"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, x ∈ s, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x1. x1 ∈ t ∧ R x x1 ⟶ x1 ∈ t"
                },
                {
                    "args": "member_collect, ∀x1. x1 ∈ {j. j ∈ t ∧ R x j} ⟶ x1 ∈ t",
                    "id": "3.3",
                    "prevs": [
                        "3.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ s, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x1. x1 ∈ {j. j ∈ t ∧ R x j} ⟶ x1 ∈ t"
                },
                {
                    "args": "subsetI",
                    "id": "3.4",
                    "prevs": [
                        "3.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ s, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ {j. j ∈ t ∧ R x j} ⊆ t"
                },
                {
                    "args": "finite_subset",
                    "id": "3.5",
                    "prevs": [
                        "1",
                        "3.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ s, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ finite ({j. j ∈ t ∧ R x j})"
                },
                {
                    "args": "card_eq_nsum",
                    "id": "3.6",
                    "prevs": [
                        "3.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ s, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ card ({j. j ∈ t ∧ R x j}) = nsum ({j. j ∈ t ∧ R x j}) (λx1. 1)"
                },
                {
                    "args": "",
                    "id": "3.7",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.6"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x. x ∈ s ⟶ card ({j. j ∈ t ∧ R x j}) = nsum ({j. j ∈ t ∧ R x j}) (λj. 1)"
                },
                {
                    "args": "nsum_eq",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ nsum s (λx. card ({j. j ∈ t ∧ R x j})) = nsum s (λx. nsum ({j. j ∈ t ∧ R x j}) (λj. 1))"
                },
                {
                    "args": "nsum_nsum_restrict, {R: R, f: λi::'a. λj::'b. (1::nat)}",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t ⊢ nsum s (λx. nsum ({y. y ∈ t ∧ R x y}) (λy. 1)) = nsum t (λy. nsum ({x. x ∈ s ∧ R x y}) (λx. 1))"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x. x ∈ t ⟶ nsum ({x1. x1 ∈ s ∧ R x1 x}) (λx1. 1) = k x"
                },
                {
                    "args": "x, 'b",
                    "id": "6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ t",
                    "id": "6.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ⊢ x ∈ t"
                },
                {
                    "args": "",
                    "id": "6.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x1. x1 ∈ s ∧ R x1 x ⟶ x1 ∈ s"
                },
                {
                    "args": "x1, 'a",
                    "id": "6.2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ s ∧ R x1 x",
                    "id": "6.2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ∧ R x1 x ⊢ x1 ∈ s ∧ R x1 x"
                },
                {
                    "args": "conjD1",
                    "id": "6.2.2",
                    "prevs": [
                        "6.2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ R x1 x ⊢ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "6.2.3",
                    "prevs": [
                        "6.2.0",
                        "6.2.1",
                        "6.2.2"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x1. x1 ∈ s ∧ R x1 x ⟶ x1 ∈ s"
                },
                {
                    "args": "member_collect, ∀x1. x1 ∈ {x11. x11 ∈ s ∧ R x11 x} ⟶ x1 ∈ s",
                    "id": "6.3",
                    "prevs": [
                        "6.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x1. x1 ∈ {x11. x11 ∈ s ∧ R x11 x} ⟶ x1 ∈ s"
                },
                {
                    "args": "subsetI",
                    "id": "6.4",
                    "prevs": [
                        "6.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ {x1. x1 ∈ s ∧ R x1 x} ⊆ s"
                },
                {
                    "args": "finite_subset",
                    "id": "6.5",
                    "prevs": [
                        "0",
                        "6.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ finite ({x1. x1 ∈ s ∧ R x1 x})"
                },
                {
                    "args": "card_eq_nsum",
                    "id": "6.6",
                    "prevs": [
                        "6.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ card ({x1. x1 ∈ s ∧ R x1 x}) = nsum ({x1. x1 ∈ s ∧ R x1 x}) (λx1. 1)"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "6.7",
                    "prevs": [
                        "6.6"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ nsum ({x1. x1 ∈ s ∧ R x1 x}) (λx1. 1) = card ({x1. x1 ∈ s ∧ R x1 x})"
                },
                {
                    "args": "x",
                    "id": "6.8",
                    "prevs": [
                        "2",
                        "6.1"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ card ({i. i ∈ s ∧ R i x}) = k x"
                },
                {
                    "args": "nsum ({x1. x1 ∈ s ∧ R x1 x}) (λx1. 1) = k x",
                    "id": "6.9",
                    "prevs": [
                        "6.7",
                        "6.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ nsum ({x1. x1 ∈ s ∧ R x1 x}) (λx1. 1) = k x"
                },
                {
                    "args": "",
                    "id": "6.10",
                    "prevs": [
                        "6.0",
                        "6.1",
                        "6.9"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x. x ∈ t ⟶ nsum ({x1. x1 ∈ s ∧ R x1 x}) (λx1. 1) = k x"
                },
                {
                    "args": "nsum_eq",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ nsum t (λx. nsum ({x1. x1 ∈ s ∧ R x1 x}) (λx1. 1)) = nsum t k"
                },
                {
                    "args": "nsum s (λx. nsum ({j. j ∈ t ∧ R x j}) (λj. 1)) = nsum t (λi. k i)",
                    "id": "8",
                    "prevs": [
                        "5",
                        "7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ nsum s (λx. nsum ({y. y ∈ t ∧ R x y}) (λy. 1)) = nsum t (λi. k i)"
                },
                {
                    "args": "nsum s (λi. card ({j. j ∈ t ∧ R i j})) = nsum t (λi. k i)",
                    "id": "9",
                    "prevs": [
                        "4",
                        "8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ nsum s (λx. card ({j. j ∈ t ∧ R x j})) = nsum t (λi. k i)"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "9"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ (∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j) ⟶ nsum s (λi. card ({j. j ∈ t ∧ R i j})) = nsum t (λi. k i)"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ finite t ",
                "   ⟶ (∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j) ",
                "      ⟶ nsum s (λi. card ({j. j ∈ t ∧ R i j})) = nsum t (λi. k i)"
            ],
            "steps": [
                {
                    "goal": "nsum s (λi. card ({j. j ∈ t ∧ R i j})) =nsum s (%i. nsum {j. j ∈ t ∧ R i j} (%j. 1))",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_eq"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "card_eq_nsum"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "apply_backward_step",
                    "param_t": "t",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "3.2.1"
                    ],
                    "goal_id": "3.2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0",
                        "1"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_forward_step",
                    "param_R": "R",
                    "param_f": "(%i::'a. %j::'b. (1::nat))",
                    "theorem": "nsum_nsum_restrict"
                },
                {
                    "fact_ids": [
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "6",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_eq"
                },
                {
                    "goal_id": "6",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal": "finite ({x1. x1 ∈ s ∧ R x1 x})",
                    "goal_id": "6.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "6.2",
                    "method_name": "apply_backward_step",
                    "param_t": "s",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "6.2",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "6.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "6.2",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "6.2.1"
                    ],
                    "goal_id": "6.2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "6.5"
                    ],
                    "goal_id": "6.6",
                    "method_name": "apply_forward_step",
                    "theorem": "card_eq_nsum"
                },
                {
                    "fact_ids": [
                        "6.6"
                    ],
                    "goal_id": "6.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "6.7"
                    ],
                    "goal_id": "6.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "6.8",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "'a ⇒ 'b ⇒ bool",
                "f": "'a ⇒ 'b ⇒ nat",
                "k": "'b ⇒ nat",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_multicount",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k ⊢ ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k"
                },
                {
                    "args": "nsum_multicount_gen",
                    "id": "3",
                    "prevs": [
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k ⊢ nsum s (λi. card ({j. j ∈ t ∧ R i j})) = nsum t (λi. k)"
                },
                {
                    "args": "nsum_const, {c: k, s: t}",
                    "id": "4",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k ⊢ nsum t (λn. k) = card t * k"
                },
                {
                    "args": "mult_comm, nsum t (λi. k) = k * card t",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k ⊢ nsum t (λi. k) = k * card t"
                },
                {
                    "args": "nsum s (λi. card ({j. j ∈ t ∧ R i j})) = k * card t",
                    "id": "6",
                    "prevs": [
                        "3",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k ⊢ nsum s (λi. card ({j. j ∈ t ∧ R i j})) = k * card t"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ (∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k) ⟶ nsum s (λi. card ({j. j ∈ t ∧ R i j})) = k * card t"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ finite t ",
                "   ⟶ (∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k) ",
                "      ⟶ nsum s (λi. card ({j. j ∈ t ∧ R i j})) = k * card t"
            ],
            "steps": [
                {
                    "goal": "nsum s (λi. card ({j. j ∈ t ∧ R i j})) = nsum t (%i. k)",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_multicount_gen"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "mult_comm"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_const"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "'a ⇒ 'b ⇒ bool",
                "f": "'a ⇒ 'b ⇒ nat",
                "k": "nat",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_image_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_image_gen, {f: f, g: g, op: (plus::nat ⇒ nat ⇒ nat), s: s}",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ iterate plus s g = iterate plus (image f s) (λy. iterate plus ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "nsum_def, nsum s g = nsum (image f s) (λy. nsum ({x. x ∈ s ∧ f x = y}) g)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ nsum s g = nsum (image f s) (λy. nsum ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ nsum s g = nsum (image f s) (λy. nsum ({x. x ∈ s ∧ f x = y}) g)"
                }
            ],
            "prop": "finite s ⟶ nsum s g = nsum (image f s) (λy. nsum ({x. x ∈ s ∧ f x = y}) g)",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_image_gen"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "g": "'b ⇒ nat",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_group",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "image f s ⊆ t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "image f s ⊆ t ⊢ image f s ⊆ t"
                },
                {
                    "args": "nsum_image_gen, {f: f, g: g, s: s}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite s ⟶ nsum s g = nsum (image f s) (λy. nsum ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2",
                        "0"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s ⊢ nsum s g = nsum (image f s) (λy. nsum ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, image f s ⊆ t ⊢ ∀x. x ∈ t ⟶ ¬(x ∈ image f s) ⟶ nsum ({x1. x1 ∈ s ∧ f x1 = x}) g = 0"
                },
                {
                    "args": "x, 'a",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ t",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ⊢ x ∈ t"
                },
                {
                    "args": "¬(x ∈ image f s)",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ image f s) ⊢ ¬(x ∈ image f s)"
                },
                {
                    "args": "",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s) ⊢ ∀x1. x1 ∈ s ∧ f x1 = x ⟶ g x1 = 0"
                },
                {
                    "args": "x1, 'b",
                    "id": "4.3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ s ∧ f x1 = x",
                    "id": "4.3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ∧ f x1 = x ⊢ x1 ∈ s ∧ f x1 = x"
                },
                {
                    "args": "in_image",
                    "id": "4.3.2",
                    "prevs": [
                        "4.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(x ∈ image f s) ⊢ ¬(∃x1. x = f x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "exI, {P: λa1. a1 ∈ s ∧ f a1 = x, a: x1}",
                    "id": "4.3.3",
                    "prevs": [
                        "4.3.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "x1 ∈ s ∧ f x1 = x ⊢ ∃a1. a1 ∈ s ∧ f a1 = x"
                },
                {
                    "args": "eq_sym_eq, ∃x1. x1 ∈ s ∧ x = f x1",
                    "id": "4.3.4",
                    "prevs": [
                        "4.3.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s), x1 ∈ s ∧ f x1 = x ⊢ ∃x1. x1 ∈ s ∧ x = f x1"
                },
                {
                    "args": "conj_comm, ∃x1. x = f x1 ∧ x1 ∈ s",
                    "id": "4.3.5",
                    "prevs": [
                        "4.3.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s), x1 ∈ s ∧ f x1 = x ⊢ ∃x1. x = f x1 ∧ x1 ∈ s"
                },
                {
                    "args": "negE_gen, {A: ∃x1. x = f x1 ∧ x1 ∈ s, C: g x1 = 0}",
                    "id": "4.3.6",
                    "prevs": [
                        "4.3.2",
                        "4.3.5"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s), x1 ∈ s ∧ f x1 = x ⊢ g x1 = 0"
                },
                {
                    "args": "",
                    "id": "4.3.7",
                    "prevs": [
                        "4.3.0",
                        "4.3.1",
                        "4.3.6"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s) ⊢ ∀x1. x1 ∈ s ∧ f x1 = x ⟶ g x1 = 0"
                },
                {
                    "args": "member_collect, ∀x1. x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⟶ g x1 = 0",
                    "id": "4.4",
                    "prevs": [
                        "4.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s) ⊢ ∀x1. x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⟶ g x1 = 0"
                },
                {
                    "args": "nsum_eq_0",
                    "id": "4.5",
                    "prevs": [
                        "4.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s) ⊢ nsum ({x1. x1 ∈ s ∧ f x1 = x}) g = 0"
                },
                {
                    "args": "",
                    "id": "4.6",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.5"
                    ],
                    "rule": "intros",
                    "th": "finite s, image f s ⊆ t ⊢ ∀x. x ∈ t ⟶ ¬(x ∈ image f s) ⟶ nsum ({x1. x1 ∈ s ∧ f x1 = x}) g = 0"
                },
                {
                    "args": "nsum_superset",
                    "id": "5",
                    "prevs": [
                        "1",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, image f s ⊆ t ⊢ nsum t (λx. nsum ({x1. x1 ∈ s ∧ f x1 = x}) g) = nsum (image f s) (λx. nsum ({x1. x1 ∈ s ∧ f x1 = x}) g)"
                },
                {
                    "args": "nsum t (λy. nsum ({x. x ∈ s ∧ f x = y}) g) = nsum s g",
                    "id": "6",
                    "prevs": [
                        "3",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, image f s ⊆ t ⊢ nsum t (λy. nsum ({x. x ∈ s ∧ f x = y}) g) = nsum s g"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ image f s ⊆ t ⟶ nsum t (λy. nsum ({x. x ∈ s ∧ f x = y}) g) = nsum s g"
                }
            ],
            "prop": "finite s ⟶ image f s ⊆ t ⟶ nsum t (λy. nsum ({x. x ∈ s ∧ f x = y}) g) = nsum s g",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_g": "g",
                    "param_s": "s",
                    "theorem": "nsum_image_gen"
                },
                {
                    "fact_ids": [
                        "2",
                        "0"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_superset"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "4.3",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_eq_0"
                },
                {
                    "goal_id": "4.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "4.3",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.3.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "fact_ids": [
                        "4.3.2"
                    ],
                    "goal_id": "4.3.3",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "4.3.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "conj_comm"
                },
                {
                    "goal_id": "4.3.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "4.3.1"
                    ],
                    "goal_id": "4.3.3",
                    "method_name": "apply_backward_step",
                    "theorem": "exI"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ 'a",
                "g": "'b ⇒ nat",
                "s": "'b set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_group_relation",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y)"
                },
                {
                    "args": "nsum_group, {f: λx. THE y. y ∈ t ∧ R x y, g: g, t: t}",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ image (λx. THE y. y ∈ t ∧ R x y) s ⊆ t ⟶ nsum t (λy. nsum ({x. x ∈ s ∧ (THE y1. y1 ∈ t ∧ R x y1) = y}) g) = nsum s g"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. (∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s) ⟶ x ∈ t"
                },
                {
                    "args": "x, 'a",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ ∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s"
                },
                {
                    "args": "x1, 'b",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s",
                    "id": "3.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s"
                },
                {
                    "args": "conjD1",
                    "id": "3.4",
                    "prevs": [
                        "3.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ x = (THE y. y ∈ t ∧ R x1 y)"
                },
                {
                    "args": "conjD2",
                    "id": "3.5",
                    "prevs": [
                        "3.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "3.6",
                    "prevs": [
                        "1",
                        "3.5"
                    ],
                    "rule": "apply_fact",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ ∃!y. y ∈ t ∧ R x1 y"
                },
                {
                    "args": "theI'",
                    "id": "3.7",
                    "prevs": [
                        "3.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ (THE x. x ∈ t ∧ R x1 x) ∈ t ∧ R x1 (THE x. x ∈ t ∧ R x1 x)"
                },
                {
                    "args": "conjD1",
                    "id": "3.8",
                    "prevs": [
                        "3.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ (THE x. x ∈ t ∧ R x1 x) ∈ t"
                },
                {
                    "args": "x ∈ t",
                    "id": "3.9",
                    "prevs": [
                        "3.4",
                        "3.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s, ∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ x ∈ t"
                },
                {
                    "args": "∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s",
                    "id": "3.10",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.1",
                        "3.2",
                        "3.3",
                        "3.9"
                    ],
                    "rule": "intros",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. (∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s) ⟶ x ∈ t"
                },
                {
                    "args": "in_image, ∀x. x ∈ image (λx1. THE y. y ∈ t ∧ R x1 y) s ⟶ x ∈ t",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. x ∈ image (λx1. THE y. y ∈ t ∧ R x1 y) s ⟶ x ∈ t"
                },
                {
                    "args": "subsetI",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ image (λx. THE y. y ∈ t ∧ R x y) s ⊆ t"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "2",
                        "5"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ nsum t (λy. nsum ({x. x ∈ s ∧ (THE y1. y1 ∈ t ∧ R x y1) = y}) g) = nsum s g"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ nsum s g = nsum t (λy. nsum ({x. x ∈ s ∧ (THE y1. y1 ∈ t ∧ R x y1) = y}) g)"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. x ∈ t ⟶ nsum ({x1. x1 ∈ s ∧ R x1 x}) g = nsum ({x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}) g"
                },
                {
                    "args": "x, 'a",
                    "id": "8.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ t",
                    "id": "8.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ⊢ x ∈ t"
                },
                {
                    "args": "",
                    "id": "8.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x1. x1 ∈ s ∧ R x1 x ⟷ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "x1, 'b",
                    "id": "8.2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "",
                    "id": "8.2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ x1 ∈ s ∧ R x1 x ⟶ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "x1 ∈ s ∧ R x1 x",
                    "id": "8.2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ∧ R x1 x ⊢ x1 ∈ s ∧ R x1 x"
                },
                {
                    "args": "conjD1",
                    "id": "8.2.1.1",
                    "prevs": [
                        "8.2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ R x1 x ⊢ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "8.2.1.2",
                    "prevs": [
                        "8.2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ R x1 x ⊢ R x1 x"
                },
                {
                    "args": "",
                    "id": "8.2.1.3",
                    "prevs": [
                        "1",
                        "8.2.1.1"
                    ],
                    "rule": "apply_fact",
                    "th": "x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∃!y. y ∈ t ∧ R x1 y"
                },
                {
                    "args": "exists1_def",
                    "id": "8.2.1.4",
                    "prevs": [
                        "8.2.1.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∃x. (x ∈ t ∧ R x1 x) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x)"
                },
                {
                    "args": "x2, 'a",
                    "id": "8.2.1.5",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x2"
                },
                {
                    "args": "(x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2)",
                    "id": "8.2.1.6",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2)"
                },
                {
                    "args": "conjD1",
                    "id": "8.2.1.7",
                    "prevs": [
                        "8.2.1.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ x2 ∈ t ∧ R x1 x2"
                },
                {
                    "args": "conjD2",
                    "id": "8.2.1.8",
                    "prevs": [
                        "8.2.1.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ ∀y. y ∈ t ∧ R x1 y ⟶ y = x2"
                },
                {
                    "args": "theI'",
                    "id": "8.2.1.9",
                    "prevs": [
                        "8.2.1.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ (THE x. x ∈ t ∧ R x1 x) ∈ t ∧ R x1 (THE x. x ∈ t ∧ R x1 x)"
                },
                {
                    "args": "",
                    "id": "8.2.1.10",
                    "prevs": [
                        "8.2.1.8",
                        "8.2.1.9"
                    ],
                    "rule": "apply_fact",
                    "th": "x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ (THE x. x ∈ t ∧ R x1 x) = x2"
                },
                {
                    "args": "conjI",
                    "id": "8.2.1.11",
                    "prevs": [
                        "8.1",
                        "8.2.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ x ∈ t ∧ R x1 x"
                },
                {
                    "args": "x",
                    "id": "8.2.1.12",
                    "prevs": [
                        "8.2.1.8",
                        "8.2.1.11"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, x ∈ t, x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ x = x2"
                },
                {
                    "args": "eq_sym_eq, x2 = x",
                    "id": "8.2.1.13",
                    "prevs": [
                        "8.2.1.12"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x ∈ t, x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ x2 = x"
                },
                {
                    "args": "(THE y. y ∈ t ∧ R x1 y) = x",
                    "id": "8.2.1.14",
                    "prevs": [
                        "8.2.1.10",
                        "8.2.1.13"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x ∈ t, x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ (THE x2. x2 ∈ t ∧ R x1 x2) = x"
                },
                {
                    "args": "conjI",
                    "id": "8.2.1.15",
                    "prevs": [
                        "8.2.1.1",
                        "8.2.1.14"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "∃x. (x ∈ t ∧ R x1 x) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x)",
                    "id": "8.2.1.16",
                    "prevs": [
                        "8.2.1.0",
                        "8.2.1.4",
                        "8.2.1.5",
                        "8.2.1.6",
                        "8.2.1.15"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ x1 ∈ s ∧ R x1 x ⟶ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "",
                    "id": "8.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⟶ x1 ∈ s ∧ R x1 x"
                },
                {
                    "args": "x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x",
                    "id": "8.2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "conjD1",
                    "id": "8.2.2.1",
                    "prevs": [
                        "8.2.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "8.2.2.2",
                    "prevs": [
                        "8.2.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "",
                    "id": "8.2.2.3",
                    "prevs": [
                        "1",
                        "8.2.2.1"
                    ],
                    "rule": "apply_fact",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ ∃!y. y ∈ t ∧ R x1 y"
                },
                {
                    "args": "theI'",
                    "id": "8.2.2.4",
                    "prevs": [
                        "8.2.2.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ (THE x. x ∈ t ∧ R x1 x) ∈ t ∧ R x1 (THE x. x ∈ t ∧ R x1 x)"
                },
                {
                    "args": "conjD2",
                    "id": "8.2.2.5",
                    "prevs": [
                        "8.2.2.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ R x1 (THE x. x ∈ t ∧ R x1 x)"
                },
                {
                    "args": "",
                    "id": "8.2.2.6",
                    "prevs": [
                        "8.2.2.2",
                        "8.2.2.5"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ R x1 x"
                },
                {
                    "args": "conjI",
                    "id": "8.2.2.7",
                    "prevs": [
                        "8.2.2.1",
                        "8.2.2.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ x1 ∈ s ∧ R x1 x"
                },
                {
                    "args": "",
                    "id": "8.2.2.8",
                    "prevs": [
                        "8.2.2.0",
                        "8.2.2.7"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⟶ x1 ∈ s ∧ R x1 x"
                },
                {
                    "args": "iffI",
                    "id": "8.2.3",
                    "prevs": [
                        "8.2.1",
                        "8.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ x1 ∈ s ∧ R x1 x ⟷ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "",
                    "id": "8.2.4",
                    "prevs": [
                        "8.2.0",
                        "8.2.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x1. x1 ∈ s ∧ R x1 x ⟷ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "member_collect, ∀x1. x1 ∈ {x11. x11 ∈ s ∧ R x11 x} ⟷ x1 ∈ {x11. x11 ∈ s ∧ (THE y. y ∈ t ∧ R x11 y) = x}",
                    "id": "8.3",
                    "prevs": [
                        "8.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x1. x1 ∈ {x11. x11 ∈ s ∧ R x11 x} ⟷ x1 ∈ {x11. x11 ∈ s ∧ (THE y. y ∈ t ∧ R x11 y) = x}"
                },
                {
                    "args": "member_ext",
                    "id": "8.4",
                    "prevs": [
                        "8.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ {x1. x1 ∈ s ∧ R x1 x} = {x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}"
                },
                {
                    "args": "nsum ({x1. x1 ∈ s ∧ R x1 x}) g = nsum ({x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}) g",
                    "id": "8.5",
                    "prevs": [
                        "8.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ nsum ({x1. x1 ∈ s ∧ R x1 x}) g = nsum ({x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}) g"
                },
                {
                    "args": "",
                    "id": "8.6",
                    "prevs": [
                        "8.0",
                        "8.1",
                        "8.5"
                    ],
                    "rule": "intros",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. x ∈ t ⟶ nsum ({x1. x1 ∈ s ∧ R x1 x}) g = nsum ({x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}) g"
                },
                {
                    "args": "nsum_eq",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ nsum t (λx. nsum ({x1. x1 ∈ s ∧ R x1 x}) g) = nsum t (λx. nsum ({x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}) g)"
                },
                {
                    "args": "nsum t (λy. nsum ({x. x ∈ s ∧ R x y}) g) = nsum s g",
                    "id": "10",
                    "prevs": [
                        "7",
                        "9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ nsum t (λy. nsum ({x. x ∈ s ∧ R x y}) g) = nsum s g"
                },
                {
                    "args": "",
                    "id": "11",
                    "prevs": [
                        "0",
                        "1",
                        "10"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y)) ⟶ nsum t (λy. nsum ({x. x ∈ s ∧ R x y}) g) = nsum s g"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ (∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y)) ",
                "   ⟶ nsum t (λy. nsum ({x. x ∈ s ∧ R x y}) g) = nsum s g"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "param_f": "(%x. (THE y. y ∈ t ∧ R x y))",
                    "param_g": "g",
                    "param_t": "t",
                    "theorem": "nsum_group"
                },
                {
                    "goal": "image (λx. THE y. y ∈ t ∧ R x y) s ⊆ t",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "3.1"
                    ],
                    "goal_id": "3.2",
                    "method_name": "exists_elim",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "3.3"
                    ],
                    "goal_id": "3.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.3"
                    ],
                    "goal_id": "3.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "1",
                        "3.5"
                    ],
                    "goal_id": "3.6",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3.6"
                    ],
                    "goal_id": "3.7",
                    "method_name": "apply_forward_step",
                    "theorem": "theI'"
                },
                {
                    "fact_ids": [
                        "3.7"
                    ],
                    "goal_id": "3.8",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.4"
                    ],
                    "goal_id": "3.9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2",
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "6"
                    ],
                    "goal_id": "7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal_id": "8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "8",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_eq"
                },
                {
                    "goal_id": "8",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal": "{x1. x1 ∈ s ∧ R x1 x} = {x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}",
                    "goal_id": "8.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "8.2",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "8.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "8.2",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "goal_id": "8.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "8.2.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "8.2.1.0"
                    ],
                    "goal_id": "8.2.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "8.2.1.0"
                    ],
                    "goal_id": "8.2.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "8.2.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "1",
                        "8.2.1.1"
                    ],
                    "goal_id": "8.2.1.3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "8.2.1.3"
                    ],
                    "goal_id": "8.2.1.4",
                    "method_name": "rewrite_fact",
                    "sym": "",
                    "theorem": "exists1_def"
                },
                {
                    "fact_ids": [
                        "8.2.1.4"
                    ],
                    "goal_id": "8.2.1.5",
                    "method_name": "exists_elim",
                    "names": "x2"
                },
                {
                    "fact_ids": [
                        "8.2.1.6"
                    ],
                    "goal_id": "8.2.1.7",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "8.2.1.6"
                    ],
                    "goal_id": "8.2.1.8",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "8.2.1.3"
                    ],
                    "goal_id": "8.2.1.9",
                    "method_name": "apply_forward_step",
                    "theorem": "theI'"
                },
                {
                    "fact_ids": [
                        "8.2.1.8",
                        "8.2.1.9"
                    ],
                    "goal_id": "8.2.1.10",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "8.2.1.10"
                    ],
                    "goal_id": "8.2.1.11",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "8.2.1.11",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "8.2.1.8"
                    ],
                    "goal_id": "8.2.1.11",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "8.2.1.11",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "8.2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "8.2.2.0"
                    ],
                    "goal_id": "8.2.2.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "8.2.2.0"
                    ],
                    "goal_id": "8.2.2.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "8.2.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "1",
                        "8.2.2.1"
                    ],
                    "goal_id": "8.2.2.3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "8.2.2.3"
                    ],
                    "goal_id": "8.2.2.4",
                    "method_name": "apply_forward_step",
                    "theorem": "theI'"
                },
                {
                    "fact_ids": [
                        "8.2.2.4"
                    ],
                    "goal_id": "8.2.2.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "8.2.2.2",
                        "8.2.2.5"
                    ],
                    "goal_id": "8.2.2.6",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "8.4"
                    ],
                    "goal_id": "8.5",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "'b ⇒ 'a ⇒ bool",
                "g": "'b ⇒ nat",
                "s": "'b set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_subset",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite u",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite u ⊢ finite u"
                },
                {
                    "args": "finite v",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite v ⊢ finite v"
                },
                {
                    "args": "∀x. x ∈ diff u v ⟶ f x = 0",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ diff u v ⟶ f x = 0 ⊢ ∀x. x ∈ diff u v ⟶ f x = 0"
                },
                {
                    "args": "nsum_union, {f: f, s: u ∩ v}",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ ∀t. finite (u ∩ v) ⟶ finite t ⟶ disjoint (u ∩ v) t ⟶ nsum (u ∩ v ∪ t) f = nsum (u ∩ v) f + nsum t f"
                },
                {
                    "args": "inter_subset_id, {A: u, B: v}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ u ∩ v ⊆ u"
                },
                {
                    "args": "finite_subset",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ finite (u ∩ v)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "3",
                        "5"
                    ],
                    "rule": "apply_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ ∀t. finite t ⟶ disjoint (u ∩ v) t ⟶ nsum (u ∩ v ∪ t) f = nsum (u ∩ v) f + nsum t f"
                },
                {
                    "args": "diff u v",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ finite (diff u v) ⟶ disjoint (u ∩ v) (diff u v) ⟶ nsum (u ∩ v ∪ diff u v) f = nsum (u ∩ v) f + nsum (diff u v) f"
                },
                {
                    "args": "diff v u",
                    "id": "8",
                    "prevs": [
                        "6"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ finite (diff v u) ⟶ disjoint (u ∩ v) (diff v u) ⟶ nsum (u ∩ v ∪ diff v u) f = nsum (u ∩ v) f + nsum (diff v u) f"
                },
                {
                    "args": "finite_diff, {s: u, t: v}",
                    "id": "9",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ finite (diff u v)"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "7",
                        "9"
                    ],
                    "rule": "apply_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ disjoint (u ∩ v) (diff u v) ⟶ nsum (u ∩ v ∪ diff u v) f = nsum (u ∩ v) f + nsum (diff u v) f"
                },
                {
                    "args": "finite_diff, {s: v, t: u}",
                    "id": "11",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ finite (diff v u)"
                },
                {
                    "args": "",
                    "id": "12",
                    "prevs": [
                        "8",
                        "11"
                    ],
                    "rule": "apply_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ disjoint (u ∩ v) (diff v u) ⟶ nsum (u ∩ v ∪ diff v u) f = nsum (u ∩ v) f + nsum (diff v u) f"
                },
                {
                    "args": "∀s. ∀t. s ∩ t ∩ {x::'a. x ∈ s ∧ ¬(x ∈ t)} = ∅",
                    "id": "13",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀s. ∀t. s ∩ t ∩ {x::'a. x ∈ s ∧ ¬(x ∈ t)} = ∅"
                },
                {
                    "args": "diff_def, ∀s::'a set. ∀t. s ∩ t ∩ diff s t = ∅",
                    "id": "14",
                    "prevs": [
                        "13"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ ∀s::'a set. ∀t. s ∩ t ∩ diff s t = ∅"
                },
                {
                    "args": "disjoint_def, ∀s::'a set. ∀t. disjoint (s ∩ t) (diff s t)",
                    "id": "15",
                    "prevs": [
                        "14"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ ∀s::'a set. ∀t. disjoint (s ∩ t) (diff s t)"
                },
                {
                    "args": "u",
                    "id": "16",
                    "prevs": [
                        "15"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ ∀t. disjoint (u ∩ t) (diff u t)"
                },
                {
                    "args": "v",
                    "id": "17",
                    "prevs": [
                        "16"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ disjoint (u ∩ v) (diff u v)"
                },
                {
                    "args": "",
                    "id": "18",
                    "prevs": [
                        "10",
                        "17"
                    ],
                    "rule": "apply_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ nsum (u ∩ v ∪ diff u v) f = nsum (u ∩ v) f + nsum (diff u v) f"
                },
                {
                    "args": "v",
                    "id": "19",
                    "prevs": [
                        "15"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ ∀t. disjoint (v ∩ t) (diff v t)"
                },
                {
                    "args": "u",
                    "id": "20",
                    "prevs": [
                        "19"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ disjoint (v ∩ u) (diff v u)"
                },
                {
                    "args": "inter_comm",
                    "id": "21",
                    "prevs": [
                        "20"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ disjoint (u ∩ v) (diff v u)"
                },
                {
                    "args": "",
                    "id": "22",
                    "prevs": [
                        "12",
                        "21"
                    ],
                    "rule": "apply_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ nsum (u ∩ v ∪ diff v u) f = nsum (u ∩ v) f + nsum (diff v u) f"
                },
                {
                    "args": "∀s. ∀t. s ∩ t ∪ {x::'a. x ∈ s ∧ ¬(x ∈ t)} = s",
                    "id": "23",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀s. ∀t. s ∩ t ∪ {x::'a. x ∈ s ∧ ¬(x ∈ t)} = s"
                },
                {
                    "args": "diff_def, ∀s::'a set. ∀t. s ∩ t ∪ diff s t = s",
                    "id": "24",
                    "prevs": [
                        "23"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ ∀s::'a set. ∀t. s ∩ t ∪ diff s t = s"
                },
                {
                    "args": "u",
                    "id": "25",
                    "prevs": [
                        "24"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ ∀t. u ∩ t ∪ diff u t = u"
                },
                {
                    "args": "v",
                    "id": "26",
                    "prevs": [
                        "25"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ u ∩ v ∪ diff u v = u"
                },
                {
                    "args": "",
                    "id": "27",
                    "prevs": [
                        "26",
                        "18"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ nsum u f = nsum (u ∩ v) f + nsum (diff u v) f"
                },
                {
                    "args": "v",
                    "id": "28",
                    "prevs": [
                        "24"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ ∀t. v ∩ t ∪ diff v t = v"
                },
                {
                    "args": "u",
                    "id": "29",
                    "prevs": [
                        "28"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ v ∩ u ∪ diff v u = v"
                },
                {
                    "args": "inter_comm",
                    "id": "30",
                    "prevs": [
                        "29"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ u ∩ v ∪ diff v u = v"
                },
                {
                    "args": "",
                    "id": "31",
                    "prevs": [
                        "30",
                        "22"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ nsum v f = nsum (u ∩ v) f + nsum (diff v u) f"
                },
                {
                    "args": "nsum_eq_0",
                    "id": "32",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ nsum (diff u v) f = 0"
                },
                {
                    "args": "",
                    "id": "33",
                    "prevs": [
                        "32",
                        "27"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ nsum u f = nsum (u ∩ v) f + 0"
                },
                {
                    "args": "add_0_right",
                    "id": "34",
                    "prevs": [
                        "33"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ nsum u f = nsum (u ∩ v) f"
                },
                {
                    "args": "le_add, {m: nsum (u ∩ v) f, n: nsum (diff v u) f}",
                    "id": "35",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ nsum (u ∩ v) f ≤ nsum (u ∩ v) f + nsum (diff v u) f"
                },
                {
                    "args": "nsum (u ∩ v) f ≤ nsum v f",
                    "id": "36",
                    "prevs": [
                        "31",
                        "35"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ nsum (u ∩ v) f ≤ nsum v f"
                },
                {
                    "args": "nsum u f ≤ nsum v f",
                    "id": "37",
                    "prevs": [
                        "34",
                        "36"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x = 0 ⊢ nsum u f ≤ nsum v f"
                },
                {
                    "args": "",
                    "id": "38",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "37"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite u ⟶ finite v ⟶ (∀x. x ∈ diff u v ⟶ f x = 0) ⟶ nsum u f ≤ nsum v f"
                }
            ],
            "prop": "finite u ⟶ finite v ⟶ (∀x. x ∈ diff u v ⟶ f x = 0) ⟶ nsum u f ≤ nsum v f",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_s": "inter u v",
                    "param_t": "",
                    "theorem": "nsum_union"
                },
                {
                    "goal": "finite (u ∩ v)",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "param_t": "u",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "inter_subset_id"
                },
                {
                    "fact_ids": [
                        "3",
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "6"
                    ],
                    "goal_id": "7",
                    "method_name": "forall_elim",
                    "s": "diff u v"
                },
                {
                    "fact_ids": [
                        "6"
                    ],
                    "goal_id": "8",
                    "method_name": "forall_elim",
                    "s": "diff v u"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal": "finite (diff u v)",
                    "goal_id": "9",
                    "method_name": "cut"
                },
                {
                    "goal_id": "9",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_diff"
                },
                {
                    "fact_ids": [
                        "7",
                        "9"
                    ],
                    "goal_id": "10",
                    "method_name": "apply_fact"
                },
                {
                    "goal": "finite (diff v u)",
                    "goal_id": "11",
                    "method_name": "cut"
                },
                {
                    "goal_id": "11",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_diff"
                },
                {
                    "fact_ids": [
                        "8",
                        "11"
                    ],
                    "goal_id": "12",
                    "method_name": "apply_fact"
                },
                {
                    "goal": "!s::'a set. !t. disjoint (s ∩ t) (diff s t)",
                    "goal_id": "13",
                    "method_name": "cut"
                },
                {
                    "goal_id": "13",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                },
                {
                    "goal_id": "13",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "13",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "15"
                    ],
                    "goal_id": "16",
                    "method_name": "forall_elim",
                    "s": "u"
                },
                {
                    "fact_ids": [
                        "16"
                    ],
                    "goal_id": "17",
                    "method_name": "forall_elim",
                    "s": "v"
                },
                {
                    "fact_ids": [
                        "10",
                        "17"
                    ],
                    "goal_id": "18",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "15"
                    ],
                    "goal_id": "19",
                    "method_name": "forall_elim",
                    "s": "v"
                },
                {
                    "fact_ids": [
                        "19"
                    ],
                    "goal_id": "20",
                    "method_name": "forall_elim",
                    "s": "u"
                },
                {
                    "fact_ids": [
                        "20"
                    ],
                    "goal_id": "21",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "inter_comm"
                },
                {
                    "fact_ids": [
                        "12",
                        "21"
                    ],
                    "goal_id": "22",
                    "method_name": "apply_fact"
                },
                {
                    "goal": "!s::'a set. !t. s ∩ t ∪ diff s t = s",
                    "goal_id": "23",
                    "method_name": "cut"
                },
                {
                    "goal_id": "23",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "23",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "24"
                    ],
                    "goal_id": "25",
                    "method_name": "forall_elim",
                    "s": "u"
                },
                {
                    "fact_ids": [
                        "25"
                    ],
                    "goal_id": "26",
                    "method_name": "forall_elim",
                    "s": "v"
                },
                {
                    "fact_ids": [
                        "26",
                        "18"
                    ],
                    "goal_id": "27",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "24"
                    ],
                    "goal_id": "28",
                    "method_name": "forall_elim",
                    "s": "v"
                },
                {
                    "fact_ids": [
                        "28"
                    ],
                    "goal_id": "29",
                    "method_name": "forall_elim",
                    "s": "u"
                },
                {
                    "fact_ids": [
                        "29"
                    ],
                    "goal_id": "30",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "inter_comm"
                },
                {
                    "fact_ids": [
                        "30",
                        "22"
                    ],
                    "goal_id": "31",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "goal": "nsum (diff u v) f = 0",
                    "goal_id": "32",
                    "method_name": "cut"
                },
                {
                    "goal_id": "32",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_eq_0"
                },
                {
                    "fact_ids": [
                        "32",
                        "27"
                    ],
                    "goal_id": "33",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "33"
                    ],
                    "goal_id": "34",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "add_0_right"
                },
                {
                    "fact_ids": [
                        "34"
                    ],
                    "goal_id": "35",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "31"
                    ],
                    "goal_id": "35",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "35",
                    "method_name": "apply_backward_step",
                    "theorem": "le_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "u": "'a set",
                "v": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_subset_simple",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite v",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite v ⊢ finite v"
                },
                {
                    "args": "u ⊆ v",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "u ⊆ v ⊢ u ⊆ v"
                },
                {
                    "args": "finite_subset",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite v, u ⊆ v ⊢ finite u"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite v, u ⊆ v ⊢ ∀x. x ∈ diff u v ⟶ f x = 0"
                },
                {
                    "args": "x, 'a",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ diff u v",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ diff u v ⊢ x ∈ diff u v"
                },
                {
                    "args": "diff_def",
                    "id": "3.2",
                    "prevs": [
                        "3.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ diff u v ⊢ x ∈ {x1. x1 ∈ u ∧ ¬(x1 ∈ v)}"
                },
                {
                    "args": "f x = 0",
                    "id": "3.3",
                    "prevs": [
                        "3.2",
                        "1"
                    ],
                    "rule": "z3",
                    "th": "u ⊆ v, x ∈ diff u v ⊢ f x = 0"
                },
                {
                    "args": "",
                    "id": "3.4",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.3"
                    ],
                    "rule": "intros",
                    "th": "finite v, u ⊆ v ⊢ ∀x. x ∈ diff u v ⟶ f x = 0"
                },
                {
                    "args": "nsum_subset",
                    "id": "4",
                    "prevs": [
                        "2",
                        "0",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite v, u ⊆ v ⊢ nsum u f ≤ nsum v f"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite v ⟶ u ⊆ v ⟶ nsum u f ≤ nsum v f"
                }
            ],
            "prop": "finite v ⟶ u ⊆ v ⟶ nsum u f ≤ nsum v f",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_subset"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "param_t": "v",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "3.1"
                    ],
                    "goal_id": "3.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "fact_ids": [
                        "3.2",
                        "1"
                    ],
                    "goal_id": "3.3",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "u": "'a set",
                "v": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_le_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. x ∈ s ⟶ f x ≤ g x",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x ⊢ ∀x. x ∈ s ⟶ f x ≤ g x"
                },
                {
                    "args": "finite ({x. x ∈ s ∧ ¬(g x = 0)})",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite ({x. x ∈ s ∧ ¬(g x = 0)})"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ ∀x. x ∈ s ∧ ¬(f x = 0) ⟶ x ∈ s ∧ ¬(g x = 0)"
                },
                {
                    "args": "x, 'b",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s ∧ ¬(f x = 0)",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(f x = 0) ⊢ x ∈ s ∧ ¬(f x = 0)"
                },
                {
                    "args": "conjD1",
                    "id": "2.2",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = 0) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "2.3",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = 0) ⊢ ¬(f x = 0)"
                },
                {
                    "args": "",
                    "id": "2.4",
                    "prevs": [
                        "0",
                        "2.2"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s ∧ ¬(f x = 0), ∀x. x ∈ s ⟶ f x ≤ g x ⊢ f x ≤ g x"
                },
                {
                    "args": "",
                    "id": "2.5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "x ∈ s ∧ ¬(f x = 0), ∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ g x = 0 ⟶ f x = 0"
                },
                {
                    "args": "g x = 0",
                    "id": "2.5.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "g x = 0 ⊢ g x = 0"
                },
                {
                    "args": "",
                    "id": "2.5.1",
                    "prevs": [
                        "2.5.0",
                        "2.4"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "g x = 0, x ∈ s ∧ ¬(f x = 0), ∀x. x ∈ s ⟶ f x ≤ g x ⊢ f x ≤ 0"
                },
                {
                    "args": "nat_le_zero",
                    "id": "2.5.2",
                    "prevs": [
                        "2.5.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "g x = 0, x ∈ s ∧ ¬(f x = 0), ∀x. x ∈ s ⟶ f x ≤ g x ⊢ f x = 0"
                },
                {
                    "args": "",
                    "id": "2.5.3",
                    "prevs": [
                        "2.5.0",
                        "2.5.2"
                    ],
                    "rule": "intros",
                    "th": "x ∈ s ∧ ¬(f x = 0), ∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ g x = 0 ⟶ f x = 0"
                },
                {
                    "args": "double_neg, ¬¬(g x = 0) ⟶ ¬¬(f x = 0)",
                    "id": "2.6",
                    "prevs": [
                        "2.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "x ∈ s ∧ ¬(f x = 0), ∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ ¬¬(g x = 0) ⟶ ¬¬(f x = 0)"
                },
                {
                    "args": "contrapositive",
                    "id": "2.7",
                    "prevs": [
                        "2.3",
                        "2.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = 0), ∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ ¬(g x = 0)"
                },
                {
                    "args": "conjI",
                    "id": "2.8",
                    "prevs": [
                        "2.2",
                        "2.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = 0), ∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ x ∈ s ∧ ¬(g x = 0)"
                },
                {
                    "args": "",
                    "id": "2.9",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.8"
                    ],
                    "rule": "intros",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ ∀x. x ∈ s ∧ ¬(f x = 0) ⟶ x ∈ s ∧ ¬(g x = 0)"
                },
                {
                    "args": "member_collect, ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)} ⟶ x ∈ {x1. x1 ∈ s ∧ ¬(g x1 = 0)}",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)} ⟶ x ∈ {x1. x1 ∈ s ∧ ¬(g x1 = 0)}"
                },
                {
                    "args": "subsetI",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ {x. x ∈ s ∧ ¬(f x = 0)} ⊆ {x. x ∈ s ∧ ¬(g x = 0)}"
                },
                {
                    "args": "finite_subset",
                    "id": "5",
                    "prevs": [
                        "1",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite ({x. x ∈ s ∧ ¬(f x = 0)})"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ ∀x. x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⟶ f x = 0"
                },
                {
                    "args": "x, 'b",
                    "id": "6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)})",
                    "id": "6.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)})"
                },
                {
                    "args": "diff_def",
                    "id": "6.2",
                    "prevs": [
                        "6.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ x ∈ {x1. x1 ∈ {x2. x2 ∈ s ∧ ¬(f x2 = 0)} ∧ ¬(x1 ∈ {x2. x2 ∈ s ∧ ¬(g x2 = 0)})}"
                },
                {
                    "args": "member_collect",
                    "id": "6.3",
                    "prevs": [
                        "6.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)} ∧ ¬(x ∈ {x1. x1 ∈ s ∧ ¬(g x1 = 0)})"
                },
                {
                    "args": "member_collect",
                    "id": "6.4",
                    "prevs": [
                        "6.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ (x ∈ s ∧ ¬(f x = 0)) ∧ ¬(x ∈ s ∧ ¬(g x = 0))"
                },
                {
                    "args": "conjD1",
                    "id": "6.5",
                    "prevs": [
                        "6.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ x ∈ s ∧ ¬(f x = 0)"
                },
                {
                    "args": "conjD2",
                    "id": "6.6",
                    "prevs": [
                        "6.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ ¬(x ∈ s ∧ ¬(g x = 0))"
                },
                {
                    "args": "conjD1",
                    "id": "6.7",
                    "prevs": [
                        "6.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "6.8",
                    "prevs": [
                        "6.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ ¬(f x = 0)"
                },
                {
                    "args": "",
                    "id": "6.9",
                    "prevs": [
                        "0",
                        "6.7"
                    ],
                    "rule": "apply_fact",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ f x ≤ g x"
                },
                {
                    "args": "",
                    "id": "6.10",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}), x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ g x = 0 ⟶ f x = 0"
                },
                {
                    "args": "g x = 0",
                    "id": "6.10.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "g x = 0 ⊢ g x = 0"
                },
                {
                    "args": "",
                    "id": "6.10.1",
                    "prevs": [
                        "6.10.0",
                        "6.9"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "g x = 0, ∀x. x ∈ s ⟶ f x ≤ g x, x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ f x ≤ 0"
                },
                {
                    "args": "nat_less_eq_def_1",
                    "id": "6.10.2",
                    "prevs": [
                        "6.10.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "g x = 0, ∀x. x ∈ s ⟶ f x ≤ g x, x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ f x = 0"
                },
                {
                    "args": "",
                    "id": "6.10.3",
                    "prevs": [
                        "6.10.0",
                        "6.10.2"
                    ],
                    "rule": "intros",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}), x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ g x = 0 ⟶ f x = 0"
                },
                {
                    "args": "double_neg, ¬¬(g x = 0) ⟶ ¬¬(f x = 0)",
                    "id": "6.11",
                    "prevs": [
                        "6.10"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}), x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ ¬¬(g x = 0) ⟶ ¬¬(f x = 0)"
                },
                {
                    "args": "contrapositive",
                    "id": "6.12",
                    "prevs": [
                        "6.8",
                        "6.11"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}), x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ ¬(g x = 0)"
                },
                {
                    "args": "conjI",
                    "id": "6.13",
                    "prevs": [
                        "6.7",
                        "6.12"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}), x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ x ∈ s ∧ ¬(g x = 0)"
                },
                {
                    "args": "negE_gen, {A: x ∈ s ∧ ¬(g x = 0), C: f x = 0}",
                    "id": "6.14",
                    "prevs": [
                        "6.6",
                        "6.13"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}), x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⊢ f x = 0"
                },
                {
                    "args": "",
                    "id": "6.15",
                    "prevs": [
                        "6.0",
                        "6.1",
                        "6.14"
                    ],
                    "rule": "intros",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ ∀x. x ∈ diff ({x1. x1 ∈ s ∧ ¬(f x1 = 0)}) ({x1. x1 ∈ s ∧ ¬(g x1 = 0)}) ⟶ f x = 0"
                },
                {
                    "args": "nsum_subset",
                    "id": "7",
                    "prevs": [
                        "5",
                        "1",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ nsum ({x. x ∈ s ∧ ¬(f x = 0)}) f ≤ nsum ({x. x ∈ s ∧ ¬(g x = 0)}) f"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ ∀x. x ∈ s ∧ ¬(g x = 0) ⟶ f x ≤ g x"
                },
                {
                    "args": "x, 'b",
                    "id": "8.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s ∧ ¬(g x = 0)",
                    "id": "8.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(g x = 0) ⊢ x ∈ s ∧ ¬(g x = 0)"
                },
                {
                    "args": "conjD1",
                    "id": "8.2",
                    "prevs": [
                        "8.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(g x = 0) ⊢ x ∈ s"
                },
                {
                    "args": "x",
                    "id": "8.3",
                    "prevs": [
                        "0",
                        "8.2"
                    ],
                    "rule": "apply_fact_for",
                    "th": "x ∈ s ∧ ¬(g x = 0), ∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ f x ≤ g x"
                },
                {
                    "args": "",
                    "id": "8.4",
                    "prevs": [
                        "8.0",
                        "8.1",
                        "8.3"
                    ],
                    "rule": "intros",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ ∀x. x ∈ s ∧ ¬(g x = 0) ⟶ f x ≤ g x"
                },
                {
                    "args": "member_collect, ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(g x1 = 0)} ⟶ f x ≤ g x",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(g x1 = 0)} ⟶ f x ≤ g x"
                },
                {
                    "args": "nsum_le",
                    "id": "10",
                    "prevs": [
                        "1",
                        "9"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ nsum ({x. x ∈ s ∧ ¬(g x = 0)}) f ≤ nsum ({x. x ∈ s ∧ ¬(g x = 0)}) g"
                },
                {
                    "args": "less_eq_trans",
                    "id": "11",
                    "prevs": [
                        "7",
                        "10"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ nsum ({x. x ∈ s ∧ ¬(f x = 0)}) f ≤ nsum ({x. x ∈ s ∧ ¬(g x = 0)}) g"
                },
                {
                    "args": "neutral_nat_add, nsum ({x. x ∈ s ∧ ¬(f x = neutral plus)}) f ≤ nsum ({x. x ∈ s ∧ ¬(g x = neutral plus)}) g",
                    "id": "12",
                    "prevs": [
                        "11"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ nsum ({x. x ∈ s ∧ ¬(f x = neutral plus)}) f ≤ nsum ({x. x ∈ s ∧ ¬(g x = neutral plus)}) g"
                },
                {
                    "args": "support_def, nsum (support plus f s) f ≤ nsum (support plus g s) g",
                    "id": "13",
                    "prevs": [
                        "12"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ nsum (support plus f s) f ≤ nsum (support plus g s) g"
                },
                {
                    "args": "nsum_support, nsum s f ≤ nsum s g",
                    "id": "14",
                    "prevs": [
                        "13"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x, finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ nsum s f ≤ nsum s g"
                },
                {
                    "args": "",
                    "id": "15",
                    "prevs": [
                        "0",
                        "1",
                        "14"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⟶ nsum s f ≤ nsum s g"
                }
            ],
            "prop": "(∀x. x ∈ s ⟶ f x ≤ g x) ⟶ finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⟶ nsum s f ≤ nsum s g",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "nsum_support"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "param_m": "nsum ({x. x ∈ s ∧ ¬(g x = 0)}) f",
                    "theorem": "less_eq_trans"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_subset"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "2.4",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "0",
                        "2.2"
                    ],
                    "goal_id": "2.4",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "2.3"
                    ],
                    "goal_id": "2.5",
                    "method_name": "apply_backward_step",
                    "theorem": "contrapositive"
                },
                {
                    "goal_id": "2.5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "double_neg"
                },
                {
                    "goal_id": "2.5",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.5.0",
                        "2.4"
                    ],
                    "goal_id": "2.5.1",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "2.5.1"
                    ],
                    "goal_id": "2.5.2",
                    "method_name": "apply_forward_step",
                    "theorem": "nat_le_zero"
                },
                {
                    "goal_id": "6",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "6.1"
                    ],
                    "goal_id": "6.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "fact_ids": [
                        "6.2"
                    ],
                    "goal_id": "6.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "6.3"
                    ],
                    "goal_id": "6.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "6.4"
                    ],
                    "goal_id": "6.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "6.4"
                    ],
                    "goal_id": "6.6",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "6.5"
                    ],
                    "goal_id": "6.7",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "6.5"
                    ],
                    "goal_id": "6.8",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0",
                        "6.7"
                    ],
                    "goal_id": "6.9",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "6.6"
                    ],
                    "goal_id": "6.10",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "6.10",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "6.8"
                    ],
                    "goal_id": "6.10",
                    "method_name": "apply_backward_step",
                    "theorem": "contrapositive"
                },
                {
                    "goal_id": "6.10",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "double_neg"
                },
                {
                    "goal_id": "6.10",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "6.10.0",
                        "6.9"
                    ],
                    "goal_id": "6.10.1",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "6.10.1"
                    ],
                    "goal_id": "6.10.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "nat_less_eq_def_1"
                },
                {
                    "goal_id": "8",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_le"
                },
                {
                    "goal_id": "8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "8",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "8.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "8.1"
                    ],
                    "goal_id": "8.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ nat",
                "g": "'b ⇒ nat",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_mul_bound",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x. x ∈ s ⟶ a x * b x ≤ nsum s a * b x"
                },
                {
                    "args": "x, 'a",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "nsum_sing, a x = nsum ({x}) a",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ a x = nsum ({x}) a"
                },
                {
                    "args": "{x} ⊆ s",
                    "id": "1.3",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "z3",
                    "th": "x ∈ s ⊢ {x} ⊆ s"
                },
                {
                    "args": "nsum_subset_simple, {f: a, u: {x}, v: s}",
                    "id": "1.4",
                    "prevs": [
                        "0",
                        "1.3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, x ∈ s ⊢ nsum ({x}) a ≤ nsum s a"
                },
                {
                    "args": "a x ≤ nsum s a",
                    "id": "1.5",
                    "prevs": [
                        "1.2",
                        "1.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x ∈ s ⊢ a x ≤ nsum s a"
                },
                {
                    "args": "less_eq_refl, {n: b x}",
                    "id": "1.6",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ b x ≤ b x"
                },
                {
                    "args": "le_mult2",
                    "id": "1.7",
                    "prevs": [
                        "1.5",
                        "1.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ s ⊢ a x * b x ≤ nsum s a * b x"
                },
                {
                    "args": "",
                    "id": "1.8",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.7"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ ∀x. x ∈ s ⟶ a x * b x ≤ nsum s a * b x"
                },
                {
                    "args": "nsum_le",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ nsum s (λx. a x * b x) ≤ nsum s (λx. nsum s a * b x)"
                },
                {
                    "args": "nsum_lmul, nsum s (λi. a i * b i) ≤ nsum s a * nsum s b",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite s ⊢ nsum s (λi. a i * b i) ≤ nsum s a * nsum s b"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ nsum s (λi. a i * b i) ≤ nsum s a * nsum s b"
                }
            ],
            "prop": "finite s ⟶ nsum s (λi. a i * b i) ≤ nsum s a * nsum s b",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "nsum_lmul"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_le"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "apply_backward_step",
                    "theorem": "le_mult2"
                },
                {
                    "goal": "a x = nsum {x} a",
                    "goal_id": "1.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_sing"
                },
                {
                    "fact_ids": [
                        "1.2"
                    ],
                    "goal_id": "1.3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_subset_simple"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.3",
                    "method_name": "z3"
                },
                {
                    "goal_id": "1.6",
                    "method_name": "apply_backward_step",
                    "theorem": "less_eq_refl"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'a ⇒ nat",
                "b": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_image_nonzero",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0 ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "neutral_nat_add, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = neutral plus",
                    "id": "3",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0 ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = neutral plus"
                },
                {
                    "args": "iterate_image_nonzero, {f: i, g: d, op: (plus::nat ⇒ nat ⇒ nat), s: s}",
                    "id": "4",
                    "prevs": [
                        "2",
                        "0",
                        "3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0 ⊢ iterate plus (image i s) d = iterate plus s (d ∘ i)"
                },
                {
                    "args": "nsum_def, nsum (image i s) d = nsum s (d ∘ i)",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0 ⊢ nsum (image i s) d = nsum s (d ∘ i)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0) ⟶ nsum (image i s) d = nsum s (d ∘ i)"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0) ",
                "   ⟶ nsum (image i s) d = nsum s (d ∘ i)"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_image_nonzero"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "d": "'a ⇒ nat",
                "i": "'b ⇒ 'a",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_bijection",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. x ∈ s ⟶ p x ∈ s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ p x ∈ s ⊢ ∀x. x ∈ s ⟶ p x ∈ s"
                },
                {
                    "args": "∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_bijection, {f: f, op: (plus::nat ⇒ nat ⇒ nat), p: p, s: s}",
                    "id": "3",
                    "prevs": [
                        "2",
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ iterate plus s f = iterate plus s (f ∘ p)"
                },
                {
                    "args": "nsum_def, nsum s f = nsum s (f ∘ p)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ nsum s f = nsum s (f ∘ p)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. x ∈ s ⟶ p x ∈ s) ⟶ (∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)) ⟶ nsum s f = nsum s (f ∘ p)"
                }
            ],
            "prop": [
                "(∀x. x ∈ s ⟶ p x ∈ s) ",
                "⟶ (∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)) ⟶ nsum s f = nsum s (f ∘ p)"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_bijection"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ nat",
                "p": "'b ⇒ 'b",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_eq_general",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y) ⊢ ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_eq_general, {f: f, g: g, h: h, op: (plus::nat ⇒ nat ⇒ nat), s: s, t: t}",
                    "id": "3",
                    "prevs": [
                        "2",
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ iterate plus s f = iterate plus t g"
                },
                {
                    "args": "nsum_def, nsum s f = nsum t g",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ nsum s f = nsum t g"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)) ⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x) ⟶ nsum s f = nsum t g"
                }
            ],
            "prop": [
                "(∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)) ",
                "⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x) ⟶ nsum s f = nsum t g"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "param_h": "h",
                    "theorem": "iterate_eq_general"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ nat",
                "g": "'a ⇒ nat",
                "h": "'b ⇒ 'a",
                "s": "'b set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_eq_general_inverse",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y ⊢ ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y"
                },
                {
                    "args": "∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_eq_general_inverses, {f: f, g: g, h: h, k: k, op: (plus::nat ⇒ nat ⇒ nat), s: s, t: t}",
                    "id": "3",
                    "prevs": [
                        "2",
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ iterate plus s f = iterate plus t g"
                },
                {
                    "args": "nsum_def, nsum s f = nsum t g",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ nsum s f = nsum t g"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y) ⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x) ⟶ nsum s f = nsum t g"
                }
            ],
            "prop": [
                "(∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y) ",
                "⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x) ⟶ nsum s f = nsum t g"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "param_h": "h",
                    "param_k": "k",
                    "theorem": "iterate_eq_general_inverses"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ nat",
                "g": "'a ⇒ nat",
                "h": "'b ⇒ 'a",
                "k": "'a ⇒ 'b",
                "s": "'b set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_injection",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ p x ∈ s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ p x ∈ s ⊢ ∀x. x ∈ s ⟶ p x ∈ s"
                },
                {
                    "args": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_injection, {f: f, op: (plus::nat ⇒ nat ⇒ nat), p: p, s: s}",
                    "id": "4",
                    "prevs": [
                        "3",
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ iterate plus s (f ∘ p) = iterate plus s f"
                },
                {
                    "args": "nsum_def, nsum s (f ∘ p) = nsum s f",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ nsum s (f ∘ p) = nsum s f"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ p x ∈ s) ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y) ⟶ nsum s (f ∘ p) = nsum s f"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ (∀x. x ∈ s ⟶ p x ∈ s) ",
                "   ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y) ⟶ nsum s (f ∘ p) = nsum s f"
            ],
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_injection"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ nat",
                "p": "'b ⇒ 'b",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_union_nonzero",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "∀x. x ∈ s ∩ t ⟶ f x = 0",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ∩ t ⟶ f x = 0 ⊢ ∀x. x ∈ s ∩ t ⟶ f x = 0"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "neutral_nat_add, ∀x. x ∈ s ∩ t ⟶ f x = neutral plus",
                    "id": "4",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ∀x. x ∈ s ∩ t ⟶ f x = 0 ⊢ ∀x. x ∈ s ∩ t ⟶ f x = neutral plus"
                },
                {
                    "args": "iterate_union_nonzero",
                    "id": "5",
                    "prevs": [
                        "3",
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀x. x ∈ s ∩ t ⟶ f x = 0 ⊢ iterate plus (s ∪ t) f = iterate plus s f + iterate plus t f"
                },
                {
                    "args": "nsum_def, nsum (s ∪ t) f = nsum s f + nsum t f",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ∀x. x ∈ s ∩ t ⟶ f x = 0 ⊢ nsum (s ∪ t) f = nsum s f + nsum t f"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ (∀x. x ∈ s ∩ t ⟶ f x = 0) ⟶ nsum (s ∪ t) f = nsum s f + nsum t f"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ finite t ⟶ (∀x. x ∈ s ∩ t ⟶ f x = 0) ⟶ nsum (s ∪ t) f = nsum s f + nsum t f"
            ],
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_union_nonzero"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'b ⇒ nat",
                "s": "'b set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_cases",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_cases, {P: P, f: f, g: g, op: (plus::nat ⇒ nat ⇒ nat), s: s}",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ iterate plus s (λx. if P x then f x else g x) = iterate plus ({x. x ∈ s ∧ P x}) f + iterate plus ({x. x ∈ s ∧ ¬(P x)}) g"
                },
                {
                    "args": "nsum_def, nsum s (λx. if P x then f x else g x) = nsum ({x. x ∈ s ∧ P x}) f + nsum ({x. x ∈ s ∧ ¬(P x)}) g",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ nsum s (λx. if P x then f x else g x) = nsum ({x. x ∈ s ∧ P x}) f + nsum ({x. x ∈ s ∧ ¬(P x)}) g"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ nsum s (λx. if P x then f x else g x) = nsum ({x. x ∈ s ∧ P x}) f + nsum ({x. x ∈ s ∧ ¬(P x)}) g"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ nsum s (λx. if P x then f x else g x) = ",
                "   nsum ({x. x ∈ s ∧ P x}) f + nsum ({x. x ∈ s ∧ ¬(P x)}) g"
            ],
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_cases"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "'b ⇒ bool",
                "f": "'b ⇒ nat",
                "g": "'b ⇒ nat",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_closed",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "P 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "P 0 ⊢ P 0"
                },
                {
                    "args": "∀x. ∀y. P x ⟶ P y ⟶ P (x + y)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ ∀x. ∀y. P x ⟶ P y ⟶ P (x + y)"
                },
                {
                    "args": "∀a. a ∈ s ⟶ P (f a)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀a. a ∈ s ⟶ P (f a) ⊢ ∀a. a ∈ s ⟶ P (f a)"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "neutral_nat_add, P (neutral plus)",
                    "id": "4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (neutral plus)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ ∀x. x ∈ s ∧ ¬(f x = neutral plus) ⟶ P (f x)"
                },
                {
                    "args": "x, 'b",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s ∧ ¬(f x = neutral plus)",
                    "id": "5.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(f x = neutral plus) ⊢ x ∈ s ∧ ¬(f x = neutral plus)"
                },
                {
                    "args": "conjD1",
                    "id": "5.2",
                    "prevs": [
                        "5.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = neutral plus) ⊢ x ∈ s"
                },
                {
                    "args": "x",
                    "id": "5.3",
                    "prevs": [
                        "2",
                        "5.2"
                    ],
                    "rule": "apply_fact_for",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), x ∈ s ∧ ¬(f x = neutral plus), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (f x)"
                },
                {
                    "args": "",
                    "id": "5.4",
                    "prevs": [
                        "5.0",
                        "5.1",
                        "5.3"
                    ],
                    "rule": "intros",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ ∀x. x ∈ s ∧ ¬(f x = neutral plus) ⟶ P (f x)"
                },
                {
                    "args": "iterate_closed",
                    "id": "6",
                    "prevs": [
                        "3",
                        "4",
                        "1",
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (iterate plus s f)"
                },
                {
                    "args": "nsum_def, P (nsum s f)",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (nsum s f)"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "7"
                    ],
                    "rule": "intros",
                    "th": "⊢ P 0 ⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (x + y)) ⟶ (∀a. a ∈ s ⟶ P (f a)) ⟶ P (nsum s f)"
                }
            ],
            "prop": "P 0 ⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (x + y)) ⟶ (∀a. a ∈ s ⟶ P (f a)) ⟶ P (nsum s f)",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_closed"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "5.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "5.1"
                    ],
                    "goal_id": "5.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "nat ⇒ bool",
                "f": "'b ⇒ nat",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_related",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "R 0 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "R 0 0 ⊢ R 0 0"
                },
                {
                    "args": "∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)"
                },
                {
                    "args": "finite s",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ R (f x) (g x)",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ R (f x) (g x) ⊢ ∀x. x ∈ s ⟶ R (f x) (g x)"
                },
                {
                    "args": "iterate_related, {R: R, f: f, g: g, op: (plus::nat ⇒ nat ⇒ nat), s: s}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat) ⟶ R (neutral plus) (neutral plus) ⟶ (∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (x1 + y1) (x2 + y2)) ⟶ finite s ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (iterate plus s f) (iterate plus s g)"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "5",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "neutral_nat_add, R (neutral plus) (neutral plus)",
                    "id": "6",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (neutral plus) (neutral plus)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (x1 + y1) (x2 + y2)"
                },
                {
                    "args": "x1, nat",
                    "id": "7.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "y1, nat",
                    "id": "7.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y1"
                },
                {
                    "args": "x2, nat",
                    "id": "7.2",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x2"
                },
                {
                    "args": "y2, nat",
                    "id": "7.3",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y2"
                },
                {
                    "args": "R x1 x2",
                    "id": "7.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "R x1 x2 ⊢ R x1 x2"
                },
                {
                    "args": "R y1 y2",
                    "id": "7.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "R y1 y2 ⊢ R y1 y2"
                },
                {
                    "args": "x1, x2, y1, y2",
                    "id": "7.6",
                    "prevs": [
                        "1",
                        "7.4",
                        "7.5"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, R x1 x2, R y1 y2, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (x1 + y1) (x2 + y2)"
                },
                {
                    "args": "",
                    "id": "7.7",
                    "prevs": [
                        "7.0",
                        "7.1",
                        "7.2",
                        "7.3",
                        "7.4",
                        "7.5",
                        "7.6"
                    ],
                    "rule": "intros",
                    "th": "finite s, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (x1 + y1) (x2 + y2)"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "4",
                        "5",
                        "6",
                        "7",
                        "2",
                        "3"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (iterate plus s f) (iterate plus s g)"
                },
                {
                    "args": "nsum_def, R (nsum s f) (nsum s g)",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (nsum s f) (nsum s g)"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "9"
                    ],
                    "rule": "intros",
                    "th": "⊢ R 0 0 ⟶ (∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)) ⟶ finite s ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (nsum s f) (nsum s g)"
                }
            ],
            "prop": [
                "R 0 0 ",
                "⟶ (∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)) ",
                "   ⟶ finite s ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (nsum s f) (nsum s g)"
            ],
            "steps": [
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_forward_step",
                    "param_R": "R",
                    "param_f": "f",
                    "param_g": "g",
                    "param_op": "(plus::nat=>nat=>nat)",
                    "param_s": "s",
                    "theorem": "iterate_related"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "goal_id": "6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                },
                {
                    "goal_id": "7",
                    "method_name": "introduction",
                    "names": "x1,y1,x2,y2"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "7.6",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "nat ⇒ nat ⇒ bool",
                "f": "'b ⇒ nat",
                "g": "'b ⇒ nat",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_closed_nonempty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀x. ∀y. P x ⟶ P y ⟶ P (x + y)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ ∀x. ∀y. P x ⟶ P y ⟶ P (x + y)"
                },
                {
                    "args": "∀a. a ∈ s ⟶ P (f a)",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀a. a ∈ s ⟶ P (f a) ⊢ ∀a. a ∈ s ⟶ P (f a)"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_closed_nonempty",
                    "id": "5",
                    "prevs": [
                        "4",
                        "2",
                        "0",
                        "1",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (iterate plus s f)"
                },
                {
                    "args": "nsum_def, P (nsum s f)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(s = ∅), ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (nsum s f)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ ¬(s = ∅) ⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (x + y)) ⟶ (∀a. a ∈ s ⟶ P (f a)) ⟶ P (nsum s f)"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ ¬(s = ∅) ",
                "   ⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (x + y)) ⟶ (∀a. a ∈ s ⟶ P (f a)) ⟶ P (nsum s f)"
            ],
            "steps": [
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_closed_nonempty"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "nat ⇒ bool",
                "f": "'b ⇒ nat",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_related_nonempty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ R (f x) (g x)",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ R (f x) (g x) ⊢ ∀x. x ∈ s ⟶ R (f x) (g x)"
                },
                {
                    "args": "iterate_related_nonempty, {R: R, f: f, g: g, op: (plus::nat ⇒ nat ⇒ nat), s: s}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat) ⟶ (∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (x1 + y1) (x2 + y2)) ⟶ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (iterate plus s f) (iterate plus s g)"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "5",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (x1 + y1) (x2 + y2)"
                },
                {
                    "args": "x1, nat",
                    "id": "6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "y1, nat",
                    "id": "6.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y1"
                },
                {
                    "args": "x2, nat",
                    "id": "6.2",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x2"
                },
                {
                    "args": "y2, nat",
                    "id": "6.3",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y2"
                },
                {
                    "args": "R x1 x2",
                    "id": "6.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "R x1 x2 ⊢ R x1 x2"
                },
                {
                    "args": "R y1 y2",
                    "id": "6.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "R y1 y2 ⊢ R y1 y2"
                },
                {
                    "args": "x1, x2, y1, y2",
                    "id": "6.6",
                    "prevs": [
                        "0",
                        "6.4",
                        "6.5"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, R x1 x2, R y1 y2, ¬(s = ∅), ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (x1 + y1) (x2 + y2)"
                },
                {
                    "args": "",
                    "id": "6.7",
                    "prevs": [
                        "6.0",
                        "6.1",
                        "6.2",
                        "6.3",
                        "6.4",
                        "6.5",
                        "6.6"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (x1 + y1) (x2 + y2)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "4",
                        "5",
                        "6",
                        "1",
                        "2",
                        "3"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (iterate plus s f) (iterate plus s g)"
                },
                {
                    "args": "nsum_def, R (nsum s f) (nsum s g)",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (nsum s f) (nsum s g)"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "8"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)) ⟶ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (nsum s f) (nsum s g)"
                }
            ],
            "prop": [
                "(∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)) ",
                "⟶ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (nsum s f) (nsum s g)"
            ],
            "steps": [
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_forward_step",
                    "param_R": "R",
                    "param_f": "f",
                    "param_g": "g",
                    "param_op": "(plus::nat=>nat=>nat)",
                    "param_s": "s",
                    "theorem": "iterate_related_nonempty"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "goal_id": "6",
                    "method_name": "introduction",
                    "names": "x1,y1,x2,y2"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "6.6",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "nat ⇒ nat ⇒ bool",
                "f": "'b ⇒ nat",
                "g": "'b ⇒ nat",
                "s": "'b set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_add_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "nsum_add, {f: f, g: g, s: {m..n}}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ nsum ({m..n}) (λx. f x + g x) = nsum ({m..n}) f + nsum ({m..n}) g"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({m..n}) (λi. f i + g i) = nsum ({m..n}) f + nsum ({m..n}) g"
                }
            ],
            "prop": "nsum ({m..n}) (λi. f i + g i) = nsum ({m..n}) f + nsum ({m..n}) g",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_add"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "g": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_le_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ ∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i"
                },
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ ∀x. m ≤ x ∧ x ≤ n ⟶ f x ≤ g x"
                },
                {
                    "args": "i, nat",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR i"
                },
                {
                    "args": "m ≤ i ∧ i ≤ n",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ i ∧ i ≤ n ⊢ m ≤ i ∧ i ≤ n"
                },
                {
                    "args": "conjD1",
                    "id": "2.2",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ i ∧ i ≤ n ⊢ m ≤ i"
                },
                {
                    "args": "conjD2",
                    "id": "2.3",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ i ∧ i ≤ n ⊢ i ≤ n"
                },
                {
                    "args": "i",
                    "id": "2.4",
                    "prevs": [
                        "0",
                        "2.2",
                        "2.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "m ≤ i ∧ i ≤ n, ∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ f i ≤ g i"
                },
                {
                    "args": "",
                    "id": "2.5",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.4"
                    ],
                    "rule": "intros",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ ∀i. m ≤ i ∧ i ≤ n ⟶ f i ≤ g i"
                },
                {
                    "args": "member_natseg, ∀x. x ∈ {m..n} ⟶ f x ≤ g x",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ ∀x. x ∈ {m..n} ⟶ f x ≤ g x"
                },
                {
                    "args": "nsum_le",
                    "id": "4",
                    "prevs": [
                        "1",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ nsum ({m..n}) f ≤ nsum ({m..n}) g"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i) ⟶ nsum ({m..n}) f ≤ nsum ({m..n}) g"
                }
            ],
            "prop": "(∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i) ⟶ nsum ({m..n}) f ≤ nsum ({m..n}) g",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_le"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "i"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "g": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_eq_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i ⊢ ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i ⊢ ∀x. m ≤ x ∧ x ≤ n ⟶ f x = g x"
                },
                {
                    "args": "i, nat",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR i"
                },
                {
                    "args": "m ≤ i ∧ i ≤ n",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ i ∧ i ≤ n ⊢ m ≤ i ∧ i ≤ n"
                },
                {
                    "args": "conjD1",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ i ∧ i ≤ n ⊢ m ≤ i"
                },
                {
                    "args": "conjD2",
                    "id": "1.3",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ i ∧ i ≤ n ⊢ i ≤ n"
                },
                {
                    "args": "i",
                    "id": "1.4",
                    "prevs": [
                        "0",
                        "1.2",
                        "1.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "m ≤ i ∧ i ≤ n, ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i ⊢ f i = g i"
                },
                {
                    "args": "",
                    "id": "1.5",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.4"
                    ],
                    "rule": "intros",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i ⊢ ∀i. m ≤ i ∧ i ≤ n ⟶ f i = g i"
                },
                {
                    "args": "member_natseg, ∀x. x ∈ {m..n} ⟶ f x = g x",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i ⊢ ∀x. x ∈ {m..n} ⟶ f x = g x"
                },
                {
                    "args": "nsum_eq",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i ⊢ nsum ({m..n}) f = nsum ({m..n}) g"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i) ⟶ nsum ({m..n}) f = nsum ({m..n}) g"
                }
            ],
            "prop": "(∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i) ⟶ nsum ({m..n}) f = nsum ({m..n}) g",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_eq"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "i"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "g": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_const_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "nsum_const, {c: c, s: {m..n}}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ nsum ({m..n}) (λn1. c) = card ({m..n}) * c"
                },
                {
                    "args": "card_natseg, nsum ({m..n}) (λn1. c) = (n + 1 - m) * c",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "⊢ nsum ({m..n}) (λn1. c) = (n + 1 - m) * c"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({m..n}) (λn1. c) = (n + 1 - m) * c"
                }
            ],
            "prop": "nsum ({m..n}) (λn1. c) = (n + 1 - m) * c",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "card_natseg"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_const"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "c": "nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_eq_0_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0 ⊢ ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0 ⊢ ∀x. m ≤ x ∧ x ≤ n ⟶ f x = 0"
                },
                {
                    "args": "i, nat",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR i"
                },
                {
                    "args": "m ≤ i ∧ i ≤ n",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ i ∧ i ≤ n ⊢ m ≤ i ∧ i ≤ n"
                },
                {
                    "args": "conjD1",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ i ∧ i ≤ n ⊢ m ≤ i"
                },
                {
                    "args": "conjD2",
                    "id": "1.3",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ i ∧ i ≤ n ⊢ i ≤ n"
                },
                {
                    "args": "i",
                    "id": "1.4",
                    "prevs": [
                        "0",
                        "1.2",
                        "1.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "m ≤ i ∧ i ≤ n, ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0 ⊢ f i = 0"
                },
                {
                    "args": "",
                    "id": "1.5",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.4"
                    ],
                    "rule": "intros",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0 ⊢ ∀i. m ≤ i ∧ i ≤ n ⟶ f i = 0"
                },
                {
                    "args": "member_natseg, ∀x. x ∈ {m..n} ⟶ f x = 0",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0 ⊢ ∀x. x ∈ {m..n} ⟶ f x = 0"
                },
                {
                    "args": "nsum_eq_0",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0 ⊢ nsum ({m..n}) f = 0"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0) ⟶ nsum ({m..n}) f = 0"
                }
            ],
            "prop": "(∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0) ⟶ nsum ({m..n}) f = 0",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_eq_0"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "i"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_eq_0_iff_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "nsum_eq_0_iff, {f: f}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ nsum ({m..n}) f = 0 ⟷ (∀x. x ∈ {m..n} ⟶ f x = 0)"
                },
                {
                    "args": "(∀x. m ≤ x ∧ x ≤ n ⟶ f x = 0) ⟷ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0)",
                    "id": "2",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ (∀x. m ≤ x ∧ x ≤ n ⟶ f x = 0) ⟷ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0)"
                },
                {
                    "args": "member_natseg, (∀x. x ∈ {m..n} ⟶ f x = 0) ⟷ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ (∀x. x ∈ {m..n} ⟶ f x = 0) ⟷ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0)"
                },
                {
                    "args": "nsum ({m..n}) f = 0 ⟷ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0)",
                    "id": "4",
                    "prevs": [
                        "1",
                        "3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "⊢ nsum ({m..n}) f = 0 ⟷ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({m..n}) f = 0 ⟷ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0)"
                }
            ],
            "prop": "nsum ({m..n}) f = 0 ⟷ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0)",
            "steps": [
                {
                    "goal": "finite {m..n}",
                    "goal_id": "0",
                    "method_name": "cut"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "theorem": "nsum_eq_0_iff"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "2",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_triv_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "n < m",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "n < m ⊢ n < m"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "n < m ⊢ ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0"
                },
                {
                    "args": "i, nat",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR i"
                },
                {
                    "args": "m ≤ i",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ i ⊢ m ≤ i"
                },
                {
                    "args": "i ≤ n",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "i ≤ n ⊢ i ≤ n"
                },
                {
                    "args": "f i = 0",
                    "id": "1.3",
                    "prevs": [
                        "0",
                        "1.1",
                        "1.2"
                    ],
                    "rule": "z3",
                    "th": "n < m, i ≤ n, m ≤ i ⊢ f i = 0"
                },
                {
                    "args": "",
                    "id": "1.4",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.2",
                        "1.3"
                    ],
                    "rule": "intros",
                    "th": "n < m ⊢ ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0"
                },
                {
                    "args": "nsum_eq_0_iff_natseg, nsum ({m..n}) f = 0",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "n < m ⊢ nsum ({m..n}) f = 0"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ n < m ⟶ nsum ({m..n}) f = 0"
                }
            ],
            "prop": "n < m ⟶ nsum ({m..n}) f = 0",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_eq_0_iff_natseg"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "i"
                },
                {
                    "fact_ids": [
                        "0",
                        "1.1",
                        "1.2"
                    ],
                    "goal_id": "1.3",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_sing_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "nsum_sing, nsum ({n}) f = f n",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({n}) f = f n"
                },
                {
                    "args": "natseg_sing, nsum ({n..n}) f = f n",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({n..n}) f = f n"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({n..n}) f = f n"
                }
            ],
            "prop": "nsum ({n..n}) f = f n",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_sing"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_sing"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_0_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_nat_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_natseg_0, {f: f, m: m}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({m..0}) f = (if m = 0 then f 0 else neutral plus)"
                },
                {
                    "args": "neutral_nat_add",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ iterate plus ({m..0}) f = (if m = 0 then f 0 else 0)"
                },
                {
                    "args": "nsum_def, nsum ({m..0}) f = (if m = 0 then f 0 else 0)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({m..0}) f = (if m = 0 then f 0 else 0)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({m..0}) f = (if m = 0 then f 0 else 0)"
                }
            ],
            "prop": "nsum ({m..0}) f = (if m = 0 then f 0 else 0)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_forward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_m": "m",
                    "theorem": "iterate_natseg_0"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_Suc_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_nat_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_natseg_Suc, {f: f, m: m, n: n, op: (plus::nat ⇒ nat ⇒ nat)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({m..Suc n}) f = (if m ≤ Suc n then iterate plus ({m..n}) f + f (Suc n) else iterate plus ({m..n}) f)"
                },
                {
                    "args": "nsum_def, nsum ({m..Suc n}) f = (if m ≤ Suc n then nsum ({m..n}) f + f (Suc n) else nsum ({m..n}) f)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({m..Suc n}) f = (if m ≤ Suc n then nsum ({m..n}) f + f (Suc n) else nsum ({m..n}) f)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({m..Suc n}) f = (if m ≤ Suc n then nsum ({m..n}) f + f (Suc n) else nsum ({m..n}) f)"
                }
            ],
            "prop": [
                "nsum ({m..Suc n}) f = ",
                "(if m ≤ Suc n then nsum ({m..n}) f + f (Suc n) else nsum ({m..n}) f)"
            ],
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_natseg_Suc"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_0_natseg_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "nsum_empty, nsum ∅ f = 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ∅ f = 0"
                },
                {
                    "args": "natseg_clauses_lt_1, nsum ({i. i < 0}) f = 0",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({i. i < 0}) f = 0"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({i. i < 0}) f = 0"
                }
            ],
            "prop": "nsum ({i. i < 0}) f = 0",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_clauses_lt_1"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_Suc_natseg_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_nat_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_natseg_Suc_lt, {f: f, k: k, op: (plus::nat ⇒ nat ⇒ nat)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({i. i < Suc k}) f = iterate plus ({i. i < k}) f + f k"
                },
                {
                    "args": "nsum_def, nsum ({i. i < Suc k}) f = nsum ({i. i < k}) f + f k",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({i. i < Suc k}) f = nsum ({i. i < k}) f + f k"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({i. i < Suc k}) f = nsum ({i. i < k}) f + f k"
                }
            ],
            "prop": "nsum ({i. i < Suc k}) f = nsum ({i. i < k}) f + f k",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_natseg_Suc_lt"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "k": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_0_natseg_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "nsum_sing, nsum ({0}) f = f 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({0}) f = f 0"
                },
                {
                    "args": "natseg_clauses_le_1, nsum ({i. i ≤ 0}) f = f 0",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({i. i ≤ 0}) f = f 0"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({i. i ≤ 0}) f = f 0"
                }
            ],
            "prop": "nsum ({i. i ≤ 0}) f = f 0",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_clauses_le_1"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_sing"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_Suc_natseg_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_nat_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_natseg_Suc_le, {f: f, k: k, op: (plus::nat ⇒ nat ⇒ nat)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({i. i ≤ Suc k}) f = iterate plus ({i. i ≤ k}) f + f (Suc k)"
                },
                {
                    "args": "nsum_def, nsum ({i. i ≤ Suc k}) f = nsum ({i. i ≤ k}) f + f (Suc k)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({i. i ≤ Suc k}) f = nsum ({i. i ≤ k}) f + f (Suc k)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({i. i ≤ Suc k}) f = nsum ({i. i ≤ k}) f + f (Suc k)"
                }
            ],
            "prop": "nsum ({i. i ≤ Suc k}) f = nsum ({i. i ≤ k}) f + f (Suc k)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_natseg_Suc_le"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "k": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_swap_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: a, n: b}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({a..b})"
                },
                {
                    "args": "finite_natseg, {m: c, n: d}",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({c..d})"
                },
                {
                    "args": "nsum_swap, {f: f, s: {a..b}, t: {c..d}}",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ nsum ({a..b}) (λi. nsum ({c..d}) (f i)) = nsum ({c..d}) (λj. nsum ({a..b}) (λi. f i j))"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({a..b}) (λi. nsum ({c..d}) (f i)) = nsum ({c..d}) (λj. nsum ({a..b}) (λi. f i j))"
                }
            ],
            "prop": [
                "nsum ({a..b}) (λi. nsum ({c..d}) (f i)) = ",
                "nsum ({c..d}) (λj. nsum ({a..b}) (λi. f i j))"
            ],
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_swap"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "nat",
                "b": "nat",
                "c": "nat",
                "d": "nat",
                "f": "nat ⇒ nat ⇒ nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_add_split",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ n + 1",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ n + 1 ⊢ m ≤ n + 1"
                },
                {
                    "args": "natseg_add_split, {p: p}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "m ≤ n + 1 ⊢ {m..n + p} = {m..n} ∪ {n + 1..n + p}"
                },
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "finite_natseg, {m: n + 1, n: n + p}",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({n + 1..n + p})"
                },
                {
                    "args": "n < n + 1",
                    "id": "4",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ n < n + 1"
                },
                {
                    "args": "disjI1, {A: n < n + 1, B: n + p < m ∨ n < m ∨ n + p < n + 1}",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "m ≤ n + 1 ⊢ n < n + 1 ∨ n + p < m ∨ n < m ∨ n + p < n + 1"
                },
                {
                    "args": "disjoint_natseg, disjoint ({m..n}) ({n + 1..n + p})",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n + 1 ⊢ disjoint ({m..n}) ({n + 1..n + p})"
                },
                {
                    "args": "nsum_union, {f: f, s: {m..n}, t: {n + 1..n + p}}",
                    "id": "7",
                    "prevs": [
                        "2",
                        "3",
                        "6"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "m ≤ n + 1 ⊢ nsum ({m..n} ∪ {n + 1..n + p}) f = nsum ({m..n}) f + nsum ({n + 1..n + p}) f"
                },
                {
                    "args": "nsum ({m..n + p}) f = nsum ({m..n}) f + nsum ({n + 1..n + p}) f",
                    "id": "8",
                    "prevs": [
                        "1",
                        "7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m ≤ n + 1 ⊢ nsum ({m..n + p}) f = nsum ({m..n}) f + nsum ({n + 1..n + p}) f"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [
                        "0",
                        "8"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ n + 1 ⟶ nsum ({m..n + p}) f = nsum ({m..n}) f + nsum ({n + 1..n + p}) f"
                }
            ],
            "prop": "m ≤ n + 1 ⟶ nsum ({m..n + p}) f = nsum ({m..n}) f + nsum ({n + 1..n + p}) f",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_p": "p",
                    "theorem": "natseg_add_split"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_union"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_natseg"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "4",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat",
                "n": "nat",
                "p": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_offset",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "comp_fun_def, (λi. f (i + p)) = f ∘ (λi. i + p)",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ (λi. f (i + p)) = f ∘ (λi. i + p)"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x. ∀y. x ∈ {m..n} ⟶ y ∈ {m..n} ⟶ x + p = y + p ⟶ x = y"
                },
                {
                    "args": "x, nat",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "y, nat",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "x ∈ {m..n}",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ {m..n} ⊢ x ∈ {m..n}"
                },
                {
                    "args": "y ∈ {m..n}",
                    "id": "1.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y ∈ {m..n} ⊢ y ∈ {m..n}"
                },
                {
                    "args": "x + p = y + p",
                    "id": "1.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x + p = y + p ⊢ x + p = y + p"
                },
                {
                    "args": "add_cancel_right",
                    "id": "1.5",
                    "prevs": [
                        "1.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x + p = y + p ⊢ x = y"
                },
                {
                    "args": "",
                    "id": "1.6",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.2",
                        "1.3",
                        "1.4",
                        "1.5"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. ∀y. x ∈ {m..n} ⟶ y ∈ {m..n} ⟶ x + p = y + p ⟶ x = y"
                },
                {
                    "args": "nsum_image, {f: λi. i + p, g: f, s: {m..n}}",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ nsum (image (λi. i + p) ({m..n})) f = nsum ({m..n}) (f ∘ (λi. i + p))"
                },
                {
                    "args": "nsum (image (λi. i + p) ({m..n})) f = nsum ({m..n}) (λi. f (i + p))",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "⊢ nsum (image (λi. i + p) ({m..n})) f = nsum ({m..n}) (λi. f (i + p))"
                },
                {
                    "args": "natseg_offset_image, nsum ({m + p..n + p}) f = nsum ({m..n}) (λi. f (i + p))",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({m + p..n + p}) f = nsum ({m..n}) (λi. f (i + p))"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({m + p..n + p}) f = nsum ({m..n}) (λi. f (i + p))"
                }
            ],
            "prop": "nsum ({m + p..n + p}) f = nsum ({m..n}) (λi. f (i + p))",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_offset_image"
                },
                {
                    "goal": "(λi. f (i + p)) = f O (λi. i + p)",
                    "goal_id": "0",
                    "method_name": "cut"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "comp_fun_def"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "nsum_image"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "x,y"
                },
                {
                    "fact_ids": [
                        "1.4"
                    ],
                    "goal_id": "1.5",
                    "method_name": "apply_backward_step",
                    "theorem": "add_cancel_right"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat",
                "n": "nat",
                "p": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_offset_0",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ n",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ n ⊢ m ≤ n"
                },
                {
                    "args": "sub_add",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ n ⊢ n - m + m = n"
                },
                {
                    "args": "nsum ({m..n}) f = nsum ({m..n - m + m}) f",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m ≤ n ⊢ nsum ({m..n}) f = nsum ({m..n - m + m}) f"
                },
                {
                    "args": "nat_plus_def_1, nsum ({m..n}) f = nsum ({0 + m..n - m + m}) f",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n ⊢ nsum ({m..n}) f = nsum ({0 + m..n - m + m}) f"
                },
                {
                    "args": "nsum_offset, nsum ({m..n}) f = nsum ({0..n - m}) (λi. f (i + m))",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "m ≤ n ⊢ nsum ({m..n}) f = nsum ({0..n - m}) (λi. f (i + m))"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ n ⟶ nsum ({m..n}) f = nsum ({0..n - m}) (λi. f (i + m))"
                }
            ],
            "prop": "m ≤ n ⟶ nsum ({m..n}) f = nsum ({0..n - m}) (λi. f (i + m))",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "nsum_offset"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_plus_def_1"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "theorem": "sub_add"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "nsum_clauses_left",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ n",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ n ⊢ m ≤ n"
                },
                {
                    "args": "natseg_lrec",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ n ⊢ {m..n} = insert m ({m + 1..n})"
                },
                {
                    "args": "finite_natseg, {m: m + 1, n: n}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m + 1..n})"
                },
                {
                    "args": "nsum_insert, {f: f, x: m}",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ nsum (insert m ({m + 1..n})) f = (if m ∈ {m + 1..n} then nsum ({m + 1..n}) f else f m + nsum ({m + 1..n}) f)"
                },
                {
                    "args": "m < m + 1",
                    "id": "4",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ m < m + 1"
                },
                {
                    "args": "not_le, ¬(m + 1 ≤ m)",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n ⊢ ¬(m + 1 ≤ m)"
                },
                {
                    "args": "disjI1, {A: ¬(m + 1 ≤ m), B: ¬(m ≤ n)}",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "m ≤ n ⊢ ¬(m + 1 ≤ m) ∨ ¬(m ≤ n)"
                },
                {
                    "args": "de_morgan_thm1, ¬(m + 1 ≤ m ∧ m ≤ n)",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n ⊢ ¬(m + 1 ≤ m ∧ m ≤ n)"
                },
                {
                    "args": "member_natseg, ¬(m ∈ {m + 1..n})",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n ⊢ ¬(m ∈ {m + 1..n})"
                },
                {
                    "args": "if_not_P",
                    "id": "9",
                    "prevs": [
                        "3",
                        "8"
                    ],
                    "rule": "rewrite_fact",
                    "th": "m ≤ n ⊢ nsum (insert m ({m + 1..n})) f = f m + nsum ({m + 1..n}) f"
                },
                {
                    "args": "nsum ({m..n}) f = f m + nsum ({m + 1..n}) f",
                    "id": "10",
                    "prevs": [
                        "1",
                        "9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m ≤ n ⊢ nsum ({m..n}) f = f m + nsum ({m + 1..n}) f"
                },
                {
                    "args": "",
                    "id": "11",
                    "prevs": [
                        "0",
                        "10"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ n ⟶ nsum ({m..n}) f = f m + nsum ({m + 1..n}) f"
                }
            ],
            "prop": "m ≤ n ⟶ nsum ({m..n}) f = f m + nsum ({m + 1..n}) f",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "theorem": "natseg_lrec"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "finite {m + 1..n}",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "m",
                    "theorem": "nsum_insert"
                },
                {
                    "goal": "~(m ∈ {m + 1..n})",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "de_morgan_thm1"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "not_le"
                },
                {
                    "goal_id": "4",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "3",
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "nsum_clauses_right",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (0::nat) < 0 ⟶ m ≤ 0 ⟶ nsum ({m..0}) f = nsum ({m..0 - 1}) f + f 0"
                },
                {
                    "args": "(0::nat) < 0",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(0::nat) < 0 ⊢ (0::nat) < 0"
                },
                {
                    "args": "m ≤ 0",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ 0 ⊢ m ≤ 0"
                },
                {
                    "args": "nsum ({m..0}) f = nsum ({m..0 - 1}) f + f 0",
                    "id": "0.2",
                    "prevs": [
                        "0.0"
                    ],
                    "rule": "z3",
                    "th": "(0::nat) < 0 ⊢ nsum ({m..0}) f = nsum ({m..0 - 1}) f + f 0"
                },
                {
                    "args": "",
                    "id": "0.3",
                    "prevs": [
                        "0.0",
                        "0.1",
                        "0.2"
                    ],
                    "rule": "intros",
                    "th": "⊢ (0::nat) < 0 ⟶ m ≤ 0 ⟶ nsum ({m..0}) f = nsum ({m..0 - 1}) f + f 0"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀n. (0 < n ⟶ m ≤ n ⟶ nsum ({m..n}) f = nsum ({m..n - 1}) f + f n) ⟶ 0 < Suc n ⟶ m ≤ Suc n ⟶ nsum ({m..Suc n}) f = nsum ({m..Suc n - 1}) f + f (Suc n)"
                },
                {
                    "args": "n, nat",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR n"
                },
                {
                    "args": "0 < n ⟶ m ≤ n ⟶ nsum ({m..n}) f = nsum ({m..n - 1}) f + f n",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "0 < n ⟶ m ≤ n ⟶ nsum ({m..n}) f = nsum ({m..n - 1}) f + f n ⊢ 0 < n ⟶ m ≤ n ⟶ nsum ({m..n}) f = nsum ({m..n - 1}) f + f n"
                },
                {
                    "args": "0 < Suc n",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "0 < Suc n ⊢ 0 < Suc n"
                },
                {
                    "args": "m ≤ Suc n",
                    "id": "1.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ Suc n ⊢ m ≤ Suc n"
                },
                {
                    "args": "if_P, (if m ≤ Suc n then nsum ({m..n}) f + f (Suc n) else nsum ({m..n}) f) = nsum ({m..n}) f + f (Suc n)",
                    "id": "1.4",
                    "prevs": [
                        "1.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ Suc n ⊢ (if m ≤ Suc n then nsum ({m..n}) f + f (Suc n) else nsum ({m..n}) f) = nsum ({m..n}) f + f (Suc n)"
                },
                {
                    "args": "nsum_Suc_natseg, nsum ({m..Suc n}) f = nsum ({m..n}) f + f (Suc n)",
                    "id": "1.5",
                    "prevs": [
                        "1.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "0 < Suc n, m ≤ Suc n, 0 < n ⟶ m ≤ n ⟶ nsum ({m..n}) f = nsum ({m..n - 1}) f + f n ⊢ nsum ({m..Suc n}) f = nsum ({m..n}) f + f (Suc n)"
                },
                {
                    "args": "suc_sub1, nsum ({m..Suc n}) f = nsum ({m..Suc n - 1}) f + f (Suc n)",
                    "id": "1.6",
                    "prevs": [
                        "1.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "0 < Suc n, m ≤ Suc n, 0 < n ⟶ m ≤ n ⟶ nsum ({m..n}) f = nsum ({m..n - 1}) f + f n ⊢ nsum ({m..Suc n}) f = nsum ({m..Suc n - 1}) f + f (Suc n)"
                },
                {
                    "args": "",
                    "id": "1.7",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.2",
                        "1.3",
                        "1.6"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀n. (0 < n ⟶ m ≤ n ⟶ nsum ({m..n}) f = nsum ({m..n - 1}) f + f n) ⟶ 0 < Suc n ⟶ m ≤ Suc n ⟶ nsum ({m..Suc n}) f = nsum ({m..Suc n - 1}) f + f (Suc n)"
                },
                {
                    "args": "nat_induct, {P: λn. 0 < n ⟶ m ≤ n ⟶ nsum ({m..n}) f = nsum ({m..n - 1}) f + f n, x: n}",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ 0 < n ⟶ m ≤ n ⟶ nsum ({m..n}) f = nsum ({m..n - 1}) f + f n"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ 0 < n ⟶ m ≤ n ⟶ nsum ({m..n}) f = nsum ({m..n - 1}) f + f n"
                }
            ],
            "prop": "0 < n ⟶ m ≤ n ⟶ nsum ({m..n}) f = nsum ({m..n - 1}) f + f n",
            "steps": [
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "revert_intro"
                },
                {
                    "goal_id": "0",
                    "method_name": "induction",
                    "theorem": "nat_induct",
                    "var": "n"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.2",
                    "method_name": "z3"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "n"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "suc_sub1"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_Suc_natseg"
                },
                {
                    "fact_ids": [
                        "1.3"
                    ],
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_pair",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_nat_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "iterate_pair, {f: f, m: m, n: n, op: (plus::nat ⇒ nat ⇒ nat)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({2 * m..2 * n + 1}) f = iterate plus ({m..n}) (λi. f (2 * i) + f (2 * i + 1))"
                },
                {
                    "args": "nsum_def, nsum ({2 * m..2 * n + 1}) f = nsum ({m..n}) (λi. f (2 * i) + f (2 * i + 1))",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({2 * m..2 * n + 1}) f = nsum ({m..n}) (λi. f (2 * i) + f (2 * i + 1))"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({2 * m..2 * n + 1}) f = nsum ({m..n}) (λi. f (2 * i) + f (2 * i + 1))"
                }
            ],
            "prop": "nsum ({2 * m..2 * n + 1}) f = nsum ({m..n}) (λi. f (2 * i) + f (2 * i + 1))",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_pair"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "nsum_reflect",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "iterate_reflect, {m: m, n: n, op: (plus::nat ⇒ nat ⇒ nat), x: x}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat) ⟶ iterate plus ({m..n}) x = (if n < m then neutral plus else iterate plus ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "monoidal_nat_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::nat ⇒ nat ⇒ nat)"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_fact",
                    "th": "⊢ iterate plus ({m..n}) x = (if n < m then neutral plus else iterate plus ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "neutral_nat_add",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ iterate plus ({m..n}) x = (if n < m then 0 else iterate plus ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "nsum_def, nsum ({m..n}) x = (if n < m then 0 else nsum ({0..n - m}) (λi. x (n - i)))",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ({m..n}) x = (if n < m then 0 else nsum ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({m..n}) x = (if n < m then 0 else nsum ({0..n - m}) (λi. x (n - i)))"
                }
            ],
            "prop": "nsum ({m..n}) x = (if n < m then 0 else nsum ({0..n - m}) (λi. x (n - i)))",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_forward_step",
                    "param_m": "m",
                    "param_n": "n",
                    "param_op": "(plus::nat=>nat=>nat)",
                    "param_x": "x",
                    "theorem": "iterate_reflect"
                },
                {
                    "goal": "monoidal (plus::nat ⇒ nat ⇒ nat)",
                    "goal_id": "1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_nat_add"
                },
                {
                    "fact_ids": [
                        "0",
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat",
                "x": "nat ⇒ nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "mod_nsum_mod",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ n = 0 ⟶ nsum s f MOD n = nsum s (λi. f i MOD n) MOD n"
                },
                {
                    "args": "n = 0",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "n = 0 ⊢ n = 0"
                },
                {
                    "args": "eta_conversion, nsum s f = nsum s (λi. f i)",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum s f = nsum s (λi. f i)"
                },
                {
                    "args": "mod_zero, nsum s f = nsum s (λi. f i MOD 0)",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, n = 0 ⊢ nsum s f = nsum s (λi. f i MOD 0)"
                },
                {
                    "args": "mod_zero, nsum s f MOD 0 = nsum s (λi. f i MOD 0) MOD 0",
                    "id": "1.3",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, n = 0 ⊢ nsum s f MOD 0 = nsum s (λi. f i MOD 0) MOD 0"
                },
                {
                    "args": "nsum s f MOD n = nsum s (λi. f i MOD n) MOD n",
                    "id": "1.4",
                    "prevs": [
                        "1.0",
                        "1.3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, n = 0 ⊢ nsum s f MOD n = nsum s (λi. f i MOD n) MOD n"
                },
                {
                    "args": "",
                    "id": "1.5",
                    "prevs": [
                        "1.0",
                        "1.4"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ n = 0 ⟶ nsum s f MOD n = nsum s (λi. f i MOD n) MOD n"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ¬(n = 0) ⟶ nsum s f MOD n = nsum s (λi. f i MOD n) MOD n"
                },
                {
                    "args": "¬(n = 0)",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(n = 0) ⊢ ¬(n = 0)"
                },
                {
                    "args": "nsum_empty, nsum ∅ f MOD n = nsum ∅ (λi. f i MOD n) MOD n",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ nsum ∅ f MOD n = nsum ∅ (λi. f i MOD n) MOD n"
                },
                {
                    "args": "",
                    "id": "2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(n = 0) ⊢ ∀x. ∀s1. nsum s1 f MOD n = nsum s1 (λi. f i MOD n) MOD n ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ nsum (insert x s1) f MOD n = nsum (insert x s1) (λi. f i MOD n) MOD n"
                },
                {
                    "args": "x, 'a",
                    "id": "2.2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "s, 'a set",
                    "id": "2.2.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "nsum s f MOD n = nsum s (λi. f i MOD n) MOD n",
                    "id": "2.2.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "nsum s f MOD n = nsum s (λi. f i MOD n) MOD n ⊢ nsum s f MOD n = nsum s (λi. f i MOD n) MOD n"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "2.2.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "nsum_insert, {f: λi. f i MOD n, x: x}",
                    "id": "2.2.4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum (insert x s) (λi. f i MOD n) = (if x ∈ s then nsum s (λi. f i MOD n) else f x MOD n + nsum s (λi. f i MOD n))"
                },
                {
                    "args": "if_not_P",
                    "id": "2.2.5",
                    "prevs": [
                        "2.2.4",
                        "2.2.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ nsum (insert x s) (λi. f i MOD n) = f x MOD n + nsum s (λi. f i MOD n)"
                },
                {
                    "args": "nsum_insert, {f: f, x: x}",
                    "id": "2.2.6",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum (insert x s) f = (if x ∈ s then nsum s f else f x + nsum s f)"
                },
                {
                    "args": "if_not_P",
                    "id": "2.2.7",
                    "prevs": [
                        "2.2.6",
                        "2.2.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ nsum (insert x s) f = f x + nsum s f"
                },
                {
                    "args": "(f x MOD n + nsum s f MOD n) MOD n = (f x MOD n + nsum s (λi. f i MOD n) MOD n) MOD n",
                    "id": "2.2.8",
                    "prevs": [
                        "2.2.2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "nsum s f MOD n = nsum s (λi. f i MOD n) MOD n ⊢ (f x MOD n + nsum s f MOD n) MOD n = (f x MOD n + nsum s (λi. f i MOD n) MOD n) MOD n"
                },
                {
                    "args": "mod_mod_refl, (f x MOD n + nsum s f MOD n) MOD n = (f x MOD n MOD n + nsum s (λi. f i MOD n) MOD n) MOD n",
                    "id": "2.2.9",
                    "prevs": [
                        "2.2.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(n = 0), ¬(x ∈ s), nsum s f MOD n = nsum s (λi. f i MOD n) MOD n ⊢ (f x MOD n + nsum s f MOD n) MOD n = (f x MOD n MOD n + nsum s (λi. f i MOD n) MOD n) MOD n"
                },
                {
                    "args": "mod_add_mod, (f x + nsum s f) MOD n = (f x MOD n + nsum s (λi. f i MOD n)) MOD n",
                    "id": "2.2.10",
                    "prevs": [
                        "2.2.9"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite s, ¬(n = 0), ¬(x ∈ s), nsum s f MOD n = nsum s (λi. f i MOD n) MOD n ⊢ (f x + nsum s f) MOD n = (f x MOD n + nsum s (λi. f i MOD n)) MOD n"
                },
                {
                    "args": "nsum (insert x s) f MOD n = (f x MOD n + nsum s (λi. f i MOD n)) MOD n",
                    "id": "2.2.11",
                    "prevs": [
                        "2.2.7",
                        "2.2.10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(n = 0), ¬(x ∈ s), nsum s f MOD n = nsum s (λi. f i MOD n) MOD n ⊢ nsum (insert x s) f MOD n = (f x MOD n + nsum s (λi. f i MOD n)) MOD n"
                },
                {
                    "args": "nsum (insert x s) f MOD n = nsum (insert x s) (λi. f i MOD n) MOD n",
                    "id": "2.2.12",
                    "prevs": [
                        "2.2.5",
                        "2.2.11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(n = 0), ¬(x ∈ s), nsum s f MOD n = nsum s (λi. f i MOD n) MOD n ⊢ nsum (insert x s) f MOD n = nsum (insert x s) (λi. f i MOD n) MOD n"
                },
                {
                    "args": "",
                    "id": "2.2.13",
                    "prevs": [
                        "2.2.0",
                        "2.2.1",
                        "2.2.2",
                        "2.2.3",
                        "0",
                        "2.2.12"
                    ],
                    "rule": "intros",
                    "th": "¬(n = 0) ⊢ ∀x. ∀s. nsum s f MOD n = nsum s (λi. f i MOD n) MOD n ⟶ ¬(x ∈ s) ⟶ finite s ⟶ nsum (insert x s) f MOD n = nsum (insert x s) (λi. f i MOD n) MOD n"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "2.3",
                    "prevs": [
                        "0",
                        "2.1",
                        "2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(n = 0) ⊢ nsum s f MOD n = nsum s (λi. f i MOD n) MOD n"
                },
                {
                    "args": "",
                    "id": "2.4",
                    "prevs": [
                        "2.0",
                        "2.3"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ ¬(n = 0) ⟶ nsum s f MOD n = nsum s (λi. f i MOD n) MOD n"
                },
                {
                    "args": "classical_cases",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ nsum s f MOD n = nsum s (λi. f i MOD n) MOD n"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ nsum s f MOD n = nsum s (λi. f i MOD n) MOD n"
                }
            ],
            "prop": "finite s ⟶ nsum s f MOD n = nsum s (λi. f i MOD n) MOD n",
            "steps": [
                {
                    "case": "n=0",
                    "goal_id": "1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "mod_zero"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "mod_zero"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eta_conversion"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_empty"
                },
                {
                    "goal_id": "2.2",
                    "method_name": "introduction",
                    "names": "x,s"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.2.4",
                    "method_name": "apply_forward_step",
                    "param_f": "(λi. f i MOD n)",
                    "param_x": "x",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "2.2.4",
                        "2.2.3"
                    ],
                    "goal_id": "2.2.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "2.2.5"
                    ],
                    "goal_id": "2.2.6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.2.6",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "2.2.6",
                        "2.2.3"
                    ],
                    "goal_id": "2.2.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "2.2.7"
                    ],
                    "goal_id": "2.2.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.2.8",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "mod_add_mod"
                },
                {
                    "goal_id": "2.2.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "mod_mod_refl"
                },
                {
                    "fact_ids": [
                        "2.2.2"
                    ],
                    "goal_id": "2.2.8",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "n": "nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "mod_nsum_mod_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: a, n: b}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({a..b})"
                },
                {
                    "args": "mod_nsum_mod, {f: f, n: n, s: {a..b}}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ nsum ({a..b}) f MOD n = nsum ({a..b}) (λi. f i MOD n) MOD n"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ nsum ({a..b}) f MOD n = nsum ({a..b}) (λi. f i MOD n) MOD n"
                }
            ],
            "prop": "nsum ({a..b}) f MOD n = nsum ({a..b}) (λi. f i MOD n) MOD n",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "mod_nsum_mod"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "nat",
                "b": "nat",
                "f": "nat ⇒ nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum",
            "prop": "(sum::'a set ⇒ ('a ⇒ real) ⇒ real) = iterate plus",
            "ty": "def",
            "type": "'a set ⇒ ('a ⇒ real) ⇒ real"
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "product",
            "prop": "(product::'a set ⇒ ('a ⇒ real) ⇒ real) = iterate times",
            "ty": "def",
            "type": "'a set ⇒ ('a ⇒ real) ⇒ real"
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "neutral_real_add",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "theI, {P: λx::real. ∀y. x + y = y ∧ y + x = y, a: (0::real)}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (∀y::real. 0 + y = y ∧ y + 0 = y) ⟶ (∀x::real. (∀y. x + y = y ∧ y + x = y) ⟶ x = 0) ⟶ (∀y::real. (THE x. ∀y1. x + y1 = y1 ∧ y1 + x = y1) + y = y ∧ y + (THE x. ∀y1. x + y1 = y1 ∧ y1 + x = y1) = y)"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀y::real. 0 + y = y ∧ y + 0 = y"
                },
                {
                    "args": "y, real",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "real_add_lid, 0 + y = y",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ 0 + y = y"
                },
                {
                    "args": "real_add_rid, y + 0 = y",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ y + 0 = y"
                },
                {
                    "args": "conjI",
                    "id": "1.3",
                    "prevs": [
                        "1.1",
                        "1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ 0 + y = y ∧ y + 0 = y"
                },
                {
                    "args": "",
                    "id": "1.4",
                    "prevs": [
                        "1.0",
                        "1.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀y::real. 0 + y = y ∧ y + 0 = y"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_fact",
                    "th": "⊢ (∀x::real. (∀y. x + y = y ∧ y + x = y) ⟶ x = 0) ⟶ (∀y::real. (THE x. ∀y1. x + y1 = y1 ∧ y1 + x = y1) + y = y ∧ y + (THE x. ∀y1. x + y1 = y1 ∧ y1 + x = y1) = y)"
                },
                {
                    "args": "∀x::real. (∀y. x + y = y ∧ y + x = y) ⟶ x = 0",
                    "id": "3",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x::real. (∀y. x + y = y ∧ y + x = y) ⟶ x = 0"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "2",
                        "3"
                    ],
                    "rule": "apply_fact",
                    "th": "⊢ ∀y::real. (THE x. ∀y1. x + y1 = y1 ∧ y1 + x = y1) + y = y ∧ y + (THE x. ∀y1. x + y1 = y1 ∧ y1 + x = y1) = y"
                },
                {
                    "args": "THE x::real. ∀y. x + y = y ∧ y + x = y",
                    "id": "5",
                    "prevs": [
                        "3",
                        "4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "⊢ (THE x::real. ∀y. x + y = y ∧ y + x = y) = 0"
                },
                {
                    "args": "neutral_def, neutral plus = (0::real)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ neutral plus = (0::real)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ neutral plus = (0::real)"
                }
            ],
            "prop": "neutral plus = (0::real)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_forward_step",
                    "param_P": "(%x::real. ∀y. x + y = y ∧ y + x = y)",
                    "param_a": "(0::real)",
                    "theorem": "theI"
                },
                {
                    "goal": "(∀y::real. 0 + y = y ∧ y + 0 = y)",
                    "goal_id": "1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "y"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_add_lid"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_add_rid"
                },
                {
                    "fact_ids": [
                        "0",
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal": "(∀x::real. (∀y. x + y = y ∧ y + x = y) ⟶ x = 0)",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "2",
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {}
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "neutral_real_mul",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "theI, {P: λx::real. ∀y. x * y = y ∧ y * x = y, a: (1::real)}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (∀y::real. 1 * y = y ∧ y * 1 = y) ⟶ (∀x::real. (∀y. x * y = y ∧ y * x = y) ⟶ x = 1) ⟶ (∀y::real. (THE x. ∀y1. x * y1 = y1 ∧ y1 * x = y1) * y = y ∧ y * (THE x. ∀y1. x * y1 = y1 ∧ y1 * x = y1) = y)"
                },
                {
                    "args": "∀y::real. 1 * y = y ∧ y * 1 = y",
                    "id": "1",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀y::real. 1 * y = y ∧ y * 1 = y"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_fact",
                    "th": "⊢ (∀x::real. (∀y. x * y = y ∧ y * x = y) ⟶ x = 1) ⟶ (∀y::real. (THE x. ∀y1. x * y1 = y1 ∧ y1 * x = y1) * y = y ∧ y * (THE x. ∀y1. x * y1 = y1 ∧ y1 * x = y1) = y)"
                },
                {
                    "args": "∀x::real. (∀y. x * y = y ∧ y * x = y) ⟶ x = 1",
                    "id": "3",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x::real. (∀y. x * y = y ∧ y * x = y) ⟶ x = 1"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "2",
                        "3"
                    ],
                    "rule": "apply_fact",
                    "th": "⊢ ∀y::real. (THE x. ∀y1. x * y1 = y1 ∧ y1 * x = y1) * y = y ∧ y * (THE x. ∀y1. x * y1 = y1 ∧ y1 * x = y1) = y"
                },
                {
                    "args": "THE x::real. ∀y. x * y = y ∧ y * x = y",
                    "id": "5",
                    "prevs": [
                        "3",
                        "4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "⊢ (THE x::real. ∀y. x * y = y ∧ y * x = y) = 1"
                },
                {
                    "args": "neutral_def, neutral times = (1::real)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ neutral times = (1::real)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ neutral times = (1::real)"
                }
            ],
            "prop": "neutral times = (1::real)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_forward_step",
                    "param_P": "(%x::real. ∀y. x * y = y ∧ y * x = y)",
                    "param_a": "(1::real)",
                    "theorem": "theI"
                },
                {
                    "goal": "(∀y::real. 1 * y = y ∧ y * 1 = y)",
                    "goal_id": "1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "0",
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_fact"
                },
                {
                    "goal": "(∀x::real. (∀y. x * y = y ∧ y * x = y) ⟶ x = 1)",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "2",
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {}
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "monoidal_real_add",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "(∀x::real. ∀y. x + y = y + x) ∧ (∀x::real. ∀y. ∀z. x + (y + z) = x + y + z) ∧ (∀x::real. 0 + x = x)",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ (∀x::real. ∀y. x + y = y + x) ∧ (∀x::real. ∀y. ∀z. x + (y + z) = x + y + z) ∧ (∀x::real. 0 + x = x)"
                },
                {
                    "args": "neutral_real_add, (∀x::real. ∀y. x + y = y + x) ∧ (∀x::real. ∀y. ∀z. x + (y + z) = x + y + z) ∧ (∀x::real. neutral plus + x = x)",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ (∀x::real. ∀y. x + y = y + x) ∧ (∀x::real. ∀y. ∀z. x + (y + z) = x + y + z) ∧ (∀x::real. neutral plus + x = x)"
                },
                {
                    "args": "monoidal_def, monoidal (plus::real ⇒ real ⇒ real)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                }
            ],
            "prop": "monoidal (plus::real ⇒ real ⇒ real)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "monoidal_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {}
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "monoidal_real_mul",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "(∀x::real. ∀y. x * y = y * x) ∧ (∀x::real. ∀y. ∀z. x * (y * z) = x * y * z) ∧ (∀x::real. 1 * x = x)",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ (∀x::real. ∀y. x * y = y * x) ∧ (∀x::real. ∀y. ∀z. x * (y * z) = x * y * z) ∧ (∀x::real. 1 * x = x)"
                },
                {
                    "args": "neutral_real_mul, (∀x::real. ∀y. x * y = y * x) ∧ (∀x::real. ∀y. ∀z. x * (y * z) = x * y * z) ∧ (∀x::real. neutral times * x = x)",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ (∀x::real. ∀y. x * y = y * x) ∧ (∀x::real. ∀y. ∀z. x * (y * z) = x * y * z) ∧ (∀x::real. neutral times * x = x)"
                },
                {
                    "args": "monoidal_def, monoidal (times::real ⇒ real ⇒ real)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ monoidal (times::real ⇒ real ⇒ real)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ monoidal (times::real ⇒ real ⇒ real)"
                }
            ],
            "prop": "monoidal (times::real ⇒ real ⇒ real)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "monoidal_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_mul"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {}
        },
        {
            "attributes": [
                "hint_backward",
                "hint_forward"
            ],
            "name": "sum_degenerate",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)}))",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ ¬(finite ({x. x ∈ s ∧ ¬(f x = 0)}))"
                },
                {
                    "args": "if_not_P, (if finite ({x. x ∈ s ∧ ¬(f x = 0)}) then itset (λx. λa. f x + a) ({x. x ∈ s ∧ ¬(f x = 0)}) 0 else 0) = 0",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ (if finite ({x. x ∈ s ∧ ¬(f x = 0)}) then itset (λx. λa. f x + a) ({x. x ∈ s ∧ ¬(f x = 0)}) 0 else 0) = 0"
                },
                {
                    "args": "neutral_real_add, (if finite ({x. x ∈ s ∧ ¬(f x = neutral plus)}) then itset (λx. λa. f x + a) ({x. x ∈ s ∧ ¬(f x = neutral plus)}) (neutral plus) else neutral plus) = 0",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ (if finite ({x. x ∈ s ∧ ¬(f x = neutral plus)}) then itset (λx. λa. f x + a) ({x. x ∈ s ∧ ¬(f x = neutral plus)}) (neutral plus) else neutral plus) = 0"
                },
                {
                    "args": "support_def, (if finite (support plus f s) then itset (λx. λa. f x + a) (support plus f s) (neutral plus) else neutral plus) = 0",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ (if finite (support plus f s) then itset (λx. λa. f x + a) (support plus f s) (neutral plus) else neutral plus) = 0"
                },
                {
                    "args": "iterate_def, iterate plus s f = 0",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ iterate plus s f = 0"
                },
                {
                    "args": "sum_def, sum s f = 0",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ sum s f = 0"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⟶ sum s f = 0"
                }
            ],
            "prop": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⟶ sum s f = 0",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_empty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_real_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_empty, {f: f, op: (plus::real ⇒ real ⇒ real)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ∅ f = neutral plus"
                },
                {
                    "args": "neutral_real_add, iterate plus ∅ f = 0",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "⊢ iterate plus ∅ f = 0"
                },
                {
                    "args": "sum_def, sum ∅ f = 0",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ∅ f = 0"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ∅ f = 0"
                }
            ],
            "prop": "sum ∅ f = 0",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_empty"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_forward"
            ],
            "name": "sum_insert",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_insert, {f: f, op: (plus::real ⇒ real ⇒ real), s: s, x: x}",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ iterate plus (insert x s) f = (if x ∈ s then iterate plus s f else f x + iterate plus s f)"
                },
                {
                    "args": "sum_def, sum (insert x s) f = (if x ∈ s then sum s f else f x + sum s f)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ sum (insert x s) f = (if x ∈ s then sum s f else f x + sum s f)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ sum (insert x s) f = (if x ∈ s then sum s f else f x + sum s f)"
                }
            ],
            "prop": "finite s ⟶ sum (insert x s) f = (if x ∈ s then sum s f else f x + sum s f)",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_insert"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set",
                "x": "'a"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1",
                "hint_forward"
            ],
            "name": "sum_union",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "disjoint s t",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "disjoint s t ⊢ disjoint s t"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_union, {f: f, op: (plus::real ⇒ real ⇒ real), s: s, t: t}",
                    "id": "4",
                    "prevs": [
                        "3",
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, disjoint s t ⊢ iterate plus (s ∪ t) f = iterate plus s f + iterate plus t f"
                },
                {
                    "args": "sum_def, sum (s ∪ t) f = sum s f + sum t f",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, disjoint s t ⊢ sum (s ∪ t) f = sum s f + sum t f"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ disjoint s t ⟶ sum (s ∪ t) f = sum s f + sum t f"
                }
            ],
            "prop": "finite s ⟶ finite t ⟶ disjoint s t ⟶ sum (s ∪ t) f = sum s f + sum t f",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_union"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1",
                "hint_forward"
            ],
            "name": "sum_diff",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "t ⊆ s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "t ⊆ s ⊢ t ⊆ s"
                },
                {
                    "args": "∀x::real. ∀y. ∀z. x = y - z ⟷ x + z = y",
                    "id": "2",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x::real. ∀y. ∀z. x = y - z ⟷ x + z = y"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_diff, {f: f, op: (plus::real ⇒ real ⇒ real), s: s, t: t}",
                    "id": "4",
                    "prevs": [
                        "3",
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, t ⊆ s ⊢ iterate plus (diff s t) f + iterate plus t f = iterate plus s f"
                },
                {
                    "args": "sum_def, sum (diff s t) f + sum t f = sum s f",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, t ⊆ s ⊢ sum (diff s t) f + sum t f = sum s f"
                },
                {
                    "args": "sum (diff s t) f = sum s f - sum t f",
                    "id": "6",
                    "prevs": [
                        "2",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, t ⊆ s ⊢ sum (diff s t) f = sum s f - sum t f"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ t ⊆ s ⟶ sum (diff s t) f = sum s f - sum t f"
                }
            ],
            "prop": "finite s ⟶ t ⊆ s ⟶ sum (diff s t) f = sum s f - sum t f",
            "steps": [
                {
                    "goal": "!x::real. !y. !z. (x = y - z) <--> (x + z = y)",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_diff"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1",
                "hint_forward"
            ],
            "name": "sum_incl_excl",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "iterate_incl_excl, {f: f, op: (plus::real ⇒ real ⇒ real), s: s, t: t}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real) ⟶ finite s ⟶ finite t ⟶ iterate plus s f + iterate plus t f = iterate plus (s ∪ t) f + iterate plus (s ∩ t) f"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "2",
                        "3",
                        "0",
                        "1"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, finite t ⊢ iterate plus s f + iterate plus t f = iterate plus (s ∪ t) f + iterate plus (s ∩ t) f"
                },
                {
                    "args": "sum_def, sum s f + sum t f = sum (s ∪ t) f + sum (s ∩ t) f",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t ⊢ sum s f + sum t f = sum (s ∪ t) f + sum (s ∩ t) f"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ sum s f + sum t f = sum (s ∪ t) f + sum (s ∩ t) f"
                }
            ],
            "prop": "finite s ⟶ finite t ⟶ sum s f + sum t f = sum (s ∪ t) f + sum (s ∩ t) f",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_op": "(plus::real=>real=>real)",
                    "param_s": "s",
                    "param_t": "t",
                    "theorem": "iterate_incl_excl"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_support",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "support_support, (if finite (support plus f (support plus f s)) then itset (λx. λa. f x + a) (support plus f (support plus f s)) (neutral plus) else neutral plus) = (if finite (support plus f s) then itset (λx. λa. f x + a) (support plus f s) (neutral plus) else neutral plus)",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ (if finite (support plus f (support plus f s)) then itset (λx. λa. f x + a) (support plus f (support plus f s)) (neutral plus) else neutral plus) = (if finite (support plus f s) then itset (λx. λa. f x + a) (support plus f s) (neutral plus) else neutral plus)"
                },
                {
                    "args": "iterate_def, iterate plus (support plus f s) f = iterate plus s f",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ iterate plus (support plus f s) f = iterate plus s f"
                },
                {
                    "args": "sum_def, sum (support plus f s) f = sum s f",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum (support plus f s) f = sum s f"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum (support plus f s) f = sum s f"
                }
            ],
            "prop": "sum (support plus f s) f = sum s f",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_support"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_forward"
            ],
            "name": "sum_add",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_op, {f: f, g: g, op: (plus::real ⇒ real ⇒ real), s: s}",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ iterate plus s (λx. f x + g x) = iterate plus s f + iterate plus s g"
                },
                {
                    "args": "sum_def, sum s (λx. f x + g x) = sum s f + sum s g",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ sum s (λx. f x + g x) = sum s f + sum s g"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ sum s (λx. f x + g x) = sum s f + sum s g"
                }
            ],
            "prop": "finite s ⟶ sum s (λx. f x + g x) = sum s f + sum s g",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_op"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1",
                "hint_forward"
            ],
            "name": "sum_add_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite ({x. x ∈ s ∧ ¬(f x = 0)})",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⊢ finite ({x. x ∈ s ∧ ¬(f x = 0)})"
                },
                {
                    "args": "finite ({x. x ∈ s ∧ ¬(g x = 0)})",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite ({x. x ∈ s ∧ ¬(g x = 0)})"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "neutral_real_add, finite ({x. x ∈ s ∧ ¬(f x = neutral plus)})",
                    "id": "3",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite ({x. x ∈ s ∧ ¬(f x = neutral plus)})"
                },
                {
                    "args": "support_def, finite (support plus f s)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite (support plus f s)"
                },
                {
                    "args": "neutral_real_add, finite ({x. x ∈ s ∧ ¬(g x = neutral plus)})",
                    "id": "5",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite ({x. x ∈ s ∧ ¬(g x = neutral plus)})"
                },
                {
                    "args": "support_def, finite (support plus g s)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ finite (support plus g s)"
                },
                {
                    "args": "iterate_op_gen",
                    "id": "7",
                    "prevs": [
                        "2",
                        "4",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ iterate plus s (λx. f x + g x) = iterate plus s f + iterate plus s g"
                },
                {
                    "args": "sum_def, sum s (λx. f x + g x) = sum s f + sum s g",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}), finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⊢ sum s (λx. f x + g x) = sum s f + sum s g"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [
                        "0",
                        "1",
                        "8"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⟶ finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⟶ sum s (λx. f x + g x) = sum s f + sum s g"
                }
            ],
            "prop": [
                "finite ({x. x ∈ s ∧ ¬(f x = 0)}) ",
                "⟶ finite ({x. x ∈ s ∧ ¬(g x = 0)}) ⟶ sum s (λx. f x + g x) = sum s f + sum s g"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_op_gen"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_forward"
            ],
            "name": "sum_eq_0",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. x ∈ s ⟶ f x = 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x = 0 ⊢ ∀x. x ∈ s ⟶ f x = 0"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "neutral_real_add, ∀x. x ∈ s ⟶ f x = neutral plus",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x = 0 ⊢ ∀x. x ∈ s ⟶ f x = neutral plus"
                },
                {
                    "args": "iterate_eq_neutral",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x = 0 ⊢ iterate plus s f = neutral plus"
                },
                {
                    "args": "neutral_real_add, iterate plus s f = 0",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "∀x. x ∈ s ⟶ f x = 0 ⊢ iterate plus s f = 0"
                },
                {
                    "args": "sum_def, sum s f = 0",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x = 0 ⊢ sum s f = 0"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. x ∈ s ⟶ f x = 0) ⟶ sum s f = 0"
                }
            ],
            "prop": "(∀x. x ∈ s ⟶ f x = 0) ⟶ sum s f = 0",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_eq_neutral"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_0",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. x ∈ s ⟶ (0::real) = 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x. x ∈ s ⟶ (0::real) = 0"
                },
                {
                    "args": "sum_eq_0",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ sum s (λx. 0) = 0"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum s (λx. 0) = 0"
                }
            ],
            "prop": "sum s (λx. 0) = 0",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_eq_0"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_lmul",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ c = 0 ⟶ sum s (λx. c * f x) = c * sum s f"
                },
                {
                    "args": "c = 0",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "c = 0 ⊢ c = 0"
                },
                {
                    "args": "sum_0, sum s (λx. 0) = 0",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum s (λx. 0) = 0"
                },
                {
                    "args": "real_mul_lzero, sum s (λx. 0 * f x) = 0 * sum s f",
                    "id": "0.2",
                    "prevs": [
                        "0.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "c = 0 ⊢ sum s (λx. 0 * f x) = 0 * sum s f"
                },
                {
                    "args": "sum s (λx. c * f x) = c * sum s f",
                    "id": "0.3",
                    "prevs": [
                        "0.0",
                        "0.2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "c = 0 ⊢ sum s (λx. c * f x) = c * sum s f"
                },
                {
                    "args": "",
                    "id": "0.4",
                    "prevs": [
                        "0.0",
                        "0.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ c = 0 ⟶ sum s (λx. c * f x) = c * sum s f"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ¬(c = 0) ⟶ sum s (λx. c * f x) = c * sum s f"
                },
                {
                    "args": "¬(c = 0)",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(c = 0) ⊢ ¬(c = 0)"
                },
                {
                    "args": "",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(c = 0) ⊢ ∀x. x ∈ s ∧ ¬(c * f x = neutral plus) ⟷ x ∈ s ∧ ¬(f x = neutral plus)"
                },
                {
                    "args": "x, 'a",
                    "id": "1.1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "",
                    "id": "1.1.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(c = 0) ⊢ x ∈ s ∧ ¬(c * f x = 0) ⟶ x ∈ s ∧ ¬(f x = 0)"
                },
                {
                    "args": "x ∈ s ∧ ¬(c * f x = 0)",
                    "id": "1.1.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(c * f x = 0) ⊢ x ∈ s ∧ ¬(c * f x = 0)"
                },
                {
                    "args": "conjD1",
                    "id": "1.1.1.1",
                    "prevs": [
                        "1.1.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(c * f x = 0) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "1.1.1.2",
                    "prevs": [
                        "1.1.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(c * f x = 0) ⊢ ¬(c * f x = 0)"
                },
                {
                    "args": "real_entire",
                    "id": "1.1.1.3",
                    "prevs": [
                        "1.1.1.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ s ∧ ¬(c * f x = 0) ⊢ ¬(c = 0 ∨ f x = 0)"
                },
                {
                    "args": "de_morgan_thm2",
                    "id": "1.1.1.4",
                    "prevs": [
                        "1.1.1.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ s ∧ ¬(c * f x = 0) ⊢ ¬(c = 0) ∧ ¬(f x = 0)"
                },
                {
                    "args": "conjD2",
                    "id": "1.1.1.5",
                    "prevs": [
                        "1.1.1.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(c * f x = 0) ⊢ ¬(f x = 0)"
                },
                {
                    "args": "conjI",
                    "id": "1.1.1.6",
                    "prevs": [
                        "1.1.1.1",
                        "1.1.1.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(c = 0), x ∈ s ∧ ¬(c * f x = 0) ⊢ x ∈ s ∧ ¬(f x = 0)"
                },
                {
                    "args": "",
                    "id": "1.1.1.7",
                    "prevs": [
                        "1.1.1.0",
                        "1.1.1.6"
                    ],
                    "rule": "intros",
                    "th": "¬(c = 0) ⊢ x ∈ s ∧ ¬(c * f x = 0) ⟶ x ∈ s ∧ ¬(f x = 0)"
                },
                {
                    "args": "",
                    "id": "1.1.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(c = 0) ⊢ x ∈ s ∧ ¬(f x = 0) ⟶ x ∈ s ∧ ¬(c * f x = 0)"
                },
                {
                    "args": "x ∈ s ∧ ¬(f x = 0)",
                    "id": "1.1.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(f x = 0) ⊢ x ∈ s ∧ ¬(f x = 0)"
                },
                {
                    "args": "conjD1",
                    "id": "1.1.2.1",
                    "prevs": [
                        "1.1.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = 0) ⊢ x ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "1.1.2.2",
                    "prevs": [
                        "1.1.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = 0) ⊢ ¬(f x = 0)"
                },
                {
                    "args": "conjI",
                    "id": "1.1.2.3",
                    "prevs": [
                        "1.0",
                        "1.1.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(c = 0), x ∈ s ∧ ¬(f x = 0) ⊢ ¬(c = 0) ∧ ¬(f x = 0)"
                },
                {
                    "args": "de_morgan_thm2, ¬(c = 0 ∨ f x = 0)",
                    "id": "1.1.2.4",
                    "prevs": [
                        "1.1.2.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0), x ∈ s ∧ ¬(f x = 0) ⊢ ¬(c = 0 ∨ f x = 0)"
                },
                {
                    "args": "real_entire, ¬(c * f x = 0)",
                    "id": "1.1.2.5",
                    "prevs": [
                        "1.1.2.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0), x ∈ s ∧ ¬(f x = 0) ⊢ ¬(c * f x = 0)"
                },
                {
                    "args": "conjI",
                    "id": "1.1.2.6",
                    "prevs": [
                        "1.1.2.1",
                        "1.1.2.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(c = 0), x ∈ s ∧ ¬(f x = 0) ⊢ x ∈ s ∧ ¬(c * f x = 0)"
                },
                {
                    "args": "",
                    "id": "1.1.2.7",
                    "prevs": [
                        "1.1.2.0",
                        "1.1.2.6"
                    ],
                    "rule": "intros",
                    "th": "¬(c = 0) ⊢ x ∈ s ∧ ¬(f x = 0) ⟶ x ∈ s ∧ ¬(c * f x = 0)"
                },
                {
                    "args": "iffI",
                    "id": "1.1.3",
                    "prevs": [
                        "1.1.1",
                        "1.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(c = 0) ⊢ x ∈ s ∧ ¬(c * f x = 0) ⟷ x ∈ s ∧ ¬(f x = 0)"
                },
                {
                    "args": "neutral_real_add, x ∈ s ∧ ¬(c * f x = neutral plus) ⟷ x ∈ s ∧ ¬(f x = neutral plus)",
                    "id": "1.1.4",
                    "prevs": [
                        "1.1.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0) ⊢ x ∈ s ∧ ¬(c * f x = neutral plus) ⟷ x ∈ s ∧ ¬(f x = neutral plus)"
                },
                {
                    "args": "",
                    "id": "1.1.5",
                    "prevs": [
                        "1.1.0",
                        "1.1.4"
                    ],
                    "rule": "intros",
                    "th": "¬(c = 0) ⊢ ∀x. x ∈ s ∧ ¬(c * f x = neutral plus) ⟷ x ∈ s ∧ ¬(f x = neutral plus)"
                },
                {
                    "args": "in_support, ∀x. x ∈ support plus (λx1. c * f x1) s ⟷ x ∈ support plus f s",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0) ⊢ ∀x. x ∈ support plus (λx1. c * f x1) s ⟷ x ∈ support plus f s"
                },
                {
                    "args": "member_ext",
                    "id": "1.3",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(c = 0) ⊢ support plus (λx. c * f x) s = support plus f s"
                },
                {
                    "args": "",
                    "id": "1.4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(c = 0) ⊢ finite (support plus f s) ⟶ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "finite (support plus f s)",
                    "id": "1.4.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite (support plus f s) ⊢ finite (support plus f s)"
                },
                {
                    "args": "finite_induct_strong, {P: λs. sum s (λx. c * f x) = c * sum s f}",
                    "id": "1.4.1",
                    "prevs": [
                        "1.4.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite (support plus f s) ⊢ sum ∅ (λx. c * f x) = c * sum ∅ f ⟶ (∀x. ∀s1. sum s1 (λx1. c * f x1) = c * sum s1 f ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ sum (insert x s1) (λx1. c * f x1) = c * sum (insert x s1) f) ⟶ sum (support plus f s) (λx. c * f x) = c * sum (support plus f s) f"
                },
                {
                    "args": "real_mul_rzero, 0 = c * 0",
                    "id": "1.4.2",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ 0 = c * 0"
                },
                {
                    "args": "sum_empty, sum ∅ (λx. c * f x) = c * sum ∅ f",
                    "id": "1.4.3",
                    "prevs": [
                        "1.4.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ sum ∅ (λx. c * f x) = c * sum ∅ f"
                },
                {
                    "args": "",
                    "id": "1.4.4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ ∀x. ∀s1. sum s1 (λx1. c * f x1) = c * sum s1 f ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ sum (insert x s1) (λx1. c * f x1) = c * sum (insert x s1) f"
                },
                {
                    "args": "a, 'a",
                    "id": "1.4.4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "s1, 'a set",
                    "id": "1.4.4.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s1"
                },
                {
                    "args": "sum s1 (λx. c * f x) = c * sum s1 f",
                    "id": "1.4.4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "sum s1 (λx. c * f x) = c * sum s1 f ⊢ sum s1 (λx. c * f x) = c * sum s1 f"
                },
                {
                    "args": "¬(a ∈ s1)",
                    "id": "1.4.4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s1) ⊢ ¬(a ∈ s1)"
                },
                {
                    "args": "finite s1",
                    "id": "1.4.4.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s1 ⊢ finite s1"
                },
                {
                    "args": "sum_insert, {f: f, x: a}",
                    "id": "1.4.4.5",
                    "prevs": [
                        "1.4.4.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1 ⊢ sum (insert a s1) f = (if a ∈ s1 then sum s1 f else f a + sum s1 f)"
                },
                {
                    "args": "if_not_P",
                    "id": "1.4.4.6",
                    "prevs": [
                        "1.4.4.5",
                        "1.4.4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, ¬(a ∈ s1) ⊢ sum (insert a s1) f = f a + sum s1 f"
                },
                {
                    "args": "sum_insert, {f: λx. c * f x, x: a}",
                    "id": "1.4.4.7",
                    "prevs": [
                        "1.4.4.4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s1 ⊢ sum (insert a s1) (λx. c * f x) = (if a ∈ s1 then sum s1 (λx. c * f x) else c * f a + sum s1 (λx. c * f x))"
                },
                {
                    "args": "if_not_P",
                    "id": "1.4.4.8",
                    "prevs": [
                        "1.4.4.7",
                        "1.4.4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s1, ¬(a ∈ s1) ⊢ sum (insert a s1) (λx. c * f x) = c * f a + sum s1 (λx. c * f x)"
                },
                {
                    "args": "real_eq_add_lcancel, c * f a + sum s1 (λx. c * f x) = c * f a + c * sum s1 f",
                    "id": "1.4.4.9",
                    "prevs": [
                        "1.4.4.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s1, ¬(c = 0), ¬(a ∈ s1), finite (support plus f s), sum s1 (λx. c * f x) = c * sum s1 f ⊢ c * f a + sum s1 (λx. c * f x) = c * f a + c * sum s1 f"
                },
                {
                    "args": "real_add_ldistrib, c * f a + sum s1 (λx. c * f x) = c * (f a + sum s1 f)",
                    "id": "1.4.4.10",
                    "prevs": [
                        "1.4.4.9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s1, ¬(c = 0), ¬(a ∈ s1), finite (support plus f s), sum s1 (λx. c * f x) = c * sum s1 f ⊢ c * f a + sum s1 (λx. c * f x) = c * (f a + sum s1 f)"
                },
                {
                    "args": "c * f a + sum s1 (λx. c * f x) = c * sum (insert a s1) f",
                    "id": "1.4.4.11",
                    "prevs": [
                        "1.4.4.6",
                        "1.4.4.10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s1, ¬(c = 0), ¬(a ∈ s1), finite (support plus f s), sum s1 (λx. c * f x) = c * sum s1 f ⊢ c * f a + sum s1 (λx. c * f x) = c * sum (insert a s1) f"
                },
                {
                    "args": "sum (insert a s1) (λx. c * f x) = c * sum (insert a s1) f",
                    "id": "1.4.4.12",
                    "prevs": [
                        "1.4.4.8",
                        "1.4.4.11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s1, ¬(c = 0), ¬(a ∈ s1), finite (support plus f s), sum s1 (λx. c * f x) = c * sum s1 f ⊢ sum (insert a s1) (λx. c * f x) = c * sum (insert a s1) f"
                },
                {
                    "args": "",
                    "id": "1.4.4.13",
                    "prevs": [
                        "1.4.4.0",
                        "1.4.4.1",
                        "1.4.4.2",
                        "1.4.4.3",
                        "1.4.4.4",
                        "1.4.4.12"
                    ],
                    "rule": "intros",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ ∀a. ∀s1. sum s1 (λx. c * f x) = c * sum s1 f ⟶ ¬(a ∈ s1) ⟶ finite s1 ⟶ sum (insert a s1) (λx. c * f x) = c * sum (insert a s1) f"
                },
                {
                    "args": "",
                    "id": "1.4.5",
                    "prevs": [
                        "1.4.1",
                        "1.4.3",
                        "1.4.4"
                    ],
                    "rule": "apply_fact",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ sum (support plus f s) (λx. c * f x) = c * sum (support plus f s) f"
                },
                {
                    "args": "sum_def, iterate plus (support plus f s) (λx. c * f x) = c * iterate plus (support plus f s) f",
                    "id": "1.4.6",
                    "prevs": [
                        "1.4.5"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ iterate plus (support plus f s) (λx. c * f x) = c * iterate plus (support plus f s) f"
                },
                {
                    "args": "if_P, (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)",
                    "id": "1.4.7",
                    "prevs": [
                        "1.4.6",
                        "1.4.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0), finite (support plus f s) ⊢ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "",
                    "id": "1.4.8",
                    "prevs": [
                        "1.4.0",
                        "1.4.7"
                    ],
                    "rule": "intros",
                    "th": "¬(c = 0) ⊢ finite (support plus f s) ⟶ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "",
                    "id": "1.5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "¬(c = 0) ⊢ ¬(finite (support plus f s)) ⟶ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "¬(finite (support plus f s))",
                    "id": "1.5.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(finite (support plus f s)) ⊢ ¬(finite (support plus f s))"
                },
                {
                    "args": "real_mul_rzero, 0 = c * 0",
                    "id": "1.5.1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ 0 = c * 0"
                },
                {
                    "args": "neutral_real_add, neutral plus = c * neutral plus",
                    "id": "1.5.2",
                    "prevs": [
                        "1.5.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0), ¬(finite (support plus f s)) ⊢ neutral plus = c * neutral plus"
                },
                {
                    "args": "if_not_P, (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)",
                    "id": "1.5.3",
                    "prevs": [
                        "1.5.2",
                        "1.5.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0), ¬(finite (support plus f s)) ⊢ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "",
                    "id": "1.5.4",
                    "prevs": [
                        "1.5.0",
                        "1.5.3"
                    ],
                    "rule": "intros",
                    "th": "¬(c = 0) ⊢ ¬(finite (support plus f s)) ⟶ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "classical_cases",
                    "id": "1.6",
                    "prevs": [
                        "1.4",
                        "1.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(c = 0) ⊢ (if finite (support plus f s) then iterate plus (support plus f s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "(if finite (support plus (λx. c * f x) s) then iterate plus (support plus (λx. c * f x) s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)",
                    "id": "1.7",
                    "prevs": [
                        "1.3",
                        "1.6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "¬(c = 0) ⊢ (if finite (support plus (λx. c * f x) s) then iterate plus (support plus (λx. c * f x) s) (λx. c * f x) else neutral plus) = c * (if finite (support plus f s) then iterate plus (support plus f s) f else neutral plus)"
                },
                {
                    "args": "iterate_expand_cases, iterate plus s (λx. c * f x) = c * iterate plus s f",
                    "id": "1.8",
                    "prevs": [
                        "1.7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0) ⊢ iterate plus s (λx. c * f x) = c * iterate plus s f"
                },
                {
                    "args": "sum_def, sum s (λx. c * f x) = c * sum s f",
                    "id": "1.9",
                    "prevs": [
                        "1.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(c = 0) ⊢ sum s (λx. c * f x) = c * sum s f"
                },
                {
                    "args": "",
                    "id": "1.10",
                    "prevs": [
                        "1.0",
                        "1.9"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(c = 0) ⟶ sum s (λx. c * f x) = c * sum s f"
                },
                {
                    "args": "classical_cases",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ sum s (λx. c * f x) = c * sum s f"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum s (λx. c * f x) = c * sum s f"
                }
            ],
            "prop": "sum s (λx. c * f x) = c * sum s f",
            "steps": [
                {
                    "case": "c=0",
                    "goal_id": "0",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_mul_lzero"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_0"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "iterate_expand_cases"
                },
                {
                    "goal": "support plus (λx. c * f x) s = support plus f s",
                    "goal_id": "1.1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_support"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "1.1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "1.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "1.1.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.1.1.0"
                    ],
                    "goal_id": "1.1.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1.1.1.0"
                    ],
                    "goal_id": "1.1.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "1.1.1.2"
                    ],
                    "goal_id": "1.1.1.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "real_entire"
                },
                {
                    "fact_ids": [
                        "1.1.1.3"
                    ],
                    "goal_id": "1.1.1.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "de_morgan_thm2"
                },
                {
                    "fact_ids": [
                        "1.1.1.4"
                    ],
                    "goal_id": "1.1.1.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "1.1.1.6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "1.1.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.1.2.0"
                    ],
                    "goal_id": "1.1.2.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1.1.2.0"
                    ],
                    "goal_id": "1.1.2.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "1.1.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "1.1.2.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_entire"
                },
                {
                    "goal_id": "1.1.2.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "de_morgan_thm2"
                },
                {
                    "goal_id": "1.1.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "1.3"
                    ],
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "case": "finite (support plus f s)",
                    "goal_id": "1.4",
                    "method_name": "cases"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.4.0"
                    ],
                    "goal_id": "1.4.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "1.4.1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "sum_def"
                },
                {
                    "fact_ids": [
                        "1.4.0"
                    ],
                    "goal_id": "1.4.1",
                    "method_name": "apply_forward_step",
                    "param_P": "(%s. sum s (λx. c * f x) = c * sum s f)",
                    "theorem": "finite_induct_strong"
                },
                {
                    "fact_ids": [
                        "1.4.1"
                    ],
                    "goal_id": "1.4.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "1.4.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_empty"
                },
                {
                    "goal_id": "1.4.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_mul_rzero"
                },
                {
                    "goal_id": "1.4.4",
                    "method_name": "introduction",
                    "names": "a,s1"
                },
                {
                    "fact_ids": [
                        "1.4.4.4"
                    ],
                    "goal_id": "1.4.4.5",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "a",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "1.4.4.5",
                        "1.4.4.3"
                    ],
                    "goal_id": "1.4.4.6",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "1.4.4.4"
                    ],
                    "goal_id": "1.4.4.7",
                    "method_name": "apply_forward_step",
                    "param_f": "(λx. c * f x)",
                    "param_x": "a",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "1.4.4.7",
                        "1.4.4.3"
                    ],
                    "goal_id": "1.4.4.8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "1.4.4.8"
                    ],
                    "goal_id": "1.4.4.9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "1.4.4.6"
                    ],
                    "goal_id": "1.4.4.9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "1.4.4.9",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_add_ldistrib"
                },
                {
                    "goal_id": "1.4.4.9",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_eq_add_lcancel"
                },
                {
                    "goal_id": "1.5",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.5.0"
                    ],
                    "goal_id": "1.5.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "1.5.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "1.5.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_mul_rzero"
                }
            ],
            "ty": "thm",
            "vars": {
                "c": "real",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_rmul",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "sum_lmul, sum s (λx. c * f x) = c * sum s f",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum s (λx. c * f x) = c * sum s f"
                },
                {
                    "args": "real_mult_comm, sum s (λx. f x * c) = sum s f * c",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum s (λx. f x * c) = sum s f * c"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum s (λx. f x * c) = sum s f * c"
                }
            ],
            "prop": "sum s (λx. f x * c) = sum s f * c",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_mult_comm"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_lmul"
                }
            ],
            "ty": "thm",
            "vars": {
                "c": "real",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_neg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x::real. -x = -1 * x",
                    "id": "0",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x::real. -x = -1 * x"
                },
                {
                    "args": "sum s f",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "⊢ -(sum s f) = -1 * sum s f"
                },
                {
                    "args": "∀x. -(f x) = -1 * f x",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "z3",
                    "th": "⊢ ∀x. -(f x) = -1 * f x"
                },
                {
                    "args": "extension",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ (λx. -(f x)) = (λx. -1 * f x)"
                },
                {
                    "args": "sum_lmul, sum s (λx. -1 * f x) = -1 * sum s f",
                    "id": "4",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum s (λx. -1 * f x) = -1 * sum s f"
                },
                {
                    "args": "sum s (λx. -(f x)) = -1 * sum s f",
                    "id": "5",
                    "prevs": [
                        "3",
                        "4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "⊢ sum s (λx. -(f x)) = -1 * sum s f"
                },
                {
                    "args": "sum s (λx. -(f x)) = -(sum s f)",
                    "id": "6",
                    "prevs": [
                        "1",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "⊢ sum s (λx. -(f x)) = -(sum s f)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum s (λx. -(f x)) = -(sum s f)"
                }
            ],
            "prop": "sum s (λx. -(f x)) = -(sum s f)",
            "steps": [
                {
                    "goal": "!x::real. -x = -1 * x",
                    "goal_id": "0",
                    "method_name": "cut"
                },
                {
                    "goal_id": "0",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "forall_elim",
                    "s": "(sum s f)"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "(λx. -(f x)) = (λx. -1 * (f x))",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "extension"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_lmul"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_forward"
            ],
            "name": "sum_sub",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "sum_add, {f: f, g: λx. -(g x), s: s}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum s (λx. f x + -(g x)) = sum s f + sum s (λx. -(g x))"
                },
                {
                    "args": "sum_neg",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s ⊢ sum s (λx. f x + -(g x)) = sum s f + -(sum s g)"
                },
                {
                    "args": "real_minus_def, sum s (λx. f x - g x) = sum s f - sum s g",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ sum s (λx. f x - g x) = sum s f - sum s g"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ sum s (λx. f x - g x) = sum s f - sum s g"
                }
            ],
            "prop": "finite s ⟶ sum s (λx. f x - g x) = sum s f - sum s g",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_minus_def"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_g": "(%x. -g x)",
                    "theorem": "sum_add"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "sum_neg"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1",
                "hint_forward"
            ],
            "name": "sum_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ (∀x. x ∈ ∅ ⟶ f x ≤ g x) ⟶ sum ∅ f ≤ sum ∅ g"
                },
                {
                    "args": "∀x. x ∈ ∅ ⟶ f x ≤ g x",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ ∅ ⟶ f x ≤ g x ⊢ ∀x. x ∈ ∅ ⟶ f x ≤ g x"
                },
                {
                    "args": "real_le_refl, {x: (0::real)}",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (0::real) ≤ 0"
                },
                {
                    "args": "sum_empty, sum ∅ f ≤ sum ∅ g",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∀x. x ∈ ∅ ⟶ f x ≤ g x ⊢ sum ∅ f ≤ sum ∅ g"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [
                        "1.0",
                        "1.2"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ (∀x. x ∈ ∅ ⟶ f x ≤ g x) ⟶ sum ∅ f ≤ sum ∅ g"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x. ∀s1. ((∀x1. x1 ∈ s1 ⟶ f x1 ≤ g x1) ⟶ sum s1 f ≤ sum s1 g) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. x1 ∈ insert x s1 ⟶ f x1 ≤ g x1) ⟶ sum (insert x s1) f ≤ sum (insert x s1) g"
                },
                {
                    "args": "x, 'a",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "s, 'a set",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "(∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g",
                    "id": "2.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "2.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1",
                    "id": "2.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1 ⊢ ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1"
                },
                {
                    "args": "sum_insert, {f: f, x: x}",
                    "id": "2.5",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum (insert x s) f = (if x ∈ s then sum s f else f x + sum s f)"
                },
                {
                    "args": "if_not_P",
                    "id": "2.6",
                    "prevs": [
                        "2.5",
                        "2.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ sum (insert x s) f = f x + sum s f"
                },
                {
                    "args": "sum_insert, {f: g, x: x}",
                    "id": "2.7",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum (insert x s) g = (if x ∈ s then sum s g else g x + sum s g)"
                },
                {
                    "args": "if_not_P",
                    "id": "2.8",
                    "prevs": [
                        "2.7",
                        "2.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ sum (insert x s) g = g x + sum s g"
                },
                {
                    "args": "eq_refl, {x: x}",
                    "id": "2.9",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ x = x"
                },
                {
                    "args": "disjI1, {A: x = x, B: x ∈ s}",
                    "id": "2.10",
                    "prevs": [
                        "2.9"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ x = x ∨ x ∈ s"
                },
                {
                    "args": "member_insert, x ∈ insert x s",
                    "id": "2.11",
                    "prevs": [
                        "2.10"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ x ∈ insert x s"
                },
                {
                    "args": "",
                    "id": "2.12",
                    "prevs": [
                        "2.4",
                        "2.11"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ f x ≤ g x"
                },
                {
                    "args": "",
                    "id": "2.13",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ ∀x. x ∈ s ⟶ f x ≤ g x"
                },
                {
                    "args": "x1, 'a",
                    "id": "2.13.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ s",
                    "id": "2.13.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "disjI2, {A: x1 = x, B: x1 ∈ s}",
                    "id": "2.13.2",
                    "prevs": [
                        "2.13.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, x1 ∈ s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "member_insert, x1 ∈ insert x s",
                    "id": "2.13.3",
                    "prevs": [
                        "2.13.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x1 ∈ s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ x1 ∈ insert x s"
                },
                {
                    "args": "",
                    "id": "2.13.4",
                    "prevs": [
                        "2.4",
                        "2.13.3"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, x1 ∈ s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ f x1 ≤ g x1"
                },
                {
                    "args": "",
                    "id": "2.13.5",
                    "prevs": [
                        "2.13.0",
                        "2.13.1",
                        "2.13.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ ∀x1. x1 ∈ s ⟶ f x1 ≤ g x1"
                },
                {
                    "args": "",
                    "id": "2.14",
                    "prevs": [
                        "2.2",
                        "2.13"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ sum s f ≤ sum s g"
                },
                {
                    "args": "real_le_ladd_imp, {x: f x, y: sum s f, z: sum s g}",
                    "id": "2.15",
                    "prevs": [
                        "2.14"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ f x + sum s f ≤ f x + sum s g"
                },
                {
                    "args": "real_le_ladd_imp, {x: sum s g, y: f x, z: g x}",
                    "id": "2.16",
                    "prevs": [
                        "2.12"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ sum s g + f x ≤ sum s g + g x"
                },
                {
                    "args": "real_add_comm, f x + sum s g ≤ g x + sum s g",
                    "id": "2.17",
                    "prevs": [
                        "2.16"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ f x + sum s g ≤ g x + sum s g"
                },
                {
                    "args": "real_le_trans",
                    "id": "2.18",
                    "prevs": [
                        "2.15",
                        "2.17"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ f x + sum s f ≤ g x + sum s g"
                },
                {
                    "args": "sum (insert x s) f ≤ g x + sum s g",
                    "id": "2.19",
                    "prevs": [
                        "2.6",
                        "2.18"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ sum (insert x s) f ≤ g x + sum s g"
                },
                {
                    "args": "sum (insert x s) f ≤ sum (insert x s) g",
                    "id": "2.20",
                    "prevs": [
                        "2.8",
                        "2.19"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(x ∈ s), ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1, (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g ⊢ sum (insert x s) f ≤ sum (insert x s) g"
                },
                {
                    "args": "",
                    "id": "2.21",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.2",
                        "2.3",
                        "0",
                        "2.4",
                        "2.20"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. ∀s. ((∀x1. x1 ∈ s ⟶ f x1 ≤ g x1) ⟶ sum s f ≤ sum s g) ⟶ ¬(x ∈ s) ⟶ finite s ⟶ (∀x1. x1 ∈ insert x s ⟶ f x1 ≤ g x1) ⟶ sum (insert x s) f ≤ sum (insert x s) g"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "3",
                    "prevs": [
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ sum s f ≤ sum s g",
            "steps": [
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_empty"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "real_le_refl"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "x,s"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.5",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "2.5",
                        "2.3"
                    ],
                    "goal_id": "2.6",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.7",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "param_x": "x",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "2.7",
                        "2.3"
                    ],
                    "goal_id": "2.8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "2.8"
                    ],
                    "goal_id": "2.9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2.6"
                    ],
                    "goal_id": "2.9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "f x <= g x",
                    "goal_id": "2.9",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "2.4"
                    ],
                    "goal_id": "2.9",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2.9",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "2.9",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "2.9",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "goal": "sum s f ≤ sum s g",
                    "goal_id": "2.13",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "2.2"
                    ],
                    "goal_id": "2.13",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2.13",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "2.4"
                    ],
                    "goal_id": "2.13.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2.13.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "2.13.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "2.15",
                    "method_name": "apply_backward_step",
                    "param_y": "f x + sum s g",
                    "theorem": "real_le_trans"
                },
                {
                    "goal_id": "2.15",
                    "method_name": "apply_backward_step",
                    "theorem": "real_le_ladd_imp"
                },
                {
                    "goal_id": "2.16",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_add_comm"
                },
                {
                    "goal_id": "2.16",
                    "method_name": "apply_backward_step",
                    "theorem": "real_le_ladd_imp"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1",
                "hint_forward"
            ],
            "name": "sum_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x ≤ g x",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x ≤ g x ⊢ ∀x. x ∈ s ⟶ f x ≤ g x"
                },
                {
                    "args": "∃x. x ∈ s ∧ f x < g x",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x. x ∈ s ∧ f x < g x ⊢ ∃x. x ∈ s ∧ f x < g x"
                },
                {
                    "args": "a, 'a",
                    "id": "3",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "a ∈ s ∧ f a < g a",
                    "id": "4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ∧ f a < g a ⊢ a ∈ s ∧ f a < g a"
                },
                {
                    "args": "conjD1",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "a ∈ s ∧ f a < g a ⊢ a ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "6",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "a ∈ s ∧ f a < g a ⊢ f a < g a"
                },
                {
                    "args": "insert_delete",
                    "id": "7",
                    "prevs": [
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ insert a (delete s a) = s"
                },
                {
                    "args": "eq_sym_eq, s = insert a (delete s a)",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ s = insert a (delete s a)"
                },
                {
                    "args": "finite_delete, finite (delete s a)",
                    "id": "9",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ finite (delete s a)"
                },
                {
                    "args": "sum_insert, {f: f, x: a}",
                    "id": "10",
                    "prevs": [
                        "9"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ sum (insert a (delete s a)) f = (if a ∈ delete s a then sum (delete s a) f else f a + sum (delete s a) f)"
                },
                {
                    "args": "¬(¬(a = a) ∧ a ∈ s)",
                    "id": "11",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ¬(¬(a = a) ∧ a ∈ s)"
                },
                {
                    "args": "member_delete, ¬(a ∈ delete s a)",
                    "id": "12",
                    "prevs": [
                        "11"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ ¬(a ∈ delete s a)"
                },
                {
                    "args": "if_not_P",
                    "id": "13",
                    "prevs": [
                        "10",
                        "12"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ sum (insert a (delete s a)) f = f a + sum (delete s a) f"
                },
                {
                    "args": "sum_insert, {f: g, x: a}",
                    "id": "14",
                    "prevs": [
                        "9"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ sum (insert a (delete s a)) g = (if a ∈ delete s a then sum (delete s a) g else g a + sum (delete s a) g)"
                },
                {
                    "args": "if_not_P",
                    "id": "15",
                    "prevs": [
                        "14",
                        "12"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ sum (insert a (delete s a)) g = g a + sum (delete s a) g"
                },
                {
                    "args": "∀a::real. ∀b. ∀c. ∀d. a < b ⟶ c ≤ d ⟶ a + c < b + d",
                    "id": "16",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀a::real. ∀b. ∀c. ∀d. a < b ⟶ c ≤ d ⟶ a + c < b + d"
                },
                {
                    "args": "",
                    "id": "17",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ ∀x. x ∈ delete s a ⟶ f x ≤ g x"
                },
                {
                    "args": "x1, 'a",
                    "id": "17.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ delete s a",
                    "id": "17.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ delete s a ⊢ x1 ∈ delete s a"
                },
                {
                    "args": "member_delete",
                    "id": "17.2",
                    "prevs": [
                        "17.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x1 ∈ delete s a ⊢ ¬(x1 = a) ∧ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "17.3",
                    "prevs": [
                        "17.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ delete s a ⊢ x1 ∈ s"
                },
                {
                    "args": "x1",
                    "id": "17.4",
                    "prevs": [
                        "1",
                        "17.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, x1 ∈ delete s a, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ f x1 ≤ g x1"
                },
                {
                    "args": "",
                    "id": "17.5",
                    "prevs": [
                        "17.0",
                        "17.1",
                        "17.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ ∀x1. x1 ∈ delete s a ⟶ f x1 ≤ g x1"
                },
                {
                    "args": "sum_le",
                    "id": "18",
                    "prevs": [
                        "9",
                        "17"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ sum (delete s a) f ≤ sum (delete s a) g"
                },
                {
                    "args": "f a, g a, sum (delete s a) f, sum (delete s a) g",
                    "id": "19",
                    "prevs": [
                        "16",
                        "6",
                        "18"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ f a + sum (delete s a) f < g a + sum (delete s a) g"
                },
                {
                    "args": "sum (insert a (delete s a)) f < g a + sum (delete s a) g",
                    "id": "20",
                    "prevs": [
                        "13",
                        "19"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ sum (insert a (delete s a)) f < g a + sum (delete s a) g"
                },
                {
                    "args": "sum (insert a (delete s a)) f < sum (insert a (delete s a)) g",
                    "id": "21",
                    "prevs": [
                        "15",
                        "20"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ sum (insert a (delete s a)) f < sum (insert a (delete s a)) g"
                },
                {
                    "args": "sum s f < sum s g",
                    "id": "22",
                    "prevs": [
                        "8",
                        "21"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, a ∈ s ∧ f a < g a, ∀x. x ∈ s ⟶ f x ≤ g x, ∃x. x ∈ s ∧ f x < g x ⊢ sum s f < sum s g"
                },
                {
                    "args": "∃x. x ∈ s ∧ f x < g x",
                    "id": "23",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "2",
                        "3",
                        "4",
                        "22"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ (∃x. x ∈ s ∧ f x < g x) ⟶ sum s f < sum s g"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ g x) ⟶ (∃x. x ∈ s ∧ f x < g x) ⟶ sum s f < sum s g",
            "steps": [
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "exists_elim",
                    "names": "a"
                },
                {
                    "goal": "s= insert a (delete s a)",
                    "goal_id": "5",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal_id": "7",
                    "method_name": "apply_backward_step",
                    "theorem": "insert_delete"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "finite(delete s a)",
                    "goal_id": "9",
                    "method_name": "cut"
                },
                {
                    "goal_id": "9",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "finite_delete"
                },
                {
                    "fact_ids": [
                        "9"
                    ],
                    "goal_id": "10",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "a",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "10"
                    ],
                    "goal": "~(a ∈ delete s a)",
                    "goal_id": "11",
                    "method_name": "cut"
                },
                {
                    "goal_id": "11",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_delete"
                },
                {
                    "goal_id": "11",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "10",
                        "12"
                    ],
                    "goal_id": "13",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "9"
                    ],
                    "goal_id": "14",
                    "method_name": "apply_forward_step",
                    "param_f": "g",
                    "param_x": "a",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "14",
                        "12"
                    ],
                    "goal_id": "15",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "15"
                    ],
                    "goal_id": "16",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "13"
                    ],
                    "goal_id": "16",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "!a::real. !b. !c. !d. a < b --> c <= d --> a + c < b + d",
                    "goal_id": "16",
                    "method_name": "cut"
                },
                {
                    "goal_id": "16",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "16"
                    ],
                    "goal_id": "17",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "17",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_le"
                },
                {
                    "goal_id": "17",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "17.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "17.1"
                    ],
                    "goal_id": "17.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_delete"
                },
                {
                    "fact_ids": [
                        "17.2"
                    ],
                    "goal_id": "17.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1",
                "hint_forward"
            ],
            "name": "sum_lt_all",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x < g x",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x < g x ⊢ ∀x. x ∈ s ⟶ f x < g x"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < g x ⊢ ∀x. x ∈ s ⟶ f x ≤ g x"
                },
                {
                    "args": "x, 'a",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "x",
                    "id": "3.2",
                    "prevs": [
                        "2",
                        "3.1"
                    ],
                    "rule": "apply_fact_for",
                    "th": "∀x. x ∈ s ⟶ f x < g x, finite s, ¬(s = ∅), x ∈ s ⊢ f x < g x"
                },
                {
                    "args": "real_lt_imp_le",
                    "id": "3.3",
                    "prevs": [
                        "3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < g x, x ∈ s ⊢ f x ≤ g x"
                },
                {
                    "args": "",
                    "id": "3.4",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < g x ⊢ ∀x. x ∈ s ⟶ f x ≤ g x"
                },
                {
                    "args": "∃x. x ∈ s ⟶ f x < g x",
                    "id": "4",
                    "prevs": [
                        "2"
                    ],
                    "rule": "z3",
                    "th": "∀x. x ∈ s ⟶ f x < g x ⊢ ∃x. x ∈ s ⟶ f x < g x"
                },
                {
                    "args": "sum_lt",
                    "id": "5",
                    "prevs": [
                        "0",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < g x ⊢ sum s f < sum s g"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x < g x) ⟶ sum s f < sum s g"
                }
            ],
            "prop": "finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x < g x) ⟶ sum s f < sum s g",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_lt"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "real_lt_imp_le"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "4",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1",
                "hint_forward"
            ],
            "name": "sum_pos_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ 0 ≤ f x",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x ⊢ ∀x. x ∈ s ⟶ 0 ≤ f x"
                },
                {
                    "args": "∃x. x ∈ s ⟶ 0 < f x",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x. x ∈ s ⟶ 0 < f x ⊢ ∃x. x ∈ s ⟶ 0 < f x"
                },
                {
                    "args": "real_le_refl, {x: (0::real)}",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (0::real) ≤ 0"
                },
                {
                    "args": "sum_0, 0 ≤ sum s (λx. 0)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∀x. x ∈ s ⟶ 0 ≤ f x, ∃x. x ∈ s ⟶ 0 < f x ⊢ 0 ≤ sum s (λx. 0)"
                },
                {
                    "args": "sum_lt",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ 0 ≤ f x, ∃x. x ∈ s ⟶ 0 < f x ⊢ sum s (λx. 0) < sum s f"
                },
                {
                    "args": "real_let_trans",
                    "id": "6",
                    "prevs": [
                        "4",
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ 0 ≤ f x, ∃x. x ∈ s ⟶ 0 < f x ⊢ 0 < sum s f"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ (∃x. x ∈ s ⟶ 0 < f x) ⟶ 0 < sum s f"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ (∃x. x ∈ s ⟶ 0 < f x) ⟶ 0 < sum s f",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "param_y": "sum s (%x. 0)",
                    "theorem": "real_let_trans"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_0"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "real_le_refl"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_lt"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1",
                "hint_forward"
            ],
            "name": "sum_pos_lt_all",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ 0 < f x",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ 0 < f x ⊢ ∀x. x ∈ s ⟶ 0 < f x"
                },
                {
                    "args": "∀x. x ∈ s ⟶ 0 ≤ f x",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "z3",
                    "th": "∀x. x ∈ s ⟶ 0 < f x ⊢ ∀x. x ∈ s ⟶ 0 ≤ f x"
                },
                {
                    "args": "∃x. x ∈ s ⟶ 0 < f x",
                    "id": "4",
                    "prevs": [
                        "2"
                    ],
                    "rule": "z3",
                    "th": "∀x. x ∈ s ⟶ 0 < f x ⊢ ∃x. x ∈ s ⟶ 0 < f x"
                },
                {
                    "args": "sum_pos_lt",
                    "id": "5",
                    "prevs": [
                        "0",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ 0 < f x ⊢ 0 < sum s f"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ 0 < f x) ⟶ 0 < sum s f"
                }
            ],
            "prop": "finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ 0 < f x) ⟶ 0 < sum s f",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_pos_lt"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "4",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1",
                "hint_forward"
            ],
            "name": "sum_eq",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. x ∈ s ⟶ f x = g x",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x = g x ⊢ ∀x. x ∈ s ⟶ f x = g x"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_eq",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ f x = g x ⊢ iterate plus s f = iterate plus s g"
                },
                {
                    "args": "sum_def, sum s f = sum s g",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ f x = g x ⊢ sum s f = sum s g"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. x ∈ s ⟶ f x = g x) ⟶ sum s f = sum s g"
                }
            ],
            "prop": "(∀x. x ∈ s ⟶ f x = g x) ⟶ sum s f = sum s g",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_eq"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_abs",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "real_le_refl, {x: (0::real)}",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (0::real) ≤ 0"
                },
                {
                    "args": "real_abs_0, abs (0::real) ≤ 0",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ abs (0::real) ≤ 0"
                },
                {
                    "args": "sum_empty, abs (sum ∅ f) ≤ sum ∅ (λx. abs (f x))",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ abs (sum ∅ f) ≤ sum ∅ (λx. abs (f x))"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x. ∀s1. abs (sum s1 f) ≤ sum s1 (λx1. abs (f x1)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ abs (sum (insert x s1) f) ≤ sum (insert x s1) (λx1. abs (f x1))"
                },
                {
                    "args": "x, 'a",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "s, 'a set",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "abs (sum s f) ≤ sum s (λx. abs (f x))",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "abs (sum s f) ≤ sum s (λx. abs (f x)) ⊢ abs (sum s f) ≤ sum s (λx. abs (f x))"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "sum_insert, {f: f, x: x}",
                    "id": "4.4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum (insert x s) f = (if x ∈ s then sum s f else f x + sum s f)"
                },
                {
                    "args": "if_not_P",
                    "id": "4.5",
                    "prevs": [
                        "4.4",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ sum (insert x s) f = f x + sum s f"
                },
                {
                    "args": "sum_insert, {f: λx1. abs (f x1), x: x}",
                    "id": "4.6",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum (insert x s) (λx1. abs (f x1)) = (if x ∈ s then sum s (λx1. abs (f x1)) else abs (f x) + sum s (λx1. abs (f x1)))"
                },
                {
                    "args": "if_not_P",
                    "id": "4.7",
                    "prevs": [
                        "4.6",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ sum (insert x s) (λx1. abs (f x1)) = abs (f x) + sum s (λx1. abs (f x1))"
                },
                {
                    "args": "∀a. ∀b. abs a ≤ b ⟶ abs (f x + a) ≤ abs (f x) + b",
                    "id": "4.8",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀a. ∀b. abs a ≤ b ⟶ abs (f x + a) ≤ abs (f x) + b"
                },
                {
                    "args": "sum s f, sum s (λx1. abs (f x1))",
                    "id": "4.9",
                    "prevs": [
                        "4.8",
                        "4.2"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, ¬(x ∈ s), abs (sum s f) ≤ sum s (λx. abs (f x)) ⊢ abs (f x + sum s f) ≤ abs (f x) + sum s (λx1. abs (f x1))"
                },
                {
                    "args": "abs (sum (insert x s) f) ≤ abs (f x) + sum s (λx1. abs (f x1))",
                    "id": "4.10",
                    "prevs": [
                        "4.5",
                        "4.9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(x ∈ s), abs (sum s f) ≤ sum s (λx. abs (f x)) ⊢ abs (sum (insert x s) f) ≤ abs (f x) + sum s (λx1. abs (f x1))"
                },
                {
                    "args": "abs (sum (insert x s) f) ≤ sum (insert x s) (λx1. abs (f x1))",
                    "id": "4.11",
                    "prevs": [
                        "4.7",
                        "4.10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(x ∈ s), abs (sum s f) ≤ sum s (λx. abs (f x)) ⊢ abs (sum (insert x s) f) ≤ sum (insert x s) (λx1. abs (f x1))"
                },
                {
                    "args": "",
                    "id": "4.12",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.3",
                        "0",
                        "4.11"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. ∀s. abs (sum s f) ≤ sum s (λx1. abs (f x1)) ⟶ ¬(x ∈ s) ⟶ finite s ⟶ abs (sum (insert x s) f) ≤ sum (insert x s) (λx1. abs (f x1))"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "5",
                    "prevs": [
                        "0",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ abs (sum s f) ≤ sum s (λx. abs (f x))"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ abs (sum s f) ≤ sum s (λx. abs (f x))"
                }
            ],
            "prop": "finite s ⟶ abs (sum s f) ≤ sum s (λx. abs (f x))",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_empty"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_abs_0"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "real_le_refl"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x,s"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.4",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "4.4",
                        "4.3"
                    ],
                    "goal_id": "4.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.6",
                    "method_name": "apply_forward_step",
                    "param_f": "(λx1. abs (f x1))",
                    "param_x": "x",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "4.6",
                        "4.3"
                    ],
                    "goal_id": "4.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "4.7"
                    ],
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4.5"
                    ],
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "!a::real. !b. abs(a) <= b --> abs(f x + a) <= abs(f x) + b",
                    "goal_id": "4.8",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "4.8"
                    ],
                    "goal_id": "4.9",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_abs_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ abs (f x) ≤ g x",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ abs (f x) ≤ g x ⊢ ∀x. x ∈ s ⟶ abs (f x) ≤ g x"
                },
                {
                    "args": "sub_abs, {f: f, s: s}",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ∀x. x ∈ s ⟶ abs (f x) ≤ g x ⊢ abs (sum s f) ≤ sum s (λx. abs (f x))"
                },
                {
                    "args": "sum_le",
                    "id": "3",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ abs (f x) ≤ g x ⊢ sum s (λx. abs (f x)) ≤ sum s g"
                },
                {
                    "args": "real_le_trans",
                    "id": "4",
                    "prevs": [
                        "2",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ abs (f x) ≤ g x ⊢ abs (sum s f) ≤ sum s g"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ abs (f x) ≤ g x) ⟶ abs (sum s f) ≤ sum s g"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ abs (f x) ≤ g x) ⟶ abs (sum s f) ≤ sum s g",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "param_y": "sum s (%x. abs(f x))",
                    "theorem": "real_le_trans"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "sub_abs"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_le"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_const",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "real_mul_lzero, 0 = 0 * c",
                    "id": "1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ 0 = 0 * c"
                },
                {
                    "args": "real_zero_def, 0 = of_nat 0 * c",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite s ⊢ 0 = of_nat 0 * c"
                },
                {
                    "args": "card_empty, 0 = of_nat (card (∅::'a set)) * c",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ 0 = of_nat (card (∅::'a set)) * c"
                },
                {
                    "args": "sum_empty, sum ∅ (λn::'a. c) = of_nat (card (∅::'a set)) * c",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ sum ∅ (λn::'a. c) = of_nat (card (∅::'a set)) * c"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x::'a. ∀s1. sum s1 (λn. c) = of_nat (card s1) * c ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ sum (insert x s1) (λn. c) = of_nat (card (insert x s1)) * c"
                },
                {
                    "args": "x, 'a",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "s, 'a set",
                    "id": "5.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "sum s (λn. c) = of_nat (card s) * c",
                    "id": "5.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "sum s (λn. c) = of_nat (card s) * c ⊢ sum s (λn. c) = of_nat (card s) * c"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "5.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "sum_insert, {f: λn::'a. c, x: x}",
                    "id": "5.4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum (insert x s) (λn. c) = (if x ∈ s then sum s (λn. c) else c + sum s (λn. c))"
                },
                {
                    "args": "if_not_P",
                    "id": "5.5",
                    "prevs": [
                        "5.4",
                        "5.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ sum (insert x s) (λn. c) = c + sum s (λn. c)"
                },
                {
                    "args": "card_insert, {x: x}",
                    "id": "5.6",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ card (insert x s) = (if x ∈ s then card s else Suc (card s))"
                },
                {
                    "args": "if_not_P",
                    "id": "5.7",
                    "prevs": [
                        "5.6",
                        "5.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ card (insert x s) = Suc (card s)"
                },
                {
                    "args": "c + of_nat (card s) * c = of_nat (card s) * c + c",
                    "id": "5.8",
                    "prevs": [],
                    "rule": "real_norm",
                    "th": "⊢ c + of_nat (card s) * c = of_nat (card s) * c + c"
                },
                {
                    "args": "c + sum s (λn. c) = of_nat (card s) * c + c",
                    "id": "5.9",
                    "prevs": [
                        "5.2",
                        "5.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(x ∈ s), sum s (λn. c) = of_nat (card s) * c ⊢ c + sum s (λn. c) = of_nat (card s) * c + c"
                },
                {
                    "args": "real_mul_lid, c + sum s (λn. c) = of_nat (card s) * c + 1 * c",
                    "id": "5.10",
                    "prevs": [
                        "5.9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(x ∈ s), sum s (λn. c) = of_nat (card s) * c ⊢ c + sum s (λn. c) = of_nat (card s) * c + 1 * c"
                },
                {
                    "args": "real_one_def, c + sum s (λn. c) = of_nat (card s) * c + of_nat 1 * c",
                    "id": "5.11",
                    "prevs": [
                        "5.10"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite s, ¬(x ∈ s), sum s (λn. c) = of_nat (card s) * c ⊢ c + sum s (λn. c) = of_nat (card s) * c + of_nat 1 * c"
                },
                {
                    "args": "real_add_rdistrib, c + sum s (λn. c) = (of_nat (card s) + of_nat 1) * c",
                    "id": "5.12",
                    "prevs": [
                        "5.11"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(x ∈ s), sum s (λn. c) = of_nat (card s) * c ⊢ c + sum s (λn. c) = (of_nat (card s) + of_nat 1) * c"
                },
                {
                    "args": "real_of_nat_add, c + sum s (λn. c) = of_nat (card s + 1) * c",
                    "id": "5.13",
                    "prevs": [
                        "5.12"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite s, ¬(x ∈ s), sum s (λn. c) = of_nat (card s) * c ⊢ c + sum s (λn. c) = of_nat (card s + 1) * c"
                },
                {
                    "args": "add_1_right, c + sum s (λn. c) = of_nat (Suc (card s)) * c",
                    "id": "5.14",
                    "prevs": [
                        "5.13"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite s, ¬(x ∈ s), sum s (λn. c) = of_nat (card s) * c ⊢ c + sum s (λn. c) = of_nat (Suc (card s)) * c"
                },
                {
                    "args": "c + sum s (λn. c) = of_nat (card (insert x s)) * c",
                    "id": "5.15",
                    "prevs": [
                        "5.7",
                        "5.14"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(x ∈ s), sum s (λn. c) = of_nat (card s) * c ⊢ c + sum s (λn. c) = of_nat (card (insert x s)) * c"
                },
                {
                    "args": "sum (insert x s) (λn. c) = of_nat (card (insert x s)) * c",
                    "id": "5.16",
                    "prevs": [
                        "5.5",
                        "5.15"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(x ∈ s), sum s (λn. c) = of_nat (card s) * c ⊢ sum (insert x s) (λn. c) = of_nat (card (insert x s)) * c"
                },
                {
                    "args": "",
                    "id": "5.17",
                    "prevs": [
                        "5.0",
                        "5.1",
                        "5.2",
                        "5.3",
                        "0",
                        "5.16"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x::'a. ∀s. sum s (λn. c) = of_nat (card s) * c ⟶ ¬(x ∈ s) ⟶ finite s ⟶ sum (insert x s) (λn. c) = of_nat (card (insert x s)) * c"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "6",
                    "prevs": [
                        "0",
                        "4",
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ sum s (λn. c) = of_nat (card s) * c"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ sum s (λn. c) = of_nat (card s) * c"
                }
            ],
            "prop": "finite s ⟶ sum s (λn. c) = of_nat (card s) * c",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_empty"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "card_empty"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "real_zero_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_mul_lzero"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction",
                    "names": "x,s"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "5.4",
                    "method_name": "apply_forward_step",
                    "param_f": "(λn::'a. c)",
                    "param_x": "x",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "5.4",
                        "5.3"
                    ],
                    "goal_id": "5.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "5.5"
                    ],
                    "goal_id": "5.6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "5.6",
                    "method_name": "apply_forward_step",
                    "param_x": "x",
                    "theorem": "card_insert"
                },
                {
                    "fact_ids": [
                        "5.6",
                        "5.3"
                    ],
                    "goal_id": "5.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "5.7"
                    ],
                    "goal_id": "5.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "5.8",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "add_1_right"
                },
                {
                    "goal_id": "5.8",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "real_of_nat_add"
                },
                {
                    "goal_id": "5.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_add_rdistrib"
                },
                {
                    "goal_id": "5.8",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "real_one_def"
                },
                {
                    "goal_id": "5.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_mul_lid"
                },
                {
                    "fact_ids": [
                        "5.2"
                    ],
                    "goal_id": "5.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "5.8",
                    "method_name": "real_norm"
                }
            ],
            "ty": "thm",
            "vars": {
                "c": "real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_pos_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. x ∈ s ⟶ 0 ≤ f x",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x ⊢ ∀x. x ∈ s ⟶ 0 ≤ f x"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x ⊢ finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⟶ 0 ≤ sum s f"
                },
                {
                    "args": "finite ({x. x ∈ s ∧ ¬(f x = 0)})",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⊢ finite ({x. x ∈ s ∧ ¬(f x = 0)})"
                },
                {
                    "args": "sum_le, {f: λx::'a. (0::real), g: f}",
                    "id": "1.1",
                    "prevs": [
                        "1.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⊢ (∀x. x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)} ⟶ 0 ≤ f x) ⟶ sum ({x. x ∈ s ∧ ¬(f x = 0)}) (λx. 0) ≤ sum ({x. x ∈ s ∧ ¬(f x = 0)}) f"
                },
                {
                    "args": "sum_0",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⊢ (∀x. x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)} ⟶ 0 ≤ f x) ⟶ 0 ≤ sum ({x. x ∈ s ∧ ¬(f x = 0)}) f"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x, finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⊢ ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)} ⟶ 0 ≤ f x"
                },
                {
                    "args": "x, 'a",
                    "id": "1.3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)}",
                    "id": "1.3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)} ⊢ x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)}"
                },
                {
                    "args": "member_collect",
                    "id": "1.3.2",
                    "prevs": [
                        "1.3.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)} ⊢ x ∈ s ∧ ¬(f x = 0)"
                },
                {
                    "args": "conjD1",
                    "id": "1.3.3",
                    "prevs": [
                        "1.3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)} ⊢ x ∈ s"
                },
                {
                    "args": "x",
                    "id": "1.3.4",
                    "prevs": [
                        "0",
                        "1.3.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x, finite ({x. x ∈ s ∧ ¬(f x = 0)}), x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)} ⊢ 0 ≤ f x"
                },
                {
                    "args": "",
                    "id": "1.3.5",
                    "prevs": [
                        "1.3.0",
                        "1.3.1",
                        "1.3.4"
                    ],
                    "rule": "intros",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x, finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⊢ ∀x. x ∈ {x1. x1 ∈ s ∧ ¬(f x1 = 0)} ⟶ 0 ≤ f x"
                },
                {
                    "args": "",
                    "id": "1.4",
                    "prevs": [
                        "1.2",
                        "1.3"
                    ],
                    "rule": "apply_fact",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x, finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⊢ 0 ≤ sum ({x. x ∈ s ∧ ¬(f x = 0)}) f"
                },
                {
                    "args": "neutral_real_add, 0 ≤ sum ({x. x ∈ s ∧ ¬(f x = neutral plus)}) f",
                    "id": "1.5",
                    "prevs": [
                        "1.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x, finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⊢ 0 ≤ sum ({x. x ∈ s ∧ ¬(f x = neutral plus)}) f"
                },
                {
                    "args": "support_def, 0 ≤ sum (support plus f s) f",
                    "id": "1.6",
                    "prevs": [
                        "1.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x, finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⊢ 0 ≤ sum (support plus f s) f"
                },
                {
                    "args": "sum_support, 0 ≤ sum s f",
                    "id": "1.7",
                    "prevs": [
                        "1.6"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x, finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⊢ 0 ≤ sum s f"
                },
                {
                    "args": "",
                    "id": "1.8",
                    "prevs": [
                        "1.0",
                        "1.7"
                    ],
                    "rule": "intros",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x ⊢ finite ({x. x ∈ s ∧ ¬(f x = 0)}) ⟶ 0 ≤ sum s f"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x ⊢ ¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⟶ 0 ≤ sum s f"
                },
                {
                    "args": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)}))",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ ¬(finite ({x. x ∈ s ∧ ¬(f x = 0)}))"
                },
                {
                    "args": "sum_degenerate",
                    "id": "2.1",
                    "prevs": [
                        "2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ sum s f = 0"
                },
                {
                    "args": "real_le_refl, {x: (0::real)}",
                    "id": "2.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (0::real) ≤ 0"
                },
                {
                    "args": "0 ≤ sum s f",
                    "id": "2.3",
                    "prevs": [
                        "2.1",
                        "2.2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x, ¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⊢ 0 ≤ sum s f"
                },
                {
                    "args": "",
                    "id": "2.4",
                    "prevs": [
                        "2.0",
                        "2.3"
                    ],
                    "rule": "intros",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x ⊢ ¬(finite ({x. x ∈ s ∧ ¬(f x = 0)})) ⟶ 0 ≤ sum s f"
                },
                {
                    "args": "classical_cases",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x ⊢ 0 ≤ sum s f"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ 0 ≤ sum s f"
                }
            ],
            "prop": "(∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ 0 ≤ sum s f",
            "steps": [
                {
                    "case": "finite {x. x ∈ s & ~(f x = 0)}",
                    "goal_id": "1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "sum_support"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "apply_forward_step",
                    "param_f": "(%x::'a. (0::real))",
                    "param_g": "f",
                    "theorem": "sum_le"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "sum_0"
                },
                {
                    "goal_id": "1.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "fact_ids": [
                        "1.2"
                    ],
                    "goal_id": "1.3",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "1.3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.3.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "1.3.1"
                    ],
                    "goal_id": "1.3.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "1.3.2"
                    ],
                    "goal_id": "1.3.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "apply_forward_step",
                    "theorem": "sum_degenerate"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "real_le_refl"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "name": "sum_pos_bound",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ (∀x. x ∈ ∅ ⟶ 0 ≤ f x) ⟶ sum ∅ f ≤ b ⟶ (∀x. x ∈ ∅ ⟶ f x ≤ b)"
                },
                {
                    "args": "∀x. x ∈ ∅ ⟶ 0 ≤ f x",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ ∅ ⟶ 0 ≤ f x ⊢ ∀x. x ∈ ∅ ⟶ 0 ≤ f x"
                },
                {
                    "args": "sum ∅ f ≤ b",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "sum ∅ f ≤ b ⊢ sum ∅ f ≤ b"
                },
                {
                    "args": "",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, sum ∅ f ≤ b, ∀x. x ∈ ∅ ⟶ 0 ≤ f x ⊢ ∀x. x ∈ ∅ ⟶ f x ≤ b"
                },
                {
                    "args": "x, 'a",
                    "id": "1.2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ ∅",
                    "id": "1.2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ ∅ ⊢ x ∈ ∅"
                },
                {
                    "args": "member_empty, f x ≤ b",
                    "id": "1.2.2",
                    "prevs": [
                        "1.2.1"
                    ],
                    "rule": "resolve_theorem",
                    "th": "x ∈ ∅ ⊢ f x ≤ b"
                },
                {
                    "args": "",
                    "id": "1.2.3",
                    "prevs": [
                        "1.2.0",
                        "1.2.1",
                        "1.2.2"
                    ],
                    "rule": "intros",
                    "th": "finite s, sum ∅ f ≤ b, ∀x. x ∈ ∅ ⟶ 0 ≤ f x ⊢ ∀x. x ∈ ∅ ⟶ f x ≤ b"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.2"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ (∀x. x ∈ ∅ ⟶ 0 ≤ f x) ⟶ sum ∅ f ≤ b ⟶ (∀x. x ∈ ∅ ⟶ f x ≤ b)"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x. ∀s1. ((∀x1. x1 ∈ s1 ⟶ 0 ≤ f x1) ⟶ sum s1 f ≤ b ⟶ (∀x1. x1 ∈ s1 ⟶ f x1 ≤ b)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ (∀x1. x1 ∈ insert x s1 ⟶ 0 ≤ f x1) ⟶ sum (insert x s1) f ≤ b ⟶ (∀x1. x1 ∈ insert x s1 ⟶ f x1 ≤ b)"
                },
                {
                    "args": "x, 'a",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "s, 'a set",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "(∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b)",
                    "id": "2.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b)"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "2.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1",
                    "id": "2.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1 ⊢ ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1"
                },
                {
                    "args": "sum (insert x s) f ≤ b",
                    "id": "2.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "sum (insert x s) f ≤ b ⊢ sum (insert x s) f ≤ b"
                },
                {
                    "args": "",
                    "id": "2.6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(x ∈ s), sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ b"
                },
                {
                    "args": "x1, 'a",
                    "id": "2.6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ insert x s",
                    "id": "2.6.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ insert x s ⊢ x1 ∈ insert x s"
                },
                {
                    "args": "member_insert",
                    "id": "2.6.2",
                    "prevs": [
                        "2.6.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x1 ∈ insert x s ⊢ x1 = x ∨ x1 ∈ s"
                },
                {
                    "args": "sum_insert, {f: f, x: x}",
                    "id": "2.6.3",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum (insert x s) f = (if x ∈ s then sum s f else f x + sum s f)"
                },
                {
                    "args": "if_not_P",
                    "id": "2.6.4",
                    "prevs": [
                        "2.6.3",
                        "2.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ sum (insert x s) f = f x + sum s f"
                },
                {
                    "args": "",
                    "id": "2.6.5",
                    "prevs": [
                        "2.6.4",
                        "2.5"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite s, ¬(x ∈ s), sum (insert x s) f ≤ b ⊢ f x + sum s f ≤ b"
                },
                {
                    "args": "∀x. ∀y. 0 ≤ x ⟶ 0 ≤ y ⟶ x + y ≤ b ⟶ x ≤ b ∧ y ≤ b",
                    "id": "2.6.6",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x. ∀y. 0 ≤ x ⟶ 0 ≤ y ⟶ x + y ≤ b ⟶ x ≤ b ∧ y ≤ b"
                },
                {
                    "args": "eq_refl, {x: x}",
                    "id": "2.6.7",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ x = x"
                },
                {
                    "args": "disjI1, {A: x = x, B: x ∈ s}",
                    "id": "2.6.8",
                    "prevs": [
                        "2.6.7"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ x = x ∨ x ∈ s"
                },
                {
                    "args": "member_insert, x ∈ insert x s",
                    "id": "2.6.9",
                    "prevs": [
                        "2.6.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ x ∈ insert x s"
                },
                {
                    "args": "",
                    "id": "2.6.10",
                    "prevs": [
                        "2.4",
                        "2.6.9"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ 0 ≤ f x"
                },
                {
                    "args": "",
                    "id": "2.6.11",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ ∀x. x ∈ s ⟶ 0 ≤ f x"
                },
                {
                    "args": "x2, 'a",
                    "id": "2.6.11.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x2"
                },
                {
                    "args": "x2 ∈ s",
                    "id": "2.6.11.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x2 ∈ s ⊢ x2 ∈ s"
                },
                {
                    "args": "disjI2, {A: x2 = x, B: x2 ∈ s}",
                    "id": "2.6.11.2",
                    "prevs": [
                        "2.6.11.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, x2 ∈ s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ x2 = x ∨ x2 ∈ s"
                },
                {
                    "args": "member_insert, x2 ∈ insert x s",
                    "id": "2.6.11.3",
                    "prevs": [
                        "2.6.11.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x2 ∈ s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ x2 ∈ insert x s"
                },
                {
                    "args": "",
                    "id": "2.6.11.4",
                    "prevs": [
                        "2.4",
                        "2.6.11.3"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, x2 ∈ s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ 0 ≤ f x2"
                },
                {
                    "args": "",
                    "id": "2.6.11.5",
                    "prevs": [
                        "2.6.11.0",
                        "2.6.11.1",
                        "2.6.11.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ ∀x2. x2 ∈ s ⟶ 0 ≤ f x2"
                },
                {
                    "args": "sum_pos_le",
                    "id": "2.6.12",
                    "prevs": [
                        "2.6.11"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ 0 ≤ sum s f"
                },
                {
                    "args": "",
                    "id": "2.6.13",
                    "prevs": [
                        "2.6.6",
                        "2.6.10",
                        "2.6.12",
                        "2.6.5"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ f x ≤ b ∧ sum s f ≤ b"
                },
                {
                    "args": "conjD2",
                    "id": "2.6.14",
                    "prevs": [
                        "2.6.13"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ sum s f ≤ b"
                },
                {
                    "args": "",
                    "id": "2.6.15",
                    "prevs": [
                        "2.2",
                        "2.6.11",
                        "2.6.14"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ ∀x. x ∈ s ⟶ f x ≤ b"
                },
                {
                    "args": "",
                    "id": "2.6.16",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ x1 = x ⟶ f x1 ≤ b"
                },
                {
                    "args": "x1 = x",
                    "id": "2.6.16.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 = x ⊢ x1 = x"
                },
                {
                    "args": "conjD1",
                    "id": "2.6.16.1",
                    "prevs": [
                        "2.6.13"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ f x ≤ b"
                },
                {
                    "args": "f x1 ≤ b",
                    "id": "2.6.16.2",
                    "prevs": [
                        "2.6.16.0",
                        "2.6.16.1"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x1 = x, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ f x1 ≤ b"
                },
                {
                    "args": "",
                    "id": "2.6.16.3",
                    "prevs": [
                        "2.6.16.0",
                        "2.6.16.2"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ x1 = x ⟶ f x1 ≤ b"
                },
                {
                    "args": "",
                    "id": "2.6.17",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ x1 ∈ s ⟶ f x1 ≤ b"
                },
                {
                    "args": "x1 ∈ s",
                    "id": "2.6.17.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "x1",
                    "id": "2.6.17.1",
                    "prevs": [
                        "2.6.15",
                        "2.6.17.0"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, x1 ∈ s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ f x1 ≤ b"
                },
                {
                    "args": "",
                    "id": "2.6.17.2",
                    "prevs": [
                        "2.6.17.0",
                        "2.6.17.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ x1 ∈ s ⟶ f x1 ≤ b"
                },
                {
                    "args": "disjE",
                    "id": "2.6.18",
                    "prevs": [
                        "2.6.2",
                        "2.6.16",
                        "2.6.17"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(x ∈ s), x1 ∈ insert x s, sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ f x1 ≤ b"
                },
                {
                    "args": "",
                    "id": "2.6.19",
                    "prevs": [
                        "2.6.0",
                        "2.6.1",
                        "2.6.18"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(x ∈ s), sum (insert x s) f ≤ b, ∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1, (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⊢ ∀x1. x1 ∈ insert x s ⟶ f x1 ≤ b"
                },
                {
                    "args": "",
                    "id": "2.7",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.2",
                        "2.3",
                        "0",
                        "2.4",
                        "2.5",
                        "2.6"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. ∀s. ((∀x1. x1 ∈ s ⟶ 0 ≤ f x1) ⟶ sum s f ≤ b ⟶ (∀x1. x1 ∈ s ⟶ f x1 ≤ b)) ⟶ ¬(x ∈ s) ⟶ finite s ⟶ (∀x1. x1 ∈ insert x s ⟶ 0 ≤ f x1) ⟶ sum (insert x s) f ≤ b ⟶ (∀x1. x1 ∈ insert x s ⟶ f x1 ≤ b)"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "3",
                    "prevs": [
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b)"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f ≤ b ⟶ (∀x. x ∈ s ⟶ f x ≤ b)",
            "steps": [
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "1.2",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "1.2.1"
                    ],
                    "goal_id": "1.2.2",
                    "method_name": "apply_resolve_step",
                    "theorem": "member_empty"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "x,s"
                },
                {
                    "goal_id": "2.6",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "2.6.1"
                    ],
                    "goal_id": "2.6.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.6.3",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "2.6.3",
                        "2.3"
                    ],
                    "goal_id": "2.6.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "2.6.4",
                        "2.5"
                    ],
                    "goal_id": "2.6.5",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "goal": "!x. !y. 0 <= x --> 0 <= y --> x + y <= b --> x <= b & y <= b",
                    "goal_id": "2.6.6",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2.6.6",
                    "method_name": "z3"
                },
                {
                    "goal": "0 <= f x",
                    "goal_id": "2.6.7",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "2.4"
                    ],
                    "goal_id": "2.6.7",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2.6.7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "2.6.7",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "2.6.7",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "2.6.5"
                    ],
                    "goal": "0 <= sum s f",
                    "goal_id": "2.6.11",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2.6.11",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_pos_le"
                },
                {
                    "goal_id": "2.6.11",
                    "method_name": "introduction",
                    "names": "x2"
                },
                {
                    "fact_ids": [
                        "2.4"
                    ],
                    "goal_id": "2.6.11.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2.6.11.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "2.6.11.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "fact_ids": [
                        "2.6.6",
                        "2.6.10",
                        "2.6.12",
                        "2.6.5"
                    ],
                    "goal_id": "2.6.13",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "2.6.13"
                    ],
                    "goal_id": "2.6.14",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "2.2",
                        "2.6.11",
                        "2.6.14"
                    ],
                    "goal_id": "2.6.15",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "2.6.2"
                    ],
                    "goal_id": "2.6.16",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "2.6.16",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.6.16.0"
                    ],
                    "goal_id": "2.6.16.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "2.6.13"
                    ],
                    "goal_id": "2.6.16.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "goal_id": "2.6.17",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.6.15"
                    ],
                    "goal_id": "2.6.17.1",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "b": "real",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_pos_eq_0",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ 0 ≤ f x",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ f x ⊢ ∀x. x ∈ s ⟶ 0 ≤ f x"
                },
                {
                    "args": "sum s f = 0",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "sum s f = 0 ⊢ sum s f = 0"
                },
                {
                    "args": "real_le_antisym",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_fact_sym",
                    "th": "sum s f = 0 ⊢ sum s f ≤ 0 ∧ 0 ≤ sum s f"
                },
                {
                    "args": "conjD1",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "sum s f = 0 ⊢ sum s f ≤ 0"
                },
                {
                    "args": "conjD2",
                    "id": "5",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "sum s f = 0 ⊢ 0 ≤ sum s f"
                },
                {
                    "args": "sum_pos_bound",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, sum s f = 0, ∀x. x ∈ s ⟶ 0 ≤ f x ⊢ ∀x. x ∈ s ⟶ f x ≤ 0"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, sum s f = 0, ∀x. x ∈ s ⟶ 0 ≤ f x ⊢ ∀x. x ∈ s ⟶ f x = 0"
                },
                {
                    "args": "x, 'a",
                    "id": "7.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "7.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "x",
                    "id": "7.2",
                    "prevs": [
                        "6",
                        "7.1"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, x ∈ s, sum s f = 0, ∀x. x ∈ s ⟶ 0 ≤ f x ⊢ f x ≤ 0"
                },
                {
                    "args": "x",
                    "id": "7.3",
                    "prevs": [
                        "1",
                        "7.1"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, x ∈ s, sum s f = 0, ∀x. x ∈ s ⟶ 0 ≤ f x ⊢ 0 ≤ f x"
                },
                {
                    "args": "conjI",
                    "id": "7.4",
                    "prevs": [
                        "7.2",
                        "7.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ s, sum s f = 0, ∀x. x ∈ s ⟶ 0 ≤ f x ⊢ f x ≤ 0 ∧ 0 ≤ f x"
                },
                {
                    "args": "real_le_antisym, f x = 0",
                    "id": "7.5",
                    "prevs": [
                        "7.4"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite s, x ∈ s, sum s f = 0, ∀x. x ∈ s ⟶ 0 ≤ f x ⊢ f x = 0"
                },
                {
                    "args": "",
                    "id": "7.6",
                    "prevs": [
                        "7.0",
                        "7.1",
                        "7.5"
                    ],
                    "rule": "intros",
                    "th": "finite s, sum s f = 0, ∀x. x ∈ s ⟶ 0 ≤ f x ⊢ ∀x. x ∈ s ⟶ f x = 0"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "7"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f = 0 ⟶ (∀x. x ∈ s ⟶ f x = 0)"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ 0 ≤ f x) ⟶ sum s f = 0 ⟶ (∀x. x ∈ s ⟶ f x = 0)",
            "steps": [
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_fact",
                    "sym": "true",
                    "theorem": "real_le_antisym"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "0",
                        "1",
                        "4"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_forward_step",
                    "theorem": "sum_pos_bound"
                },
                {
                    "goal_id": "7",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "7.2",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "real_le_antisym"
                },
                {
                    "goal_id": "7.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "6"
                    ],
                    "goal_id": "7.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "7.3",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_zero_exists",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "sum s u = 0",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "sum s u = 0 ⊢ sum s u = 0"
                },
                {
                    "args": "∀u::real. 0 ≤ -u ⟷ ¬(u > 0)",
                    "id": "2",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀u::real. 0 ≤ -u ⟷ ¬(u > 0)"
                },
                {
                    "args": "∀u::real. 0 ≤ u ⟷ ¬(u < 0)",
                    "id": "3",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀u::real. 0 ≤ u ⟷ ¬(u < 0)"
                },
                {
                    "args": "(∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0) ∨ (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i))",
                    "id": "4",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0) ∨ (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i))"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, sum s u = 0 ⊢ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0) ⟶ (∀i. i ∈ s ⟶ u i = 0) ∨ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0)"
                },
                {
                    "args": "∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0 ⊢ ∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0"
                },
                {
                    "args": "disjI2, {A: ∀i. i ∈ s ⟶ u i = 0, B: ∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0}",
                    "id": "5.1",
                    "prevs": [
                        "5.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, sum s u = 0, ∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0 ⊢ (∀i. i ∈ s ⟶ u i = 0) ∨ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0)"
                },
                {
                    "args": "",
                    "id": "5.2",
                    "prevs": [
                        "5.0",
                        "5.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, sum s u = 0 ⊢ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0) ⟶ (∀i. i ∈ s ⟶ u i = 0) ∨ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, sum s u = 0 ⊢ (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⟶ (∀i. i ∈ s ⟶ u i = 0) ∨ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0)"
                },
                {
                    "args": "(∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i))",
                    "id": "6.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⊢ (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i))"
                },
                {
                    "args": "",
                    "id": "6.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, sum s u = 0, (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⊢ (∀i. i ∈ s ⟶ 0 ≤ u i) ⟶ (∀i. i ∈ s ⟶ u i = 0)"
                },
                {
                    "args": "∀i. i ∈ s ⟶ 0 ≤ u i",
                    "id": "6.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀i. i ∈ s ⟶ 0 ≤ u i ⊢ ∀i. i ∈ s ⟶ 0 ≤ u i"
                },
                {
                    "args": "sum_pos_eq_0",
                    "id": "6.1.1",
                    "prevs": [
                        "0",
                        "6.1.0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, sum s u = 0, ∀i. i ∈ s ⟶ 0 ≤ u i, (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⊢ ∀x. x ∈ s ⟶ u x = 0"
                },
                {
                    "args": "",
                    "id": "6.1.2",
                    "prevs": [
                        "6.1.0",
                        "6.1.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, sum s u = 0, (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⊢ (∀i. i ∈ s ⟶ 0 ≤ u i) ⟶ (∀i. i ∈ s ⟶ u i = 0)"
                },
                {
                    "args": "",
                    "id": "6.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, sum s u = 0, (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⊢ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⟶ (∀i. i ∈ s ⟶ u i = 0)"
                },
                {
                    "args": "∀i. i ∈ s ⟶ 0 ≤ -(u i)",
                    "id": "6.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀i. i ∈ s ⟶ 0 ≤ -(u i) ⊢ ∀i. i ∈ s ⟶ 0 ≤ -(u i)"
                },
                {
                    "args": "∀x::real. x = 0 ⟷ -x = 0",
                    "id": "6.2.1",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x::real. x = 0 ⟷ -x = 0"
                },
                {
                    "args": "",
                    "id": "6.2.2",
                    "prevs": [
                        "6.2.1",
                        "1"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "sum s u = 0 ⊢ -(sum s u) = 0"
                },
                {
                    "args": "sum_neg, sum s (λx. -(u x)) = 0",
                    "id": "6.2.3",
                    "prevs": [
                        "6.2.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, sum s u = 0, ∀i. i ∈ s ⟶ 0 ≤ -(u i), (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⊢ sum s (λx. -(u x)) = 0"
                },
                {
                    "args": "sum_pos_eq_0",
                    "id": "6.2.4",
                    "prevs": [
                        "0",
                        "6.2.0",
                        "6.2.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, sum s u = 0, ∀i. i ∈ s ⟶ 0 ≤ -(u i), (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⊢ ∀x. x ∈ s ⟶ -(u x) = 0"
                },
                {
                    "args": "∀i. i ∈ s ⟶ u i = 0",
                    "id": "6.2.5",
                    "prevs": [
                        "6.2.1",
                        "6.2.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, sum s u = 0, ∀i. i ∈ s ⟶ 0 ≤ -(u i), (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⊢ ∀i. i ∈ s ⟶ u i = 0"
                },
                {
                    "args": "",
                    "id": "6.2.6",
                    "prevs": [
                        "6.2.0",
                        "6.2.5"
                    ],
                    "rule": "intros",
                    "th": "finite s, sum s u = 0, (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⊢ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⟶ (∀i. i ∈ s ⟶ u i = 0)"
                },
                {
                    "args": "disjE",
                    "id": "6.3",
                    "prevs": [
                        "6.0",
                        "6.1",
                        "6.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, sum s u = 0, (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⊢ ∀i. i ∈ s ⟶ u i = 0"
                },
                {
                    "args": "disjI1, {A: ∀i. i ∈ s ⟶ u i = 0, B: ∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0}",
                    "id": "6.4",
                    "prevs": [
                        "6.3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, sum s u = 0, (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⊢ (∀i. i ∈ s ⟶ u i = 0) ∨ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0)"
                },
                {
                    "args": "",
                    "id": "6.5",
                    "prevs": [
                        "6.0",
                        "6.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, sum s u = 0 ⊢ (∀i. i ∈ s ⟶ 0 ≤ u i) ∨ (∀i. i ∈ s ⟶ 0 ≤ -(u i)) ⟶ (∀i. i ∈ s ⟶ u i = 0) ∨ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0)"
                },
                {
                    "args": "disjE",
                    "id": "7",
                    "prevs": [
                        "4",
                        "5",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, sum s u = 0 ⊢ (∀i. i ∈ s ⟶ u i = 0) ∨ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0)"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "0",
                        "1",
                        "7"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ sum s u = 0 ⟶ (∀i. i ∈ s ⟶ u i = 0) ∨ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0)"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ sum s u = 0 ",
                "   ⟶ (∀i. i ∈ s ⟶ u i = 0) ∨ (∃j. ∃k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0)"
            ],
            "steps": [
                {
                    "goal": "!u::real. 0 <= -u <--> ~(u > 0)",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "z3"
                },
                {
                    "goal": "∀u::real. 0 <= u <--> ~(u < 0)",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "z3"
                },
                {
                    "goal": "(?j. ?k. j ∈ s ∧ u j < 0 ∧ k ∈ s ∧ u k > 0) |\n      (!i. i ∈ s ⟶ 0 <= u i) | (!i. i ∈ s ⟶ 0 <= -(u i))",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "5.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "6",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "6.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "fact_ids": [
                        "6.0"
                    ],
                    "goal_id": "6.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "6.1",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "6.1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_pos_eq_0"
                },
                {
                    "goal_id": "6.2",
                    "method_name": "introduction"
                },
                {
                    "goal": "!x::real. x = 0 <--> -x = 0",
                    "goal_id": "6.2.1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "6.2.1",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "6.2.1"
                    ],
                    "goal_id": "6.2.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "6.2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_pos_eq_0"
                },
                {
                    "goal_id": "6.2.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_neg"
                },
                {
                    "fact_ids": [
                        "6.2.1",
                        "1"
                    ],
                    "goal_id": "6.2.2",
                    "method_name": "rewrite_fact_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "s": "'a set",
                "u": "'a ⇒ real"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_delete",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "a ∈ s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ⊢ a ∈ s"
                },
                {
                    "args": "∀x::real. ∀y. ∀z. y = z - x ⟷ x + y = z",
                    "id": "2",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀x::real. ∀y. ∀z. y = z - x ⟷ x + y = z"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_delete, {a: a, f: f, op: (plus::real ⇒ real ⇒ real), s: s}",
                    "id": "4",
                    "prevs": [
                        "3",
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, a ∈ s ⊢ f a + iterate plus (delete s a) f = iterate plus s f"
                },
                {
                    "args": "sum_def, f a + sum (delete s a) f = sum s f",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ∈ s ⊢ f a + sum (delete s a) f = sum s f"
                },
                {
                    "args": "sum (delete s a) f = sum s f - f a",
                    "id": "6",
                    "prevs": [
                        "2",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, a ∈ s ⊢ sum (delete s a) f = sum s f - f a"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ a ∈ s ⟶ sum (delete s a) f = sum s f - f a"
                }
            ],
            "prop": "finite s ⟶ a ∈ s ⟶ sum (delete s a) f = sum s f - f a",
            "steps": [
                {
                    "goal": "!x. !y. !z::real. y = z - x <--> x + y = z",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_delete"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'a",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_sing",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_empty, {}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite (∅::'a set)"
                },
                {
                    "args": "sum_insert, {f: f, x: x}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ sum ({x}) f = (if x ∈ ∅ then sum ∅ f else f x + sum ∅ f)"
                },
                {
                    "args": "member_empty, {x: x}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ ¬(x ∈ ∅)"
                },
                {
                    "args": "if_not_P",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ sum ({x}) f = f x + sum ∅ f"
                },
                {
                    "args": "sum_empty",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ sum ({x}) f = f x + 0"
                },
                {
                    "args": "real_add_rid",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ sum ({x}) f = f x"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({x}) f = f x"
                }
            ],
            "prop": "sum ({x}) f = f x",
            "steps": [
                {
                    "goal": "finite ({}::'a set)",
                    "goal_id": "0",
                    "method_name": "cut"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_empty"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal": "~(x ∈ ∅ )",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "member_empty"
                },
                {
                    "fact_ids": [
                        "1",
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "sum_empty"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "real_add_rid"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "x": "'a"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_delete_cases",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ a ∈ s ⟶ sum (delete s a) f = (if a ∈ s then sum s f - f a else sum s f)"
                },
                {
                    "args": "a ∈ s",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ⊢ a ∈ s"
                },
                {
                    "args": "sum_delete, {a: a, f: f, s: s}",
                    "id": "1.1",
                    "prevs": [
                        "0",
                        "1.0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, a ∈ s ⊢ sum (delete s a) f = sum s f - f a"
                },
                {
                    "args": "if_P, sum (delete s a) f = (if a ∈ s then sum s f - f a else sum s f)",
                    "id": "1.2",
                    "prevs": [
                        "1.1",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ∈ s ⊢ sum (delete s a) f = (if a ∈ s then sum s f - f a else sum s f)"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [
                        "1.0",
                        "1.2"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ a ∈ s ⟶ sum (delete s a) f = (if a ∈ s then sum s f - f a else sum s f)"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ¬(a ∈ s) ⟶ sum (delete s a) f = (if a ∈ s then sum s f - f a else sum s f)"
                },
                {
                    "args": "¬(a ∈ s)",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(a ∈ s) ⊢ ¬(a ∈ s)"
                },
                {
                    "args": "∀x. ¬(x = a) ∧ x ∈ s ⟷ x ∈ s",
                    "id": "2.1",
                    "prevs": [
                        "2.0"
                    ],
                    "rule": "z3",
                    "th": "¬(a ∈ s) ⊢ ∀x. ¬(x = a) ∧ x ∈ s ⟷ x ∈ s"
                },
                {
                    "args": "member_delete, ∀x. x ∈ delete s a ⟷ x ∈ s",
                    "id": "2.2",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(a ∈ s) ⊢ ∀x. x ∈ delete s a ⟷ x ∈ s"
                },
                {
                    "args": "member_ext",
                    "id": "2.3",
                    "prevs": [
                        "2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(a ∈ s) ⊢ delete s a = s"
                },
                {
                    "args": "sum (delete s a) f = sum s f",
                    "id": "2.4",
                    "prevs": [
                        "2.3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(a ∈ s) ⊢ sum (delete s a) f = sum s f"
                },
                {
                    "args": "if_not_P, sum (delete s a) f = (if a ∈ s then sum s f - f a else sum s f)",
                    "id": "2.5",
                    "prevs": [
                        "2.4",
                        "2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(a ∈ s) ⊢ sum (delete s a) f = (if a ∈ s then sum s f - f a else sum s f)"
                },
                {
                    "args": "",
                    "id": "2.6",
                    "prevs": [
                        "2.0",
                        "2.5"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ ¬(a ∈ s) ⟶ sum (delete s a) f = (if a ∈ s then sum s f - f a else sum s f)"
                },
                {
                    "args": "classical_cases",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ sum (delete s a) f = (if a ∈ s then sum s f - f a else sum s f)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ sum (delete s a) f = (if a ∈ s then sum s f - f a else sum s f)"
                }
            ],
            "prop": "finite s ⟶ sum (delete s a) f = (if a ∈ s then sum s f - f a else sum s f)",
            "steps": [
                {
                    "case": "a ∈ s",
                    "goal_id": "1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "1.1",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_delete"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal": "delete s a = s",
                    "goal_id": "2.1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_delete"
                },
                {
                    "fact_ids": [
                        "2.0"
                    ],
                    "goal_id": "2.1",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "2.3"
                    ],
                    "goal_id": "2.4",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'a",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_delta",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_real_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_delta, {a: a, f: λx::'a. b, op: (plus::real ⇒ real ⇒ real), s: s}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus s (λx. if x = a then b else neutral plus) = (if a ∈ s then b else neutral plus)"
                },
                {
                    "args": "neutral_real_add, iterate plus s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "⊢ iterate plus s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)"
                },
                {
                    "args": "sum_def, sum s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)"
                }
            ],
            "prop": "sum s (λx. if x = a then b else 0) = (if a ∈ s then b else 0)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_delta"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'a",
                "b": "real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_swap",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "sum_0, 0 = sum t (λj. 0)",
                    "id": "2",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ 0 = sum t (λj. 0)"
                },
                {
                    "args": "sum_empty, sum ∅ (λi. sum t (f i)) = sum t (λj. sum ∅ (λi. f i j))",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t ⊢ sum ∅ (λi. sum t (f i)) = sum t (λj. sum ∅ (λi. f i j))"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t ⊢ ∀x. ∀s1. sum s1 (λi. sum t (f i)) = sum t (λj. sum s1 (λi. f i j)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ sum (insert x s1) (λi. sum t (f i)) = sum t (λj. sum (insert x s1) (λi. f i j))"
                },
                {
                    "args": "x, 'a",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "s, 'a set",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j))",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j)) ⊢ sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j))"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "sum_insert, {f: λi. sum t (f i), x: x}",
                    "id": "4.4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum (insert x s) (λi. sum t (f i)) = (if x ∈ s then sum s (λi. sum t (f i)) else sum t (f x) + sum s (λi. sum t (f i)))"
                },
                {
                    "args": "if_not_P",
                    "id": "4.5",
                    "prevs": [
                        "4.4",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ sum (insert x s) (λi. sum t (f i)) = sum t (f x) + sum s (λi. sum t (f i))"
                },
                {
                    "args": "sum_insert, {f: λi. f i j, x: x}",
                    "id": "4.6",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum (insert x s) (λi. f i j) = (if x ∈ s then sum s (λi. f i j) else f x j + sum s (λi. f i j))"
                },
                {
                    "args": "if_not_P",
                    "id": "4.7",
                    "prevs": [
                        "4.6",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ sum (insert x s) (λi. f i j) = f x j + sum s (λi. f i j)"
                },
                {
                    "args": "sum_add, {f: f x, g: λx1. sum s (λi. f i x1), s: t}",
                    "id": "4.8",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, ¬(x ∈ s), sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j)) ⊢ sum t (λx1. f x x1 + sum s (λi. f i x1)) = sum t (f x) + sum t (λx1. sum s (λi. f i x1))"
                },
                {
                    "args": "sum t (λj. f x j + sum s (λi. f i j)) = sum t (f x) + sum s (λi. sum t (f i))",
                    "id": "4.9",
                    "prevs": [
                        "4.2",
                        "4.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ¬(x ∈ s), sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j)) ⊢ sum t (λj. f x j + sum s (λi. f i j)) = sum t (f x) + sum s (λi. sum t (f i))"
                },
                {
                    "args": "eq_sym_eq, sum t (f x) + sum s (λi. sum t (f i)) = sum t (λj. f x j + sum s (λi. f i j))",
                    "id": "4.10",
                    "prevs": [
                        "4.9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ¬(x ∈ s), sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j)) ⊢ sum t (f x) + sum s (λi. sum t (f i)) = sum t (λj. f x j + sum s (λi. f i j))"
                },
                {
                    "args": "sum (insert x s) (λi. sum t (f i)) = sum t (λj. f x j + sum s (λi. f i j))",
                    "id": "4.11",
                    "prevs": [
                        "4.5",
                        "4.10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ¬(x ∈ s), sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j)) ⊢ sum (insert x s) (λi. sum t (f i)) = sum t (λj. f x j + sum s (λi. f i j))"
                },
                {
                    "args": "sum (insert x s) (λi. sum t (f i)) = sum t (λj. sum (insert x s) (λi. f i j))",
                    "id": "4.12",
                    "prevs": [
                        "4.7",
                        "4.11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ¬(x ∈ s), sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j)) ⊢ sum (insert x s) (λi. sum t (f i)) = sum t (λj. sum (insert x s) (λi. f i j))"
                },
                {
                    "args": "",
                    "id": "4.13",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.3",
                        "0",
                        "4.12"
                    ],
                    "rule": "intros",
                    "th": "finite t ⊢ ∀x. ∀s. sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j)) ⟶ ¬(x ∈ s) ⟶ finite s ⟶ sum (insert x s) (λi. sum t (f i)) = sum t (λj. sum (insert x s) (λi. f i j))"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "5",
                    "prevs": [
                        "0",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t ⊢ sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j))"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j))"
                }
            ],
            "prop": "finite s ⟶ finite t ⟶ sum s (λi. sum t (f i)) = sum t (λj. sum s (λi. f i j))",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_empty"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_0"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x,s"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.4",
                    "method_name": "apply_forward_step",
                    "param_f": "(λi. sum t (f i))",
                    "param_x": "x",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "4.4",
                        "4.3"
                    ],
                    "goal_id": "4.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.6",
                    "method_name": "apply_forward_step",
                    "param_f": "(λi. f i j)",
                    "param_x": "x",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "4.6",
                        "4.3"
                    ],
                    "goal_id": "4.7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "4.7"
                    ],
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4.5"
                    ],
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ 'b ⇒ real",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_image",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_image, {f: f, g: g, op: (plus::real ⇒ real ⇒ real), s: s}",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ iterate plus (image f s) g = iterate plus s (g ∘ f)"
                },
                {
                    "args": "sum_def, sum (image f s) g = sum s (g ∘ f)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y ⊢ sum (image f s) g = sum s (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y) ⟶ sum (image f s) g = sum s (g ∘ f)"
                }
            ],
            "prop": "(∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ f x = f y ⟶ x = y) ⟶ sum (image f s) g = sum s (g ∘ f)",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_image"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ 'b",
                "g": "'b ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_superset",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "u ⊆ v",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "u ⊆ v ⊢ u ⊆ v"
                },
                {
                    "args": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "neutral_real_add, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral plus",
                    "id": "3",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = neutral plus"
                },
                {
                    "args": "iterate_superset",
                    "id": "4",
                    "prevs": [
                        "2",
                        "0",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ iterate plus v f = iterate plus u f"
                },
                {
                    "args": "sum_def, sum v f = sum u f",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "u ⊆ v, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ sum v f = sum u f"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ u ⊆ v ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0) ⟶ sum v f = sum u f"
                }
            ],
            "prop": "u ⊆ v ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0) ⟶ sum v f = sum u f",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_superset"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "u": "'a set",
                "v": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_univ",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "support plus f univ ⊆ s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "support plus f univ ⊆ s ⊢ support plus f univ ⊆ s"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_univ",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "support plus f univ ⊆ s ⊢ iterate plus s f = iterate plus univ f"
                },
                {
                    "args": "sum_def, sum s f = sum univ f",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "support plus f univ ⊆ s ⊢ sum s f = sum univ f"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ support plus f univ ⊆ s ⟶ sum s f = sum univ f"
                }
            ],
            "prop": "support plus f univ ⊆ s ⟶ sum s f = sum univ f",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_univ"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_union_rzero",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite u",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite u ⊢ finite u"
                },
                {
                    "args": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0"
                },
                {
                    "args": "u ∪ v = u ∪ {x. x ∈ v ∧ ¬(x ∈ u)}",
                    "id": "2",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ u ∪ v = u ∪ {x. x ∈ v ∧ ¬(x ∈ u)}"
                },
                {
                    "args": "diff_def, u ∪ v = u ∪ diff v u",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ u ∪ v = u ∪ diff v u"
                },
                {
                    "args": "subset_union_id, {A: u, B: diff v u}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ u ⊆ u ∪ diff v u"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ ∀x. x ∈ u ∪ diff v u ⟶ ¬(x ∈ u) ⟶ f x = 0"
                },
                {
                    "args": "x, 'a",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ u ∪ diff v u",
                    "id": "5.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ u ∪ diff v u ⊢ x ∈ u ∪ diff v u"
                },
                {
                    "args": "¬(x ∈ u)",
                    "id": "5.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ u) ⊢ ¬(x ∈ u)"
                },
                {
                    "args": "member_union_iff",
                    "id": "5.3",
                    "prevs": [
                        "5.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ u ∪ diff v u ⊢ x ∈ u ∨ x ∈ diff v u"
                },
                {
                    "args": "diff_def",
                    "id": "5.4",
                    "prevs": [
                        "5.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ u ∪ diff v u ⊢ x ∈ u ∨ x ∈ {x1. x1 ∈ v ∧ ¬(x1 ∈ u)}"
                },
                {
                    "args": "member_collect",
                    "id": "5.5",
                    "prevs": [
                        "5.4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ u ∪ diff v u ⊢ x ∈ u ∨ x ∈ v ∧ ¬(x ∈ u)"
                },
                {
                    "args": "x ∈ v",
                    "id": "5.6",
                    "prevs": [
                        "5.5",
                        "5.2"
                    ],
                    "rule": "z3",
                    "th": "¬(x ∈ u), x ∈ u ∪ diff v u ⊢ x ∈ v"
                },
                {
                    "args": "x",
                    "id": "5.7",
                    "prevs": [
                        "1",
                        "5.6",
                        "5.2"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite u, ¬(x ∈ u), x ∈ u ∪ diff v u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ f x = 0"
                },
                {
                    "args": "",
                    "id": "5.8",
                    "prevs": [
                        "5.0",
                        "5.1",
                        "5.2",
                        "5.7"
                    ],
                    "rule": "intros",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ ∀x. x ∈ u ∪ diff v u ⟶ ¬(x ∈ u) ⟶ f x = 0"
                },
                {
                    "args": "sum_superset",
                    "id": "6",
                    "prevs": [
                        "4",
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ sum (u ∪ diff v u) f = sum u f"
                },
                {
                    "args": "sum (u ∪ v) f = sum u f",
                    "id": "7",
                    "prevs": [
                        "3",
                        "6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, ∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0 ⊢ sum (u ∪ v) f = sum u f"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "0",
                        "1",
                        "7"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite u ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0) ⟶ sum (u ∪ v) f = sum u f"
                }
            ],
            "prop": "finite u ⟶ (∀x. x ∈ v ⟶ ¬(x ∈ u) ⟶ f x = 0) ⟶ sum (u ∪ v) f = sum u f",
            "steps": [
                {
                    "goal": "u ∪ v = u ∪ (diff v u)",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_superset"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "subset_union_id"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "5.3",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "5.1"
                    ],
                    "goal_id": "5.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_union_iff"
                },
                {
                    "fact_ids": [
                        "5.3"
                    ],
                    "goal_id": "5.4",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "fact_ids": [
                        "5.4"
                    ],
                    "goal_id": "5.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "5.5",
                        "5.2"
                    ],
                    "goal_id": "5.6",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "u": "'a set",
                "v": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_union_lzero",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite v",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite v ⊢ finite v"
                },
                {
                    "args": "∀x. x ∈ u ⟶ ¬(x ∈ v) ⟶ f x = 0",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ u ⟶ ¬(x ∈ v) ⟶ f x = 0 ⊢ ∀x. x ∈ u ⟶ ¬(x ∈ v) ⟶ f x = 0"
                },
                {
                    "args": "sum_union_rzero",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite v, ∀x. x ∈ u ⟶ ¬(x ∈ v) ⟶ f x = 0 ⊢ sum (v ∪ u) f = sum v f"
                },
                {
                    "args": "union_comm, sum (u ∪ v) f = sum v f",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite v, ∀x. x ∈ u ⟶ ¬(x ∈ v) ⟶ f x = 0 ⊢ sum (u ∪ v) f = sum v f"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "1",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite v ⟶ (∀x. x ∈ u ⟶ ¬(x ∈ v) ⟶ f x = 0) ⟶ sum (u ∪ v) f = sum v f"
                }
            ],
            "prop": "finite v ⟶ (∀x. x ∈ u ⟶ ¬(x ∈ v) ⟶ f x = 0) ⟶ sum (u ∪ v) f = sum v f",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "union_comm"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_union_rzero"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "u": "'a set",
                "v": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_restrict",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x. x ∈ s ⟶ (if x ∈ s then f x else 0) = f x"
                },
                {
                    "args": "x, 'a",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "if_P, (if x ∈ s then f x else 0) = f x",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "x ∈ s ⊢ (if x ∈ s then f x else 0) = f x"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.2"
                    ],
                    "rule": "intros",
                    "th": "finite s ⊢ ∀x. x ∈ s ⟶ (if x ∈ s then f x else 0) = f x"
                },
                {
                    "args": "sum_eq",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ sum s (λx. if x ∈ s then f x else 0) = sum s f"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ sum s (λx. if x ∈ s then f x else 0) = sum s f"
                }
            ],
            "prop": "finite s ⟶ sum s (λx. if x ∈ s then f x else 0) = sum s f",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_eq"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_bound",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x ≤ b",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x ≤ b ⊢ ∀x. x ∈ s ⟶ f x ≤ b"
                },
                {
                    "args": "sum_const, {c: b}",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum s (λn. b) = of_nat (card s) * b"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s ⊢ of_nat (card s) * b = sum s (λn. b)"
                },
                {
                    "args": "sum_le",
                    "id": "4",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b ⊢ sum s f ≤ sum s (λx. b)"
                },
                {
                    "args": "sum s f ≤ of_nat (card s) * b",
                    "id": "5",
                    "prevs": [
                        "3",
                        "4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b ⊢ sum s f ≤ of_nat (card s) * b"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⟶ sum s f ≤ of_nat (card s) * b"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⟶ sum s f ≤ of_nat (card s) * b",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "param_c": "b",
                    "theorem": "sum_const"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_le"
                }
            ],
            "ty": "thm",
            "vars": {
                "b": "real",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_bound_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s) ⊢ ∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s)"
                },
                {
                    "args": "sum_bound",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s) ⊢ sum s f ≤ of_nat (card s) * (b / of_nat (card s))"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s) ⊢ card s = 0 ⟶ s = ∅"
                },
                {
                    "args": "card s = 0",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "card s = 0 ⊢ card s = 0"
                },
                {
                    "args": "card_eq_0",
                    "id": "4.1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ card s = 0 ⟷ s = ∅"
                },
                {
                    "args": "",
                    "id": "4.2",
                    "prevs": [
                        "4.1",
                        "4.0"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite s, card s = 0 ⊢ s = ∅"
                },
                {
                    "args": "",
                    "id": "4.3",
                    "prevs": [
                        "4.0",
                        "4.2"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s) ⊢ card s = 0 ⟶ s = ∅"
                },
                {
                    "args": "real_of_nat_eq, (of_nat::nat ⇒ real) (card s) = of_nat 0 ⟶ s = ∅",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s) ⊢ (of_nat::nat ⇒ real) (card s) = of_nat 0 ⟶ s = ∅"
                },
                {
                    "args": "real_zero_def, of_nat (card s) = (0::real) ⟶ s = ∅",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s) ⊢ of_nat (card s) = (0::real) ⟶ s = ∅"
                },
                {
                    "args": "double_neg, ¬¬(of_nat (card s) = (0::real)) ⟶ ¬¬(s = ∅)",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s) ⊢ ¬¬(of_nat (card s) = (0::real)) ⟶ ¬¬(s = ∅)"
                },
                {
                    "args": "contrapositive",
                    "id": "8",
                    "prevs": [
                        "1",
                        "7"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s) ⊢ ¬(of_nat (card s) = (0::real))"
                },
                {
                    "args": "real_div_lmul, {x: b, y: (of_nat::nat ⇒ real) (card s)}",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s) ⊢ of_nat (card s) * (b / of_nat (card s)) = b"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "9",
                        "3"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s) ⊢ sum s f ≤ b"
                },
                {
                    "args": "",
                    "id": "11",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "10"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s)) ⟶ sum s f ≤ b"
                }
            ],
            "prop": "finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x ≤ b / of_nat (card s)) ⟶ sum s f ≤ b",
            "steps": [
                {
                    "fact_ids": [
                        "0",
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_forward_step",
                    "theorem": "sum_bound"
                },
                {
                    "goal": "of_nat (card s) * (b / of_nat (card s)) = b",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "real_div_lmul"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "contrapositive"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "double_neg"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_zero_def"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_of_nat_eq"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.1",
                    "method_name": "apply_forward_step",
                    "theorem": "card_eq_0"
                },
                {
                    "fact_ids": [
                        "4.1",
                        "4.0"
                    ],
                    "goal_id": "4.2",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "9",
                        "3"
                    ],
                    "goal_id": "10",
                    "method_name": "rewrite_fact_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "b": "real",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_abs_bound",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ abs (f x) ≤ b",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ abs (f x) ≤ b ⊢ ∀x. x ∈ s ⟶ abs (f x) ≤ b"
                },
                {
                    "args": "sum_abs, {f: f, s: s}",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ∀x. x ∈ s ⟶ abs (f x) ≤ b ⊢ abs (sum s f) ≤ sum s (λx. abs (f x))"
                },
                {
                    "args": "sum_bound",
                    "id": "3",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ abs (f x) ≤ b ⊢ sum s (λx. abs (f x)) ≤ of_nat (card s) * b"
                },
                {
                    "args": "real_le_trans",
                    "id": "4",
                    "prevs": [
                        "2",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ abs (f x) ≤ b ⊢ abs (sum s f) ≤ of_nat (card s) * b"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ abs (f x) ≤ b) ⟶ abs (sum s f) ≤ of_nat (card s) * b"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ abs (f x) ≤ b) ⟶ abs (sum s f) ≤ of_nat (card s) * b",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "param_y": "sum s (%x. abs(f x))",
                    "theorem": "real_le_trans"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_abs"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_bound"
                }
            ],
            "ty": "thm",
            "vars": {
                "b": "real",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_bound_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x ≤ b",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x ≤ b ⊢ ∀x. x ∈ s ⟶ f x ≤ b"
                },
                {
                    "args": "∃x. x ∈ s ∧ f x < b",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x. x ∈ s ∧ f x < b ⊢ ∃x. x ∈ s ∧ f x < b"
                },
                {
                    "args": "sum_lt",
                    "id": "3",
                    "prevs": [
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b, ∃x. x ∈ s ∧ f x < b ⊢ sum s f < sum s (λx. b)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b, ∃x. x ∈ s ∧ f x < b ⊢ ∀x. x ∈ s ⟶ b ≤ b"
                },
                {
                    "args": "x, 'a",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "real_le_refl, {x: b}",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ b ≤ b"
                },
                {
                    "args": "",
                    "id": "4.3",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2"
                    ],
                    "rule": "intros",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b, ∃x. x ∈ s ∧ f x < b ⊢ ∀x. x ∈ s ⟶ b ≤ b"
                },
                {
                    "args": "sum_bound",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b, ∃x. x ∈ s ∧ f x < b ⊢ sum s (λx. b) ≤ of_nat (card s) * b"
                },
                {
                    "args": "real_lte_trans",
                    "id": "6",
                    "prevs": [
                        "3",
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ f x ≤ b, ∃x. x ∈ s ∧ f x < b ⊢ sum s f < of_nat (card s) * b"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⟶ (∃x. x ∈ s ∧ f x < b) ⟶ sum s f < of_nat (card s) * b"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ (∀x. x ∈ s ⟶ f x ≤ b) ⟶ (∃x. x ∈ s ∧ f x < b) ⟶ sum s f < of_nat (card s) * b"
            ],
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "param_y": "sum s (%x. b)",
                    "theorem": "real_lte_trans"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_lt"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_bound"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "4.2",
                    "method_name": "apply_backward_step",
                    "theorem": "real_le_refl"
                }
            ],
            "ty": "thm",
            "vars": {
                "b": "real",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_bound_lt_all",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x < b",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x < b ⊢ ∀x. x ∈ s ⟶ f x < b"
                },
                {
                    "args": "∃a. a ∈ s",
                    "id": "3",
                    "prevs": [
                        "1"
                    ],
                    "rule": "z3",
                    "th": "¬(s = ∅) ⊢ ∃a. a ∈ s"
                },
                {
                    "args": "a, 'a",
                    "id": "4",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR a"
                },
                {
                    "args": "a ∈ s",
                    "id": "5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ⊢ a ∈ s"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "2",
                        "5"
                    ],
                    "rule": "apply_fact",
                    "th": "a ∈ s, ∀x. x ∈ s ⟶ f x < b ⊢ f a < b"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, a ∈ s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b ⊢ ∀x. x ∈ s ⟶ f x ≤ b"
                },
                {
                    "args": "x, 'a",
                    "id": "7.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "7.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "x",
                    "id": "7.2",
                    "prevs": [
                        "2",
                        "7.1"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, a ∈ s, x ∈ s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b ⊢ f x < b"
                },
                {
                    "args": "real_lt_imp_le",
                    "id": "7.3",
                    "prevs": [
                        "7.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, a ∈ s, x ∈ s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b ⊢ f x ≤ b"
                },
                {
                    "args": "",
                    "id": "7.4",
                    "prevs": [
                        "7.0",
                        "7.1",
                        "7.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, a ∈ s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b ⊢ ∀x. x ∈ s ⟶ f x ≤ b"
                },
                {
                    "args": "conjI",
                    "id": "8",
                    "prevs": [
                        "5",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, a ∈ s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b ⊢ a ∈ s ∧ f a < b"
                },
                {
                    "args": "exI, {P: λx. x ∈ s ∧ f x < b, a: a}",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, a ∈ s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b ⊢ ∃a1. a1 ∈ s ∧ f a1 < b"
                },
                {
                    "args": "sum_bound_lt",
                    "id": "10",
                    "prevs": [
                        "0",
                        "7",
                        "9"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, a ∈ s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b ⊢ sum s f < of_nat (card s) * b"
                },
                {
                    "args": "∃a. a ∈ s",
                    "id": "11",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "4",
                        "5",
                        "10"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x < b) ⟶ sum s f < of_nat (card s) * b"
                }
            ],
            "prop": "finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x < b) ⟶ sum s f < of_nat (card s) * b",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_bound_lt"
                },
                {
                    "goal": "?a. a ∈ s",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "3",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "exists_elim",
                    "names": "a"
                },
                {
                    "fact_ids": [
                        "2",
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_fact"
                },
                {
                    "goal_id": "7",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "7.2",
                    "method_name": "apply_backward_step",
                    "theorem": "real_lt_imp_le"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "7.2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "8",
                    "method_name": "inst_exists_goal",
                    "s": "a"
                },
                {
                    "goal_id": "8",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                }
            ],
            "ty": "thm",
            "vars": {
                "b": "real",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_bound_lt_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ f x < b / of_nat (card s)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ f x < b / of_nat (card s) ⊢ ∀x. x ∈ s ⟶ f x < b / of_nat (card s)"
                },
                {
                    "args": "card_eq_0",
                    "id": "3",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ card s = 0 ⟷ s = ∅"
                },
                {
                    "args": "¬(card s = 0)",
                    "id": "4",
                    "prevs": [
                        "3",
                        "1"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b / of_nat (card s) ⊢ ¬(card s = 0)"
                },
                {
                    "args": "real_of_nat_eq, ¬((of_nat::nat ⇒ real) (card s) = of_nat 0)",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b / of_nat (card s) ⊢ ¬((of_nat::nat ⇒ real) (card s) = of_nat 0)"
                },
                {
                    "args": "real_zero_def, ¬(of_nat (card s) = (0::real))",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b / of_nat (card s) ⊢ ¬(of_nat (card s) = (0::real))"
                },
                {
                    "args": "real_div_lmul, {x: b, y: (of_nat::nat ⇒ real) (card s)}",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b / of_nat (card s) ⊢ of_nat (card s) * (b / of_nat (card s)) = b"
                },
                {
                    "args": "eq_sym_eq, b = of_nat (card s) * (b / of_nat (card s))",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b / of_nat (card s) ⊢ b = of_nat (card s) * (b / of_nat (card s))"
                },
                {
                    "args": "sum_bound_lt_all",
                    "id": "9",
                    "prevs": [
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b / of_nat (card s) ⊢ sum s f < of_nat (card s) * (b / of_nat (card s))"
                },
                {
                    "args": "sum s f < b",
                    "id": "10",
                    "prevs": [
                        "8",
                        "9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ f x < b / of_nat (card s) ⊢ sum s f < b"
                },
                {
                    "args": "",
                    "id": "11",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "10"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x < b / of_nat (card s)) ⟶ sum s f < b"
                }
            ],
            "prop": "finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ f x < b / of_nat (card s)) ⟶ sum s f < b",
            "steps": [
                {
                    "goal": "b = of_nat (card s) * (b / of_nat (card s))",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "real_div_lmul"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_zero_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_of_nat_eq"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_forward_step",
                    "theorem": "card_eq_0"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "9",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_bound_lt_all"
                }
            ],
            "ty": "thm",
            "vars": {
                "b": "real",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_union_eq",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite u",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite u ⊢ finite u"
                },
                {
                    "args": "s ∩ t = ∅",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "s ∩ t = ∅ ⊢ s ∩ t = ∅"
                },
                {
                    "args": "s ∪ t = u",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "s ∪ t = u ⊢ s ∪ t = u"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "s ∪ t = u ⊢ u = s ∪ t"
                },
                {
                    "args": "subset_union_id, {A: s, B: t}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ s ⊆ s ∪ t"
                },
                {
                    "args": "s ⊆ u",
                    "id": "5",
                    "prevs": [
                        "3",
                        "4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ s ⊆ u"
                },
                {
                    "args": "finite_subset",
                    "id": "6",
                    "prevs": [
                        "0",
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ finite s"
                },
                {
                    "args": "subset_union_id, {A: t, B: s}",
                    "id": "7",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ t ⊆ t ∪ s"
                },
                {
                    "args": "union_comm, t ⊆ s ∪ t",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ t ⊆ s ∪ t"
                },
                {
                    "args": "t ⊆ u",
                    "id": "9",
                    "prevs": [
                        "3",
                        "8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ t ⊆ u"
                },
                {
                    "args": "finite_subset",
                    "id": "10",
                    "prevs": [
                        "0",
                        "9"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ finite t"
                },
                {
                    "args": "disjoint_def, disjoint s t",
                    "id": "11",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ disjoint s t"
                },
                {
                    "args": "sum_union, {f: f, s: s, t: t}",
                    "id": "12",
                    "prevs": [
                        "6",
                        "10",
                        "11"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ sum (s ∪ t) f = sum s f + sum t f"
                },
                {
                    "args": "eq_sym_eq, sum s f + sum t f = sum (s ∪ t) f",
                    "id": "13",
                    "prevs": [
                        "12"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ sum s f + sum t f = sum (s ∪ t) f"
                },
                {
                    "args": "sum s f + sum t f = sum u f",
                    "id": "14",
                    "prevs": [
                        "3",
                        "13"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, s ∩ t = ∅, s ∪ t = u ⊢ sum s f + sum t f = sum u f"
                },
                {
                    "args": "",
                    "id": "15",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "14"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite u ⟶ s ∩ t = ∅ ⟶ s ∪ t = u ⟶ sum s f + sum t f = sum u f"
                }
            ],
            "prop": "finite u ⟶ s ∩ t = ∅ ⟶ s ∪ t = u ⟶ sum s f + sum t f = sum u f",
            "steps": [
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_union"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "param_t": "u",
                    "theorem": "finite_subset"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "subset_union_id"
                },
                {
                    "goal_id": "7",
                    "method_name": "apply_backward_step",
                    "param_t": "u",
                    "theorem": "finite_subset"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "union_comm"
                },
                {
                    "goal_id": "7",
                    "method_name": "apply_backward_step",
                    "theorem": "subset_union_id"
                },
                {
                    "goal_id": "11",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set",
                "t": "'a set",
                "u": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_eq_superset",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite t",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "t ⊆ s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "t ⊆ s ⊢ t ⊆ s"
                },
                {
                    "args": "∀x. x ∈ t ⟶ f x = g x",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ t ⟶ f x = g x ⊢ ∀x. x ∈ t ⟶ f x = g x"
                },
                {
                    "args": "∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0 ⊢ ∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0"
                },
                {
                    "args": "sum_superset",
                    "id": "4",
                    "prevs": [
                        "1",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite t, t ⊆ s, ∀x. x ∈ t ⟶ f x = g x, ∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0 ⊢ sum s f = sum t f"
                },
                {
                    "args": "sum_eq",
                    "id": "5",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite t, t ⊆ s, ∀x. x ∈ t ⟶ f x = g x, ∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0 ⊢ sum t f = sum t g"
                },
                {
                    "args": "sum s f = sum t g",
                    "id": "6",
                    "prevs": [
                        "4",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite t, t ⊆ s, ∀x. x ∈ t ⟶ f x = g x, ∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0 ⊢ sum s f = sum t g"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite t ⟶ t ⊆ s ⟶ (∀x. x ∈ t ⟶ f x = g x) ⟶ (∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0) ⟶ sum s f = sum t g"
                }
            ],
            "prop": [
                "finite t ",
                "⟶ t ⊆ s ",
                "   ⟶ (∀x. x ∈ t ⟶ f x = g x) ⟶ (∀x. x ∈ s ⟶ ¬(x ∈ t) ⟶ f x = 0) ⟶ sum s f = sum t g"
            ],
            "steps": [
                {
                    "goal": "sum s f = sum t f",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_superset"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_eq"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_restrict_set",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_real_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_restrict_set, {P: P, f: f, op: (plus::real ⇒ real ⇒ real), s: s}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({x. x ∈ s ∧ P x}) f = iterate plus s (λx. if P x then f x else neutral plus)"
                },
                {
                    "args": "neutral_real_add, iterate plus ({x. x ∈ s ∧ P x}) f = iterate plus s (λx. if P x then f x else 0)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "⊢ iterate plus ({x. x ∈ s ∧ P x}) f = iterate plus s (λx. if P x then f x else 0)"
                },
                {
                    "args": "sum_def, sum ({x. x ∈ s ∧ P x}) f = sum s (λx. if P x then f x else 0)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({x. x ∈ s ∧ P x}) f = sum s (λx. if P x then f x else 0)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({x. x ∈ s ∧ P x}) f = sum s (λx. if P x then f x else 0)"
                }
            ],
            "prop": "sum ({x. x ∈ s ∧ P x}) f = sum s (λx. if P x then f x else 0)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_restrict_set"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "'a ⇒ bool",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_sum_restrict",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "sum_swap, {f: λi. λx1. if R i x1 then f i x1 else 0, s: s, t: t}",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t ⊢ sum s (λi. sum t (λx1. if R i x1 then f i x1 else 0)) = sum t (λj. sum s (λi. if R i j then f i j else 0))"
                },
                {
                    "args": "sum_restrict_set, sum s (λx. sum ({y. y ∈ t ∧ R x y}) (λy. f x y)) = sum t (λy. sum ({x. x ∈ s ∧ R x y}) (λx. f x y))",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t ⊢ sum s (λx. sum ({y. y ∈ t ∧ R x y}) (λy. f x y)) = sum t (λy. sum ({x. x ∈ s ∧ R x y}) (λx. f x y))"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "1",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ sum s (λx. sum ({y. y ∈ t ∧ R x y}) (λy. f x y)) = sum t (λy. sum ({x. x ∈ s ∧ R x y}) (λx. f x y))"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ finite t ",
                "   ⟶ sum s (λx. sum ({y. y ∈ t ∧ R x y}) (λy. f x y)) = ",
                "      sum t (λy. sum ({x. x ∈ s ∧ R x y}) (λx. f x y))"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_restrict_set"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_swap"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "'a ⇒ 'b ⇒ bool",
                "f": "'a ⇒ 'b ⇒ real",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "card_eq_sum",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "sum_const, {c: (1::real)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum s (λn. 1) = of_nat (card s) * 1"
                },
                {
                    "args": "real_mul_rid, of_nat (card s) = of_nat (card s) * (1::real)",
                    "id": "2",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ of_nat (card s) = of_nat (card s) * (1::real)"
                },
                {
                    "args": "of_nat (card s) = sum s (λx. 1)",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s ⊢ of_nat (card s) = sum s (λn. 1)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ of_nat (card s) = sum s (λx. 1)"
                }
            ],
            "prop": "finite s ⟶ of_nat (card s) = sum s (λx. 1)",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_c": "(1::real)",
                    "theorem": "sum_const"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_mul_rid"
                }
            ],
            "ty": "thm",
            "vars": {
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_multicount_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x. x ∈ s ⟶ of_nat (card ({j. j ∈ t ∧ R x j})) = sum ({j. j ∈ t ∧ R x j}) (λj. 1)"
                },
                {
                    "args": "x, 'a",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "finite_restrict, {P: R x, s: t}",
                    "id": "3.2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, x ∈ s, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ finite ({x1. x1 ∈ t ∧ R x x1})"
                },
                {
                    "args": "card_eq_sum",
                    "id": "3.3",
                    "prevs": [
                        "3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ s, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ of_nat (card ({j. j ∈ t ∧ R x j})) = sum ({j. j ∈ t ∧ R x j}) (λx1. 1)"
                },
                {
                    "args": "",
                    "id": "3.4",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x. x ∈ s ⟶ of_nat (card ({j. j ∈ t ∧ R x j})) = sum ({j. j ∈ t ∧ R x j}) (λj. 1)"
                },
                {
                    "args": "sum_eq",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ sum s (λx. of_nat (card ({j. j ∈ t ∧ R x j}))) = sum s (λx. sum ({j. j ∈ t ∧ R x j}) (λj. 1))"
                },
                {
                    "args": "sum_sum_restrict, {R: R, f: λx::'a. λy::'b. (1::real)}",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t ⊢ sum s (λx. sum ({y. y ∈ t ∧ R x y}) (λy. 1)) = sum t (λy. sum ({x. x ∈ s ∧ R x y}) (λx. 1))"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x. x ∈ t ⟶ sum ({x1. x1 ∈ s ∧ R x1 x}) (λx1. 1) = of_nat (k x)"
                },
                {
                    "args": "x, 'b",
                    "id": "6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ t",
                    "id": "6.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ⊢ x ∈ t"
                },
                {
                    "args": "finite_restrict, {P: λx1. R x1 x, s: s}",
                    "id": "6.2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ finite ({x1. x1 ∈ s ∧ R x1 x})"
                },
                {
                    "args": "sum_const, {c: (1::real)}",
                    "id": "6.3",
                    "prevs": [
                        "6.2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ sum ({x1. x1 ∈ s ∧ R x1 x}) (λn. 1) = of_nat (card ({x1. x1 ∈ s ∧ R x1 x})) * 1"
                },
                {
                    "args": "x",
                    "id": "6.4",
                    "prevs": [
                        "2",
                        "6.1"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ card ({i. i ∈ s ∧ R i x}) = k x"
                },
                {
                    "args": "real_of_nat_eq, (of_nat::nat ⇒ real) (card ({x1. x1 ∈ s ∧ R x1 x})) = of_nat (k x)",
                    "id": "6.5",
                    "prevs": [
                        "6.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ (of_nat::nat ⇒ real) (card ({x1. x1 ∈ s ∧ R x1 x})) = of_nat (k x)"
                },
                {
                    "args": "real_mul_rid, of_nat (card ({x1. x1 ∈ s ∧ R x1 x})) * (1::real) = of_nat (k x)",
                    "id": "6.6",
                    "prevs": [
                        "6.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ of_nat (card ({x1. x1 ∈ s ∧ R x1 x})) * (1::real) = of_nat (k x)"
                },
                {
                    "args": "sum ({x1. x1 ∈ s ∧ R x1 x}) (λx1. 1) = of_nat (k x)",
                    "id": "6.7",
                    "prevs": [
                        "6.3",
                        "6.6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, x ∈ t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ sum ({x1. x1 ∈ s ∧ R x1 x}) (λn. 1) = of_nat (k x)"
                },
                {
                    "args": "",
                    "id": "6.8",
                    "prevs": [
                        "6.0",
                        "6.1",
                        "6.7"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ ∀x. x ∈ t ⟶ sum ({x1. x1 ∈ s ∧ R x1 x}) (λx1. 1) = of_nat (k x)"
                },
                {
                    "args": "sum_eq",
                    "id": "7",
                    "prevs": [
                        "1",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ sum t (λx. sum ({x1. x1 ∈ s ∧ R x1 x}) (λx1. 1)) = sum t (λx. of_nat (k x))"
                },
                {
                    "args": "sum s (λx. sum ({j. j ∈ t ∧ R x j}) (λj. 1)) = sum t (λi. of_nat (k i))",
                    "id": "8",
                    "prevs": [
                        "5",
                        "7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ sum s (λx. sum ({y. y ∈ t ∧ R x y}) (λy. 1)) = sum t (λi. of_nat (k i))"
                },
                {
                    "args": "sum s (λi. of_nat (card ({j. j ∈ t ∧ R i j}))) = sum t (λi. of_nat (k i))",
                    "id": "9",
                    "prevs": [
                        "4",
                        "8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j ⊢ sum s (λx. of_nat (card ({j. j ∈ t ∧ R x j}))) = sum t (λi. of_nat (k i))"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "9"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ (∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j) ⟶ sum s (λi. of_nat (card ({j. j ∈ t ∧ R i j}))) = sum t (λi. of_nat (k i))"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ finite t ",
                "   ⟶ (∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k j) ",
                "      ⟶ sum s (λi. of_nat (card ({j. j ∈ t ∧ R i j}))) = sum t (λi. of_nat (k i))"
            ],
            "steps": [
                {
                    "goal": "sum s (λi. of_nat (card ({j. j ∈ t ∧ R i j}))) = sum s (%i. sum {j. j ∈ t ∧ R i j} (%j. 1))",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_eq"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "card_eq_sum"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_restrict"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "0",
                        "1"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_forward_step",
                    "param_R": "R",
                    "param_f": "(%x::'a. %y::'b. (1::real))",
                    "theorem": "sum_sum_restrict"
                },
                {
                    "fact_ids": [
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "6",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_eq"
                },
                {
                    "goal_id": "6",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal": "finite {x1. x1 ∈ s ∧ R x1 x}",
                    "goal_id": "6.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "6.2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_restrict"
                },
                {
                    "fact_ids": [
                        "6.2"
                    ],
                    "goal_id": "6.3",
                    "method_name": "apply_forward_step",
                    "param_c": "(1::real)",
                    "theorem": "sum_const"
                },
                {
                    "fact_ids": [
                        "6.3"
                    ],
                    "goal_id": "6.4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "6.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_mul_rid"
                },
                {
                    "goal_id": "6.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_of_nat_eq"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "6.4",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "'a ⇒ 'b ⇒ bool",
                "k": "'b ⇒ nat",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_multicount",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k ⊢ ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k"
                },
                {
                    "args": "sum_multicount_gen",
                    "id": "3",
                    "prevs": [
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k ⊢ sum s (λi. of_nat (card ({j. j ∈ t ∧ R i j}))) = sum t (λi. of_nat k)"
                },
                {
                    "args": "sum_const, {c: (of_nat::nat ⇒ real) k}",
                    "id": "4",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite t ⊢ sum t (λn. of_nat k) = of_nat (card t) * of_nat k"
                },
                {
                    "args": "card t * k = k * card t",
                    "id": "5",
                    "prevs": [],
                    "rule": "nat_norm",
                    "th": "⊢ card t * k = k * card t"
                },
                {
                    "args": "real_of_nat_eq, (of_nat::nat ⇒ real) (card t * k) = of_nat (k * card t)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k ⊢ (of_nat::nat ⇒ real) (card t * k) = of_nat (k * card t)"
                },
                {
                    "args": "real_of_nat_mul, (of_nat::nat ⇒ real) (card t) * of_nat k = of_nat (k * card t)",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k ⊢ (of_nat::nat ⇒ real) (card t) * of_nat k = of_nat (k * card t)"
                },
                {
                    "args": "sum t (λi. of_nat k) = of_nat (k * card t)",
                    "id": "8",
                    "prevs": [
                        "4",
                        "7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k ⊢ sum t (λn. of_nat k) = of_nat (k * card t)"
                },
                {
                    "args": "sum s (λi. of_nat (card ({j. j ∈ t ∧ R i j}))) = of_nat (k * card t)",
                    "id": "9",
                    "prevs": [
                        "3",
                        "8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, ∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k ⊢ sum s (λi. of_nat (card ({j. j ∈ t ∧ R i j}))) = of_nat (k * card t)"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "9"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ (∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k) ⟶ sum s (λi. of_nat (card ({j. j ∈ t ∧ R i j}))) = of_nat (k * card t)"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ finite t ",
                "   ⟶ (∀j. j ∈ t ⟶ card ({i. i ∈ s ∧ R i j}) = k) ",
                "      ⟶ sum s (λi. of_nat (card ({j. j ∈ t ∧ R i j}))) = of_nat (k * card t)"
            ],
            "steps": [
                {
                    "goal": "sum s (λi. of_nat (card ({j. j ∈ t ∧ R i j}))) = sum t (%i. of_nat k)",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_multicount_gen"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "4",
                    "method_name": "apply_forward_step",
                    "param_c": "(of_nat::nat=>real) k",
                    "theorem": "sum_const"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_of_nat_mul"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_of_nat_eq"
                },
                {
                    "goal_id": "5",
                    "method_name": "nat_norm"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "'a ⇒ 'b ⇒ bool",
                "k": "nat",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_image_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_image_gen, {f: f, g: g, op: (plus::real ⇒ real ⇒ real), s: s}",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ iterate plus s g = iterate plus (image f s) (λy. iterate plus ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "sum_def, sum s g = sum (image f s) (λy. sum ({x. x ∈ s ∧ f x = y}) g)",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ sum s g = sum (image f s) (λy. sum ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ sum s g = sum (image f s) (λy. sum ({x. x ∈ s ∧ f x = y}) g)"
                }
            ],
            "prop": "finite s ⟶ sum s g = sum (image f s) (λy. sum ({x. x ∈ s ∧ f x = y}) g)",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_image_gen"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ 'b",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_group",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "image f s ⊆ t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "image f s ⊆ t ⊢ image f s ⊆ t"
                },
                {
                    "args": "sum_image_gen, {f: f, g: g, s: s}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite s ⟶ sum s g = sum (image f s) (λy. sum ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2",
                        "0"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s ⊢ sum s g = sum (image f s) (λy. sum ({x. x ∈ s ∧ f x = y}) g)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, image f s ⊆ t ⊢ ∀x. x ∈ t ⟶ ¬(x ∈ image f s) ⟶ sum ({x1. x1 ∈ s ∧ f x1 = x}) g = 0"
                },
                {
                    "args": "x, 'b",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ t",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ⊢ x ∈ t"
                },
                {
                    "args": "¬(x ∈ image f s)",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ image f s) ⊢ ¬(x ∈ image f s)"
                },
                {
                    "args": "",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s) ⊢ ∀x1. x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⟶ g x1 = 0"
                },
                {
                    "args": "x1, 'a",
                    "id": "4.3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ {x2. x2 ∈ s ∧ f x2 = x}",
                    "id": "4.3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⊢ x1 ∈ {x2. x2 ∈ s ∧ f x2 = x}"
                },
                {
                    "args": "member_collect",
                    "id": "4.3.2",
                    "prevs": [
                        "4.3.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⊢ x1 ∈ s ∧ f x1 = x"
                },
                {
                    "args": "conjD1",
                    "id": "4.3.3",
                    "prevs": [
                        "4.3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⊢ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "4.3.4",
                    "prevs": [
                        "4.3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⊢ f x1 = x"
                },
                {
                    "args": "in_image",
                    "id": "4.3.5",
                    "prevs": [
                        "4.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(x ∈ image f s) ⊢ ¬(∃x1. x = f x1 ∧ x1 ∈ s)"
                },
                {
                    "args": "x = f x1",
                    "id": "4.3.6",
                    "prevs": [
                        "4.3.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⊢ x = f x1"
                },
                {
                    "args": "conjI",
                    "id": "4.3.7",
                    "prevs": [
                        "4.3.6",
                        "4.3.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s), x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⊢ x = f x1 ∧ x1 ∈ s"
                },
                {
                    "args": "exI, {P: λx1. x = f x1 ∧ x1 ∈ s, a: x1}",
                    "id": "4.3.8",
                    "prevs": [
                        "4.3.7"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s), x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⊢ ∃a1. x = f a1 ∧ a1 ∈ s"
                },
                {
                    "args": "negE_gen, {A: ∃x1. x = f x1 ∧ x1 ∈ s, C: g x1 = 0}",
                    "id": "4.3.9",
                    "prevs": [
                        "4.3.5",
                        "4.3.8"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s), x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⊢ g x1 = 0"
                },
                {
                    "args": "",
                    "id": "4.3.10",
                    "prevs": [
                        "4.3.0",
                        "4.3.1",
                        "4.3.9"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s) ⊢ ∀x1. x1 ∈ {x2. x2 ∈ s ∧ f x2 = x} ⟶ g x1 = 0"
                },
                {
                    "args": "sum_eq_0",
                    "id": "4.4",
                    "prevs": [
                        "4.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, image f s ⊆ t, ¬(x ∈ image f s) ⊢ sum ({x1. x1 ∈ s ∧ f x1 = x}) g = 0"
                },
                {
                    "args": "",
                    "id": "4.5",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, image f s ⊆ t ⊢ ∀x. x ∈ t ⟶ ¬(x ∈ image f s) ⟶ sum ({x1. x1 ∈ s ∧ f x1 = x}) g = 0"
                },
                {
                    "args": "sum_superset",
                    "id": "5",
                    "prevs": [
                        "1",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, image f s ⊆ t ⊢ sum t (λx. sum ({x1. x1 ∈ s ∧ f x1 = x}) g) = sum (image f s) (λx. sum ({x1. x1 ∈ s ∧ f x1 = x}) g)"
                },
                {
                    "args": "sum t (λy. sum ({x. x ∈ s ∧ f x = y}) g) = sum s g",
                    "id": "6",
                    "prevs": [
                        "3",
                        "5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, image f s ⊆ t ⊢ sum t (λy. sum ({x. x ∈ s ∧ f x = y}) g) = sum s g"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ image f s ⊆ t ⟶ sum t (λy. sum ({x. x ∈ s ∧ f x = y}) g) = sum s g"
                }
            ],
            "prop": "finite s ⟶ image f s ⊆ t ⟶ sum t (λy. sum ({x. x ∈ s ∧ f x = y}) g) = sum s g",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_g": "g",
                    "param_s": "s",
                    "theorem": "sum_image_gen"
                },
                {
                    "fact_ids": [
                        "2",
                        "0"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3"
                    ],
                    "goal_id": "4",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_superset"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "4.3",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_eq_0"
                },
                {
                    "goal_id": "4.3",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "4.3.1"
                    ],
                    "goal_id": "4.3.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "4.3.2"
                    ],
                    "goal_id": "4.3.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "4.3.2"
                    ],
                    "goal_id": "4.3.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.3.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "fact_ids": [
                        "4.3.5"
                    ],
                    "goal_id": "4.3.6",
                    "method_name": "apply_backward_step",
                    "theorem": "negE_gen"
                },
                {
                    "goal_id": "4.3.6",
                    "method_name": "inst_exists_goal",
                    "s": "x1"
                },
                {
                    "goal_id": "4.3.6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "4.3.4"
                    ],
                    "goal_id": "4.3.6",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ 'b",
                "g": "'a ⇒ real",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_group_relation",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y)"
                },
                {
                    "args": "sum_group, {f: λx. THE y. y ∈ t ∧ R x y, g: g, t: t}",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ image (λx. THE y. y ∈ t ∧ R x y) s ⊆ t ⟶ sum t (λy. sum ({x. x ∈ s ∧ (THE y1. y1 ∈ t ∧ R x y1) = y}) g) = sum s g"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. (∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s) ⟶ x ∈ t"
                },
                {
                    "args": "x, 'b",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ ∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s"
                },
                {
                    "args": "x1, 'a",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s",
                    "id": "3.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s"
                },
                {
                    "args": "conjD1",
                    "id": "3.4",
                    "prevs": [
                        "3.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ x = (THE y. y ∈ t ∧ R x1 y)"
                },
                {
                    "args": "conjD2",
                    "id": "3.5",
                    "prevs": [
                        "3.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "3.6",
                    "prevs": [
                        "1",
                        "3.5"
                    ],
                    "rule": "apply_fact",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ ∃!y. y ∈ t ∧ R x1 y"
                },
                {
                    "args": "theI'",
                    "id": "3.7",
                    "prevs": [
                        "3.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ (THE x. x ∈ t ∧ R x1 x) ∈ t ∧ R x1 (THE x. x ∈ t ∧ R x1 x)"
                },
                {
                    "args": "conjD1",
                    "id": "3.8",
                    "prevs": [
                        "3.7"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ (THE x. x ∈ t ∧ R x1 x) ∈ t"
                },
                {
                    "args": "x ∈ t",
                    "id": "3.9",
                    "prevs": [
                        "3.4",
                        "3.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s, ∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s ⊢ x ∈ t"
                },
                {
                    "args": "∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s",
                    "id": "3.10",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.1",
                        "3.2",
                        "3.3",
                        "3.9"
                    ],
                    "rule": "intros",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. (∃x1. x = (THE y. y ∈ t ∧ R x1 y) ∧ x1 ∈ s) ⟶ x ∈ t"
                },
                {
                    "args": "in_image, ∀x. x ∈ image (λx1. THE y. y ∈ t ∧ R x1 y) s ⟶ x ∈ t",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. x ∈ image (λx1. THE y. y ∈ t ∧ R x1 y) s ⟶ x ∈ t"
                },
                {
                    "args": "subsetI",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ image (λx. THE y. y ∈ t ∧ R x y) s ⊆ t"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "2",
                        "5"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ sum t (λy. sum ({x. x ∈ s ∧ (THE y1. y1 ∈ t ∧ R x y1) = y}) g) = sum s g"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ sum s g = sum t (λy. sum ({x. x ∈ s ∧ (THE y1. y1 ∈ t ∧ R x y1) = y}) g)"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. x ∈ t ⟶ sum ({x1. x1 ∈ s ∧ R x1 x}) g = sum ({x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}) g"
                },
                {
                    "args": "x, 'b",
                    "id": "8.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ t",
                    "id": "8.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ t ⊢ x ∈ t"
                },
                {
                    "args": "",
                    "id": "8.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x1. x1 ∈ s ∧ R x1 x ⟷ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "x1, 'a",
                    "id": "8.2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "",
                    "id": "8.2.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ x1 ∈ s ∧ R x1 x ⟶ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "x1 ∈ s ∧ R x1 x",
                    "id": "8.2.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ∧ R x1 x ⊢ x1 ∈ s ∧ R x1 x"
                },
                {
                    "args": "conjD1",
                    "id": "8.2.1.1",
                    "prevs": [
                        "8.2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ R x1 x ⊢ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "8.2.1.2",
                    "prevs": [
                        "8.2.1.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ R x1 x ⊢ R x1 x"
                },
                {
                    "args": "",
                    "id": "8.2.1.3",
                    "prevs": [
                        "1",
                        "8.2.1.1"
                    ],
                    "rule": "apply_fact",
                    "th": "x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∃!y. y ∈ t ∧ R x1 y"
                },
                {
                    "args": "exists1_def",
                    "id": "8.2.1.4",
                    "prevs": [
                        "8.2.1.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∃x. (x ∈ t ∧ R x1 x) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x)"
                },
                {
                    "args": "x2, 'b",
                    "id": "8.2.1.5",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x2"
                },
                {
                    "args": "(x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2)",
                    "id": "8.2.1.6",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2)"
                },
                {
                    "args": "conjD1",
                    "id": "8.2.1.7",
                    "prevs": [
                        "8.2.1.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ x2 ∈ t ∧ R x1 x2"
                },
                {
                    "args": "conjD2",
                    "id": "8.2.1.8",
                    "prevs": [
                        "8.2.1.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ ∀y. y ∈ t ∧ R x1 y ⟶ y = x2"
                },
                {
                    "args": "theI'",
                    "id": "8.2.1.9",
                    "prevs": [
                        "8.2.1.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ (THE x. x ∈ t ∧ R x1 x) ∈ t ∧ R x1 (THE x. x ∈ t ∧ R x1 x)"
                },
                {
                    "args": "",
                    "id": "8.2.1.10",
                    "prevs": [
                        "8.2.1.8",
                        "8.2.1.9"
                    ],
                    "rule": "apply_fact",
                    "th": "x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ (THE x. x ∈ t ∧ R x1 x) = x2"
                },
                {
                    "args": "conjI",
                    "id": "8.2.1.11",
                    "prevs": [
                        "8.1",
                        "8.2.1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ x ∈ t ∧ R x1 x"
                },
                {
                    "args": "x",
                    "id": "8.2.1.12",
                    "prevs": [
                        "8.2.1.8",
                        "8.2.1.11"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, x ∈ t, x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ x = x2"
                },
                {
                    "args": "eq_sym_eq, x2 = x",
                    "id": "8.2.1.13",
                    "prevs": [
                        "8.2.1.12"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x ∈ t, x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ x2 = x"
                },
                {
                    "args": "(THE y. y ∈ t ∧ R x1 y) = x",
                    "id": "8.2.1.14",
                    "prevs": [
                        "8.2.1.10",
                        "8.2.1.13"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x ∈ t, x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ (THE x2. x2 ∈ t ∧ R x1 x2) = x"
                },
                {
                    "args": "conjI",
                    "id": "8.2.1.15",
                    "prevs": [
                        "8.2.1.1",
                        "8.2.1.14"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, x1 ∈ s ∧ R x1 x, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), (x2 ∈ t ∧ R x1 x2) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x2) ⊢ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "∃x. (x ∈ t ∧ R x1 x) ∧ (∀y. y ∈ t ∧ R x1 y ⟶ y = x)",
                    "id": "8.2.1.16",
                    "prevs": [
                        "8.2.1.0",
                        "8.2.1.4",
                        "8.2.1.5",
                        "8.2.1.6",
                        "8.2.1.15"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ x1 ∈ s ∧ R x1 x ⟶ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "",
                    "id": "8.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⟶ x1 ∈ s ∧ R x1 x"
                },
                {
                    "args": "x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x",
                    "id": "8.2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "conjD1",
                    "id": "8.2.2.1",
                    "prevs": [
                        "8.2.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ x1 ∈ s"
                },
                {
                    "args": "conjD2",
                    "id": "8.2.2.2",
                    "prevs": [
                        "8.2.2.0"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "",
                    "id": "8.2.2.3",
                    "prevs": [
                        "1",
                        "8.2.2.1"
                    ],
                    "rule": "apply_fact",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ ∃!y. y ∈ t ∧ R x1 y"
                },
                {
                    "args": "theI'",
                    "id": "8.2.2.4",
                    "prevs": [
                        "8.2.2.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ (THE x. x ∈ t ∧ R x1 x) ∈ t ∧ R x1 (THE x. x ∈ t ∧ R x1 x)"
                },
                {
                    "args": "conjD2",
                    "id": "8.2.2.5",
                    "prevs": [
                        "8.2.2.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ R x1 (THE x. x ∈ t ∧ R x1 x)"
                },
                {
                    "args": "",
                    "id": "8.2.2.6",
                    "prevs": [
                        "8.2.2.2",
                        "8.2.2.5"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ R x1 x"
                },
                {
                    "args": "conjI",
                    "id": "8.2.2.7",
                    "prevs": [
                        "8.2.2.1",
                        "8.2.2.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y), x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⊢ x1 ∈ s ∧ R x1 x"
                },
                {
                    "args": "",
                    "id": "8.2.2.8",
                    "prevs": [
                        "8.2.2.0",
                        "8.2.2.7"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x ⟶ x1 ∈ s ∧ R x1 x"
                },
                {
                    "args": "iffI",
                    "id": "8.2.3",
                    "prevs": [
                        "8.2.1",
                        "8.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ x1 ∈ s ∧ R x1 x ⟷ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "",
                    "id": "8.2.4",
                    "prevs": [
                        "8.2.0",
                        "8.2.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x1. x1 ∈ s ∧ R x1 x ⟷ x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x"
                },
                {
                    "args": "member_collect, ∀x1. x1 ∈ {x11. x11 ∈ s ∧ R x11 x} ⟷ x1 ∈ {x11. x11 ∈ s ∧ (THE y. y ∈ t ∧ R x11 y) = x}",
                    "id": "8.3",
                    "prevs": [
                        "8.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x1. x1 ∈ {x11. x11 ∈ s ∧ R x11 x} ⟷ x1 ∈ {x11. x11 ∈ s ∧ (THE y. y ∈ t ∧ R x11 y) = x}"
                },
                {
                    "args": "member_ext",
                    "id": "8.4",
                    "prevs": [
                        "8.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ {x1. x1 ∈ s ∧ R x1 x} = {x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}"
                },
                {
                    "args": "sum ({x1. x1 ∈ s ∧ R x1 x}) g = sum ({x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}) g",
                    "id": "8.5",
                    "prevs": [
                        "8.4"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x ∈ t, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ sum ({x1. x1 ∈ s ∧ R x1 x}) g = sum ({x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}) g"
                },
                {
                    "args": "",
                    "id": "8.6",
                    "prevs": [
                        "8.0",
                        "8.1",
                        "8.5"
                    ],
                    "rule": "intros",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ ∀x. x ∈ t ⟶ sum ({x1. x1 ∈ s ∧ R x1 x}) g = sum ({x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}) g"
                },
                {
                    "args": "sum_eq",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ sum t (λx. sum ({x1. x1 ∈ s ∧ R x1 x}) g) = sum t (λx. sum ({x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}) g)"
                },
                {
                    "args": "sum t (λy. sum ({x. x ∈ s ∧ R x y}) g) = sum s g",
                    "id": "10",
                    "prevs": [
                        "7",
                        "9"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y) ⊢ sum t (λy. sum ({x. x ∈ s ∧ R x y}) g) = sum s g"
                },
                {
                    "args": "",
                    "id": "11",
                    "prevs": [
                        "0",
                        "1",
                        "10"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y)) ⟶ sum t (λy. sum ({x. x ∈ s ∧ R x y}) g) = sum s g"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ (∀x. x ∈ s ⟶ (∃!y. y ∈ t ∧ R x y)) ",
                "   ⟶ sum t (λy. sum ({x. x ∈ s ∧ R x y}) g) = sum s g"
            ],
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "param_f": "(%x. THE y. y ∈ t ∧ R x y)",
                    "param_g": "g",
                    "param_t": "t",
                    "theorem": "sum_group"
                },
                {
                    "goal": "image (λx. THE y. y ∈ t ∧ R x y) s ⊆ t",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "3.1"
                    ],
                    "goal_id": "3.2",
                    "method_name": "exists_elim",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "3.3"
                    ],
                    "goal_id": "3.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.3"
                    ],
                    "goal_id": "3.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "1",
                        "3.5"
                    ],
                    "goal_id": "3.6",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "3.6"
                    ],
                    "goal_id": "3.7",
                    "method_name": "apply_forward_step",
                    "theorem": "theI'"
                },
                {
                    "fact_ids": [
                        "3.4"
                    ],
                    "goal_id": "3.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3.7"
                    ],
                    "goal_id": "3.8",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2",
                        "5"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "6"
                    ],
                    "goal_id": "7",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal_id": "8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "8",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_eq"
                },
                {
                    "goal_id": "8",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal": "{x1. x1 ∈ s ∧ R x1 x} = {x1. x1 ∈ s ∧ (THE y. y ∈ t ∧ R x1 y) = x}",
                    "goal_id": "8.2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "8.2",
                    "method_name": "apply_backward_step",
                    "theorem": "member_ext"
                },
                {
                    "goal_id": "8.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "8.2",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "goal_id": "8.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "iffI"
                },
                {
                    "goal_id": "8.2.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "8.2.1.0"
                    ],
                    "goal_id": "8.2.1.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "8.2.1.0"
                    ],
                    "goal_id": "8.2.1.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "8.2.1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "1",
                        "8.2.1.1"
                    ],
                    "goal_id": "8.2.1.3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "8.2.1.3"
                    ],
                    "goal_id": "8.2.1.4",
                    "method_name": "rewrite_fact",
                    "sym": "",
                    "theorem": "exists1_def"
                },
                {
                    "fact_ids": [
                        "8.2.1.4"
                    ],
                    "goal_id": "8.2.1.5",
                    "method_name": "exists_elim",
                    "names": "x2"
                },
                {
                    "fact_ids": [
                        "8.2.1.6"
                    ],
                    "goal_id": "8.2.1.7",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "8.2.1.6"
                    ],
                    "goal_id": "8.2.1.8",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "8.2.1.3"
                    ],
                    "goal_id": "8.2.1.9",
                    "method_name": "apply_forward_step",
                    "theorem": "theI'"
                },
                {
                    "fact_ids": [
                        "8.2.1.8",
                        "8.2.1.9"
                    ],
                    "goal_id": "8.2.1.10",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "8.2.1.10"
                    ],
                    "goal_id": "8.2.1.11",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "8.2.1.11",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "8.2.1.8"
                    ],
                    "goal_id": "8.2.1.11",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "8.2.1.11",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "8.2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "8.2.2.0"
                    ],
                    "goal_id": "8.2.2.1",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "8.2.2.0"
                    ],
                    "goal_id": "8.2.2.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "8.2.2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "1",
                        "8.2.2.1"
                    ],
                    "goal_id": "8.2.2.3",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "8.2.2.3"
                    ],
                    "goal_id": "8.2.2.4",
                    "method_name": "apply_forward_step",
                    "theorem": "theI'"
                },
                {
                    "fact_ids": [
                        "8.2.2.4"
                    ],
                    "goal_id": "8.2.2.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "8.2.2.2",
                        "8.2.2.5"
                    ],
                    "goal_id": "8.2.2.6",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "8.4"
                    ],
                    "goal_id": "8.5",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "'a ⇒ 'b ⇒ bool",
                "g": "'a ⇒ real",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "real_of_nat_sum",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "real_zero_def, of_nat 0 = (0::real)",
                    "id": "1",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ of_nat 0 = (0::real)"
                },
                {
                    "args": "nsum_empty, of_nat (nsum ∅ f) = (0::real)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ of_nat (nsum ∅ f) = (0::real)"
                },
                {
                    "args": "sum_empty, of_nat (nsum ∅ f) = sum ∅ (λx. of_nat (f x))",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ of_nat (nsum ∅ f) = sum ∅ (λx. of_nat (f x))"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s ⊢ ∀x. ∀s1. of_nat (nsum s1 f) = sum s1 (λx1. of_nat (f x1)) ⟶ ¬(x ∈ s1) ⟶ finite s1 ⟶ of_nat (nsum (insert x s1) f) = sum (insert x s1) (λx1. of_nat (f x1))"
                },
                {
                    "args": "x, 'a",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "s, 'a set",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR s"
                },
                {
                    "args": "of_nat (nsum s f) = sum s (λx. of_nat (f x))",
                    "id": "4.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "of_nat (nsum s f) = sum s (λx. of_nat (f x)) ⊢ of_nat (nsum s f) = sum s (λx. of_nat (f x))"
                },
                {
                    "args": "¬(x ∈ s)",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(x ∈ s) ⊢ ¬(x ∈ s)"
                },
                {
                    "args": "sum_insert, {f: λx1. (of_nat::nat ⇒ real) (f x1), x: x}",
                    "id": "4.4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum (insert x s) (λx1. of_nat (f x1)) = (if x ∈ s then sum s (λx1. of_nat (f x1)) else of_nat (f x) + sum s (λx1. of_nat (f x1)))"
                },
                {
                    "args": "if_not_P",
                    "id": "4.5",
                    "prevs": [
                        "4.4",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ sum (insert x s) (λx1. of_nat (f x1)) = of_nat (f x) + sum s (λx1. of_nat (f x1))"
                },
                {
                    "args": "eq_sym_eq",
                    "id": "4.6",
                    "prevs": [
                        "4.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "of_nat (nsum s f) = sum s (λx. of_nat (f x)) ⊢ sum s (λx. of_nat (f x)) = of_nat (nsum s f)"
                },
                {
                    "args": "nsum_insert, {f: f, x: x}",
                    "id": "4.7",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ nsum (insert x s) f = (if x ∈ s then nsum s f else f x + nsum s f)"
                },
                {
                    "args": "if_not_P",
                    "id": "4.8",
                    "prevs": [
                        "4.7",
                        "4.3"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, ¬(x ∈ s) ⊢ nsum (insert x s) f = f x + nsum s f"
                },
                {
                    "args": "real_of_nat_eq, (of_nat::nat ⇒ real) (nsum (insert x s) f) = of_nat (f x + nsum s f)",
                    "id": "4.9",
                    "prevs": [
                        "4.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(x ∈ s), of_nat (nsum s f) = sum s (λx. of_nat (f x)) ⊢ (of_nat::nat ⇒ real) (nsum (insert x s) f) = of_nat (f x + nsum s f)"
                },
                {
                    "args": "real_of_nat_add, (of_nat::nat ⇒ real) (nsum (insert x s) f) = of_nat (f x) + of_nat (nsum s f)",
                    "id": "4.10",
                    "prevs": [
                        "4.9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(x ∈ s), of_nat (nsum s f) = sum s (λx. of_nat (f x)) ⊢ (of_nat::nat ⇒ real) (nsum (insert x s) f) = of_nat (f x) + of_nat (nsum s f)"
                },
                {
                    "args": "of_nat (nsum (insert x s) f) = of_nat (f x) + sum s (λx1. of_nat (f x1))",
                    "id": "4.11",
                    "prevs": [
                        "4.6",
                        "4.10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(x ∈ s), of_nat (nsum s f) = sum s (λx. of_nat (f x)) ⊢ of_nat (nsum (insert x s) f) = of_nat (f x) + sum s (λx1. of_nat (f x1))"
                },
                {
                    "args": "of_nat (nsum (insert x s) f) = sum (insert x s) (λx1. of_nat (f x1))",
                    "id": "4.12",
                    "prevs": [
                        "4.5",
                        "4.11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, ¬(x ∈ s), of_nat (nsum s f) = sum s (λx. of_nat (f x)) ⊢ of_nat (nsum (insert x s) f) = sum (insert x s) (λx1. of_nat (f x1))"
                },
                {
                    "args": "",
                    "id": "4.13",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.3",
                        "0",
                        "4.12"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. ∀s. of_nat (nsum s f) = sum s (λx1. of_nat (f x1)) ⟶ ¬(x ∈ s) ⟶ finite s ⟶ of_nat (nsum (insert x s) f) = sum (insert x s) (λx1. of_nat (f x1))"
                },
                {
                    "args": "finite_induct_strong",
                    "id": "5",
                    "prevs": [
                        "0",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s ⊢ of_nat (nsum s f) = sum s (λx. of_nat (f x))"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ of_nat (nsum s f) = sum s (λx. of_nat (f x))"
                }
            ],
            "prop": "finite s ⟶ of_nat (nsum s f) = sum s (λx. of_nat (f x))",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_induct_strong"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_empty"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nsum_empty"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_zero_def"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x,s"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.4",
                    "method_name": "apply_forward_step",
                    "param_f": "(λx1. (of_nat::nat=>real) (f x1))",
                    "param_x": "x",
                    "theorem": "sum_insert"
                },
                {
                    "fact_ids": [
                        "4.4",
                        "4.3"
                    ],
                    "goal_id": "4.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "4.5"
                    ],
                    "goal_id": "4.6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.6",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "fact_ids": [
                        "4.6"
                    ],
                    "goal_id": "4.7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4.7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_of_nat_add"
                },
                {
                    "goal_id": "4.7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_of_nat_eq"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "4.7",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "x",
                    "theorem": "nsum_insert"
                },
                {
                    "fact_ids": [
                        "4.7",
                        "4.3"
                    ],
                    "goal_id": "4.8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_subset",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite u",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite u ⊢ finite u"
                },
                {
                    "args": "finite v",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite v ⊢ finite v"
                },
                {
                    "args": "∀x. x ∈ diff u v ⟶ f x ≤ 0",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ diff u v ⟶ f x ≤ 0 ⊢ ∀x. x ∈ diff u v ⟶ f x ≤ 0"
                },
                {
                    "args": "∀x. x ∈ diff v u ⟶ 0 ≤ f x",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ ∀x. x ∈ diff v u ⟶ 0 ≤ f x"
                },
                {
                    "args": "sum_union, {f: f, s: u ∩ v}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ ∀t. finite (u ∩ v) ⟶ finite t ⟶ disjoint (u ∩ v) t ⟶ sum (u ∩ v ∪ t) f = sum (u ∩ v) f + sum t f"
                },
                {
                    "args": "disjI1, {A: finite u, B: finite v}",
                    "id": "5",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ finite u ∨ finite v"
                },
                {
                    "args": "finite_inter",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ finite (u ∩ v)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "4",
                        "6"
                    ],
                    "rule": "apply_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ ∀t. finite t ⟶ disjoint (u ∩ v) t ⟶ sum (u ∩ v ∪ t) f = sum (u ∩ v) f + sum t f"
                },
                {
                    "args": "diff v u",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ finite (diff v u) ⟶ disjoint (u ∩ v) (diff v u) ⟶ sum (u ∩ v ∪ diff v u) f = sum (u ∩ v) f + sum (diff v u) f"
                },
                {
                    "args": "diff u v",
                    "id": "9",
                    "prevs": [
                        "7"
                    ],
                    "rule": "forall_elim_gen",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ finite (diff u v) ⟶ disjoint (u ∩ v) (diff u v) ⟶ sum (u ∩ v ∪ diff u v) f = sum (u ∩ v) f + sum (diff u v) f"
                },
                {
                    "args": "finite_diff, {s: v, t: u}",
                    "id": "10",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ finite (diff v u)"
                },
                {
                    "args": "finite_diff, {s: u, t: v}",
                    "id": "11",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ finite (diff u v)"
                },
                {
                    "args": "",
                    "id": "12",
                    "prevs": [
                        "8",
                        "10"
                    ],
                    "rule": "apply_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ disjoint (u ∩ v) (diff v u) ⟶ sum (u ∩ v ∪ diff v u) f = sum (u ∩ v) f + sum (diff v u) f"
                },
                {
                    "args": "",
                    "id": "13",
                    "prevs": [
                        "9",
                        "11"
                    ],
                    "rule": "apply_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ disjoint (u ∩ v) (diff u v) ⟶ sum (u ∩ v ∪ diff u v) f = sum (u ∩ v) f + sum (diff u v) f"
                },
                {
                    "args": "u ∩ v ∩ {x. x ∈ v ∧ ¬(x ∈ u)} = ∅",
                    "id": "14",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ u ∩ v ∩ {x. x ∈ v ∧ ¬(x ∈ u)} = ∅"
                },
                {
                    "args": "diff_def, u ∩ v ∩ diff v u = ∅",
                    "id": "15",
                    "prevs": [
                        "14"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ u ∩ v ∩ diff v u = ∅"
                },
                {
                    "args": "disjoint_def, disjoint (u ∩ v) (diff v u)",
                    "id": "16",
                    "prevs": [
                        "15"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ disjoint (u ∩ v) (diff v u)"
                },
                {
                    "args": "",
                    "id": "17",
                    "prevs": [
                        "12",
                        "16"
                    ],
                    "rule": "apply_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ sum (u ∩ v ∪ diff v u) f = sum (u ∩ v) f + sum (diff v u) f"
                },
                {
                    "args": "u ∩ v ∩ {x. x ∈ u ∧ ¬(x ∈ v)} = ∅",
                    "id": "18",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ u ∩ v ∩ {x. x ∈ u ∧ ¬(x ∈ v)} = ∅"
                },
                {
                    "args": "diff_def, u ∩ v ∩ diff u v = ∅",
                    "id": "19",
                    "prevs": [
                        "18"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ u ∩ v ∩ diff u v = ∅"
                },
                {
                    "args": "disjoint_def, disjoint (u ∩ v) (diff u v)",
                    "id": "20",
                    "prevs": [
                        "19"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ disjoint (u ∩ v) (diff u v)"
                },
                {
                    "args": "",
                    "id": "21",
                    "prevs": [
                        "13",
                        "20"
                    ],
                    "rule": "apply_fact",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ sum (u ∩ v ∪ diff u v) f = sum (u ∩ v) f + sum (diff u v) f"
                },
                {
                    "args": "u ∩ v ∪ {x. x ∈ v ∧ ¬(x ∈ u)} = v",
                    "id": "22",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ u ∩ v ∪ {x. x ∈ v ∧ ¬(x ∈ u)} = v"
                },
                {
                    "args": "diff_def, u ∩ v ∪ diff v u = v",
                    "id": "23",
                    "prevs": [
                        "22"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ u ∩ v ∪ diff v u = v"
                },
                {
                    "args": "",
                    "id": "24",
                    "prevs": [
                        "23",
                        "17"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ sum v f = sum (u ∩ v) f + sum (diff v u) f"
                },
                {
                    "args": "u ∩ v ∪ {x. x ∈ u ∧ ¬(x ∈ v)} = u",
                    "id": "25",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ u ∩ v ∪ {x. x ∈ u ∧ ¬(x ∈ v)} = u"
                },
                {
                    "args": "diff_def, u ∩ v ∪ diff u v = u",
                    "id": "26",
                    "prevs": [
                        "25"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ u ∩ v ∪ diff u v = u"
                },
                {
                    "args": "",
                    "id": "27",
                    "prevs": [
                        "26",
                        "21"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ sum u f = sum (u ∩ v) f + sum (diff u v) f"
                },
                {
                    "args": "∀a::real. a ≤ 0 ⟷ 0 ≤ -a",
                    "id": "28",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ∀a::real. a ≤ 0 ⟷ 0 ≤ -a"
                },
                {
                    "args": "",
                    "id": "29",
                    "prevs": [
                        "28",
                        "2"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "∀x. x ∈ diff u v ⟶ f x ≤ 0 ⊢ ∀x. x ∈ diff u v ⟶ 0 ≤ -(f x)"
                },
                {
                    "args": "sum_pos_le",
                    "id": "30",
                    "prevs": [
                        "29"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ 0 ≤ sum (diff u v) (λx. -(f x))"
                },
                {
                    "args": "sum_neg, 0 ≤ -(sum (diff u v) f)",
                    "id": "31",
                    "prevs": [
                        "30"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ 0 ≤ -(sum (diff u v) f)"
                },
                {
                    "args": "sum (diff u v) f ≤ 0",
                    "id": "32",
                    "prevs": [
                        "28",
                        "31"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ sum (diff u v) f ≤ 0"
                },
                {
                    "args": "sum_pos_le",
                    "id": "33",
                    "prevs": [
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ 0 ≤ sum (diff v u) f"
                },
                {
                    "args": "real_le_trans",
                    "id": "34",
                    "prevs": [
                        "32",
                        "33"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ sum (diff u v) f ≤ sum (diff v u) f"
                },
                {
                    "args": "real_le_ladd_imp, {x: sum (u ∩ v) f, y: sum (diff u v) f, z: sum (diff v u) f}",
                    "id": "35",
                    "prevs": [
                        "34"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ sum (u ∩ v) f + sum (diff u v) f ≤ sum (u ∩ v) f + sum (diff v u) f"
                },
                {
                    "args": "sum (u ∩ v) f + sum (diff u v) f ≤ sum v f",
                    "id": "36",
                    "prevs": [
                        "24",
                        "35"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ sum (u ∩ v) f + sum (diff u v) f ≤ sum v f"
                },
                {
                    "args": "sum u f ≤ sum v f",
                    "id": "37",
                    "prevs": [
                        "27",
                        "36"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite u, finite v, ∀x. x ∈ diff u v ⟶ f x ≤ 0, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ sum u f ≤ sum v f"
                },
                {
                    "args": "",
                    "id": "38",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "37"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite u ⟶ finite v ⟶ (∀x. x ∈ diff u v ⟶ f x ≤ 0) ⟶ (∀x. x ∈ diff v u ⟶ 0 ≤ f x) ⟶ sum u f ≤ sum v f"
                }
            ],
            "prop": [
                "finite u ",
                "⟶ finite v ",
                "   ⟶ (∀x. x ∈ diff u v ⟶ f x ≤ 0) ⟶ (∀x. x ∈ diff v u ⟶ 0 ≤ f x) ⟶ sum u f ≤ sum v f"
            ],
            "steps": [
                {
                    "goal_id": "4",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_s": "inter u v",
                    "param_t": "",
                    "theorem": "sum_union"
                },
                {
                    "goal": "finite (u ∩ v)",
                    "goal_id": "5",
                    "method_name": "cut"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_inter"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "fact_ids": [
                        "4",
                        "6"
                    ],
                    "goal_id": "7",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal_id": "8",
                    "method_name": "forall_elim",
                    "s": "diff v u"
                },
                {
                    "fact_ids": [
                        "7"
                    ],
                    "goal_id": "9",
                    "method_name": "forall_elim",
                    "s": "diff u v"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal": "finite (diff v u)",
                    "goal_id": "10",
                    "method_name": "cut"
                },
                {
                    "goal_id": "10",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_diff"
                },
                {
                    "goal": "finite (diff u v)",
                    "goal_id": "11",
                    "method_name": "cut"
                },
                {
                    "goal_id": "11",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_diff"
                },
                {
                    "fact_ids": [
                        "8",
                        "10"
                    ],
                    "goal_id": "12",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "9",
                        "11"
                    ],
                    "goal_id": "13",
                    "method_name": "apply_fact"
                },
                {
                    "goal": "disjoint (u ∩ v) (diff v u)",
                    "goal_id": "14",
                    "method_name": "cut"
                },
                {
                    "goal_id": "14",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                },
                {
                    "goal_id": "14",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "14",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "12",
                        "16"
                    ],
                    "goal_id": "17",
                    "method_name": "apply_fact"
                },
                {
                    "goal": "disjoint (u ∩ v) (diff u v)",
                    "goal_id": "18",
                    "method_name": "cut"
                },
                {
                    "goal_id": "18",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_def"
                },
                {
                    "goal_id": "18",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "18",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "13",
                        "20"
                    ],
                    "goal_id": "21",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "17"
                    ],
                    "goal": "u ∩ v ∪ diff v u = v",
                    "goal_id": "22",
                    "method_name": "cut"
                },
                {
                    "goal_id": "22",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "22",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "23",
                        "17"
                    ],
                    "goal_id": "24",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "goal": "u ∩ v ∪ diff u v = u",
                    "goal_id": "25",
                    "method_name": "cut"
                },
                {
                    "goal_id": "25",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "25",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "26",
                        "21"
                    ],
                    "goal_id": "27",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "27"
                    ],
                    "goal_id": "28",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "24"
                    ],
                    "goal_id": "28",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "28",
                    "method_name": "apply_backward_step",
                    "theorem": "real_le_ladd_imp"
                },
                {
                    "goal_id": "28",
                    "method_name": "apply_backward_step",
                    "param_y": "(0::real)",
                    "theorem": "real_le_trans"
                },
                {
                    "goal": "!a::real. a <=0  <--> 0 <= -a",
                    "goal_id": "28",
                    "method_name": "cut"
                },
                {
                    "goal_id": "28",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "28"
                    ],
                    "goal_id": "29",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "29",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "sum_neg"
                },
                {
                    "goal_id": "29",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_pos_le"
                },
                {
                    "fact_ids": [
                        "28",
                        "2"
                    ],
                    "goal_id": "29",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "goal_id": "33",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_pos_le"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "u": "'a set",
                "v": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_subset_simple",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite v",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite v ⊢ finite v"
                },
                {
                    "args": "u ⊆ v",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "u ⊆ v ⊢ u ⊆ v"
                },
                {
                    "args": "∀x. x ∈ diff v u ⟶ 0 ≤ f x",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ ∀x. x ∈ diff v u ⟶ 0 ≤ f x"
                },
                {
                    "args": "finite_subset",
                    "id": "3",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite v, u ⊆ v, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ finite u"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite v, u ⊆ v, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ ∀x. x ∈ diff u v ⟶ f x ≤ 0"
                },
                {
                    "args": "x, 'a",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ diff u v",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ diff u v ⊢ x ∈ diff u v"
                },
                {
                    "args": "diff_def",
                    "id": "4.2",
                    "prevs": [
                        "4.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ diff u v ⊢ x ∈ {x1. x1 ∈ u ∧ ¬(x1 ∈ v)}"
                },
                {
                    "args": "member_collect",
                    "id": "4.3",
                    "prevs": [
                        "4.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ diff u v ⊢ x ∈ u ∧ ¬(x ∈ v)"
                },
                {
                    "args": "f x ≤ 0",
                    "id": "4.4",
                    "prevs": [
                        "1",
                        "4.3"
                    ],
                    "rule": "z3",
                    "th": "u ⊆ v, x ∈ diff u v ⊢ f x ≤ 0"
                },
                {
                    "args": "",
                    "id": "4.5",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.4"
                    ],
                    "rule": "intros",
                    "th": "finite v, u ⊆ v, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ ∀x. x ∈ diff u v ⟶ f x ≤ 0"
                },
                {
                    "args": "sum_subset",
                    "id": "5",
                    "prevs": [
                        "3",
                        "0",
                        "4",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite v, u ⊆ v, ∀x. x ∈ diff v u ⟶ 0 ≤ f x ⊢ sum u f ≤ sum v f"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite v ⟶ u ⊆ v ⟶ (∀x. x ∈ diff v u ⟶ 0 ≤ f x) ⟶ sum u f ≤ sum v f"
                }
            ],
            "prop": "finite v ⟶ u ⊆ v ⟶ (∀x. x ∈ diff v u ⟶ 0 ≤ f x) ⟶ sum u f ≤ sum v f",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_subset"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "param_t": "v",
                    "theorem": "finite_subset"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "4.1"
                    ],
                    "goal_id": "4.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "1",
                        "4.3"
                    ],
                    "goal_id": "4.4",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "u": "'a set",
                "v": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_mul_bound",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ ∀x. x ∈ s ⟶ a x * b x ≤ sum s a * b x"
                },
                {
                    "args": "x, 'a",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "2.2",
                    "prevs": [
                        "1",
                        "2.1"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ 0 ≤ a x ∧ 0 ≤ b x"
                },
                {
                    "args": "conjD2",
                    "id": "2.3",
                    "prevs": [
                        "2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ 0 ≤ b x"
                },
                {
                    "args": "sum_sing, a x = sum ({x}) a",
                    "id": "2.4",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ a x = sum ({x}) a"
                },
                {
                    "args": "{x} ⊆ s",
                    "id": "2.5",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "z3",
                    "th": "x ∈ s ⊢ {x} ⊆ s"
                },
                {
                    "args": "",
                    "id": "2.6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, x ∈ s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ ∀x1. x1 ∈ diff s ({x}) ⟶ 0 ≤ a x1"
                },
                {
                    "args": "x1, 'a",
                    "id": "2.6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ diff s ({x})",
                    "id": "2.6.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ diff s ({x}) ⊢ x1 ∈ diff s ({x})"
                },
                {
                    "args": "diff_def",
                    "id": "2.6.2",
                    "prevs": [
                        "2.6.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x1 ∈ diff s ({x}) ⊢ x1 ∈ {x2. x2 ∈ s ∧ ¬(x2 ∈ {x})}"
                },
                {
                    "args": "member_collect",
                    "id": "2.6.3",
                    "prevs": [
                        "2.6.2"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x1 ∈ diff s ({x}) ⊢ x1 ∈ s ∧ ¬(x1 ∈ {x})"
                },
                {
                    "args": "conjD1",
                    "id": "2.6.4",
                    "prevs": [
                        "2.6.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ diff s ({x}) ⊢ x1 ∈ s"
                },
                {
                    "args": "",
                    "id": "2.6.5",
                    "prevs": [
                        "1",
                        "2.6.4"
                    ],
                    "rule": "apply_fact",
                    "th": "x1 ∈ diff s ({x}), ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ 0 ≤ a x1 ∧ 0 ≤ b x1"
                },
                {
                    "args": "conjD1",
                    "id": "2.6.6",
                    "prevs": [
                        "2.6.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ diff s ({x}), ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ 0 ≤ a x1"
                },
                {
                    "args": "",
                    "id": "2.6.7",
                    "prevs": [
                        "2.6.0",
                        "2.6.1",
                        "2.6.6"
                    ],
                    "rule": "intros",
                    "th": "finite s, x ∈ s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ ∀x1. x1 ∈ diff s ({x}) ⟶ 0 ≤ a x1"
                },
                {
                    "args": "sum_subset_simple",
                    "id": "2.7",
                    "prevs": [
                        "0",
                        "2.5",
                        "2.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ sum ({x}) a ≤ sum s a"
                },
                {
                    "args": "a x ≤ sum s a",
                    "id": "2.8",
                    "prevs": [
                        "2.4",
                        "2.7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x ∈ s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ a x ≤ sum s a"
                },
                {
                    "args": "real_le_lmul",
                    "id": "2.9",
                    "prevs": [
                        "2.3",
                        "2.8"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ b x * a x ≤ b x * sum s a"
                },
                {
                    "args": "real_mult_comm, a x * b x ≤ sum s a * b x",
                    "id": "2.10",
                    "prevs": [
                        "2.9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x ∈ s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ a x * b x ≤ sum s a * b x"
                },
                {
                    "args": "",
                    "id": "2.11",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.10"
                    ],
                    "rule": "intros",
                    "th": "finite s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ ∀x. x ∈ s ⟶ a x * b x ≤ sum s a * b x"
                },
                {
                    "args": "sum_le",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ sum s (λx. a x * b x) ≤ sum s (λx. sum s a * b x)"
                },
                {
                    "args": "sum_lmul, sum s (λi. a i * b i) ≤ sum s a * sum s b",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite s, ∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i ⊢ sum s (λi. a i * b i) ≤ sum s a * sum s b"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i) ⟶ sum s (λi. a i * b i) ≤ sum s a * sum s b"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ (∀i. i ∈ s ⟶ 0 ≤ a i ∧ 0 ≤ b i) ⟶ sum s (λi. a i * b i) ≤ sum s a * sum s b"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "sum_lmul"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_le"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "2.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_mult_comm"
                },
                {
                    "goal_id": "2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "real_le_lmul"
                },
                {
                    "fact_ids": [
                        "1",
                        "2.1"
                    ],
                    "goal_id": "2.2",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "2.2"
                    ],
                    "goal_id": "2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal": "a x = sum {x} a",
                    "goal_id": "2.4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_sing"
                },
                {
                    "fact_ids": [
                        "2.4"
                    ],
                    "goal_id": "2.5",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2.5",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_subset_simple"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.5",
                    "method_name": "z3"
                },
                {
                    "goal_id": "2.6",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "2.6.1"
                    ],
                    "goal_id": "2.6.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "fact_ids": [
                        "2.6.2"
                    ],
                    "goal_id": "2.6.3",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "fact_ids": [
                        "2.6.3"
                    ],
                    "goal_id": "2.6.4",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1",
                        "2.6.4"
                    ],
                    "goal_id": "2.6.5",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "2.6.5"
                    ],
                    "goal_id": "2.6.6",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'a ⇒ real",
                "b": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_image_nonzero",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0 ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "neutral_real_add, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = neutral plus",
                    "id": "3",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0 ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = neutral plus"
                },
                {
                    "args": "iterate_image_nonzero, {f: i, g: d, op: (plus::real ⇒ real ⇒ real), s: s}",
                    "id": "4",
                    "prevs": [
                        "2",
                        "0",
                        "3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0 ⊢ iterate plus (image i s) d = iterate plus s (d ∘ i)"
                },
                {
                    "args": "sum_def, sum (image i s) d = sum s (d ∘ i)",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0 ⊢ sum (image i s) d = sum s (d ∘ i)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0) ⟶ sum (image i s) d = sum s (d ∘ i)"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ ¬(x = y) ⟶ i x = i y ⟶ d (i x) = 0) ",
                "   ⟶ sum (image i s) d = sum s (d ∘ i)"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_image_nonzero"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "d": "'b ⇒ real",
                "i": "'a ⇒ 'b",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_bijection",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀x. x ∈ s ⟶ p x ∈ s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ p x ∈ s ⊢ ∀x. x ∈ s ⟶ p x ∈ s"
                },
                {
                    "args": "∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_bijection, {f: f, op: (plus::real ⇒ real ⇒ real), p: p, s: s}",
                    "id": "3",
                    "prevs": [
                        "2",
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ iterate plus s f = iterate plus s (f ∘ p)"
                },
                {
                    "args": "sum_def, sum s f = sum s (f ∘ p)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀x. x ∈ s ⟶ p x ∈ s, ∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y) ⊢ sum s f = sum s (f ∘ p)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀x. x ∈ s ⟶ p x ∈ s) ⟶ (∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)) ⟶ sum s f = sum s (f ∘ p)"
                }
            ],
            "prop": [
                "(∀x. x ∈ s ⟶ p x ∈ s) ",
                "⟶ (∀y. y ∈ s ⟶ (∃!x. x ∈ s ∧ p x = y)) ⟶ sum s f = sum s (f ∘ p)"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_bijection"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "p": "'a ⇒ 'a",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_eq_general",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y) ⊢ ∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_eq_general, {f: f, g: g, h: h, op: (plus::real ⇒ real ⇒ real), s: s, t: t}",
                    "id": "3",
                    "prevs": [
                        "2",
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ iterate plus s f = iterate plus t g"
                },
                {
                    "args": "sum_def, sum s f = sum t g",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y), ∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x ⊢ sum s f = sum t g"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)) ⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x) ⟶ sum s f = sum t g"
                }
            ],
            "prop": [
                "(∀y. y ∈ t ⟶ (∃!x. x ∈ s ∧ h x = y)) ",
                "⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ g (h x) = f x) ⟶ sum s f = sum t g"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "param_h": "h",
                    "theorem": "iterate_eq_general"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'b ⇒ real",
                "h": "'a ⇒ 'b",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_eq_general_inverses",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y ⊢ ∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y"
                },
                {
                    "args": "∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_eq_general_inverses, {f: f, g: g, h: h, k: k, op: (plus::real ⇒ real ⇒ real), s: s, t: t}",
                    "id": "3",
                    "prevs": [
                        "2",
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ iterate plus s f = iterate plus t g"
                },
                {
                    "args": "sum_def, sum s f = sum t g",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y, ∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x ⊢ sum s f = sum t g"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y) ⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x) ⟶ sum s f = sum t g"
                }
            ],
            "prop": [
                "(∀y. y ∈ t ⟶ k y ∈ s ∧ h (k y) = y) ",
                "⟶ (∀x. x ∈ s ⟶ h x ∈ t ∧ k (h x) = x ∧ g (h x) = f x) ⟶ sum s f = sum t g"
            ],
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "param_h": "h",
                    "param_k": "k",
                    "theorem": "iterate_eq_general_inverses"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'b ⇒ real",
                "h": "'a ⇒ 'b",
                "k": "'b ⇒ 'a",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_injection",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ p x ∈ s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ p x ∈ s ⊢ ∀x. x ∈ s ⟶ p x ∈ s"
                },
                {
                    "args": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_injection, {f: f, op: (plus::real ⇒ real ⇒ real), p: p, s: s}",
                    "id": "4",
                    "prevs": [
                        "3",
                        "0",
                        "1",
                        "2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ iterate plus s (f ∘ p) = iterate plus s f"
                },
                {
                    "args": "sum_def, sum s (f ∘ p) = sum s f",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∀x. x ∈ s ⟶ p x ∈ s, ∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y ⊢ sum s (f ∘ p) = sum s f"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ p x ∈ s) ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y) ⟶ sum s (f ∘ p) = sum s f"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ (∀x. x ∈ s ⟶ p x ∈ s) ",
                "   ⟶ (∀x. ∀y. x ∈ s ⟶ y ∈ s ⟶ p x = p y ⟶ x = y) ⟶ sum s (f ∘ p) = sum s f"
            ],
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_injection"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "p": "'a ⇒ 'a",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_union_nonzero",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "∀x. x ∈ s ∩ t ⟶ f x = 0",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ∩ t ⟶ f x = 0 ⊢ ∀x. x ∈ s ∩ t ⟶ f x = 0"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "neutral_real_add, ∀x. x ∈ s ∩ t ⟶ f x = neutral plus",
                    "id": "4",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ∀x. x ∈ s ∩ t ⟶ f x = 0 ⊢ ∀x. x ∈ s ∩ t ⟶ f x = neutral plus"
                },
                {
                    "args": "iterate_union_nonzero",
                    "id": "5",
                    "prevs": [
                        "3",
                        "0",
                        "1",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀x. x ∈ s ∩ t ⟶ f x = 0 ⊢ iterate plus (s ∪ t) f = iterate plus s f + iterate plus t f"
                },
                {
                    "args": "sum_def, sum (s ∪ t) f = sum s f + sum t f",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ∀x. x ∈ s ∩ t ⟶ f x = 0 ⊢ sum (s ∪ t) f = sum s f + sum t f"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ (∀x. x ∈ s ∩ t ⟶ f x = 0) ⟶ sum (s ∪ t) f = sum s f + sum t f"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ finite t ⟶ (∀x. x ∈ s ∩ t ⟶ f x = 0) ⟶ sum (s ∪ t) f = sum s f + sum t f"
            ],
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_union_nonzero"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set",
                "t": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_cases",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_cases, {P: P, f: f, g: g, op: (plus::real ⇒ real ⇒ real), s: s}",
                    "id": "2",
                    "prevs": [
                        "1",
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ iterate plus s (λx. if P x then f x else g x) = iterate plus ({x. x ∈ s ∧ P x}) f + iterate plus ({x. x ∈ s ∧ ¬(P x)}) g"
                },
                {
                    "args": "sum_def, sum s (λx. if P x then f x else g x) = sum ({x. x ∈ s ∧ P x}) f + sum ({x. x ∈ s ∧ ¬(P x)}) g",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ sum s (λx. if P x then f x else g x) = sum ({x. x ∈ s ∧ P x}) f + sum ({x. x ∈ s ∧ ¬(P x)}) g"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [
                        "0",
                        "3"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ sum s (λx. if P x then f x else g x) = sum ({x. x ∈ s ∧ P x}) f + sum ({x. x ∈ s ∧ ¬(P x)}) g"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ sum s (λx. if P x then f x else g x) = ",
                "   sum ({x. x ∈ s ∧ P x}) f + sum ({x. x ∈ s ∧ ¬(P x)}) g"
            ],
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_cases"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "'a ⇒ bool",
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_cases_1",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "a ∈ s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "a ∈ s ⊢ a ∈ s"
                },
                {
                    "args": "sum_cases, {P: λx. x = a, f: λx::'a. y, g: f}",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s ⊢ sum s (λx. if x = a then y else f x) = sum ({x. x ∈ s ∧ x = a}) (λx. y) + sum ({x. x ∈ s ∧ ¬(x = a)}) f"
                },
                {
                    "args": "{x. x ∈ s ∧ ¬(x = a)} = {y. ¬(y = a) ∧ y ∈ s}",
                    "id": "3",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ {x. x ∈ s ∧ ¬(x = a)} = {y. ¬(y = a) ∧ y ∈ s}"
                },
                {
                    "args": "delete_def, {x. x ∈ s ∧ ¬(x = a)} = delete s a",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, a ∈ s ⊢ {x. x ∈ s ∧ ¬(x = a)} = delete s a"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "4",
                        "2"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite s, a ∈ s ⊢ sum s (λx. if x = a then y else f x) = sum ({x. x ∈ s ∧ x = a}) (λx. y) + sum (delete s a) f"
                },
                {
                    "args": "sum_delete, {f: f}",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, a ∈ s ⊢ sum (delete s a) f = sum s f - f a"
                },
                {
                    "args": "{x. x ∈ s ∧ x = a} = {a}",
                    "id": "7",
                    "prevs": [
                        "1"
                    ],
                    "rule": "z3",
                    "th": "a ∈ s ⊢ {x. x ∈ s ∧ x = a} = {a}"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "7",
                        "5"
                    ],
                    "rule": "rewrite_fact_with_prev",
                    "th": "finite s, a ∈ s ⊢ sum s (λx. if x = a then y else f x) = sum ({a}) (λx. y) + sum (delete s a) f"
                },
                {
                    "args": "sum_sing",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_fact",
                    "th": "finite s, a ∈ s ⊢ sum s (λx. if x = a then y else f x) = y + sum (delete s a) f"
                },
                {
                    "args": "y + (sum s f - f a) = sum s f + (y - f a)",
                    "id": "10",
                    "prevs": [],
                    "rule": "real_norm",
                    "th": "⊢ y + (sum s f - f a) = sum s f + (y - f a)"
                },
                {
                    "args": "y + sum (delete s a) f = sum s f + (y - f a)",
                    "id": "11",
                    "prevs": [
                        "6",
                        "10"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, a ∈ s ⊢ y + sum (delete s a) f = sum s f + (y - f a)"
                },
                {
                    "args": "sum s (λx. if x = a then y else f x) = sum s f + (y - f a)",
                    "id": "12",
                    "prevs": [
                        "9",
                        "11"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, a ∈ s ⊢ sum s (λx. if x = a then y else f x) = sum s f + (y - f a)"
                },
                {
                    "args": "",
                    "id": "13",
                    "prevs": [
                        "0",
                        "1",
                        "12"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ a ∈ s ⟶ sum s (λx. if x = a then y else f x) = sum s f + (y - f a)"
                }
            ],
            "prop": "finite s ⟶ a ∈ s ⟶ sum s (λx. if x = a then y else f x) = sum s f + (y - f a)",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_forward_step",
                    "param_P": "(%x. x = a)",
                    "param_f": "(%x::'a. y)",
                    "param_g": "f",
                    "theorem": "sum_cases"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal": "{x. x ∈ s ∧ ¬(x = a)} = delete s a",
                    "goal_id": "3",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "delete_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "4",
                        "2"
                    ],
                    "goal_id": "5",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "0",
                        "1"
                    ],
                    "goal_id": "6",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "theorem": "sum_delete"
                },
                {
                    "goal": "{x. x ∈ s ∧ x = a} = {a}",
                    "goal_id": "7",
                    "method_name": "cut"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "7",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "7",
                        "5"
                    ],
                    "goal_id": "8",
                    "method_name": "rewrite_fact_with_prev"
                },
                {
                    "fact_ids": [
                        "8"
                    ],
                    "goal_id": "9",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "sum_sing"
                },
                {
                    "fact_ids": [
                        "9"
                    ],
                    "goal_id": "10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "6"
                    ],
                    "goal_id": "10",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "10",
                    "method_name": "real_norm"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "'a",
                "f": "'a ⇒ real",
                "s": "'a set",
                "y": "real"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_le_included",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "finite t",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite t ⊢ finite t"
                },
                {
                    "args": "∀y. y ∈ t ⟶ 0 ≤ g y",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀y. y ∈ t ⟶ 0 ≤ g y ⊢ ∀y. y ∈ t ⟶ 0 ≤ g y"
                },
                {
                    "args": "∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y)",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y)"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x. x ∈ s ⟶ f x ≤ sum ({x1. x1 ∈ t ∧ i x1 = x}) g"
                },
                {
                    "args": "x, 'a",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "4.2",
                    "prevs": [
                        "3",
                        "4.1"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y"
                },
                {
                    "args": "y, 'b",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "y ∈ t ∧ i y = x ∧ f x ≤ g y",
                    "id": "4.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y ∈ t ∧ i y = x ∧ f x ≤ g y ⊢ y ∈ t ∧ i y = x ∧ f x ≤ g y"
                },
                {
                    "args": "conjD1",
                    "id": "4.5",
                    "prevs": [
                        "4.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "y ∈ t ∧ i y = x ∧ f x ≤ g y ⊢ y ∈ t"
                },
                {
                    "args": "conjD2",
                    "id": "4.6",
                    "prevs": [
                        "4.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "y ∈ t ∧ i y = x ∧ f x ≤ g y ⊢ i y = x ∧ f x ≤ g y"
                },
                {
                    "args": "conjD1",
                    "id": "4.7",
                    "prevs": [
                        "4.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "y ∈ t ∧ i y = x ∧ f x ≤ g y ⊢ i y = x"
                },
                {
                    "args": "conjD2",
                    "id": "4.8",
                    "prevs": [
                        "4.6"
                    ],
                    "rule": "apply_theorem",
                    "th": "y ∈ t ∧ i y = x ∧ f x ≤ g y ⊢ f x ≤ g y"
                },
                {
                    "args": "sum_sing, f x ≤ sum ({y}) g",
                    "id": "4.9",
                    "prevs": [
                        "4.8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ f x ≤ sum ({y}) g"
                },
                {
                    "args": "finite_restrict, {P: λx1. i x1 = x, s: t}",
                    "id": "4.10",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ finite ({x1. x1 ∈ t ∧ i x1 = x})"
                },
                {
                    "args": "",
                    "id": "4.11",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. x1 = y ∨ x1 ∈ ∅ ⟶ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "x1, 'b",
                    "id": "4.11.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 = y ∨ x1 ∈ ∅",
                    "id": "4.11.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 = y ∨ x1 ∈ ∅ ⊢ x1 = y ∨ x1 ∈ ∅"
                },
                {
                    "args": "",
                    "id": "4.11.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, x ∈ s, x1 = y ∨ x1 ∈ ∅, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ x1 = y ⟶ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "x1 = y",
                    "id": "4.11.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 = y ⊢ x1 = y"
                },
                {
                    "args": "x1 ∈ t",
                    "id": "4.11.2.1",
                    "prevs": [
                        "4.11.2.0",
                        "4.5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, x1 = y, x ∈ s, x1 = y ∨ x1 ∈ ∅, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ x1 ∈ t"
                },
                {
                    "args": "i x1 = x",
                    "id": "4.11.2.2",
                    "prevs": [
                        "4.11.2.0",
                        "4.7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, finite t, x1 = y, x ∈ s, x1 = y ∨ x1 ∈ ∅, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ i x1 = x"
                },
                {
                    "args": "conjI",
                    "id": "4.11.2.3",
                    "prevs": [
                        "4.11.2.1",
                        "4.11.2.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x1 = y, x ∈ s, x1 = y ∨ x1 ∈ ∅, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "",
                    "id": "4.11.2.4",
                    "prevs": [
                        "4.11.2.0",
                        "4.11.2.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, x ∈ s, x1 = y ∨ x1 ∈ ∅, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ x1 = y ⟶ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "",
                    "id": "4.11.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, x ∈ s, x1 = y ∨ x1 ∈ ∅, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ x1 ∈ ∅ ⟶ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "x1 ∈ ∅",
                    "id": "4.11.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ ∅ ⊢ x1 ∈ ∅"
                },
                {
                    "args": "member_empty, x1 ∈ t ∧ i x1 = x",
                    "id": "4.11.3.1",
                    "prevs": [
                        "4.11.3.0"
                    ],
                    "rule": "resolve_theorem",
                    "th": "x1 ∈ ∅ ⊢ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "",
                    "id": "4.11.3.2",
                    "prevs": [
                        "4.11.3.0",
                        "4.11.3.1"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, x ∈ s, x1 = y ∨ x1 ∈ ∅, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ x1 ∈ ∅ ⟶ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "disjE",
                    "id": "4.11.4",
                    "prevs": [
                        "4.11.1",
                        "4.11.2",
                        "4.11.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ s, x1 = y ∨ x1 ∈ ∅, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "",
                    "id": "4.11.5",
                    "prevs": [
                        "4.11.0",
                        "4.11.1",
                        "4.11.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. x1 = y ∨ x1 ∈ ∅ ⟶ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "member_insert, ∀x1. x1 ∈ {y} ⟶ x1 ∈ t ∧ i x1 = x",
                    "id": "4.12",
                    "prevs": [
                        "4.11"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. x1 ∈ {y} ⟶ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "member_collect, ∀x1. x1 ∈ {y} ⟶ x1 ∈ {x2. x2 ∈ t ∧ i x2 = x}",
                    "id": "4.13",
                    "prevs": [
                        "4.12"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. x1 ∈ {y} ⟶ x1 ∈ {x2. x2 ∈ t ∧ i x2 = x}"
                },
                {
                    "args": "subsetI",
                    "id": "4.14",
                    "prevs": [
                        "4.13"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ {y} ⊆ {x1. x1 ∈ t ∧ i x1 = x}"
                },
                {
                    "args": "",
                    "id": "4.15",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. (x1 ∈ t ∧ i x1 = x) ∧ ¬(x1 ∈ {y}) ⟶ 0 ≤ g x1"
                },
                {
                    "args": "x1, 'b",
                    "id": "4.15.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "(x1 ∈ t ∧ i x1 = x) ∧ ¬(x1 ∈ {y})",
                    "id": "4.15.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(x1 ∈ t ∧ i x1 = x) ∧ ¬(x1 ∈ {y}) ⊢ (x1 ∈ t ∧ i x1 = x) ∧ ¬(x1 ∈ {y})"
                },
                {
                    "args": "conjD1",
                    "id": "4.15.2",
                    "prevs": [
                        "4.15.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x1 ∈ t ∧ i x1 = x) ∧ ¬(x1 ∈ {y}) ⊢ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "conjD1",
                    "id": "4.15.3",
                    "prevs": [
                        "4.15.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "(x1 ∈ t ∧ i x1 = x) ∧ ¬(x1 ∈ {y}) ⊢ x1 ∈ t"
                },
                {
                    "args": "x1",
                    "id": "4.15.4",
                    "prevs": [
                        "2",
                        "4.15.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, (x1 ∈ t ∧ i x1 = x) ∧ ¬(x1 ∈ {y}), ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ 0 ≤ g x1"
                },
                {
                    "args": "",
                    "id": "4.15.5",
                    "prevs": [
                        "4.15.0",
                        "4.15.1",
                        "4.15.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. (x1 ∈ t ∧ i x1 = x) ∧ ¬(x1 ∈ {y}) ⟶ 0 ≤ g x1"
                },
                {
                    "args": "member_collect, ∀x1. x1 ∈ {x2. x2 ∈ t ∧ i x2 = x} ∧ ¬(x1 ∈ {y}) ⟶ 0 ≤ g x1",
                    "id": "4.16",
                    "prevs": [
                        "4.15"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. x1 ∈ {x2. x2 ∈ t ∧ i x2 = x} ∧ ¬(x1 ∈ {y}) ⟶ 0 ≤ g x1"
                },
                {
                    "args": "member_collect, ∀x1. x1 ∈ {x2. x2 ∈ {x3. x3 ∈ t ∧ i x3 = x} ∧ ¬(x2 ∈ {y})} ⟶ 0 ≤ g x1",
                    "id": "4.17",
                    "prevs": [
                        "4.16"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. x1 ∈ {x2. x2 ∈ {x3. x3 ∈ t ∧ i x3 = x} ∧ ¬(x2 ∈ {y})} ⟶ 0 ≤ g x1"
                },
                {
                    "args": "diff_def, ∀x1. x1 ∈ diff ({x2. x2 ∈ t ∧ i x2 = x}) ({y}) ⟶ 0 ≤ g x1",
                    "id": "4.18",
                    "prevs": [
                        "4.17"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. x1 ∈ diff ({x2. x2 ∈ t ∧ i x2 = x}) ({y}) ⟶ 0 ≤ g x1"
                },
                {
                    "args": "sum_subset_simple",
                    "id": "4.19",
                    "prevs": [
                        "4.10",
                        "4.14",
                        "4.18"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ sum ({y}) g ≤ sum ({x1. x1 ∈ t ∧ i x1 = x}) g"
                },
                {
                    "args": "real_le_trans",
                    "id": "4.20",
                    "prevs": [
                        "4.9",
                        "4.19"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ f x ≤ sum ({x1. x1 ∈ t ∧ i x1 = x}) g"
                },
                {
                    "args": "∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y",
                    "id": "4.21",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.3",
                        "4.4",
                        "4.20"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x. x ∈ s ⟶ f x ≤ sum ({x1. x1 ∈ t ∧ i x1 = x}) g"
                },
                {
                    "args": "sum_le",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ sum s f ≤ sum s (λx. sum ({x1. x1 ∈ t ∧ i x1 = x}) g)"
                },
                {
                    "args": "finite_image, {f: i, s: t}",
                    "id": "6",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ finite (image i t)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x. x ∈ s ⟶ (∃x1. x = i x1 ∧ x1 ∈ t)"
                },
                {
                    "args": "x, 'a",
                    "id": "7.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s",
                    "id": "7.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ⊢ x ∈ s"
                },
                {
                    "args": "",
                    "id": "7.2",
                    "prevs": [
                        "3",
                        "7.1"
                    ],
                    "rule": "apply_fact",
                    "th": "x ∈ s, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y"
                },
                {
                    "args": "y, 'b",
                    "id": "7.3",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "y ∈ t ∧ i y = x ∧ f x ≤ g y",
                    "id": "7.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y ∈ t ∧ i y = x ∧ f x ≤ g y ⊢ y ∈ t ∧ i y = x ∧ f x ≤ g y"
                },
                {
                    "args": "conj_assoc",
                    "id": "7.5",
                    "prevs": [
                        "7.4"
                    ],
                    "rule": "rewrite_fact",
                    "th": "y ∈ t ∧ i y = x ∧ f x ≤ g y ⊢ (y ∈ t ∧ i y = x) ∧ f x ≤ g y"
                },
                {
                    "args": "conjD1",
                    "id": "7.6",
                    "prevs": [
                        "7.5"
                    ],
                    "rule": "apply_theorem",
                    "th": "y ∈ t ∧ i y = x ∧ f x ≤ g y ⊢ y ∈ t ∧ i y = x"
                },
                {
                    "args": "eq_sym_eq, y ∈ t ∧ x = i y",
                    "id": "7.7",
                    "prevs": [
                        "7.6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ y ∈ t ∧ x = i y"
                },
                {
                    "args": "conj_comm, x = i y ∧ y ∈ t",
                    "id": "7.8",
                    "prevs": [
                        "7.7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ x = i y ∧ y ∈ t"
                },
                {
                    "args": "exI, {P: λx1. x = i x1 ∧ x1 ∈ t, a: y}",
                    "id": "7.9",
                    "prevs": [
                        "7.8"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, x ∈ s, ∀y. y ∈ t ⟶ 0 ≤ g y, y ∈ t ∧ i y = x ∧ f x ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∃a1. x = i a1 ∧ a1 ∈ t"
                },
                {
                    "args": "∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y",
                    "id": "7.10",
                    "prevs": [
                        "7.0",
                        "7.1",
                        "7.2",
                        "7.3",
                        "7.4",
                        "7.9"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x. x ∈ s ⟶ (∃x1. x = i x1 ∧ x1 ∈ t)"
                },
                {
                    "args": "in_image, ∀x. x ∈ s ⟶ x ∈ image i t",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x. x ∈ s ⟶ x ∈ image i t"
                },
                {
                    "args": "subsetI",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ s ⊆ image i t"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x. x ∈ diff (image i t) s ⟶ 0 ≤ sum ({x1. x1 ∈ t ∧ i x1 = x}) g"
                },
                {
                    "args": "x, 'a",
                    "id": "10.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ diff (image i t) s",
                    "id": "10.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ diff (image i t) s ⊢ x ∈ diff (image i t) s"
                },
                {
                    "args": "",
                    "id": "10.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, finite t, x ∈ diff (image i t) s, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. x1 ∈ t ∧ i x1 = x ⟶ 0 ≤ g x1"
                },
                {
                    "args": "x1, 'b",
                    "id": "10.2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x1 ∈ t ∧ i x1 = x",
                    "id": "10.2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x1 ∈ t ∧ i x1 = x ⊢ x1 ∈ t ∧ i x1 = x"
                },
                {
                    "args": "conjD1",
                    "id": "10.2.2",
                    "prevs": [
                        "10.2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x1 ∈ t ∧ i x1 = x ⊢ x1 ∈ t"
                },
                {
                    "args": "x1",
                    "id": "10.2.3",
                    "prevs": [
                        "2",
                        "10.2.2"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, finite t, x ∈ diff (image i t) s, x1 ∈ t ∧ i x1 = x, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ 0 ≤ g x1"
                },
                {
                    "args": "",
                    "id": "10.2.4",
                    "prevs": [
                        "10.2.0",
                        "10.2.1",
                        "10.2.3"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, x ∈ diff (image i t) s, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. x1 ∈ t ∧ i x1 = x ⟶ 0 ≤ g x1"
                },
                {
                    "args": "member_collect, ∀x1. x1 ∈ {x2. x2 ∈ t ∧ i x2 = x} ⟶ 0 ≤ g x1",
                    "id": "10.3",
                    "prevs": [
                        "10.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, x ∈ diff (image i t) s, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x1. x1 ∈ {x2. x2 ∈ t ∧ i x2 = x} ⟶ 0 ≤ g x1"
                },
                {
                    "args": "sum_pos_le",
                    "id": "10.4",
                    "prevs": [
                        "10.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, x ∈ diff (image i t) s, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ 0 ≤ sum ({x1. x1 ∈ t ∧ i x1 = x}) g"
                },
                {
                    "args": "",
                    "id": "10.5",
                    "prevs": [
                        "10.0",
                        "10.1",
                        "10.4"
                    ],
                    "rule": "intros",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ ∀x. x ∈ diff (image i t) s ⟶ 0 ≤ sum ({x1. x1 ∈ t ∧ i x1 = x}) g"
                },
                {
                    "args": "sum_subset_simple",
                    "id": "11",
                    "prevs": [
                        "6",
                        "9",
                        "10"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ sum s (λx. sum ({x1. x1 ∈ t ∧ i x1 = x}) g) ≤ sum (image i t) (λx. sum ({x1. x1 ∈ t ∧ i x1 = x}) g)"
                },
                {
                    "args": "real_le_trans",
                    "id": "12",
                    "prevs": [
                        "5",
                        "11"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ sum s f ≤ sum (image i t) (λy. sum ({x. x ∈ t ∧ i x = y}) g)"
                },
                {
                    "args": "sum_image_gen, {f: i, g: g, s: t}",
                    "id": "13",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ sum t g = sum (image i t) (λy. sum ({x. x ∈ t ∧ i x = y}) g)"
                },
                {
                    "args": "eq_sym_eq, sum (image i t) (λy. sum ({x. x ∈ t ∧ i x = y}) g) = sum t g",
                    "id": "14",
                    "prevs": [
                        "13"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ sum (image i t) (λy. sum ({x. x ∈ t ∧ i x = y}) g) = sum t g"
                },
                {
                    "args": "disjI2, {A: sum (image i t) (λy. sum ({x. x ∈ t ∧ i x = y}) g) < sum t g, B: sum (image i t) (λy. sum ({x. x ∈ t ∧ i x = y}) g) = sum t g}",
                    "id": "15",
                    "prevs": [
                        "14"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ sum (image i t) (λy. sum ({x. x ∈ t ∧ i x = y}) g) < sum t g ∨ sum (image i t) (λy. sum ({x. x ∈ t ∧ i x = y}) g) = sum t g"
                },
                {
                    "args": "real_le_lt, sum (image i t) (λy. sum ({x. x ∈ t ∧ i x = y}) g) ≤ sum t g",
                    "id": "16",
                    "prevs": [
                        "15"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ sum (image i t) (λy. sum ({x. x ∈ t ∧ i x = y}) g) ≤ sum t g"
                },
                {
                    "args": "real_le_trans",
                    "id": "17",
                    "prevs": [
                        "12",
                        "16"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, finite t, ∀y. y ∈ t ⟶ 0 ≤ g y, ∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y) ⊢ sum s f ≤ sum t g"
                },
                {
                    "args": "",
                    "id": "18",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "17"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ finite t ⟶ (∀y. y ∈ t ⟶ 0 ≤ g y) ⟶ (∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y)) ⟶ sum s f ≤ sum t g"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ finite t ",
                "   ⟶ (∀y. y ∈ t ⟶ 0 ≤ g y) ",
                "      ⟶ (∀x. x ∈ s ⟶ (∃y. y ∈ t ∧ i y = x ∧ f x ≤ g y)) ⟶ sum s f ≤ sum t g"
            ],
            "steps": [
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "param_y": "sum (image (i) t) (%y. sum {x. x ∈ t ∧ i x = y} g)",
                    "theorem": "real_le_trans"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "param_y": "sum s (%y. sum {x. x ∈ t ∧ i x = y} g)",
                    "theorem": "real_le_trans"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_le"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "3",
                        "4.1"
                    ],
                    "goal_id": "4.2",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.3",
                    "method_name": "exists_elim",
                    "names": "y"
                },
                {
                    "goal_id": "4.5",
                    "method_name": "apply_backward_step",
                    "param_y": "sum {y} g",
                    "theorem": "real_le_trans"
                },
                {
                    "fact_ids": [
                        "4.4"
                    ],
                    "goal_id": "4.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "4.4"
                    ],
                    "goal_id": "4.6",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "fact_ids": [
                        "4.6"
                    ],
                    "goal_id": "4.7",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "4.6"
                    ],
                    "goal_id": "4.8",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "4.9",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_sing"
                },
                {
                    "goal_id": "4.10",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_subset_simple"
                },
                {
                    "goal_id": "4.10",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_restrict"
                },
                {
                    "goal_id": "4.11",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "4.11",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "4.11",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_insert"
                },
                {
                    "goal_id": "4.11",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "4.11.1"
                    ],
                    "goal_id": "4.11.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "4.11.2",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "4.11.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "4.11.2.0"
                    ],
                    "goal_id": "4.11.2.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "4.11.2.0"
                    ],
                    "goal_id": "4.11.2.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4.11.3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "4.11.3.0"
                    ],
                    "goal_id": "4.11.3.1",
                    "method_name": "apply_resolve_step",
                    "theorem": "member_empty"
                },
                {
                    "goal_id": "4.15",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "diff_def"
                },
                {
                    "goal_id": "4.15",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "4.15",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "4.15",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "4.15.1"
                    ],
                    "goal_id": "4.15.2",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "4.15.2"
                    ],
                    "goal_id": "4.15.3",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "4.15.4",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "6",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_subset_simple"
                },
                {
                    "goal_id": "6",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_image"
                },
                {
                    "goal_id": "7",
                    "method_name": "apply_backward_step",
                    "theorem": "subsetI"
                },
                {
                    "goal_id": "7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "goal_id": "7",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "3",
                        "7.1"
                    ],
                    "goal_id": "7.2",
                    "method_name": "apply_fact"
                },
                {
                    "fact_ids": [
                        "7.2"
                    ],
                    "goal_id": "7.3",
                    "method_name": "exists_elim",
                    "names": "y"
                },
                {
                    "goal_id": "7.5",
                    "method_name": "inst_exists_goal",
                    "s": "y"
                },
                {
                    "fact_ids": [
                        "7.4"
                    ],
                    "goal_id": "7.5",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "conj_assoc"
                },
                {
                    "fact_ids": [
                        "7.5"
                    ],
                    "goal_id": "7.6",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "goal_id": "7.7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "conj_comm"
                },
                {
                    "goal_id": "7.7",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal_id": "10",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "goal_id": "10.2",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_pos_le"
                },
                {
                    "goal_id": "10.2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_collect"
                },
                {
                    "goal_id": "10.2",
                    "method_name": "introduction",
                    "names": "x1"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "10.2.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "10.2.1"
                    ],
                    "goal_id": "10.2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "goal_id": "13",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_le_lt"
                },
                {
                    "goal_id": "13",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI2"
                },
                {
                    "goal_id": "13",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "eq_sym_eq"
                },
                {
                    "goal_id": "13",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_image_gen"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "g": "'b ⇒ real",
                "i": "'b ⇒ 'a",
                "s": "'a set",
                "t": "'b set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_image_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ 0 ≤ g (f x)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ 0 ≤ g (f x) ⊢ ∀x. x ∈ s ⟶ 0 ≤ g (f x)"
                },
                {
                    "args": "finite_image, {f: f, s: s}",
                    "id": "2",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, ∀x. x ∈ s ⟶ 0 ≤ g (f x) ⊢ finite (image f s)"
                },
                {
                    "args": "comp_fun_eval, ∀y. y ∈ s ⟶ 0 ≤ (g ∘ f) y",
                    "id": "3",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ∀x. x ∈ s ⟶ 0 ≤ g (f x) ⊢ ∀y. y ∈ s ⟶ 0 ≤ (g ∘ f) y"
                },
                {
                    "args": "",
                    "id": "4",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ∀x. x ∈ s ⟶ 0 ≤ g (f x) ⊢ ∀x. x ∈ image f s ⟶ (∃y. y ∈ s ∧ f y = x ∧ g x ≤ (g ∘ f) y)"
                },
                {
                    "args": "x, 'b",
                    "id": "4.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ image f s",
                    "id": "4.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ image f s ⊢ x ∈ image f s"
                },
                {
                    "args": "in_image",
                    "id": "4.2",
                    "prevs": [
                        "4.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "x ∈ image f s ⊢ ∃x1. x = f x1 ∧ x1 ∈ s"
                },
                {
                    "args": "x1, 'a",
                    "id": "4.3",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x1"
                },
                {
                    "args": "x = f x1 ∧ x1 ∈ s",
                    "id": "4.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x = f x1 ∧ x1 ∈ s ⊢ x = f x1 ∧ x1 ∈ s"
                },
                {
                    "args": "conjD1",
                    "id": "4.5",
                    "prevs": [
                        "4.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = f x1 ∧ x1 ∈ s ⊢ x = f x1"
                },
                {
                    "args": "conjD2",
                    "id": "4.6",
                    "prevs": [
                        "4.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x = f x1 ∧ x1 ∈ s ⊢ x1 ∈ s"
                },
                {
                    "args": "f x1 = x",
                    "id": "4.7",
                    "prevs": [
                        "4.5"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "x = f x1 ∧ x1 ∈ s ⊢ f x1 = x"
                },
                {
                    "args": "real_le_refl, {x: g x}",
                    "id": "4.8",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ g x ≤ g x"
                },
                {
                    "args": "g x ≤ g (f x1)",
                    "id": "4.9",
                    "prevs": [
                        "4.7",
                        "4.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "finite s, x ∈ image f s, x = f x1 ∧ x1 ∈ s, ∀x. x ∈ s ⟶ 0 ≤ g (f x) ⊢ g x ≤ g (f x1)"
                },
                {
                    "args": "comp_fun_eval, g x ≤ (g ∘ f) x1",
                    "id": "4.10",
                    "prevs": [
                        "4.9"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, x ∈ image f s, x = f x1 ∧ x1 ∈ s, ∀x. x ∈ s ⟶ 0 ≤ g (f x) ⊢ g x ≤ (g ∘ f) x1"
                },
                {
                    "args": "conjI",
                    "id": "4.11",
                    "prevs": [
                        "4.7",
                        "4.10"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ image f s, x = f x1 ∧ x1 ∈ s, ∀x. x ∈ s ⟶ 0 ≤ g (f x) ⊢ f x1 = x ∧ g x ≤ (g ∘ f) x1"
                },
                {
                    "args": "conjI",
                    "id": "4.12",
                    "prevs": [
                        "4.6",
                        "4.11"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, x ∈ image f s, x = f x1 ∧ x1 ∈ s, ∀x. x ∈ s ⟶ 0 ≤ g (f x) ⊢ x1 ∈ s ∧ f x1 = x ∧ g x ≤ (g ∘ f) x1"
                },
                {
                    "args": "exI, {P: λy. y ∈ s ∧ f y = x ∧ g x ≤ (g ∘ f) y, a: x1}",
                    "id": "4.13",
                    "prevs": [
                        "4.12"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite s, x ∈ image f s, x = f x1 ∧ x1 ∈ s, ∀x. x ∈ s ⟶ 0 ≤ g (f x) ⊢ ∃a1. a1 ∈ s ∧ f a1 = x ∧ g x ≤ (g ∘ f) a1"
                },
                {
                    "args": "∃x1. x = f x1 ∧ x1 ∈ s",
                    "id": "4.14",
                    "prevs": [
                        "4.0",
                        "4.1",
                        "4.2",
                        "4.3",
                        "4.4",
                        "4.13"
                    ],
                    "rule": "intros",
                    "th": "finite s, ∀x. x ∈ s ⟶ 0 ≤ g (f x) ⊢ ∀x. x ∈ image f s ⟶ (∃y. y ∈ s ∧ f y = x ∧ g x ≤ (g ∘ f) y)"
                },
                {
                    "args": "sum_le_included",
                    "id": "5",
                    "prevs": [
                        "2",
                        "0",
                        "3",
                        "4"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ∀x. x ∈ s ⟶ 0 ≤ g (f x) ⊢ sum (image f s) g ≤ sum s (g ∘ f)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ (∀x. x ∈ s ⟶ 0 ≤ g (f x)) ⟶ sum (image f s) g ≤ sum s (g ∘ f)"
                }
            ],
            "prop": "finite s ⟶ (∀x. x ∈ s ⟶ 0 ≤ g (f x)) ⟶ sum (image f s) g ≤ sum s (g ∘ f)",
            "steps": [
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "param_i": "f",
                    "theorem": "sum_le_included"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_image"
                },
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "comp_fun_eval"
                },
                {
                    "goal_id": "4",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "4.1"
                    ],
                    "goal_id": "4.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "in_image"
                },
                {
                    "fact_ids": [
                        "4.2"
                    ],
                    "goal_id": "4.3",
                    "method_name": "exists_elim",
                    "names": "x1"
                },
                {
                    "goal_id": "4.5",
                    "method_name": "inst_exists_goal",
                    "s": "x1"
                },
                {
                    "fact_ids": [
                        "4.4"
                    ],
                    "goal_id": "4.5",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "4.4"
                    ],
                    "goal_id": "4.6",
                    "method_name": "apply_forward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "4.7",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "goal_id": "4.7",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                },
                {
                    "fact_ids": [
                        "4.5"
                    ],
                    "goal_id": "4.7",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "comp_fun_eval"
                },
                {
                    "fact_ids": [
                        "4.7"
                    ],
                    "goal_id": "4.8",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "4.8",
                    "method_name": "apply_backward_step",
                    "theorem": "real_le_refl"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ 'b",
                "g": "'b ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_closed",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "P 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "P 0 ⊢ P 0"
                },
                {
                    "args": "∀x. ∀y. P x ⟶ P y ⟶ P (x + y)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ ∀x. ∀y. P x ⟶ P y ⟶ P (x + y)"
                },
                {
                    "args": "∀a. a ∈ s ⟶ P (f a)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀a. a ∈ s ⟶ P (f a) ⊢ ∀a. a ∈ s ⟶ P (f a)"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "neutral_real_add, P (neutral plus)",
                    "id": "4",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (neutral plus)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ ∀x. x ∈ s ∧ ¬(f x = 0) ⟶ P (f x)"
                },
                {
                    "args": "x, 'a",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "x ∈ s ∧ ¬(f x = 0)",
                    "id": "5.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ s ∧ ¬(f x = 0) ⊢ x ∈ s ∧ ¬(f x = 0)"
                },
                {
                    "args": "conjD1",
                    "id": "5.2",
                    "prevs": [
                        "5.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "x ∈ s ∧ ¬(f x = 0) ⊢ x ∈ s"
                },
                {
                    "args": "x",
                    "id": "5.3",
                    "prevs": [
                        "2",
                        "5.2"
                    ],
                    "rule": "apply_fact_for",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), x ∈ s ∧ ¬(f x = 0), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (f x)"
                },
                {
                    "args": "",
                    "id": "5.4",
                    "prevs": [
                        "5.0",
                        "5.1",
                        "5.3"
                    ],
                    "rule": "intros",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ ∀x. x ∈ s ∧ ¬(f x = 0) ⟶ P (f x)"
                },
                {
                    "args": "neutral_real_add, ∀x. x ∈ s ∧ ¬(f x = neutral plus) ⟶ P (f x)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ ∀x. x ∈ s ∧ ¬(f x = neutral plus) ⟶ P (f x)"
                },
                {
                    "args": "iterate_closed",
                    "id": "7",
                    "prevs": [
                        "3",
                        "4",
                        "1",
                        "6"
                    ],
                    "rule": "apply_theorem",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (iterate plus s f)"
                },
                {
                    "args": "sum_def, P (sum s f)",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "P 0, ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (sum s f)"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "8"
                    ],
                    "rule": "intros",
                    "th": "⊢ P 0 ⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (x + y)) ⟶ (∀a. a ∈ s ⟶ P (f a)) ⟶ P (sum s f)"
                }
            ],
            "prop": "P 0 ⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (x + y)) ⟶ (∀a. a ∈ s ⟶ P (f a)) ⟶ P (sum s f)",
            "steps": [
                {
                    "goal_id": "3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_closed"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "5",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction",
                    "names": "x"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "5.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "5.1"
                    ],
                    "goal_id": "5.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "real ⇒ bool",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_related",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "R 0 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "R 0 0 ⊢ R 0 0"
                },
                {
                    "args": "∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)"
                },
                {
                    "args": "finite s",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "∀x. x ∈ s ⟶ R (f x) (g x)",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ R (f x) (g x) ⊢ ∀x. x ∈ s ⟶ R (f x) (g x)"
                },
                {
                    "args": "iterate_related, {R: R, f: f, g: g, op: (plus::real ⇒ real ⇒ real), s: s}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real) ⟶ R (neutral plus) (neutral plus) ⟶ (∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (x1 + y1) (x2 + y2)) ⟶ finite s ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (iterate plus s f) (iterate plus s g)"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "5",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "neutral_real_add, R (neutral plus) (neutral plus)",
                    "id": "6",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (neutral plus) (neutral plus)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (x1 + y1) (x2 + y2)"
                },
                {
                    "args": "m, real",
                    "id": "7.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR m"
                },
                {
                    "args": "n, real",
                    "id": "7.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR n"
                },
                {
                    "args": "m1, real",
                    "id": "7.2",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR m1"
                },
                {
                    "args": "n1, real",
                    "id": "7.3",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR n1"
                },
                {
                    "args": "R m m1",
                    "id": "7.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "R m m1 ⊢ R m m1"
                },
                {
                    "args": "R n n1",
                    "id": "7.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "R n n1 ⊢ R n n1"
                },
                {
                    "args": "m, m1, n, n1",
                    "id": "7.6",
                    "prevs": [
                        "1",
                        "7.4",
                        "7.5"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, R m m1, R n n1, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (m + n) (m1 + n1)"
                },
                {
                    "args": "",
                    "id": "7.7",
                    "prevs": [
                        "7.0",
                        "7.1",
                        "7.2",
                        "7.3",
                        "7.4",
                        "7.5",
                        "7.6"
                    ],
                    "rule": "intros",
                    "th": "finite s, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀m. ∀n. ∀m1. ∀n1. R m m1 ⟶ R n n1 ⟶ R (m + n) (m1 + n1)"
                },
                {
                    "args": "",
                    "id": "8",
                    "prevs": [
                        "4",
                        "5",
                        "6",
                        "7",
                        "2",
                        "3"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (iterate plus s f) (iterate plus s g)"
                },
                {
                    "args": "sum_def, R (sum s f) (sum s g)",
                    "id": "9",
                    "prevs": [
                        "8"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, R 0 0, ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (sum s f) (sum s g)"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "9"
                    ],
                    "rule": "intros",
                    "th": "⊢ R 0 0 ⟶ (∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)) ⟶ finite s ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (sum s f) (sum s g)"
                }
            ],
            "prop": [
                "R 0 0 ",
                "⟶ (∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)) ",
                "   ⟶ finite s ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (sum s f) (sum s g)"
            ],
            "steps": [
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_forward_step",
                    "param_R": "R",
                    "param_f": "f",
                    "param_g": "g",
                    "param_op": "(plus::real=>real=>real)",
                    "param_s": "s",
                    "theorem": "iterate_related"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                },
                {
                    "goal_id": "6",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "7",
                    "method_name": "introduction",
                    "names": "m,n,m1,n1"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "7.6",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "real ⇒ real ⇒ bool",
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_closed_nonempty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀x. ∀y. P x ⟶ P y ⟶ P (x + y)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ ∀x. ∀y. P x ⟶ P y ⟶ P (x + y)"
                },
                {
                    "args": "∀a. a ∈ s ⟶ P (f a)",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀a. a ∈ s ⟶ P (f a) ⊢ ∀a. a ∈ s ⟶ P (f a)"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_closed_nonempty",
                    "id": "5",
                    "prevs": [
                        "4",
                        "2",
                        "0",
                        "1",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "finite s, ¬(s = ∅), ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (iterate plus s f)"
                },
                {
                    "args": "sum_def, P (sum s f)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(s = ∅), ∀a. a ∈ s ⟶ P (f a), ∀x. ∀y. P x ⟶ P y ⟶ P (x + y) ⊢ P (sum s f)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "6"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ ¬(s = ∅) ⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (x + y)) ⟶ (∀a. a ∈ s ⟶ P (f a)) ⟶ P (sum s f)"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ ¬(s = ∅) ⟶ (∀x. ∀y. P x ⟶ P y ⟶ P (x + y)) ⟶ (∀a. a ∈ s ⟶ P (f a)) ⟶ P (sum s f)"
            ],
            "steps": [
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_closed_nonempty"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "P": "real ⇒ bool",
                "f": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_related_nonempty",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)"
                },
                {
                    "args": "finite s",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "¬(s = ∅)",
                    "id": "2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(s = ∅) ⊢ ¬(s = ∅)"
                },
                {
                    "args": "∀x. x ∈ s ⟶ R (f x) (g x)",
                    "id": "3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀x. x ∈ s ⟶ R (f x) (g x) ⊢ ∀x. x ∈ s ⟶ R (f x) (g x)"
                },
                {
                    "args": "iterate_related_nonempty, {R: R, f: f, g: g, op: (plus::real ⇒ real ⇒ real), s: s}",
                    "id": "4",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real) ⟶ (∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (x1 + y1) (x2 + y2)) ⟶ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (iterate plus s f) (iterate plus s g)"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "5",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀x1. ∀y1. ∀x2. ∀y2. R x1 x2 ⟶ R y1 y2 ⟶ R (x1 + y1) (x2 + y2)"
                },
                {
                    "args": "m, real",
                    "id": "6.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR m"
                },
                {
                    "args": "n, real",
                    "id": "6.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR n"
                },
                {
                    "args": "m1, real",
                    "id": "6.2",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR m1"
                },
                {
                    "args": "n1, real",
                    "id": "6.3",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR n1"
                },
                {
                    "args": "R m m1",
                    "id": "6.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "R m m1 ⊢ R m m1"
                },
                {
                    "args": "R n n1",
                    "id": "6.5",
                    "prevs": [],
                    "rule": "assume",
                    "th": "R n n1 ⊢ R n n1"
                },
                {
                    "args": "m, m1, n, n1",
                    "id": "6.6",
                    "prevs": [
                        "0",
                        "6.4",
                        "6.5"
                    ],
                    "rule": "apply_fact_for",
                    "th": "finite s, R m m1, R n n1, ¬(s = ∅), ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (m + n) (m1 + n1)"
                },
                {
                    "args": "",
                    "id": "6.7",
                    "prevs": [
                        "6.0",
                        "6.1",
                        "6.2",
                        "6.3",
                        "6.4",
                        "6.5",
                        "6.6"
                    ],
                    "rule": "intros",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ ∀m. ∀n. ∀m1. ∀n1. R m m1 ⟶ R n n1 ⟶ R (m + n) (m1 + n1)"
                },
                {
                    "args": "",
                    "id": "7",
                    "prevs": [
                        "4",
                        "5",
                        "6",
                        "1",
                        "2",
                        "3"
                    ],
                    "rule": "apply_fact",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (iterate plus s f) (iterate plus s g)"
                },
                {
                    "args": "sum_def, R (sum s f) (sum s g)",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s, ¬(s = ∅), ∀x. x ∈ s ⟶ R (f x) (g x), ∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1) ⊢ R (sum s f) (sum s g)"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [
                        "0",
                        "1",
                        "2",
                        "3",
                        "8"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)) ⟶ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (sum s f) (sum s g)"
                }
            ],
            "prop": [
                "(∀m. ∀n. ∀m1. ∀n1. R m n ⟶ R m1 n1 ⟶ R (m + m1) (n + n1)) ",
                "⟶ finite s ⟶ ¬(s = ∅) ⟶ (∀x. x ∈ s ⟶ R (f x) (g x)) ⟶ R (sum s f) (sum s g)"
            ],
            "steps": [
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_forward_step",
                    "param_R": "R",
                    "param_f": "f",
                    "param_g": "g",
                    "param_op": "(plus::real=>real=>real)",
                    "param_s": "s",
                    "theorem": "iterate_related_nonempty"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                },
                {
                    "goal_id": "6",
                    "method_name": "introduction",
                    "names": "m,n,m1,n1"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "6.6",
                    "method_name": "apply_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "R": "real ⇒ real ⇒ bool",
                "f": "'a ⇒ real",
                "g": "'a ⇒ real",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "real_of_nat_sum_gen",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite ({i. i ∈ s ∧ ¬(f i = 0)})",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite ({i. i ∈ s ∧ ¬(f i = 0)}) ⊢ finite ({i. i ∈ s ∧ ¬(f i = 0)})"
                },
                {
                    "args": "real_of_nat_sum, {f: f, s: {x. x ∈ s ∧ ¬(f x = 0)}}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "finite ({i. i ∈ s ∧ ¬(f i = 0)}) ⊢ of_nat (nsum ({x. x ∈ s ∧ ¬(f x = 0)}) f) = sum ({x. x ∈ s ∧ ¬(f x = 0)}) (λx. of_nat (f x))"
                },
                {
                    "args": "real_of_nat_eq, of_nat (nsum ({x. x ∈ s ∧ ¬(f x = 0)}) f) = sum ({x. x ∈ s ∧ ¬((of_nat::nat ⇒ real) (f x) = of_nat 0)}) (λx. of_nat (f x))",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({i. i ∈ s ∧ ¬(f i = 0)}) ⊢ of_nat (nsum ({x. x ∈ s ∧ ¬(f x = 0)}) f) = sum ({x. x ∈ s ∧ ¬((of_nat::nat ⇒ real) (f x) = of_nat 0)}) (λx. of_nat (f x))"
                },
                {
                    "args": "real_zero_def, of_nat (nsum ({x. x ∈ s ∧ ¬(f x = 0)}) f) = sum ({x. x ∈ s ∧ ¬(of_nat (f x) = (0::real))}) (λx. of_nat (f x))",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({i. i ∈ s ∧ ¬(f i = 0)}) ⊢ of_nat (nsum ({x. x ∈ s ∧ ¬(f x = 0)}) f) = sum ({x. x ∈ s ∧ ¬(of_nat (f x) = (0::real))}) (λx. of_nat (f x))"
                },
                {
                    "args": "neutral_real_add, of_nat (nsum ({x. x ∈ s ∧ ¬(f x = 0)}) f) = sum ({x. x ∈ s ∧ ¬((of_nat::nat ⇒ real) (f x) = neutral plus)}) (λx. of_nat (f x))",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({i. i ∈ s ∧ ¬(f i = 0)}) ⊢ of_nat (nsum ({x. x ∈ s ∧ ¬(f x = 0)}) f) = sum ({x. x ∈ s ∧ ¬((of_nat::nat ⇒ real) (f x) = neutral plus)}) (λx. of_nat (f x))"
                },
                {
                    "args": "neutral_nat_add, of_nat (nsum ({x. x ∈ s ∧ ¬(f x = neutral plus)}) f) = sum ({x. x ∈ s ∧ ¬((of_nat::nat ⇒ real) (f x) = neutral plus)}) (λx. of_nat (f x))",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({i. i ∈ s ∧ ¬(f i = 0)}) ⊢ of_nat (nsum ({x. x ∈ s ∧ ¬(f x = neutral plus)}) f) = sum ({x. x ∈ s ∧ ¬((of_nat::nat ⇒ real) (f x) = neutral plus)}) (λx. of_nat (f x))"
                },
                {
                    "args": "support_def, of_nat (nsum (support plus f s) f) = sum (support plus (λx. (of_nat::nat ⇒ real) (f x)) s) (λx. of_nat (f x))",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite ({i. i ∈ s ∧ ¬(f i = 0)}) ⊢ of_nat (nsum (support plus f s) f) = sum (support plus (λx. (of_nat::nat ⇒ real) (f x)) s) (λx. of_nat (f x))"
                },
                {
                    "args": "nsum_support, of_nat (nsum s f) = sum (support plus (λx. (of_nat::nat ⇒ real) (f x)) s) (λx. of_nat (f x))",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite ({i. i ∈ s ∧ ¬(f i = 0)}) ⊢ of_nat (nsum s f) = sum (support plus (λx. (of_nat::nat ⇒ real) (f x)) s) (λx. of_nat (f x))"
                },
                {
                    "args": "sum_support, of_nat (nsum s f) = sum s (λx. of_nat (f x))",
                    "id": "8",
                    "prevs": [
                        "7"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "finite ({i. i ∈ s ∧ ¬(f i = 0)}) ⊢ of_nat (nsum s f) = sum s (λx. of_nat (f x))"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [
                        "0",
                        "8"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite ({i. i ∈ s ∧ ¬(f i = 0)}) ⟶ of_nat (nsum s f) = sum s (λx. of_nat (f x))"
                }
            ],
            "prop": "finite ({i. i ∈ s ∧ ¬(f i = 0)}) ⟶ of_nat (nsum s f) = sum s (λx. of_nat (f x))",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "sum_support"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "nsum_support"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "support_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_nat_add"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_zero_def"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "real_of_nat_eq"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "real_of_nat_sum"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ nat",
                "s": "'a set"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_add_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "sum_add, {f: f, g: g, s: {m..n}}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ sum ({m..n}) (λx. f x + g x) = sum ({m..n}) f + sum ({m..n}) g"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({m..n}) (λi. f i + g i) = sum ({m..n}) f + sum ({m..n}) g"
                }
            ],
            "prop": "sum ({m..n}) (λi. f i + g i) = sum ({m..n}) f + sum ({m..n}) g",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_add"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "g": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_sub_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "sum_sub, {f: f, g: g, s: {m..n}}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ sum ({m..n}) (λx. f x - g x) = sum ({m..n}) f - sum ({m..n}) g"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({m..n}) (λi. f i - g i) = sum ({m..n}) f - sum ({m..n}) g"
                }
            ],
            "prop": "sum ({m..n}) (λi. f i - g i) = sum ({m..n}) f - sum ({m..n}) g",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_sub"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "g": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_le_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ ∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i"
                },
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ ∀x. m ≤ x ∧ x ≤ n ⟶ f x ≤ g x"
                },
                {
                    "args": "i, nat",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR i"
                },
                {
                    "args": "m ≤ i ∧ i ≤ n",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ i ∧ i ≤ n ⊢ m ≤ i ∧ i ≤ n"
                },
                {
                    "args": "conjD1",
                    "id": "2.2",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ i ∧ i ≤ n ⊢ m ≤ i"
                },
                {
                    "args": "conjD2",
                    "id": "2.3",
                    "prevs": [
                        "2.1"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ i ∧ i ≤ n ⊢ i ≤ n"
                },
                {
                    "args": "i",
                    "id": "2.4",
                    "prevs": [
                        "0",
                        "2.2",
                        "2.3"
                    ],
                    "rule": "apply_fact_for",
                    "th": "m ≤ i ∧ i ≤ n, ∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ f i ≤ g i"
                },
                {
                    "args": "",
                    "id": "2.5",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.4"
                    ],
                    "rule": "intros",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ ∀i. m ≤ i ∧ i ≤ n ⟶ f i ≤ g i"
                },
                {
                    "args": "member_natseg, ∀x. x ∈ {m..n} ⟶ f x ≤ g x",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ ∀x. x ∈ {m..n} ⟶ f x ≤ g x"
                },
                {
                    "args": "sum_le",
                    "id": "4",
                    "prevs": [
                        "1",
                        "3"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i ⊢ sum ({m..n}) f ≤ sum ({m..n}) g"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i) ⟶ sum ({m..n}) f ≤ sum ({m..n}) g"
                }
            ],
            "prop": "(∀i. m ≤ i ⟶ i ≤ n ⟶ f i ≤ g i) ⟶ sum ({m..n}) f ≤ sum ({m..n}) g",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_le"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "goal_id": "2",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "i"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "2.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "2.1"
                    ],
                    "goal_id": "2.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "g": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_eq_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i ⊢ ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i ⊢ ∀x. x ∈ {m..n} ⟶ f x = g x"
                },
                {
                    "args": "i, nat",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR i"
                },
                {
                    "args": "i ∈ {m..n}",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "i ∈ {m..n} ⊢ i ∈ {m..n}"
                },
                {
                    "args": "member_natseg",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "i ∈ {m..n} ⊢ m ≤ i ∧ i ≤ n"
                },
                {
                    "args": "conjD1",
                    "id": "1.3",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "i ∈ {m..n} ⊢ m ≤ i"
                },
                {
                    "args": "conjD2",
                    "id": "1.4",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "i ∈ {m..n} ⊢ i ≤ n"
                },
                {
                    "args": "i",
                    "id": "1.5",
                    "prevs": [
                        "0",
                        "1.3",
                        "1.4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "i ∈ {m..n}, ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i ⊢ f i = g i"
                },
                {
                    "args": "",
                    "id": "1.6",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.5"
                    ],
                    "rule": "intros",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i ⊢ ∀i. i ∈ {m..n} ⟶ f i = g i"
                },
                {
                    "args": "sum_eq",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i ⊢ sum ({m..n}) f = sum ({m..n}) g"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i) ⟶ sum ({m..n}) f = sum ({m..n}) g"
                }
            ],
            "prop": "(∀i. m ≤ i ⟶ i ≤ n ⟶ f i = g i) ⟶ sum ({m..n}) f = sum ({m..n}) g",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_eq"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "i"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "fact_ids": [
                        "1.2"
                    ],
                    "goal_id": "1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1.2"
                    ],
                    "goal_id": "1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "g": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_abs_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "sum_abs, {f: f, s: {m..n}}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ abs (sum ({m..n}) f) ≤ sum ({m..n}) (λx. abs (f x))"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ abs (sum ({m..n}) f) ≤ sum ({m..n}) (λi. abs (f i))"
                }
            ],
            "prop": "abs (sum ({m..n}) f) ≤ sum ({m..n}) (λi. abs (f i))",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_abs"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_const_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "sum_const, {c: c}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ sum ({m..n}) (λn1. c) = of_nat (card ({m..n})) * c"
                },
                {
                    "args": "card_natseg",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ sum ({m..n}) (λn1. c) = of_nat (n + 1 - m) * c"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({m..n}) (λn1. c) = of_nat (n + 1 - m) * c"
                }
            ],
            "prop": "sum ({m..n}) (λn1. c) = of_nat (n + 1 - m) * c",
            "steps": [
                {
                    "goal": "finite {m..n}",
                    "goal_id": "0",
                    "method_name": "cut"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_c": "c",
                    "theorem": "sum_const"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "card_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "c": "real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_eq_0_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0 ⊢ ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0 ⊢ ∀x. x ∈ {m..n} ⟶ f x = 0"
                },
                {
                    "args": "i, nat",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR i"
                },
                {
                    "args": "i ∈ {m..n}",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "i ∈ {m..n} ⊢ i ∈ {m..n}"
                },
                {
                    "args": "member_natseg",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "i ∈ {m..n} ⊢ m ≤ i ∧ i ≤ n"
                },
                {
                    "args": "conjD1",
                    "id": "1.3",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "i ∈ {m..n} ⊢ m ≤ i"
                },
                {
                    "args": "conjD2",
                    "id": "1.4",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "i ∈ {m..n} ⊢ i ≤ n"
                },
                {
                    "args": "i",
                    "id": "1.5",
                    "prevs": [
                        "0",
                        "1.3",
                        "1.4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "i ∈ {m..n}, ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0 ⊢ f i = 0"
                },
                {
                    "args": "",
                    "id": "1.6",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.5"
                    ],
                    "rule": "intros",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0 ⊢ ∀i. i ∈ {m..n} ⟶ f i = 0"
                },
                {
                    "args": "sum_eq_0",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0 ⊢ sum ({m..n}) f = 0"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0) ⟶ sum ({m..n}) f = 0"
                }
            ],
            "prop": "(∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0) ⟶ sum ({m..n}) f = 0",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_eq_0"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "i"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "fact_ids": [
                        "1.2"
                    ],
                    "goal_id": "1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1.2"
                    ],
                    "goal_id": "1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_triv_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "n < m",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "n < m ⊢ n < m"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "n < m ⊢ ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0"
                },
                {
                    "args": "i, nat",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR i"
                },
                {
                    "args": "m ≤ i",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ i ⊢ m ≤ i"
                },
                {
                    "args": "i ≤ n",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "i ≤ n ⊢ i ≤ n"
                },
                {
                    "args": "",
                    "id": "1.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "n < m, i ≤ n, m ≤ i ⊢ ¬(f i = 0) ⟶ ¬(n < m)"
                },
                {
                    "args": "¬(f i = 0)",
                    "id": "1.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(f i = 0) ⊢ ¬(f i = 0)"
                },
                {
                    "args": "less_eq_trans",
                    "id": "1.3.1",
                    "prevs": [
                        "1.1",
                        "1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "i ≤ n, m ≤ i ⊢ m ≤ n"
                },
                {
                    "args": "not_lt, ¬(n < m)",
                    "id": "1.3.2",
                    "prevs": [
                        "1.3.1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "n < m, i ≤ n, m ≤ i, ¬(f i = 0) ⊢ ¬(n < m)"
                },
                {
                    "args": "",
                    "id": "1.3.3",
                    "prevs": [
                        "1.3.0",
                        "1.3.2"
                    ],
                    "rule": "intros",
                    "th": "n < m, i ≤ n, m ≤ i ⊢ ¬(f i = 0) ⟶ ¬(n < m)"
                },
                {
                    "args": "contrapositive",
                    "id": "1.4",
                    "prevs": [
                        "0",
                        "1.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "n < m, i ≤ n, m ≤ i ⊢ f i = 0"
                },
                {
                    "args": "",
                    "id": "1.5",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.2",
                        "1.4"
                    ],
                    "rule": "intros",
                    "th": "n < m ⊢ ∀i. m ≤ i ⟶ i ≤ n ⟶ f i = 0"
                },
                {
                    "args": "sum_eq_0_natseg",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "n < m ⊢ sum ({m..n}) f = 0"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ n < m ⟶ sum ({m..n}) f = 0"
                }
            ],
            "prop": "n < m ⟶ sum ({m..n}) f = 0",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_eq_0_natseg"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "i"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "contrapositive"
                },
                {
                    "goal_id": "1.3",
                    "method_name": "introduction"
                },
                {
                    "goal_id": "1.3.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "not_lt"
                },
                {
                    "fact_ids": [
                        "1.1",
                        "1.2"
                    ],
                    "goal_id": "1.3.1",
                    "method_name": "apply_backward_step",
                    "theorem": "less_eq_trans"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_pos_le_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ ∀x. x ∈ {m..n} ⟶ 0 ≤ f x"
                },
                {
                    "args": "p, nat",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR p"
                },
                {
                    "args": "p ∈ {m..n}",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "p ∈ {m..n} ⊢ p ∈ {m..n}"
                },
                {
                    "args": "member_natseg",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "p ∈ {m..n} ⊢ m ≤ p ∧ p ≤ n"
                },
                {
                    "args": "conjD1",
                    "id": "1.3",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "p ∈ {m..n} ⊢ m ≤ p"
                },
                {
                    "args": "conjD2",
                    "id": "1.4",
                    "prevs": [
                        "1.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "p ∈ {m..n} ⊢ p ≤ n"
                },
                {
                    "args": "p",
                    "id": "1.5",
                    "prevs": [
                        "0",
                        "1.3",
                        "1.4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "p ∈ {m..n}, ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ 0 ≤ f p"
                },
                {
                    "args": "",
                    "id": "1.6",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.5"
                    ],
                    "rule": "intros",
                    "th": "∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ ∀p. p ∈ {m..n} ⟶ 0 ≤ f p"
                },
                {
                    "args": "sum_pos_le",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ 0 ≤ sum ({m..n}) f"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p) ⟶ 0 ≤ sum ({m..n}) f"
                }
            ],
            "prop": "(∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p) ⟶ 0 ≤ sum ({m..n}) f",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_pos_le"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "p"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "fact_ids": [
                        "1.2"
                    ],
                    "goal_id": "1.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "1.2"
                    ],
                    "goal_id": "1.4",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_pos_eq_0_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p"
                },
                {
                    "args": "sum ({m..n}) f = 0",
                    "id": "1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "sum ({m..n}) f = 0 ⊢ sum ({m..n}) f = 0"
                },
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "sum ({m..n}) f = 0, ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ ∀x. x ∈ {m..n} ⟶ 0 ≤ f x"
                },
                {
                    "args": "p, nat",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR p"
                },
                {
                    "args": "p ∈ {m..n}",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "p ∈ {m..n} ⊢ p ∈ {m..n}"
                },
                {
                    "args": "member_natseg",
                    "id": "3.2",
                    "prevs": [
                        "3.1"
                    ],
                    "rule": "rewrite_fact",
                    "th": "p ∈ {m..n} ⊢ m ≤ p ∧ p ≤ n"
                },
                {
                    "args": "conjD1",
                    "id": "3.3",
                    "prevs": [
                        "3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "p ∈ {m..n} ⊢ m ≤ p"
                },
                {
                    "args": "conjD2",
                    "id": "3.4",
                    "prevs": [
                        "3.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "p ∈ {m..n} ⊢ p ≤ n"
                },
                {
                    "args": "p",
                    "id": "3.5",
                    "prevs": [
                        "0",
                        "3.3",
                        "3.4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "p ∈ {m..n}, sum ({m..n}) f = 0, ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ 0 ≤ f p"
                },
                {
                    "args": "",
                    "id": "3.6",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.5"
                    ],
                    "rule": "intros",
                    "th": "sum ({m..n}) f = 0, ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ ∀p. p ∈ {m..n} ⟶ 0 ≤ f p"
                },
                {
                    "args": "sum_pos_eq_0",
                    "id": "4",
                    "prevs": [
                        "2",
                        "3",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "sum ({m..n}) f = 0, ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ ∀x. x ∈ {m..n} ⟶ f x = 0"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "sum ({m..n}) f = 0, ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ ∀p. m ≤ p ⟶ p ≤ n ⟶ f p = 0"
                },
                {
                    "args": "p, nat",
                    "id": "5.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR p"
                },
                {
                    "args": "m ≤ p",
                    "id": "5.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ p ⊢ m ≤ p"
                },
                {
                    "args": "p ≤ n",
                    "id": "5.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "p ≤ n ⊢ p ≤ n"
                },
                {
                    "args": "conjI",
                    "id": "5.3",
                    "prevs": [
                        "5.1",
                        "5.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ p, p ≤ n, sum ({m..n}) f = 0, ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ m ≤ p ∧ p ≤ n"
                },
                {
                    "args": "member_natseg, p ∈ {m..n}",
                    "id": "5.4",
                    "prevs": [
                        "5.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ p, p ≤ n, sum ({m..n}) f = 0, ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ p ∈ {m..n}"
                },
                {
                    "args": "p",
                    "id": "5.5",
                    "prevs": [
                        "4",
                        "5.4"
                    ],
                    "rule": "apply_fact_for",
                    "th": "m ≤ p, p ≤ n, sum ({m..n}) f = 0, ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ f p = 0"
                },
                {
                    "args": "",
                    "id": "5.6",
                    "prevs": [
                        "5.0",
                        "5.1",
                        "5.2",
                        "5.5"
                    ],
                    "rule": "intros",
                    "th": "sum ({m..n}) f = 0, ∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p ⊢ ∀p. m ≤ p ⟶ p ≤ n ⟶ f p = 0"
                },
                {
                    "args": "",
                    "id": "6",
                    "prevs": [
                        "0",
                        "1",
                        "5"
                    ],
                    "rule": "intros",
                    "th": "⊢ (∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p) ⟶ sum ({m..n}) f = 0 ⟶ (∀p. m ≤ p ⟶ p ≤ n ⟶ f p = 0)"
                }
            ],
            "prop": [
                "(∀p. m ≤ p ⟶ p ≤ n ⟶ 0 ≤ f p) ",
                "⟶ sum ({m..n}) f = 0 ⟶ (∀p. m ≤ p ⟶ p ≤ n ⟶ f p = 0)"
            ],
            "steps": [
                {
                    "goal": "(∀x. x ∈ {m..n} ⟶ f x = 0)",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_pos_eq_0"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "p"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "3.2",
                    "method_name": "apply_prev"
                },
                {
                    "fact_ids": [
                        "3.1"
                    ],
                    "goal_id": "3.2",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "fact_ids": [
                        "3.2"
                    ],
                    "goal_id": "3.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD1"
                },
                {
                    "fact_ids": [
                        "3.2"
                    ],
                    "goal_id": "3.4",
                    "method_name": "apply_backward_step",
                    "theorem": "conjD2"
                },
                {
                    "goal_id": "5",
                    "method_name": "introduction",
                    "names": "p"
                },
                {
                    "fact_ids": [
                        "4"
                    ],
                    "goal_id": "5.3",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "5.3",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "5.3",
                    "method_name": "apply_backward_step",
                    "theorem": "conjI"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_sing_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "sum_sing, sum ({n}) f = f n",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({n}) f = f n"
                },
                {
                    "args": "natseg_sing, sum ({n..n}) f = f n",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({n..n}) f = f n"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({n..n}) f = f n"
                }
            ],
            "prop": "sum ({n..n}) f = f n",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_sing"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_sing"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_0_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "iterate_natseg_0, {f: f, m: m, op: (plus::real ⇒ real ⇒ real)}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real) ⟶ iterate plus ({m..0}) f = (if m = 0 then f 0 else neutral plus)"
                },
                {
                    "args": "neutral_real_add",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real) ⟶ iterate plus ({m..0}) f = (if m = 0 then f 0 else 0)"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_fact",
                    "th": "⊢ iterate plus ({m..0}) f = (if m = 0 then f 0 else 0)"
                },
                {
                    "args": "sum_def, sum ({m..0}) f = (if m = 0 then f 0 else 0)",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({m..0}) f = (if m = 0 then f 0 else 0)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({m..0}) f = (if m = 0 then f 0 else 0)"
                }
            ],
            "prop": "sum ({m..0}) f = (if m = 0 then f 0 else 0)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_m": "m",
                    "param_op": "(plus::real=>real=>real)",
                    "theorem": "iterate_natseg_0"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_Suc_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_real_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_natseg_Suc, {f: f, m: m, n: n, op: (plus::real ⇒ real ⇒ real)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({m..Suc n}) f = (if m ≤ Suc n then iterate plus ({m..n}) f + f (Suc n) else iterate plus ({m..n}) f)"
                },
                {
                    "args": "sum_def, sum ({m..Suc n}) f = (if m ≤ Suc n then sum ({m..n}) f + f (Suc n) else sum ({m..n}) f)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({m..Suc n}) f = (if m ≤ Suc n then sum ({m..n}) f + f (Suc n) else sum ({m..n}) f)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({m..Suc n}) f = (if m ≤ Suc n then sum ({m..n}) f + f (Suc n) else sum ({m..n}) f)"
                }
            ],
            "prop": [
                "sum ({m..Suc n}) f = ",
                "(if m ≤ Suc n then sum ({m..n}) f + f (Suc n) else sum ({m..n}) f)"
            ],
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_natseg_Suc"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_0_natseg_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "sum_empty, sum ∅ f = 0",
                    "id": "0",
                    "prevs": [],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ∅ f = 0"
                },
                {
                    "args": "natseg_clauses_lt_1, sum ({i. i < 0}) f = 0",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({i. i < 0}) f = 0"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({i. i < 0}) f = 0"
                }
            ],
            "prop": "sum ({i. i < 0}) f = 0",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_clauses_lt_1"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_empty"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_Suc_natseg_lt",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_real_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_natseg_Suc_lt, {f: f, k: k, op: (plus::real ⇒ real ⇒ real)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({i. i < Suc k}) f = iterate plus ({i. i < k}) f + f k"
                },
                {
                    "args": "sum_def, sum ({i. i < Suc k}) f = sum ({i. i < k}) f + f k",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({i. i < Suc k}) f = sum ({i. i < k}) f + f k"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({i. i < Suc k}) f = sum ({i. i < k}) f + f k"
                }
            ],
            "prop": "sum ({i. i < Suc k}) f = sum ({i. i < k}) f + f k",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_natseg_Suc_lt"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "k": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_0_natseg_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_real_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_natseg_0_le, {f: f, op: (plus::real ⇒ real ⇒ real)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({i. i ≤ 0}) f = f 0"
                },
                {
                    "args": "sum_def, sum ({i. i ≤ 0}) f = f 0",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({i. i ≤ 0}) f = f 0"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({i. i ≤ 0}) f = f 0"
                }
            ],
            "prop": "sum ({i. i ≤ 0}) f = f 0",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_natseg_0_le"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_Suc_natseg_le",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_real_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_natseg_Suc_le, {f: f, k: k, op: (plus::real ⇒ real ⇒ real)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({i. i ≤ Suc k}) f = iterate plus ({i. i ≤ k}) f + f (Suc k)"
                },
                {
                    "args": "sum_def, sum ({i. i ≤ Suc k}) f = sum ({i. i ≤ k}) f + f (Suc k)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({i. i ≤ Suc k}) f = sum ({i. i ≤ k}) f + f (Suc k)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({i. i ≤ Suc k}) f = sum ({i. i ≤ k}) f + f (Suc k)"
                }
            ],
            "prop": "sum ({i. i ≤ Suc k}) f = sum ({i. i ≤ k}) f + f (Suc k)",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_natseg_Suc_le"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "k": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_swap_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: a, n: b}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({a..b})"
                },
                {
                    "args": "finite_natseg, {m: c, n: d}",
                    "id": "1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({c..d})"
                },
                {
                    "args": "sum_swap, {f: f, s: {a..b}, t: {c..d}}",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ sum ({a..b}) (λi. sum ({c..d}) (f i)) = sum ({c..d}) (λj. sum ({a..b}) (λi. f i j))"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({a..b}) (λi. sum ({c..d}) (f i)) = sum ({c..d}) (λj. sum ({a..b}) (λi. f i j))"
                }
            ],
            "prop": [
                "sum ({a..b}) (λi. sum ({c..d}) (f i)) = ",
                "sum ({c..d}) (λj. sum ({a..b}) (λi. f i j))"
            ],
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_swap"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "a": "nat",
                "b": "nat",
                "c": "nat",
                "d": "nat",
                "f": "nat ⇒ nat ⇒ real"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_add_split",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ n + 1",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ n + 1 ⊢ m ≤ n + 1"
                },
                {
                    "args": "natseg_add_split, {p: p}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "m ≤ n + 1 ⊢ {m..n + p} = {m..n} ∪ {n + 1..n + p}"
                },
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "finite_natseg, {m: n + 1, n: n + p}",
                    "id": "3",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({n + 1..n + p})"
                },
                {
                    "args": "n < n + 1",
                    "id": "4",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ n < n + 1"
                },
                {
                    "args": "disjI1, {A: n < n + 1, B: n + p < m ∨ n < m ∨ n + p < n + 1}",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "m ≤ n + 1 ⊢ n < n + 1 ∨ n + p < m ∨ n < m ∨ n + p < n + 1"
                },
                {
                    "args": "disjoint_natseg, disjoint ({m..n}) ({n + 1..n + p})",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n + 1 ⊢ disjoint ({m..n}) ({n + 1..n + p})"
                },
                {
                    "args": "sum_union, {f: f, s: {m..n}, t: {n + 1..n + p}}",
                    "id": "7",
                    "prevs": [
                        "2",
                        "3",
                        "6"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "m ≤ n + 1 ⊢ sum ({m..n} ∪ {n + 1..n + p}) f = sum ({m..n}) f + sum ({n + 1..n + p}) f"
                },
                {
                    "args": "sum ({m..n + p}) f = sum ({m..n}) f + sum ({n + 1..n + p}) f",
                    "id": "8",
                    "prevs": [
                        "1",
                        "7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m ≤ n + 1 ⊢ sum ({m..n + p}) f = sum ({m..n}) f + sum ({n + 1..n + p}) f"
                },
                {
                    "args": "",
                    "id": "9",
                    "prevs": [
                        "0",
                        "8"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ n + 1 ⟶ sum ({m..n + p}) f = sum ({m..n}) f + sum ({n + 1..n + p}) f"
                }
            ],
            "prop": "m ≤ n + 1 ⟶ sum ({m..n + p}) f = sum ({m..n}) f + sum ({n + 1..n + p}) f",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "param_p": "p",
                    "theorem": "natseg_add_split"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_union"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "goal_id": "3",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "disjoint_natseg"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "4",
                    "method_name": "z3"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat",
                "p": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_offset",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "sum_image, {f: λi. i + p, g: f, s: {m..n}}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ (∀x. ∀y. x ∈ {m..n} ⟶ y ∈ {m..n} ⟶ x + p = y + p ⟶ x = y) ⟶ sum (image (λi. i + p) ({m..n})) f = sum ({m..n}) (f ∘ (λi. i + p))"
                },
                {
                    "args": "comp_fun_def",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ (∀x. ∀y. x ∈ {m..n} ⟶ y ∈ {m..n} ⟶ x + p = y + p ⟶ x = y) ⟶ sum (image (λi. i + p) ({m..n})) f = sum ({m..n}) (λx. f (x + p))"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀x. ∀y. x ∈ {m..n} ⟶ y ∈ {m..n} ⟶ x + p = y + p ⟶ x = y"
                },
                {
                    "args": "x, nat",
                    "id": "2.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR x"
                },
                {
                    "args": "y, nat",
                    "id": "2.1",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR y"
                },
                {
                    "args": "x ∈ {m..n}",
                    "id": "2.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x ∈ {m..n} ⊢ x ∈ {m..n}"
                },
                {
                    "args": "y ∈ {m..n}",
                    "id": "2.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "y ∈ {m..n} ⊢ y ∈ {m..n}"
                },
                {
                    "args": "x + p = y + p",
                    "id": "2.4",
                    "prevs": [],
                    "rule": "assume",
                    "th": "x + p = y + p ⊢ x + p = y + p"
                },
                {
                    "args": "add_cancel_right",
                    "id": "2.5",
                    "prevs": [
                        "2.4"
                    ],
                    "rule": "apply_theorem",
                    "th": "x + p = y + p ⊢ x = y"
                },
                {
                    "args": "",
                    "id": "2.6",
                    "prevs": [
                        "2.0",
                        "2.1",
                        "2.2",
                        "2.3",
                        "2.4",
                        "2.5"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀x. ∀y. x ∈ {m..n} ⟶ y ∈ {m..n} ⟶ x + p = y + p ⟶ x = y"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_fact",
                    "th": "⊢ sum (image (λi. i + p) ({m..n})) f = sum ({m..n}) (λx. f (x + p))"
                },
                {
                    "args": "natseg_offset_image, sum ({m + p..n + p}) f = sum ({m..n}) (λi. f (i + p))",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({m + p..n + p}) f = sum ({m..n}) (λi. f (i + p))"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({m + p..n + p}) f = sum ({m..n}) (λi. f (i + p))"
                }
            ],
            "prop": "sum ({m + p..n + p}) f = sum ({m..n}) (λi. f (i + p))",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "natseg_offset_image"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_forward_step",
                    "param_f": "(λi. i + p)",
                    "param_g": "f",
                    "param_s": "{m..n}",
                    "theorem": "sum_image"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "comp_fun_def"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2",
                    "method_name": "introduction",
                    "names": "x,y"
                },
                {
                    "fact_ids": [
                        "2.4"
                    ],
                    "goal_id": "2.5",
                    "method_name": "apply_backward_step",
                    "theorem": "add_cancel_right"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat",
                "p": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_offset_0",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ n",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ n ⊢ m ≤ n"
                },
                {
                    "args": "sub_add",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ n ⊢ n - m + m = n"
                },
                {
                    "args": "sum ({m..n}) f = sum ({m..n - m + m}) f",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m ≤ n ⊢ sum ({m..n}) f = sum ({m..n - m + m}) f"
                },
                {
                    "args": "nat_plus_def_1, sum ({m..n}) f = sum ({0 + m..n - m + m}) f",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n ⊢ sum ({m..n}) f = sum ({0 + m..n - m + m}) f"
                },
                {
                    "args": "sum_offset, sum ({m..n}) f = sum ({0..n - m}) (λi. f (i + m))",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "m ≤ n ⊢ sum ({m..n}) f = sum ({0..n - m}) (λi. f (i + m))"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "0",
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ n ⟶ sum ({m..n}) f = sum ({0..n - m}) (λi. f (i + m))"
                }
            ],
            "prop": "m ≤ n ⟶ sum ({m..n}) f = sum ({0..n - m}) (λi. f (i + m))",
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "sum_offset"
                },
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_plus_def_1"
                },
                {
                    "goal": "n - m + m = n",
                    "goal_id": "1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "1",
                    "method_name": "apply_backward_step",
                    "theorem": "sub_add"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_goal_with_prev"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "sum_clauses_left",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "m ≤ n",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ n ⊢ m ≤ n"
                },
                {
                    "args": "natseg_lrec",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ n ⊢ {m..n} = insert m ({m + 1..n})"
                },
                {
                    "args": "finite_natseg, {m: m + 1, n: n}",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m + 1..n})"
                },
                {
                    "args": "sum_insert, {f: f, x: m}",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ sum (insert m ({m + 1..n})) f = (if m ∈ {m + 1..n} then sum ({m + 1..n}) f else f m + sum ({m + 1..n}) f)"
                },
                {
                    "args": "¬(m + 1 ≤ m)",
                    "id": "4",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ ¬(m + 1 ≤ m)"
                },
                {
                    "args": "disjI1, {A: ¬(m + 1 ≤ m), B: ¬(m ≤ n)}",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "m ≤ n ⊢ ¬(m + 1 ≤ m) ∨ ¬(m ≤ n)"
                },
                {
                    "args": "de_morgan_thm1, ¬(m + 1 ≤ m ∧ m ≤ n)",
                    "id": "6",
                    "prevs": [
                        "5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n ⊢ ¬(m + 1 ≤ m ∧ m ≤ n)"
                },
                {
                    "args": "member_natseg, ¬(m ∈ {m + 1..n})",
                    "id": "7",
                    "prevs": [
                        "6"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ n ⊢ ¬(m ∈ {m + 1..n})"
                },
                {
                    "args": "if_not_P",
                    "id": "8",
                    "prevs": [
                        "3",
                        "7"
                    ],
                    "rule": "rewrite_fact",
                    "th": "m ≤ n ⊢ sum (insert m ({m + 1..n})) f = f m + sum ({m + 1..n}) f"
                },
                {
                    "args": "sum ({m..n}) f = f m + sum ({m + 1..n}) f",
                    "id": "9",
                    "prevs": [
                        "1",
                        "8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m ≤ n ⊢ sum ({m..n}) f = f m + sum ({m + 1..n}) f"
                },
                {
                    "args": "",
                    "id": "10",
                    "prevs": [
                        "0",
                        "9"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ n ⟶ sum ({m..n}) f = f m + sum ({m + 1..n}) f"
                }
            ],
            "prop": "m ≤ n ⟶ sum ({m..n}) f = f m + sum ({m + 1..n}) f",
            "steps": [
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "apply_forward_step",
                    "theorem": "natseg_lrec"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "finite {m + 1..n}",
                    "goal_id": "2",
                    "method_name": "cut"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                },
                {
                    "fact_ids": [
                        "2"
                    ],
                    "goal_id": "3",
                    "method_name": "apply_forward_step",
                    "param_f": "f",
                    "param_x": "m",
                    "theorem": "sum_insert"
                },
                {
                    "goal": "~(m ∈ {m + 1..n})",
                    "goal_id": "4",
                    "method_name": "cut"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "member_natseg"
                },
                {
                    "goal_id": "4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "de_morgan_thm1"
                },
                {
                    "goal_id": "4",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "4",
                    "method_name": "z3"
                },
                {
                    "fact_ids": [
                        "3",
                        "7"
                    ],
                    "goal_id": "8",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_not_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_backward",
                "hint_backward1"
            ],
            "name": "sum_clauses_right",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ (0::nat) < 0 ⟶ m ≤ 0 ⟶ sum ({m..0}) f = sum ({m..0 - 1}) f + f 0"
                },
                {
                    "args": "(0::nat) < 0",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "(0::nat) < 0 ⊢ (0::nat) < 0"
                },
                {
                    "args": "m ≤ 0",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ 0 ⊢ m ≤ 0"
                },
                {
                    "args": "sum ({m..0}) f = sum ({m..0 - 1}) f + f 0",
                    "id": "0.2",
                    "prevs": [
                        "0.0"
                    ],
                    "rule": "z3",
                    "th": "(0::nat) < 0 ⊢ sum ({m..0}) f = sum ({m..0 - 1}) f + f 0"
                },
                {
                    "args": "",
                    "id": "0.3",
                    "prevs": [
                        "0.0",
                        "0.1",
                        "0.2"
                    ],
                    "rule": "intros",
                    "th": "⊢ (0::nat) < 0 ⟶ m ≤ 0 ⟶ sum ({m..0}) f = sum ({m..0 - 1}) f + f 0"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀n. (0 < n ⟶ m ≤ n ⟶ sum ({m..n}) f = sum ({m..n - 1}) f + f n) ⟶ 0 < Suc n ⟶ m ≤ Suc n ⟶ sum ({m..Suc n}) f = sum ({m..Suc n - 1}) f + f (Suc n)"
                },
                {
                    "args": "n, nat",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR n"
                },
                {
                    "args": "0 < n ⟶ m ≤ n ⟶ sum ({m..n}) f = sum ({m..n - 1}) f + f n",
                    "id": "1.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "0 < n ⟶ m ≤ n ⟶ sum ({m..n}) f = sum ({m..n - 1}) f + f n ⊢ 0 < n ⟶ m ≤ n ⟶ sum ({m..n}) f = sum ({m..n - 1}) f + f n"
                },
                {
                    "args": "0 < Suc n",
                    "id": "1.2",
                    "prevs": [],
                    "rule": "assume",
                    "th": "0 < Suc n ⊢ 0 < Suc n"
                },
                {
                    "args": "m ≤ Suc n",
                    "id": "1.3",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ Suc n ⊢ m ≤ Suc n"
                },
                {
                    "args": "if_P, (if m ≤ Suc n then sum ({m..n}) f + f (Suc n) else sum ({m..n}) f) = sum ({m..n}) f + f (Suc n)",
                    "id": "1.4",
                    "prevs": [
                        "1.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ Suc n ⊢ (if m ≤ Suc n then sum ({m..n}) f + f (Suc n) else sum ({m..n}) f) = sum ({m..n}) f + f (Suc n)"
                },
                {
                    "args": "sum_Suc_natseg, sum ({m..Suc n}) f = sum ({m..n}) f + f (Suc n)",
                    "id": "1.5",
                    "prevs": [
                        "1.4"
                    ],
                    "rule": "rewrite_goal",
                    "th": "0 < Suc n, m ≤ Suc n, 0 < n ⟶ m ≤ n ⟶ sum ({m..n}) f = sum ({m..n - 1}) f + f n ⊢ sum ({m..Suc n}) f = sum ({m..n}) f + f (Suc n)"
                },
                {
                    "args": "suc_sub1, sum ({m..Suc n}) f = sum ({m..Suc n - 1}) f + f (Suc n)",
                    "id": "1.6",
                    "prevs": [
                        "1.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "0 < Suc n, m ≤ Suc n, 0 < n ⟶ m ≤ n ⟶ sum ({m..n}) f = sum ({m..n - 1}) f + f n ⊢ sum ({m..Suc n}) f = sum ({m..Suc n - 1}) f + f (Suc n)"
                },
                {
                    "args": "",
                    "id": "1.7",
                    "prevs": [
                        "1.0",
                        "1.1",
                        "1.2",
                        "1.3",
                        "1.6"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀n. (0 < n ⟶ m ≤ n ⟶ sum ({m..n}) f = sum ({m..n - 1}) f + f n) ⟶ 0 < Suc n ⟶ m ≤ Suc n ⟶ sum ({m..Suc n}) f = sum ({m..Suc n - 1}) f + f (Suc n)"
                },
                {
                    "args": "nat_induct, {P: λn. 0 < n ⟶ m ≤ n ⟶ sum ({m..n}) f = sum ({m..n - 1}) f + f n, x: n}",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ 0 < n ⟶ m ≤ n ⟶ sum ({m..n}) f = sum ({m..n - 1}) f + f n"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ 0 < n ⟶ m ≤ n ⟶ sum ({m..n}) f = sum ({m..n - 1}) f + f n"
                }
            ],
            "prop": "0 < n ⟶ m ≤ n ⟶ sum ({m..n}) f = sum ({m..n - 1}) f + f n",
            "steps": [
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "revert_intro"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "revert_intro"
                },
                {
                    "goal_id": "0",
                    "method_name": "induction",
                    "theorem": "nat_induct",
                    "var": "n"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.2",
                    "method_name": "z3"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction",
                    "names": "n"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "suc_sub1"
                },
                {
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_Suc_natseg"
                },
                {
                    "fact_ids": [
                        "1.3"
                    ],
                    "goal_id": "1.4",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_pair",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "monoidal_real_add",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "iterate_pair, {f: f, m: m, n: n, op: (plus::real ⇒ real ⇒ real)}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ iterate plus ({2 * m..2 * n + 1}) f = iterate plus ({m..n}) (λi. f (2 * i) + f (2 * i + 1))"
                },
                {
                    "args": "sum_def, sum ({2 * m..2 * n + 1}) f = sum ({m..n}) (λi. f (2 * i) + f (2 * i + 1))",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({2 * m..2 * n + 1}) f = sum ({m..n}) (λi. f (2 * i) + f (2 * i + 1))"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({2 * m..2 * n + 1}) f = sum ({m..n}) (λi. f (2 * i) + f (2 * i + 1))"
                }
            ],
            "prop": "sum ({2 * m..2 * n + 1}) f = sum ({m..n}) (λi. f (2 * i) + f (2 * i + 1))",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "iterate_pair"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_reflect",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "iterate_reflect, {m: m, n: n, op: (plus::real ⇒ real ⇒ real), x: x}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real) ⟶ iterate plus ({m..n}) x = (if n < m then neutral plus else iterate plus ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "neutral_real_add",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real) ⟶ iterate plus ({m..n}) x = (if n < m then 0 else iterate plus ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "monoidal_real_add",
                    "id": "2",
                    "prevs": [],
                    "rule": "apply_theorem",
                    "th": "⊢ monoidal (plus::real ⇒ real ⇒ real)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "1",
                        "2"
                    ],
                    "rule": "apply_fact",
                    "th": "⊢ iterate plus ({m..n}) x = (if n < m then 0 else iterate plus ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "sum_def, sum ({m..n}) x = (if n < m then 0 else sum ({0..n - m}) (λi. x (n - i)))",
                    "id": "4",
                    "prevs": [
                        "3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ sum ({m..n}) x = (if n < m then 0 else sum ({0..n - m}) (λi. x (n - i)))"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({m..n}) x = (if n < m then 0 else sum ({0..n - m}) (λi. x (n - i)))"
                }
            ],
            "prop": "sum ({m..n}) x = (if n < m then 0 else sum ({0..n - m}) (λi. x (n - i)))",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_forward_step",
                    "param_m": "m",
                    "param_n": "n",
                    "param_op": "(plus::real=>real=>real)",
                    "param_x": "x",
                    "theorem": "iterate_reflect"
                },
                {
                    "fact_ids": [
                        "0"
                    ],
                    "goal_id": "1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "neutral_real_add"
                },
                {
                    "fact_ids": [
                        "1"
                    ],
                    "goal_id": "2",
                    "method_name": "apply_prev"
                },
                {
                    "goal_id": "2",
                    "method_name": "apply_backward_step",
                    "theorem": "monoidal_real_add"
                }
            ],
            "ty": "thm",
            "vars": {
                "m": "nat",
                "n": "nat",
                "x": "nat ⇒ real"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "real_of_nat_sum_natseg",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "finite_natseg, {m: m, n: n}",
                    "id": "0",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ finite ({m..n})"
                },
                {
                    "args": "real_of_nat_sum, {f: f, s: {m..n}}",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ of_nat (nsum ({m..n}) f) = sum ({m..n}) (λx. of_nat (f x))"
                },
                {
                    "args": "",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "intros",
                    "th": "⊢ of_nat (nsum ({m..n}) f) = sum ({m..n}) (λi. of_nat (f i))"
                }
            ],
            "prop": "of_nat (nsum ({m..n}) f) = sum ({m..n}) (λi. of_nat (f i))",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "real_of_nat_sum"
                },
                {
                    "goal_id": "0",
                    "method_name": "apply_backward_step",
                    "theorem": "finite_natseg"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ nat",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "sum_partial_Suc",
            "num_gaps": 0,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ m ≤ 0 ⟶ sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ 0 then f (0 + 1) * g (0 + 1) - f m * g m - sum ({m..0}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "m ≤ 0",
                    "id": "0.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ 0 ⊢ m ≤ 0"
                },
                {
                    "args": "",
                    "id": "0.1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "m ≤ 0 ⊢ m = 0 ⟶ (if m = 0 then f 0 * (g (0 + 1) - g 0) else 0) = f (0 + 1) * g (0 + 1) - f m * g m - (if m = 0 then g (0 + 1) * (f (0 + 1) - f 0) else 0)"
                },
                {
                    "args": "m = 0",
                    "id": "0.1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m = 0 ⊢ m = 0"
                },
                {
                    "args": "f 0 * (g 1 - g 0) = f 1 * g 1 - f 0 * g 0 - g 1 * (f 1 - f 0)",
                    "id": "0.1.1",
                    "prevs": [],
                    "rule": "z3",
                    "th": "⊢ f 0 * (g 1 - g 0) = f 1 * g 1 - f 0 * g 0 - g 1 * (f 1 - f 0)"
                },
                {
                    "args": "f 0 * (g 1 - g 0) = f 1 * g 1 - f m * g m - g 1 * (f 1 - f 0)",
                    "id": "0.1.2",
                    "prevs": [
                        "0.1.0",
                        "0.1.1"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m = 0, m ≤ 0 ⊢ f 0 * (g 1 - g 0) = f 1 * g 1 - f m * g m - g 1 * (f 1 - f 0)"
                },
                {
                    "args": "nat_plus_def_1, f 0 * (g (0 + 1) - g 0) = f (0 + 1) * g (0 + 1) - f m * g m - g (0 + 1) * (f (0 + 1) - f 0)",
                    "id": "0.1.3",
                    "prevs": [
                        "0.1.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m = 0, m ≤ 0 ⊢ f 0 * (g (0 + 1) - g 0) = f (0 + 1) * g (0 + 1) - f m * g m - g (0 + 1) * (f (0 + 1) - f 0)"
                },
                {
                    "args": "if_P, (if m = 0 then f 0 * (g (0 + 1) - g 0) else 0) = f (0 + 1) * g (0 + 1) - f m * g m - (if m = 0 then g (0 + 1) * (f (0 + 1) - f 0) else 0)",
                    "id": "0.1.4",
                    "prevs": [
                        "0.1.3",
                        "0.1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m = 0, m ≤ 0 ⊢ (if m = 0 then f 0 * (g (0 + 1) - g 0) else 0) = f (0 + 1) * g (0 + 1) - f m * g m - (if m = 0 then g (0 + 1) * (f (0 + 1) - f 0) else 0)"
                },
                {
                    "args": "",
                    "id": "0.1.5",
                    "prevs": [
                        "0.1.0",
                        "0.1.4"
                    ],
                    "rule": "intros",
                    "th": "m ≤ 0 ⊢ m = 0 ⟶ (if m = 0 then f 0 * (g (0 + 1) - g 0) else 0) = f (0 + 1) * g (0 + 1) - f m * g m - (if m = 0 then g (0 + 1) * (f (0 + 1) - f 0) else 0)"
                },
                {
                    "args": "",
                    "id": "0.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "m ≤ 0 ⊢ ¬(m = 0) ⟶ (if m = 0 then f 0 * (g (0 + 1) - g 0) else 0) = f (0 + 1) * g (0 + 1) - f m * g m - (if m = 0 then g (0 + 1) * (f (0 + 1) - f 0) else 0)"
                },
                {
                    "args": "¬(m = 0)",
                    "id": "0.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(m = 0) ⊢ ¬(m = 0)"
                },
                {
                    "args": "(if m = 0 then f 0 * (g (0 + 1) - g 0) else 0) = f (0 + 1) * g (0 + 1) - f m * g m - (if m = 0 then g (0 + 1) * (f (0 + 1) - f 0) else 0)",
                    "id": "0.2.1",
                    "prevs": [
                        "0.2.0",
                        "0.0"
                    ],
                    "rule": "z3",
                    "th": "m ≤ 0, ¬(m = 0) ⊢ (if m = 0 then f 0 * (g (0 + 1) - g 0) else 0) = f (0 + 1) * g (0 + 1) - f m * g m - (if m = 0 then g (0 + 1) * (f (0 + 1) - f 0) else 0)"
                },
                {
                    "args": "",
                    "id": "0.2.2",
                    "prevs": [
                        "0.2.0",
                        "0.2.1"
                    ],
                    "rule": "intros",
                    "th": "m ≤ 0 ⊢ ¬(m = 0) ⟶ (if m = 0 then f 0 * (g (0 + 1) - g 0) else 0) = f (0 + 1) * g (0 + 1) - f m * g m - (if m = 0 then g (0 + 1) * (f (0 + 1) - f 0) else 0)"
                },
                {
                    "args": "classical_cases",
                    "id": "0.3",
                    "prevs": [
                        "0.1",
                        "0.2"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ 0 ⊢ (if m = 0 then f 0 * (g (0 + 1) - g 0) else 0) = f (0 + 1) * g (0 + 1) - f m * g m - (if m = 0 then g (0 + 1) * (f (0 + 1) - f 0) else 0)"
                },
                {
                    "args": "sum_0_natseg, sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = f (0 + 1) * g (0 + 1) - f m * g m - sum ({m..0}) (λk. g (k + 1) * (f (k + 1) - f k))",
                    "id": "0.4",
                    "prevs": [
                        "0.3"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ 0 ⊢ sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = f (0 + 1) * g (0 + 1) - f m * g m - sum ({m..0}) (λk. g (k + 1) * (f (k + 1) - f k))"
                },
                {
                    "args": "if_P, sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ 0 then f (0 + 1) * g (0 + 1) - f m * g m - sum ({m..0}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)",
                    "id": "0.5",
                    "prevs": [
                        "0.4",
                        "0.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ 0 ⊢ sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ 0 then f (0 + 1) * g (0 + 1) - f m * g m - sum ({m..0}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "",
                    "id": "0.6",
                    "prevs": [
                        "0.0",
                        "0.5"
                    ],
                    "rule": "intros",
                    "th": "⊢ m ≤ 0 ⟶ sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ 0 then f (0 + 1) * g (0 + 1) - f m * g m - sum ({m..0}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ¬(m ≤ 0) ⟶ sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ 0 then f (0 + 1) * g (0 + 1) - f m * g m - sum ({m..0}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "¬(m ≤ 0)",
                    "id": "1.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(m ≤ 0) ⊢ ¬(m ≤ 0)"
                },
                {
                    "args": "not_le",
                    "id": "1.1",
                    "prevs": [
                        "1.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(m ≤ 0) ⊢ 0 < m"
                },
                {
                    "args": "sum_triv_natseg, {f: λk. f k * (g (k + 1) - g k), m: m, n: (0::nat)}",
                    "id": "1.2",
                    "prevs": [
                        "1.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "¬(m ≤ 0) ⊢ sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = 0"
                },
                {
                    "args": "if_not_P, sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ 0 then f (0 + 1) * g (0 + 1) - f m * g m - sum ({m..0}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)",
                    "id": "1.3",
                    "prevs": [
                        "1.2",
                        "1.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(m ≤ 0) ⊢ sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ 0 then f (0 + 1) * g (0 + 1) - f m * g m - sum ({m..0}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "",
                    "id": "1.4",
                    "prevs": [
                        "1.0",
                        "1.3"
                    ],
                    "rule": "intros",
                    "th": "⊢ ¬(m ≤ 0) ⟶ sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ 0 then f (0 + 1) * g (0 + 1) - f m * g m - sum ({m..0}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "classical_cases",
                    "id": "2",
                    "prevs": [
                        "0",
                        "1"
                    ],
                    "rule": "apply_theorem",
                    "th": "⊢ sum ({m..0}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ 0 then f (0 + 1) * g (0 + 1) - f m * g m - sum ({m..0}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "⊢ ∀n. sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⟶ sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ Suc n then f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "n, nat",
                    "id": "3.0",
                    "prevs": [],
                    "rule": "variable",
                    "th": "⊢ _VAR n"
                },
                {
                    "args": "sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)",
                    "id": "3.1",
                    "prevs": [],
                    "rule": "assume",
                    "th": "sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "",
                    "id": "3.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ m ≤ Suc n ⟶ sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ Suc n then f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "m ≤ Suc n",
                    "id": "3.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ Suc n ⊢ m ≤ Suc n"
                },
                {
                    "args": "nat_less_eq_def_2",
                    "id": "3.2.1",
                    "prevs": [
                        "3.2.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "m ≤ Suc n ⊢ m = Suc n ∨ m ≤ n"
                },
                {
                    "args": "",
                    "id": "3.2.2",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ m = Suc n ⟶ sum ({m..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))"
                },
                {
                    "args": "m = Suc n",
                    "id": "3.2.2.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m = Suc n ⊢ m = Suc n"
                },
                {
                    "args": "eq_refl, {x: n}",
                    "id": "3.2.2.1",
                    "prevs": [],
                    "rule": "apply_theorem_for",
                    "th": "⊢ n = n"
                },
                {
                    "args": "disjI1, {A: n = n, B: n < n}",
                    "id": "3.2.2.2",
                    "prevs": [
                        "3.2.2.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "m = Suc n, m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ n = n ∨ n < n"
                },
                {
                    "args": "nat_less_def_2, n < Suc n",
                    "id": "3.2.2.3",
                    "prevs": [
                        "3.2.2.2"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m = Suc n, m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ n < Suc n"
                },
                {
                    "args": "sum_triv_natseg, {f: λk. f k * (g (k + 1) - g k)}",
                    "id": "3.2.2.4",
                    "prevs": [
                        "3.2.2.3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "m = Suc n, m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({Suc n..n}) (λk. f k * (g (k + 1) - g k)) = 0"
                },
                {
                    "args": "sum_triv_natseg, {f: λk. g (k + 1) * (f (k + 1) - f k)}",
                    "id": "3.2.2.5",
                    "prevs": [
                        "3.2.2.3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "m = Suc n, m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({Suc n..n}) (λk. g (k + 1) * (f (k + 1) - f k)) = 0"
                },
                {
                    "args": "0 + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f (Suc n) * g (Suc n) - (0 + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))",
                    "id": "3.2.2.6",
                    "prevs": [],
                    "rule": "real_norm",
                    "th": "⊢ 0 + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f (Suc n) * g (Suc n) - (0 + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))"
                },
                {
                    "args": "0 + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f (Suc n) * g (Suc n) - (sum ({Suc n..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))",
                    "id": "3.2.2.7",
                    "prevs": [
                        "3.2.2.5",
                        "3.2.2.6"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m = Suc n, m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ 0 + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f (Suc n) * g (Suc n) - (sum ({Suc n..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))"
                },
                {
                    "args": "sum ({Suc n..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f (Suc n) * g (Suc n) - (sum ({Suc n..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))",
                    "id": "3.2.2.8",
                    "prevs": [
                        "3.2.2.4",
                        "3.2.2.7"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m = Suc n, m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({Suc n..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f (Suc n) * g (Suc n) - (sum ({Suc n..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))"
                },
                {
                    "args": "sum ({m..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))",
                    "id": "3.2.2.9",
                    "prevs": [
                        "3.2.2.0",
                        "3.2.2.8"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m = Suc n, m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({m..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))"
                },
                {
                    "args": "",
                    "id": "3.2.2.10",
                    "prevs": [
                        "3.2.2.0",
                        "3.2.2.9"
                    ],
                    "rule": "intros",
                    "th": "m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ m = Suc n ⟶ sum ({m..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))"
                },
                {
                    "args": "",
                    "id": "3.2.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ m ≤ n ⟶ sum ({m..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))"
                },
                {
                    "args": "m ≤ n",
                    "id": "3.2.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "m ≤ n ⊢ m ≤ n"
                },
                {
                    "args": "if_P",
                    "id": "3.2.3.1",
                    "prevs": [
                        "3.1",
                        "3.2.3.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "m ≤ n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k))"
                },
                {
                    "args": "f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + f (n + 1) * (g (n + 1 + 1) - g (n + 1)) = f (n + 1 + 1) * g (n + 1 + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (n + 1 + 1) * (f (n + 1 + 1) - f (n + 1)))",
                    "id": "3.2.3.2",
                    "prevs": [],
                    "rule": "real_norm",
                    "th": "⊢ f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + f (n + 1) * (g (n + 1 + 1) - g (n + 1)) = f (n + 1 + 1) * g (n + 1 + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (n + 1 + 1) * (f (n + 1 + 1) - f (n + 1)))"
                },
                {
                    "args": "add_1_right, f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))",
                    "id": "3.2.3.3",
                    "prevs": [
                        "3.2.3.2"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "m ≤ n, m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))"
                },
                {
                    "args": "sum ({m..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))",
                    "id": "3.2.3.4",
                    "prevs": [
                        "3.2.3.1",
                        "3.2.3.3"
                    ],
                    "rule": "rewrite_goal_with_prev",
                    "th": "m ≤ n, m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({m..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))"
                },
                {
                    "args": "",
                    "id": "3.2.3.5",
                    "prevs": [
                        "3.2.3.0",
                        "3.2.3.4"
                    ],
                    "rule": "intros",
                    "th": "m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ m ≤ n ⟶ sum ({m..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))"
                },
                {
                    "args": "disjE",
                    "id": "3.2.4",
                    "prevs": [
                        "3.2.1",
                        "3.2.2",
                        "3.2.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({m..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)))"
                },
                {
                    "args": "if_P, (if m ≤ Suc n then sum ({m..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) else sum ({m..n}) (λk. f k * (g (k + 1) - g k))) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (if m ≤ Suc n then sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)) else sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)))",
                    "id": "3.2.5",
                    "prevs": [
                        "3.2.4",
                        "3.2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ (if m ≤ Suc n then sum ({m..n}) (λk. f k * (g (k + 1) - g k)) + f (Suc n) * (g (Suc n + 1) - g (Suc n)) else sum ({m..n}) (λk. f k * (g (k + 1) - g k))) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - (if m ≤ Suc n then sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) + g (Suc n + 1) * (f (Suc n + 1) - f (Suc n)) else sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)))"
                },
                {
                    "args": "sum_Suc_natseg, sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k))",
                    "id": "3.2.6",
                    "prevs": [
                        "3.2.5"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k))"
                },
                {
                    "args": "if_P, sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ Suc n then f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)",
                    "id": "3.2.7",
                    "prevs": [
                        "3.2.6",
                        "3.2.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "m ≤ Suc n, sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ Suc n then f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "",
                    "id": "3.2.8",
                    "prevs": [
                        "3.2.0",
                        "3.2.7"
                    ],
                    "rule": "intros",
                    "th": "sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ m ≤ Suc n ⟶ sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ Suc n then f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "",
                    "id": "3.3",
                    "prevs": [],
                    "rule": "subproof",
                    "th": "sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ ¬(m ≤ Suc n) ⟶ sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ Suc n then f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "¬(m ≤ Suc n)",
                    "id": "3.3.0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "¬(m ≤ Suc n) ⊢ ¬(m ≤ Suc n)"
                },
                {
                    "args": "not_le",
                    "id": "3.3.1",
                    "prevs": [
                        "3.3.0"
                    ],
                    "rule": "rewrite_fact",
                    "th": "¬(m ≤ Suc n) ⊢ Suc n < m"
                },
                {
                    "args": "sum_triv_natseg, {f: λk. f k * (g (k + 1) - g k), m: m, n: Suc n}",
                    "id": "3.3.2",
                    "prevs": [
                        "3.3.1"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "¬(m ≤ Suc n), sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = 0"
                },
                {
                    "args": "if_not_P, sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ Suc n then f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)",
                    "id": "3.3.3",
                    "prevs": [
                        "3.3.2",
                        "3.3.0"
                    ],
                    "rule": "rewrite_goal",
                    "th": "¬(m ≤ Suc n), sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ Suc n then f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "",
                    "id": "3.3.4",
                    "prevs": [
                        "3.3.0",
                        "3.3.3"
                    ],
                    "rule": "intros",
                    "th": "sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ ¬(m ≤ Suc n) ⟶ sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ Suc n then f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "classical_cases",
                    "id": "3.4",
                    "prevs": [
                        "3.2",
                        "3.3"
                    ],
                    "rule": "apply_theorem",
                    "th": "sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⊢ sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ Suc n then f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "",
                    "id": "3.5",
                    "prevs": [
                        "3.0",
                        "3.1",
                        "3.4"
                    ],
                    "rule": "intros",
                    "th": "⊢ ∀n. sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0) ⟶ sum ({m..Suc n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ Suc n then f (Suc n + 1) * g (Suc n + 1) - f m * g m - sum ({m..Suc n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "nat_induct, {P: λn. sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0), x: n}",
                    "id": "4",
                    "prevs": [
                        "2",
                        "3"
                    ],
                    "rule": "apply_theorem_for",
                    "th": "⊢ sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                },
                {
                    "args": "",
                    "id": "5",
                    "prevs": [
                        "4"
                    ],
                    "rule": "intros",
                    "th": "⊢ sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = (if m ≤ n then f (n + 1) * g (n + 1) - f m * g m - sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k)) else 0)"
                }
            ],
            "prop": [
                "sum ({m..n}) (λk. f k * (g (k + 1) - g k)) = ",
                "(if m ≤ n then ",
                "   f (n + 1) * g (n + 1) - f m * g m - ",
                "   sum ({m..n}) (λk. g (k + 1) * (f (k + 1) - f k))",
                " else ",
                "   0)"
            ],
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "induction",
                    "theorem": "nat_induct",
                    "var": "n"
                },
                {
                    "case": "m ≤ 0 ",
                    "goal_id": "0",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.0"
                    ],
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_0_natseg"
                },
                {
                    "case": "m = 0",
                    "goal_id": "0.1",
                    "method_name": "cases"
                },
                {
                    "goal_id": "0.1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_plus_def_1"
                },
                {
                    "fact_ids": [
                        "0.1.0"
                    ],
                    "goal_id": "0.1.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "0.1.1",
                    "method_name": "z3"
                },
                {
                    "goal_id": "0.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "0.2.0",
                        "0.0"
                    ],
                    "goal_id": "0.2.1",
                    "method_name": "z3"
                },
                {
                    "goal_id": "1",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "fact_ids": [
                        "1.0"
                    ],
                    "goal_id": "1.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "not_le"
                },
                {
                    "fact_ids": [
                        "1.1"
                    ],
                    "goal_id": "1.2",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_triv_natseg"
                },
                {
                    "goal_id": "3",
                    "method_name": "introduction",
                    "names": "n"
                },
                {
                    "case": "m ≤ Suc n",
                    "goal_id": "3.2",
                    "method_name": "cases"
                },
                {
                    "goal_id": "3.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.2.0"
                    ],
                    "goal_id": "3.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "goal_id": "3.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "sum_Suc_natseg"
                },
                {
                    "fact_ids": [
                        "3.2.0"
                    ],
                    "goal_id": "3.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "3.2.0"
                    ],
                    "goal_id": "3.2.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "nat_less_eq_def_2"
                },
                {
                    "fact_ids": [
                        "3.2.1"
                    ],
                    "goal_id": "3.2.2",
                    "method_name": "apply_backward_step",
                    "theorem": "disjE"
                },
                {
                    "goal_id": "3.2.2",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.2.2.0"
                    ],
                    "goal_id": "3.2.2.1",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal": "n < Suc n",
                    "goal_id": "3.2.2.1",
                    "method_name": "cut"
                },
                {
                    "goal_id": "3.2.2.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "nat_less_def_2"
                },
                {
                    "goal_id": "3.2.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "disjI1"
                },
                {
                    "goal_id": "3.2.2.1",
                    "method_name": "apply_backward_step",
                    "theorem": "eq_refl"
                },
                {
                    "fact_ids": [
                        "3.2.2.3"
                    ],
                    "goal_id": "3.2.2.4",
                    "method_name": "apply_forward_step",
                    "param_f": "(λk. f k * (g (k + 1) - g k))",
                    "theorem": "sum_triv_natseg"
                },
                {
                    "fact_ids": [
                        "3.2.2.3"
                    ],
                    "goal_id": "3.2.2.5",
                    "method_name": "apply_forward_step",
                    "param_f": "(λk. g (k + 1) * (f (k + 1) - f k))",
                    "theorem": "sum_triv_natseg"
                },
                {
                    "fact_ids": [
                        "3.2.2.4"
                    ],
                    "goal_id": "3.2.2.6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "fact_ids": [
                        "3.2.2.5"
                    ],
                    "goal_id": "3.2.2.6",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3.2.2.6",
                    "method_name": "real_norm"
                },
                {
                    "goal_id": "3.2.3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.1",
                        "3.2.3.0"
                    ],
                    "goal_id": "3.2.3.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "if_P"
                },
                {
                    "fact_ids": [
                        "3.2.3.1"
                    ],
                    "goal_id": "3.2.3.2",
                    "method_name": "rewrite_goal_with_prev"
                },
                {
                    "goal_id": "3.2.3.2",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "add_1_right"
                },
                {
                    "goal_id": "3.2.3.2",
                    "method_name": "real_norm"
                },
                {
                    "goal_id": "3.3",
                    "method_name": "introduction"
                },
                {
                    "fact_ids": [
                        "3.3.0"
                    ],
                    "goal_id": "3.3.1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "if_not_P"
                },
                {
                    "goal_id": "3.3.1",
                    "method_name": "apply_backward_step",
                    "theorem": "sum_triv_natseg"
                },
                {
                    "fact_ids": [
                        "3.3.0"
                    ],
                    "goal_id": "3.3.1",
                    "method_name": "rewrite_fact",
                    "sym": "false",
                    "theorem": "not_le"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "nat ⇒ real",
                "g": "nat ⇒ real",
                "m": "nat",
                "n": "nat"
            }
        },
        {
            "name": "polynomial_function",
            "prop": "polynomial_function p ⟷ (∃m. ∃c. ∀x. p x = sum ({0..m}) (λi. c i * x ^ i))",
            "ty": "def",
            "type": "(real ⇒ real) ⇒ bool"
        },
        {
            "attributes": [
                "hint_rewrite"
            ],
            "name": "product_empty",
            "num_gaps": 1,
            "proof": [
                {
                    "args": "",
                    "id": "0",
                    "prevs": [],
                    "rule": "sorry",
                    "th": "⊢ iterate times ∅ f = neutral times"
                },
                {
                    "args": "neutral_real_mul, iterate times ∅ f = 1",
                    "id": "1",
                    "prevs": [
                        "0"
                    ],
                    "rule": "rewrite_goal_sym",
                    "th": "⊢ iterate times ∅ f = 1"
                },
                {
                    "args": "product_def, product ∅ f = 1",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "⊢ product ∅ f = 1"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ product ∅ f = 1"
                }
            ],
            "prop": "product ∅ f = 1",
            "steps": [
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "product_def"
                },
                {
                    "goal_id": "0",
                    "method_name": "rewrite_goal",
                    "sym": "true",
                    "theorem": "neutral_real_mul"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real"
            }
        },
        {
            "attributes": [
                "hint_backward"
            ],
            "name": "product_insert",
            "num_gaps": 1,
            "proof": [
                {
                    "args": "finite s",
                    "id": "0",
                    "prevs": [],
                    "rule": "assume",
                    "th": "finite s ⊢ finite s"
                },
                {
                    "args": "",
                    "id": "1",
                    "prevs": [],
                    "rule": "sorry",
                    "th": "finite s ⊢ iterate times (insert x s) f = (if x ∈ s then iterate times s f else f x * iterate times s f)"
                },
                {
                    "args": "product_def, product (insert x s) f = (if x ∈ s then product s f else f x * product s f)",
                    "id": "2",
                    "prevs": [
                        "1"
                    ],
                    "rule": "rewrite_goal",
                    "th": "finite s ⊢ product (insert x s) f = (if x ∈ s then product s f else f x * product s f)"
                },
                {
                    "args": "",
                    "id": "3",
                    "prevs": [
                        "0",
                        "2"
                    ],
                    "rule": "intros",
                    "th": "⊢ finite s ⟶ product (insert x s) f = (if x ∈ s then product s f else f x * product s f)"
                }
            ],
            "prop": [
                "finite s ",
                "⟶ product (insert x s) f = (if x ∈ s then product s f else f x * product s f)"
            ],
            "steps": [
                {
                    "goal_id": "1",
                    "method_name": "rewrite_goal",
                    "sym": "false",
                    "theorem": "product_def"
                }
            ],
            "ty": "thm",
            "vars": {
                "f": "'a ⇒ real",
                "s": "'a set",
                "x": "'a"
            }
        }
    ],
    "description": "Basic results about iterate.",
    "imports": [
        "set",
        "real"
    ],
    "name": "iterate"
}